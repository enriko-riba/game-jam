(window.webpackJsonp=window.webpackJsonp||[]).push([[5],[,,,,,,function(t,e,i){var o=t.exports={},n=i(11);o.crossLength=function(t,e){return t[0]*e[1]-t[1]*e[0]},o.crossVZ=function(t,e,i){return o.rotate(t,e,-Math.PI/2),o.scale(t,t,i),t},o.crossZV=function(t,e,i){return o.rotate(t,i,Math.PI/2),o.scale(t,t,e),t},o.rotate=function(t,e,i){if(0!==i){var o=Math.cos(i),n=Math.sin(i),r=e[0],s=e[1];t[0]=o*r-n*s,t[1]=n*r+o*s}else t[0]=e[0],t[1]=e[1]},o.rotate90cw=function(t,e){var i=e[0],o=e[1];t[0]=o,t[1]=-i},o.toLocalFrame=function(t,e,i,n){o.copy(t,e),o.sub(t,t,i),o.rotate(t,t,-n)},o.toGlobalFrame=function(t,e,i,n){o.copy(t,e),o.rotate(t,t,n),o.add(t,t,i)},o.vectorToLocalFrame=function(t,e,i){o.rotate(t,e,-i)},o.vectorToGlobalFrame=function(t,e,i){o.rotate(t,e,i)},o.centroid=function(t,e,i,n){return o.add(t,e,i),o.add(t,t,n),o.scale(t,t,1/3),t},o.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var i=new n.ARRAY_TYPE(2);return i[0]=t,i[1]=e,i},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,i){return t[0]=e,t[1]=i,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},o.div=o.divide,o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},o.distance=function(t,e){var i=e[0]-t[0],o=e[1]-t[1];return Math.sqrt(i*i+o*o)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],o=e[1]-t[1];return i*i+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.normalize=function(t,e){var i=e[0],o=e[1],n=i*i+o*o;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.lerp=function(t,e,i,o){var n=e[0],r=e[1];return t[0]=n+o*(i[0]-n),t[1]=r+o*(i[1]-r),t},o.reflect=function(t,e,i){var o=e[0]*i[0]+e[1]*i[1];t[0]=e[0]-2*i[0]*o,t[1]=e[1]-2*i[1]*o},o.getLineSegmentsIntersection=function(t,e,i,n,r){var s=o.getLineSegmentsIntersectionFraction(e,i,n,r);return!(s<0)&&(t[0]=e[0]+s*(i[0]-e[0]),t[1]=e[1]+s*(i[1]-e[1]),!0)},o.getLineSegmentsIntersectionFraction=function(t,e,i,o){var n,r,s=e[0]-t[0],a=e[1]-t[1],c=o[0]-i[0],h=o[1]-i[1];return n=(-a*(t[0]-i[0])+s*(t[1]-i[1]))/(-c*a+s*h),r=(c*(t[1]-i[1])-h*(t[0]-i[0]))/(-c*a+s*h),n>=0&&n<=1&&r>=0&&r<=1?r:-1}},,,,function(t,e,i){"use strict";i.r(e),i.d(e,"__extends",(function(){return n})),i.d(e,"__assign",(function(){return r})),i.d(e,"__rest",(function(){return s})),i.d(e,"__decorate",(function(){return a})),i.d(e,"__param",(function(){return c})),i.d(e,"__metadata",(function(){return h})),i.d(e,"__awaiter",(function(){return u})),i.d(e,"__generator",(function(){return l})),i.d(e,"__exportStar",(function(){return p})),i.d(e,"__values",(function(){return d})),i.d(e,"__read",(function(){return f})),i.d(e,"__spread",(function(){return v})),i.d(e,"__spreadArrays",(function(){return m})),i.d(e,"__await",(function(){return y})),i.d(e,"__asyncGenerator",(function(){return g})),i.d(e,"__asyncDelegator",(function(){return _})),i.d(e,"__asyncValues",(function(){return A})),i.d(e,"__makeTemplateObject",(function(){return b})),i.d(e,"__importStar",(function(){return w})),i.d(e,"__importDefault",(function(){return x}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var r=function(){return(r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function s(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i}function a(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function c(t,e){return function(i,o){e(i,o,t)}}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,i,o){return new(i||(i=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?n(t.value):new i((function(e){e(t.value)})).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function l(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function p(t,e){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}function f(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function m(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function g(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,n=i.apply(t,e||[]),r=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){n[t]&&(o[t]=function(e){return new Promise((function(i,o){r.push([t,e,i,o])>1||a(t,e)}))})}function a(t,e){try{(i=n[t](e)).value instanceof y?Promise.resolve(i.value.v).then(c,h):u(r[0][2],i)}catch(t){u(r[0][3],t)}var i}function c(t){a("next",t)}function h(t){a("throw",t)}function u(t,e){t(e),r.shift(),r.length&&a(r[0][0],r[0][1])}}function _(t){var e,i;return e={},o("next"),o("throw",(function(t){throw t})),o("return"),e[Symbol.iterator]=function(){return this},e;function o(o,n){e[o]=t[o]?function(e){return(i=!i)?{value:y(t[o](e)),done:"return"===o}:n?n(e):e}:n}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=d(t),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(i){e[i]=t[i]&&function(e){return new Promise((function(o,n){(function(t,e,i,o){Promise.resolve(o).then((function(e){t({value:e,done:i})}),e)})(o,n,(e=t[i](e)).done,e.value)}))}}}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},function(t,e){function i(){}t.exports=i,i.appendArray=function(t,e){if(e.length<15e4)t.push.apply(t,e);else for(var i=0,o=e.length;i!==o;++i)t.push(e[i])},i.splice=function(t,e,i){i=i||1;for(var o=e,n=t.length-i;o<n;o++)t[o]=t[o+i];t.length=n},"undefined"!=typeof P2_ARRAY_TYPE?i.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?i.ARRAY_TYPE=Float32Array:i.ARRAY_TYPE=Array,i.extend=function(t,e){for(var i in e)t[i]=e[i]},i.defaults=function(t,e){for(var i in t=t||{},e)i in t||(t[i]=e[i]);return t}},,function(t,e,i){t.exports=r;var o=i(6),n=i(11);i(18);function r(t,e,i,o){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===o?Number.MAX_VALUE:o,this.bodyA=t,this.bodyB=e,this.stiffness=r.DEFAULT_STIFFNESS,this.relaxation=r.DEFAULT_RELAXATION,this.G=new n.ARRAY_TYPE(6);for(var s=0;s<6;s++)this.G[s]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}r.prototype.constructor=r,r.DEFAULT_STIFFNESS=1e6,r.DEFAULT_RELAXATION=4,r.prototype.update=function(){var t=this.stiffness,e=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*e)),this.b=4*e/(1+4*e),this.epsilon=4/(i*i*t*(1+4*e)),this.needsUpdate=!1},r.prototype.gmult=function(t,e,i,o,n){return t[0]*e[0]+t[1]*e[1]+t[2]*i+t[3]*o[0]+t[4]*o[1]+t[5]*n},r.prototype.computeB=function(t,e,i){var o=this.computeGW();return-this.computeGq()*t-o*e-this.computeGiMf()*i};var s=o.create(),a=o.create();r.prototype.computeGq=function(){var t=this.G,e=this.bodyA,i=this.bodyB,o=(e.position,i.position,e.angle),n=i.angle;return this.gmult(t,s,o,a,n)+this.offset},r.prototype.computeGW=function(){var t=this.G,e=this.bodyA,i=this.bodyB,o=e.velocity,n=i.velocity,r=e.angularVelocity,s=i.angularVelocity;return this.gmult(t,o,r,n,s)+this.relativeVelocity},r.prototype.computeGWlambda=function(){var t=this.G,e=this.bodyA,i=this.bodyB,o=e.vlambda,n=i.vlambda,r=e.wlambda,s=i.wlambda;return this.gmult(t,o,r,n,s)};var c=o.create(),h=o.create();r.prototype.computeGiMf=function(){var t=this.bodyA,e=this.bodyB,i=t.force,n=t.angularForce,r=e.force,s=e.angularForce,a=t.invMassSolve,u=e.invMassSolve,l=t.invInertiaSolve,p=e.invInertiaSolve,d=this.G;return o.scale(c,i,a),o.multiply(c,t.massMultiplier,c),o.scale(h,r,u),o.multiply(h,e.massMultiplier,h),this.gmult(d,c,n*l,h,s*p)},r.prototype.computeGiMGt=function(){var t=this.bodyA,e=this.bodyB,i=t.invMassSolve,o=e.invMassSolve,n=t.invInertiaSolve,r=e.invInertiaSolve,s=this.G;return s[0]*s[0]*i*t.massMultiplier[0]+s[1]*s[1]*i*t.massMultiplier[1]+s[2]*s[2]*n+s[3]*s[3]*o*e.massMultiplier[0]+s[4]*s[4]*o*e.massMultiplier[1]+s[5]*s[5]*r};var u=o.create(),l=o.create(),p=o.create();o.create(),o.create(),o.create();r.prototype.addToWlambda=function(t){var e=this.bodyA,i=this.bodyB,n=u,r=l,s=p,a=e.invMassSolve,c=i.invMassSolve,h=e.invInertiaSolve,d=i.invInertiaSolve,f=this.G;r[0]=f[0],r[1]=f[1],s[0]=f[3],s[1]=f[4],o.scale(n,r,a*t),o.multiply(n,n,e.massMultiplier),o.add(e.vlambda,e.vlambda,n),e.wlambda+=h*f[2]*t,o.scale(n,s,c*t),o.multiply(n,n,i.massMultiplier),o.add(i.vlambda,i.vlambda,n),i.wlambda+=d*f[5]*t},r.prototype.computeInvC=function(t){return 1/(this.computeGiMGt()+t)}},function(t,e,i){t.exports=n;var o=i(6);function n(t){t=t||{},this.body=null,this.position=o.fromValues(0,0),t.position&&o.copy(this.position,t.position),this.angle=t.angle||0,this.type=t.type||0,this.id=n.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:1,this.material=t.material||null,this.area=0,this.sensor=void 0!==t.sensor&&t.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}n.idCounter=0,n.CIRCLE=1,n.PARTICLE=2,n.PLANE=4,n.CONVEX=8,n.LINE=16,n.BOX=32,Object.defineProperty(n,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),n.BOX}}),n.CAPSULE=64,n.HEIGHTFIELD=128,n.prototype.computeMomentOfInertia=function(t){},n.prototype.updateBoundingRadius=function(){},n.prototype.updateArea=function(){},n.prototype.computeAABB=function(t,e,i){},n.prototype.raycast=function(t,e,i,o){}},,,,function(t,e,i){var o=i(6),n=i(60),r=i(30),s=i(44),a=i(36),c=i(35),h=i(37);function u(t){t=t||{},h.call(this),this.id=t.id||++u._idCounter,this.world=null,this.shapes=[],this.mass=t.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!t.fixedRotation,this.fixedX=!!t.fixedX,this.fixedY=!!t.fixedY,this.massMultiplier=o.create(),this.position=o.fromValues(0,0),t.position&&o.copy(this.position,t.position),this.interpolatedPosition=o.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=o.fromValues(0,0),this.previousAngle=0,this.velocity=o.fromValues(0,0),t.velocity&&o.copy(this.velocity,t.velocity),this.vlambda=o.fromValues(0,0),this.wlambda=0,this.angle=t.angle||0,this.angularVelocity=t.angularVelocity||0,this.force=o.create(),t.force&&o.copy(this.force,t.force),this.angularForce=t.angularForce||0,this.damping="number"==typeof t.damping?t.damping:.1,this.angularDamping="number"==typeof t.angularDamping?t.angularDamping:.1,this.type=u.STATIC,void 0!==t.type?this.type=t.type:t.mass?this.type=u.DYNAMIC:this.type=u.STATIC,this.boundingRadius=0,this.aabb=new c,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===t.allowSleep||t.allowSleep,this.wantsToSleep=!1,this.sleepState=u.AWAKE,this.sleepSpeedLimit=void 0!==t.sleepSpeedLimit?t.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==t.sleepTimeLimit?t.sleepTimeLimit:1,this.gravityScale=void 0!==t.gravityScale?t.gravityScale:1,this.collisionResponse=void 0===t.collisionResponse||t.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==t.ccdSpeedThreshold?t.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==t.ccdIterations?t.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}t.exports=u,u.prototype=new h,u.prototype.constructor=u,u._idCounter=0,u.prototype.updateSolveMassProperties=function(){this.sleepState===u.SLEEPING||this.type===u.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},u.prototype.setDensity=function(t){var e=this.getArea();this.mass=e*t,this.updateMassProperties()},u.prototype.getArea=function(){for(var t=0,e=0;e<this.shapes.length;e++)t+=this.shapes[e].area;return t},u.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var l=new c,p=o.create();u.prototype.updateAABB=function(){for(var t=this.shapes,e=t.length,i=p,n=this.angle,r=0;r!==e;r++){var s=t[r],a=s.angle+n;o.rotate(i,s.position,n),o.add(i,i,this.position),s.computeAABB(l,i,a),0===r?this.aabb.copy(l):this.aabb.extend(l)}this.aabbNeedsUpdate=!1},u.prototype.updateBoundingRadius=function(){for(var t=this.shapes,e=t.length,i=0,n=0;n!==e;n++){var r=t[n],s=o.length(r.position),a=r.boundingRadius;s+a>i&&(i=s+a)}this.boundingRadius=i},u.prototype.addShape=function(t,e,i){if(t.body)throw new Error("A shape can only be added to one body.");t.body=this,e?o.copy(t.position,e):o.set(t.position,0,0),t.angle=i||0,this.shapes.push(t),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},u.prototype.removeShape=function(t){var e=this.shapes.indexOf(t);return-1!==e&&(this.shapes.splice(e,1),this.aabbNeedsUpdate=!0,t.body=null,!0)},u.prototype.updateMassProperties=function(){if(this.type===u.STATIC||this.type===u.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var t=this.shapes,e=t.length,i=this.mass/e,n=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;r<e;r++){var s=t[r],a=o.squaredLength(s.position);n+=s.computeMomentOfInertia(i)+i*a}this.inertia=n,this.invInertia=n>0?1/n:0}this.invMass=1/this.mass,o.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};o.create();u.prototype.applyForce=function(t,e){if(o.add(this.force,this.force,t),e){var i=o.crossLength(e,t);this.angularForce+=i}};var d=o.create(),f=o.create(),v=o.create();u.prototype.applyForceLocal=function(t,e){e=e||v;var i=d,o=f;this.vectorToWorldFrame(i,t),this.vectorToWorldFrame(o,e),this.applyForce(i,o)};var m=o.create();u.prototype.applyImpulse=function(t,e){if(this.type===u.DYNAMIC){var i=m;if(o.scale(i,t,this.invMass),o.multiply(i,this.massMultiplier,i),o.add(this.velocity,i,this.velocity),e){var n=o.crossLength(e,t);n*=this.invInertia,this.angularVelocity+=n}}};var y=o.create(),g=o.create(),_=o.create();u.prototype.applyImpulseLocal=function(t,e){e=e||_;var i=y,o=g;this.vectorToWorldFrame(i,t),this.vectorToWorldFrame(o,e),this.applyImpulse(i,o)},u.prototype.toLocalFrame=function(t,e){o.toLocalFrame(t,e,this.position,this.angle)},u.prototype.toWorldFrame=function(t,e){o.toGlobalFrame(t,e,this.position,this.angle)},u.prototype.vectorToLocalFrame=function(t,e){o.vectorToLocalFrame(t,e,this.angle)},u.prototype.vectorToWorldFrame=function(t,e){o.vectorToGlobalFrame(t,e,this.angle)},u.prototype.fromPolygon=function(t,e){e=e||{};for(var i=this.shapes.length;i>=0;--i)this.removeShape(this.shapes[i]);var s,a=new n.Polygon;if(a.vertices=t,a.makeCCW(),"number"==typeof e.removeCollinearPoints&&a.removeCollinearPoints(e.removeCollinearPoints),void 0===e.skipSimpleCheck&&!a.isSimple())return!1;this.concavePath=a.vertices.slice(0);for(i=0;i<this.concavePath.length;i++){var c=[0,0];o.copy(c,this.concavePath[i]),this.concavePath[i]=c}s=e.optimalDecomp?a.decomp():a.quickDecomp();var h=o.create();for(i=0;i!==s.length;i++){for(var u=new r({vertices:s[i].vertices}),l=0;l!==u.vertices.length;l++){c=u.vertices[l];o.sub(c,c,u.centerOfMass)}o.scale(h,u.centerOfMass,1),u.updateTriangles(),u.updateCenterOfMass(),u.updateBoundingRadius(),this.addShape(u,h)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};o.fromValues(0,0);var A=o.fromValues(0,0),b=o.fromValues(0,0),w=o.fromValues(0,0);u.prototype.adjustCenterOfMass=function(){var t=A,e=b,i=w,n=0;o.set(e,0,0);for(var r=0;r!==this.shapes.length;r++){var s=this.shapes[r];o.scale(t,s.position,s.area),o.add(e,e,t),n+=s.area}o.scale(i,e,1/n);for(r=0;r!==this.shapes.length;r++){s=this.shapes[r];o.sub(s.position,s.position,i)}o.add(this.position,this.position,i);for(r=0;this.concavePath&&r<this.concavePath.length;r++)o.sub(this.concavePath[r],this.concavePath[r],i);this.updateMassProperties(),this.updateBoundingRadius()},u.prototype.setZeroForce=function(){o.set(this.force,0,0),this.angularForce=0},u.prototype.resetConstraintVelocity=function(){var t=this.vlambda;o.set(t,0,0),this.wlambda=0},u.prototype.addConstraintVelocity=function(){var t=this,e=t.velocity;o.add(e,e,t.vlambda),t.angularVelocity+=t.wlambda},u.prototype.applyDamping=function(t){if(this.type===u.DYNAMIC){var e=this.velocity;o.scale(e,e,Math.pow(1-this.damping,t)),this.angularVelocity*=Math.pow(1-this.angularDamping,t)}},u.prototype.wakeUp=function(){var t=this.sleepState;this.sleepState=u.AWAKE,this.idleTime=0,t!==u.AWAKE&&this.emit(u.wakeUpEvent)},u.prototype.sleep=function(){this.sleepState=u.SLEEPING,this.angularVelocity=0,this.angularForce=0,o.set(this.velocity,0,0),o.set(this.force,0,0),this.emit(u.sleepEvent)},u.prototype.sleepTick=function(t,e,i){if(this.allowSleep&&this.type!==u.SLEEPING){this.wantsToSleep=!1;this.sleepState;o.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=u.AWAKE):(this.idleTime+=i,this.sleepState=u.SLEEPY),this.idleTime>this.sleepTimeLimit&&(e?this.wantsToSleep=!0:this.sleep())}},u.prototype.overlaps=function(t){return this.world.overlapKeeper.bodiesAreOverlapping(this,t)};var x=o.create(),S=o.create();u.prototype.integrate=function(t){var e=this.invMass,i=this.force,n=this.position,r=this.velocity;o.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*t),o.scale(x,i,t*e),o.multiply(x,this.massMultiplier,x),o.add(r,x,r),this.integrateToTimeOfImpact(t)||(o.scale(S,r,t),o.add(n,n,S),this.fixedRotation||(this.angle+=this.angularVelocity*t)),this.aabbNeedsUpdate=!0};var P=new s,E=new a({mode:a.ALL}),B=o.create(),L=o.create(),C=o.create(),T=o.create();u.prototype.integrateToTimeOfImpact=function(t){if(this.ccdSpeedThreshold<0||o.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;o.normalize(B,this.velocity),o.scale(L,this.velocity,t),o.add(L,L,this.position),o.sub(C,L,this.position);var e,i=this.angularVelocity*t,n=o.length(C),r=1,s=this;if(P.reset(),E.callback=function(t){t.body!==s&&(e=t.body,t.getHitPoint(L,E),o.sub(C,L,s.position),r=o.length(C)/n,t.stop())},o.copy(E.from,this.position),o.copy(E.to,L),E.update(),this.world.raycast(P,E),!e)return!1;var a=this.angle;o.copy(T,this.position);for(var c=0,h=0,u=0,l=r;l>=h&&c<this.ccdIterations;){c++,u=(l-h)/2,o.scale(S,C,r),o.add(this.position,T,S),this.angle=a+i*r,this.updateAABB(),this.aabb.overlaps(e.aabb)&&this.world.narrowphase.bodiesOverlap(this,e)?h=u:l=u}return r=u,o.copy(this.position,T),this.angle=a,o.scale(S,C,r),o.add(this.position,this.position,S),this.fixedRotation||(this.angle+=i*r),!0},u.prototype.getVelocityAtPoint=function(t,e){return o.crossVZ(t,e,this.angularVelocity),o.subtract(t,this.velocity,t),t},u.sleepyEvent={type:"sleepy"},u.sleepEvent={type:"sleep"},u.wakeUpEvent={type:"wakeup"},u.DYNAMIC=1,u.STATIC=2,u.KINEMATIC=4,u.AWAKE=0,u.SLEEPY=1,u.SLEEPING=2},function(t,e,i){t.exports=n;var o=i(11);function n(t,e,i,n){this.type=i,n=o.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=e,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(t&&t.wakeUp(),e&&e.wakeUp())}n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(t){for(var e=this.equations,i=0;i!==e.length;i++){var o=e[i];o.stiffness=t,o.needsUpdate=!0}},n.prototype.setRelaxation=function(t){for(var e=this.equations,i=0;i!==e.length;i++){var o=e[i];o.relaxation=t,o.needsUpdate=!0}}},,,,,function(t,e){function i(t){t=t||{},this.objects=[],void 0!==t.size&&this.resize(t.size)}t.exports=i,i.prototype.resize=function(t){for(var e=this.objects;e.length>t;)e.pop();for(;e.length<t;)e.push(this.create());return this},i.prototype.get=function(){var t=this.objects;return t.length?t.pop():this.create()},i.prototype.release=function(t){return this.destroy(t),this.objects.push(t),this}},,,,,,function(t,e,i){var o=i(14),n=i(6),r=i(108);i(60);function s(t){Array.isArray(arguments[0])&&(t={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),t=t||{},this.vertices=[];for(var e=void 0!==t.vertices?t.vertices:[],i=0;i<e.length;i++){var r=n.create();n.copy(r,e[i]),this.vertices.push(r)}if(this.axes=[],t.axes)for(i=0;i<t.axes.length;i++){var s=n.create();n.copy(s,t.axes[i]),this.axes.push(s)}else for(i=0;i<this.vertices.length;i++){var a=this.vertices[i],c=this.vertices[(i+1)%this.vertices.length],h=n.create();n.sub(h,c,a),n.rotate90cw(h,h),n.normalize(h,h),this.axes.push(h)}if(this.centerOfMass=n.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,t.type=o.CONVEX,o.call(this,t),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}t.exports=s,s.prototype=new o,s.prototype.constructor=s;var a=n.create(),c=n.create();s.prototype.projectOntoLocalAxis=function(t,e){for(var i,o,r=null,s=null,c=(t=a,0);c<this.vertices.length;c++)i=this.vertices[c],o=n.dot(i,t),(null===r||o>r)&&(r=o),(null===s||o<s)&&(s=o);if(s>r){var h=s;s=r,r=h}n.set(e,s,r)},s.prototype.projectOntoWorldAxis=function(t,e,i,o){var r=c;this.projectOntoLocalAxis(t,o),0!==i?n.rotate(r,t,i):r=t;var s=n.dot(e,r);n.set(o,o[0]+s,o[1]+s)},s.prototype.updateTriangles=function(){this.triangles.length=0;for(var t=[],e=0;e<this.vertices.length;e++){var i=this.vertices[e];t.push(i[0],i[1])}var o=r.Triangulate(t);for(e=0;e<o.length;e+=3){var n=o[e],s=o[e+1],a=o[e+2];this.triangles.push([n,s,a])}};var h=n.create(),u=n.create(),l=n.create(),p=n.create(),d=n.create();n.create(),n.create(),n.create(),n.create();s.prototype.updateCenterOfMass=function(){var t=this.triangles,e=this.vertices,i=this.centerOfMass,o=h,r=l,a=p,c=d,f=u;n.set(i,0,0);for(var v=0,m=0;m!==t.length;m++){var y=t[m];r=e[y[0]],a=e[y[1]],c=e[y[2]];n.centroid(o,r,a,c);var g=s.triangleArea(r,a,c);v+=g,n.scale(f,o,g),n.add(i,i,f)}n.scale(i,i,1/v)},s.prototype.computeMomentOfInertia=function(t){for(var e=0,i=0,o=this.vertices.length,r=o-1,s=0;s<o;r=s,s++){var a=this.vertices[r],c=this.vertices[s],h=Math.abs(n.crossLength(a,c));e+=h*(n.dot(c,c)+n.dot(c,a)+n.dot(a,a)),i+=h}return t/6*(e/i)},s.prototype.updateBoundingRadius=function(){for(var t=this.vertices,e=0,i=0;i!==t.length;i++){var o=n.squaredLength(t[i]);o>e&&(e=o)}this.boundingRadius=Math.sqrt(e)},s.triangleArea=function(t,e,i){return.5*((e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1]))},s.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var t=this.triangles,e=this.vertices,i=0;i!==t.length;i++){var o=t[i],n=e[o[0]],r=e[o[1]],a=e[o[2]],c=s.triangleArea(n,r,a);this.area+=c}},s.prototype.computeAABB=function(t,e,i){t.setFromPoints(this.vertices,e,i,0)};var f=n.create(),v=n.create(),m=n.create();s.prototype.raycast=function(t,e,i,o){var r=f,s=v,a=m,c=this.vertices;n.toLocalFrame(r,e.from,i,o),n.toLocalFrame(s,e.to,i,o);for(var h=c.length,u=0;u<h&&!t.shouldStop(e);u++){var l=c[u],p=c[(u+1)%h],d=n.getLineSegmentsIntersectionFraction(r,s,l,p);d>=0&&(n.sub(a,p,l),n.rotate(a,a,-Math.PI/2+o),n.normalize(a,a),e.reportIntersection(t,d,a,u))}}},function(t,e,i){var o=i(6),n=i(13);i(11);function r(t,e,i){n.call(this,t,e,-i,i),this.contactPointA=o.create(),this.contactPointB=o.create(),this.t=o.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.setSlipForce=function(t){this.maxForce=t,this.minForce=-t},r.prototype.getSlipForce=function(){return this.maxForce},r.prototype.computeB=function(t,e,i){this.bodyA,this.bodyB;var n=this.contactPointA,r=this.contactPointB,s=this.t,a=this.G;return a[0]=-s[0],a[1]=-s[1],a[2]=-o.crossLength(n,s),a[3]=s[0],a[4]=s[1],a[5]=o.crossLength(r,s),-this.computeGW()*e-i*this.computeGiMf()}},,,function(t,e,i){var o=t.exports={AABB:i(35),AngleLockEquation:i(59),Body:i(18),Broadphase:i(38),Capsule:i(63),Circle:i(39),Constraint:i(19),ContactEquation:i(40),ContactEquationPool:i(64),ContactMaterial:i(65),Convex:i(30),DistanceConstraint:i(66),Equation:i(13),EventEmitter:i(37),FrictionEquation:i(31),FrictionEquationPool:i(67),GearConstraint:i(68),GSSolver:i(69),Heightfield:i(109),Line:i(70),LockConstraint:i(71),Material:i(45),Narrowphase:i(72),NaiveBroadphase:i(110),Particle:i(48),Plane:i(47),Pool:i(24),RevoluteConstraint:i(75),PrismaticConstraint:i(78),Ray:i(36),RaycastResult:i(44),Box:i(74),RotationalVelocityEquation:i(76),SAPBroadphase:i(79),Shape:i(14),Solver:i(46),Spring:i(49),TopDownVehicle:i(111),LinearSpring:i(80),RotationalSpring:i(81),Utils:i(11),World:i(112),vec2:i(6),version:i(82).version};Object.defineProperty(o,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},function(t,e,i){var o=i(6);i(11);function n(t){this.lowerBound=o.create(),t&&t.lowerBound&&o.copy(this.lowerBound,t.lowerBound),this.upperBound=o.create(),t&&t.upperBound&&o.copy(this.upperBound,t.upperBound)}t.exports=n;var r=o.create();n.prototype.setFromPoints=function(t,e,i,n){var s=this.lowerBound,a=this.upperBound;"number"!=typeof i&&(i=0),0!==i?o.rotate(s,t[0],i):o.copy(s,t[0]),o.copy(a,s);for(var c=Math.cos(i),h=Math.sin(i),u=1;u<t.length;u++){var l=t[u];if(0!==i){var p=l[0],d=l[1];r[0]=c*p-h*d,r[1]=h*p+c*d,l=r}for(var f=0;f<2;f++)l[f]>a[f]&&(a[f]=l[f]),l[f]<s[f]&&(s[f]=l[f])}e&&(o.add(this.lowerBound,this.lowerBound,e),o.add(this.upperBound,this.upperBound,e)),n&&(this.lowerBound[0]-=n,this.lowerBound[1]-=n,this.upperBound[0]+=n,this.upperBound[1]+=n)},n.prototype.copy=function(t){o.copy(this.lowerBound,t.lowerBound),o.copy(this.upperBound,t.upperBound)},n.prototype.extend=function(t){for(var e=2;e--;){var i=t.lowerBound[e];this.lowerBound[e]>i&&(this.lowerBound[e]=i);var o=t.upperBound[e];this.upperBound[e]<o&&(this.upperBound[e]=o)}},n.prototype.overlaps=function(t){var e=this.lowerBound,i=this.upperBound,o=t.lowerBound,n=t.upperBound;return(o[0]<=i[0]&&i[0]<=n[0]||e[0]<=n[0]&&n[0]<=i[0])&&(o[1]<=i[1]&&i[1]<=n[1]||e[1]<=n[1]&&n[1]<=i[1])},n.prototype.containsPoint=function(t){var e=this.lowerBound,i=this.upperBound;return e[0]<=t[0]&&t[0]<=i[0]&&e[1]<=t[1]&&t[1]<=i[1]},n.prototype.overlapsRay=function(t){var e=1/t.direction[0],i=1/t.direction[1],o=(this.lowerBound[0]-t.from[0])*e,n=(this.upperBound[0]-t.from[0])*e,r=(this.lowerBound[1]-t.from[1])*i,s=(this.upperBound[1]-t.from[1])*i,a=Math.max(Math.max(Math.min(o,n),Math.min(r,s))),c=Math.min(Math.min(Math.max(o,n),Math.max(r,s)));return c<0?-1:a>c?-1:a}},function(t,e,i){t.exports=n;var o=i(6);i(44),i(14),i(35);function n(t){t=t||{},this.from=t.from?o.fromValues(t.from[0],t.from[1]):o.create(),this.to=t.to?o.fromValues(t.to[0],t.to[1]):o.create(),this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,this.skipBackfaces=!!t.skipBackfaces,this.collisionMask=void 0!==t.collisionMask?t.collisionMask:-1,this.collisionGroup=void 0!==t.collisionGroup?t.collisionGroup:-1,this.mode=void 0!==t.mode?t.mode:n.ANY,this.callback=t.callback||function(t){},this.direction=o.create(),this.length=1,this.update()}n.prototype.constructor=n,n.CLOSEST=1,n.ANY=2,n.ALL=4,n.prototype.update=function(){var t=this.direction;o.sub(t,this.to,this.from),this.length=o.length(t),o.normalize(t,t)},n.prototype.intersectBodies=function(t,e){for(var i=0,o=e.length;!t.shouldStop(this)&&i<o;i++){var n=e[i],r=n.getAABB();(r.overlapsRay(this)>=0||r.containsPoint(this.from))&&this.intersectBody(t,n)}};var r=o.create();n.prototype.intersectBody=function(t,e){var i=this.checkCollisionResponse;if(!i||e.collisionResponse)for(var n=r,s=0,a=e.shapes.length;s<a;s++){var c=e.shapes[s];if((!i||c.collisionResponse)&&(0!=(this.collisionGroup&c.collisionMask)&&0!=(c.collisionGroup&this.collisionMask))){o.rotate(n,c.position,e.angle),o.add(n,n,e.position);var h=c.angle+e.angle;if(this.intersectShape(t,c,h,n,e),t.shouldStop(this))break}}},n.prototype.intersectShape=function(t,e,i,n,r){(function(t,e,i){o.sub(s,i,t);var n=o.dot(s,e);return o.scale(a,e,n),o.add(a,a,t),o.squaredDistance(i,a)})(this.from,this.direction,n)>e.boundingRadius*e.boundingRadius||(this._currentBody=r,this._currentShape=e,e.raycast(t,this,n,i),this._currentBody=this._currentShape=null)},n.prototype.getAABB=function(t){var e=this.to,i=this.from;o.set(t.lowerBound,Math.min(e[0],i[0]),Math.min(e[1],i[1])),o.set(t.upperBound,Math.max(e[0],i[0]),Math.max(e[1],i[1]))};o.create();n.prototype.reportIntersection=function(t,e,i,r){this.from,this.to;var s=this._currentShape,a=this._currentBody;if(!(this.skipBackfaces&&o.dot(i,this.direction)>0))switch(this.mode){case n.ALL:t.set(i,s,a,e,r),this.callback(t);break;case n.CLOSEST:(e<t.fraction||!t.hasHit())&&t.set(i,s,a,e,r);break;case n.ANY:t.set(i,s,a,e,r)}};var s=o.create(),a=o.create()},function(t,e){var i=function(){};t.exports=i,i.prototype={constructor:i,on:function(t,e,i){e.context=i||this,void 0===this._listeners&&(this._listeners={});var o=this._listeners;return void 0===o[t]&&(o[t]=[]),-1===o[t].indexOf(e)&&o[t].push(e),this},has:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;if(e){if(void 0!==i[t]&&-1!==i[t].indexOf(e))return!0}else if(void 0!==i[t])return!0;return!1},off:function(t,e){if(void 0===this._listeners)return this;var i=this._listeners,o=i[t].indexOf(e);return-1!==o&&i[t].splice(o,1),this},emit:function(t){if(void 0===this._listeners)return this;var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,o=e.length;i<o;i++){var n=e[i];n.call(n.context,t)}}return this}}},function(t,e,i){var o=i(6),n=i(18);function r(t){this.type=t,this.result=[],this.world=null,this.boundingVolumeType=r.AABB}t.exports=r,r.AABB=1,r.BOUNDING_CIRCLE=2,r.prototype.setWorld=function(t){this.world=t},r.prototype.getCollisionPairs=function(t){};var s=o.create();r.boundingRadiusCheck=function(t,e){o.sub(s,t.position,e.position);var i=o.squaredLength(s),n=t.boundingRadius+e.boundingRadius;return i<=n*n},r.aabbCheck=function(t,e){return t.getAABB().overlaps(e.getAABB())},r.prototype.boundingVolumeCheck=function(t,e){var i;switch(this.boundingVolumeType){case r.BOUNDING_CIRCLE:i=r.boundingRadiusCheck(t,e);break;case r.AABB:i=r.aabbCheck(t,e);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},r.canCollide=function(t,e){var i=n.KINEMATIC,o=n.STATIC;return(t.type!==o||e.type!==o)&&(!(t.type===i&&e.type===o||t.type===o&&e.type===i)&&((t.type!==i||e.type!==i)&&((t.sleepState!==n.SLEEPING||e.sleepState!==n.SLEEPING)&&!(t.sleepState===n.SLEEPING&&e.type===o||e.sleepState===n.SLEEPING&&t.type===o))))},r.NAIVE=1,r.SAP=2},function(t,e,i){var o=i(14),n=i(6);function r(t){"number"==typeof arguments[0]&&(t={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),t=t||{},this.radius=t.radius||1,t.type=o.CIRCLE,o.call(this,t)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){var e=this.radius;return t*e*e/2},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},r.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},r.prototype.computeAABB=function(t,e,i){var o=this.radius;n.set(t.upperBound,o,o),n.set(t.lowerBound,-o,-o),e&&(n.add(t.lowerBound,t.lowerBound,e),n.add(t.upperBound,t.upperBound,e))};var s=n.create(),a=n.create();r.prototype.raycast=function(t,e,i,o){var r=e.from,c=e.to,h=this.radius,u=Math.pow(c[0]-r[0],2)+Math.pow(c[1]-r[1],2),l=2*((c[0]-r[0])*(r[0]-i[0])+(c[1]-r[1])*(r[1]-i[1])),p=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)-Math.pow(h,2),d=Math.pow(l,2)-4*u*p,f=s,v=a;if(!(d<0))if(0===d)n.lerp(f,r,c,d),n.sub(v,f,i),n.normalize(v,v),e.reportIntersection(t,d,v,-1);else{var m=Math.sqrt(d),y=1/(2*u),g=(-l-m)*y,_=(-l+m)*y;if(g>=0&&g<=1&&(n.lerp(f,r,c,g),n.sub(v,f,i),n.normalize(v,v),e.reportIntersection(t,g,v,-1),t.shouldStop(e)))return;_>=0&&_<=1&&(n.lerp(f,r,c,_),n.sub(v,f,i),n.normalize(v,v),e.reportIntersection(t,_,v,-1))}}},function(t,e,i){var o=i(13),n=i(6);function r(t,e){o.call(this,t,e,0,Number.MAX_VALUE),this.contactPointA=n.create(),this.penetrationVec=n.create(),this.contactPointB=n.create(),this.normalA=n.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.computeB=function(t,e,i){var o,r,s=this.bodyA,a=this.bodyB,c=this.contactPointA,h=this.contactPointB,u=s.position,l=a.position,p=this.penetrationVec,d=this.normalA,f=this.G,v=n.crossLength(c,d),m=n.crossLength(h,d);return f[0]=-d[0],f[1]=-d[1],f[2]=-v,f[3]=d[0],f[4]=d[1],f[5]=m,n.add(p,l,h),n.sub(p,p,u),n.sub(p,p,c),this.firstImpact&&0!==this.restitution?(r=0,o=1/e*(1+this.restitution)*this.computeGW()):(r=n.dot(d,p)+this.offset,o=this.computeGW()),-r*t-o*e-i*this.computeGiMf()};var s=n.create(),a=n.create(),c=n.create();r.prototype.getVelocityAlongNormal=function(){return this.bodyA.getVelocityAtPoint(s,this.contactPointA),this.bodyB.getVelocityAtPoint(a,this.contactPointB),n.subtract(c,s,a),n.dot(this.normalA,c)}},,,,function(t,e,i){var o=i(6),n=i(36);function r(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}t.exports=r,r.prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},r.prototype.getHitDistance=function(t){return o.distance(t.from,t.to)*this.fraction},r.prototype.hasHit=function(){return-1!==this.fraction},r.prototype.getHitPoint=function(t,e){o.lerp(t,e.from,e.to,this.fraction)},r.prototype.stop=function(){this.isStopped=!0},r.prototype.shouldStop=function(t){return this.isStopped||-1!==this.fraction&&t.mode===n.ANY},r.prototype.set=function(t,e,i,n,r){o.copy(this.normal,t),this.shape=e,this.body=i,this.fraction=n,this.faceIndex=r}},function(t,e){function i(t){this.id=t||i.idCounter++}t.exports=i,i.idCounter=0},function(t,e,i){i(11);var o=i(37);function n(t,e){t=t||{},o.call(this),this.type=e,this.equations=[],this.equationSortFunction=t.equationSortFunction||!1}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.solve=function(t,e){throw new Error("Solver.solve should be implemented by subclasses!")};var r={bodies:[]};n.prototype.solveIsland=function(t,e){this.removeAllEquations(),e.equations.length&&(this.addEquations(e.equations),r.bodies.length=0,e.getBodies(r.bodies),r.bodies.length&&this.solve(t,r))},n.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},n.prototype.addEquation=function(t){t.enabled&&this.equations.push(t)},n.prototype.addEquations=function(t){for(var e=0,i=t.length;e!==i;e++){var o=t[e];o.enabled&&this.equations.push(o)}},n.prototype.removeEquation=function(t){var e=this.equations.indexOf(t);-1!==e&&this.equations.splice(e,1)},n.prototype.removeAllEquations=function(){this.equations.length=0},n.GS=1,n.ISLAND=2},function(t,e,i){var o=i(14),n=i(6);i(11);function r(t){(t=t||{}).type=o.PLANE,o.call(this,t)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){return 0},r.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},r.prototype.computeAABB=function(t,e,i){var o=i%(2*Math.PI),r=n.set,s=t.lowerBound,a=t.upperBound;r(s,-1e7,-1e7),r(a,1e7,1e7),0===o?a[1]=0:o===Math.PI/2?s[0]=0:o===Math.PI?s[1]=0:o===3*Math.PI/2&&(a[0]=0)},r.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var s=n.create(),a=(n.create(),n.create(),n.create()),c=n.create();r.prototype.raycast=function(t,e,i,o){var r=e.from,h=e.to,u=e.direction,l=s,p=a,d=c;n.set(p,0,1),n.rotate(p,p,o),n.sub(d,r,i);var f=n.dot(d,p);if(n.sub(d,h,i),!(f*n.dot(d,p)>0||n.squaredDistance(r,h)<f*f)){var v=n.dot(p,u);n.sub(l,r,i);var m=-n.dot(p,l)/v/e.length;e.reportIntersection(t,m,p,-1)}}},function(t,e,i){var o=i(14),n=i(6);function r(t){(t=t||{}).type=o.PARTICLE,o.call(this,t)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){return 0},r.prototype.updateBoundingRadius=function(){this.boundingRadius=0},r.prototype.computeAABB=function(t,e,i){n.copy(t.lowerBound,e),n.copy(t.upperBound,e)}},function(t,e,i){i(6);var o=i(11);function n(t,e,i){i=o.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=t,this.bodyB=e}t.exports=n,n.prototype.applyForce=function(){}},,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"DefaultScreenSizeCalculator",(function(){return n})),i.d(e,"Scene",(function(){return c})),i.d(e,"SceneManager",(function(){return s})),i.d(e,"VERSION",(function(){return r}));var o=i(7),n=function(){function t(t,e){this.designedWidth=t,this.designedHeight=e}return t.prototype.GetAvailableSize=function(){return{x:window.innerWidth,y:window.innerHeight}},t.prototype.GetAspectRatio=function(){return this.designedWidth/this.designedHeight},t.prototype.CalculateSize=function(t,e){var i=Math.floor(e*t.y),o=Math.floor(window.innerHeight);return{x:Math.min(i,t.x),y:Math.min(o,t.y)}},t.prototype.CalculateScale=function(t){return{x:t.x/this.designedWidth,y:t.x/this.designedWidth}},t}(),r="1.6.0",s=function(){function t(e,i){var r=this;this.currentScene=null,this.scenes=[],this.controllers=[],this.animationFrameHandle=-1,this.Destroy=function(){cancelAnimationFrame(r.animationFrameHandle),r.currentScene&&r.currentScene.pause(),r.scenes.forEach((function(t){r.RemoveScene(t)})),r.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})},this.resizeHandler=function(){var t=r.screenSizeCalculator.GetAvailableSize(),e=r.screenSizeCalculator.GetAspectRatio(),i=r.screenSizeCalculator.CalculateSize(t,e);r.app.renderer.resize(i.x,i.y);var o=r.screenSizeCalculator.CalculateScale(i);r.currentScene&&(r.currentScene.scale.set(o.x,o.y),r.currentScene.onResize()),r.masterHudOverlay&&r.masterHudOverlay.scale.set(o.x,o.y)},this.onRender=function(t){r.startTime||(r.startTime=Date.now()),r.timeStamp=Date.now();var e=r.timeStamp-r.startTime;e>50&&(e=50),r.controllers.forEach((function(t){(!t.scope||r.currentScene&&r.currentScene.name===t.scope)&&t.update(e,r.currentScene)})),r.currentScene&&!r.currentScene.isPaused()&&(r.currentScene.onUpdate(e,r.timeStamp),r.startTime=r.timeStamp)},t.logVersion(),this.masterContainer=new o.Container,this.app=new o.Application(e),this.app.ticker.add(this.onRender,this),this.app.stage=this.masterContainer,this.designWidth=e.width||window.innerWidth,this.designHeight=e.height||window.innerHeight,this.screenSizeCalculator=i||new n(this.designWidth,this.designHeight),window.removeEventListener("resize",this.resizeHandler),window.addEventListener("resize",this.resizeHandler,!0)}return t.logVersion=function(){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t="color:#fa1;background:#ff66a5;padding:5px 0;",e=[" %c  %c pixi-scenegraph: "+r+" ✰  %c  %c https://github.com/enriko-riba/pixi-scenegraph#readme ❤❤❤\t",t,"color:#fa1;background:#000;padding:5px 0;",t,"color:#f55;background:#ffc3dc;padding:5px 0;"];console.info.apply(console,e)}else window.console&&console.info("pixi-scenegraph: "+r+" ✰ https://github.com/enriko-riba/pixi-scenegraph#readme  ❤❤❤")},Object.defineProperty(t.prototype,"Renderer",{get:function(){return this.app.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Application",{get:function(){return this.app},enumerable:!0,configurable:!0}),t.prototype.AddController=function(t){this.controllers.push(t)},t.prototype.RemoveController=function(t){var e="string"!=typeof t?t.id:t;this.controllers=this.controllers.filter((function(t){return t.id!==e}))},Object.defineProperty(t.prototype,"CurrentScene",{get:function(){return this.currentScene},enumerable:!0,configurable:!0}),t.prototype.AddScene=function(t){this.scenes.push(t)},t.prototype.RemoveAllScenes=function(){this.scenes.forEach((function(t){t.onDestroy(),t.destroy({children:!0,texture:!0,baseTexture:!0})})),this.scenes=[],this.currentScene=null},t.prototype.RemoveScene=function(t){this.scenes=this.scenes.filter((function(e,i,o){return e!==t})),t.onDestroy(),t.destroy({children:!0,texture:!0,baseTexture:!0})},t.prototype.HasScene=function(t){var e=this.scenes.filter((function(e){return e.Name===t}));return e&&e.length>0},t.prototype.GetScene=function(t){var e=this.scenes.filter((function(e){return e.Name===t}));if(!e||0===e.length)throw Error("Scene: '"+t+"' not found");if(e.length>1)throw Error("Multiple scenes: '"+t+"' found");return e[0]},t.prototype.ActivateScene=function(t){var e;if("string"==typeof t){var i=this.scenes.filter((function(e){return e.Name===t}));if(!i||0===i.length)throw Error("Scene: '"+t+"' not found");if(i.length>1)throw Error("Multiple scenes: '"+t+"' found");e=i[0]}else e=t;this.currentScene&&this.currentScene!==e&&(console.log("DeactivateScene "+this.currentScene.Name),this.currentScene.onDeactivate()),console.log("ActivateScene "+e.Name),this.startTime=0,this.lastScene=this.currentScene!==e?this.currentScene:this.lastScene,this.currentScene=e,this.app.renderer.backgroundColor=e.BackGroundColor,this.resizeHandler(),e.onActivate(),this.masterContainer.removeChildren(),this.masterContainer.addChild(this.currentScene),this.masterHudOverlay&&this.masterContainer.addChild(this.masterHudOverlay),o.settings.RESOLUTION=window.devicePixelRatio},t.prototype.ActivatePreviousScene=function(){this.ActivateScene(this.lastScene)},Object.defineProperty(t.prototype,"MasterHudOverlay",{get:function(){return this.masterHudOverlay},set:function(t){this.masterHudOverlay=t,t&&(this.masterContainer.removeChildren(),this.masterContainer.addChild(this.currentScene),this.masterHudOverlay&&this.masterContainer.addChild(this.masterHudOverlay),this.resizeHandler())},enumerable:!0,configurable:!0}),t.prototype.CaptureScene=function(){console.log("Capturing scene, width: "+this.app.renderer.width+", height: "+this.app.renderer.height);var t=o.RenderTexture.create({width:this.app.renderer.width,height:this.app.renderer.height});return this.app.renderer.render(this.currentScene,t),t},t}(),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var c=function(t){function e(e){var i=t.call(this)||this;return i.paused=!1,i.hudScene=null,i.clearValue=!0,i.backgroundColor=0,i.Name=e,i}return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.onActivate=function(){},e.prototype.onDeactivate=function(){},e.prototype.onResize=function(){},e.prototype.onUpdate=function(t,e){},e.prototype.onDestroy=function(){},Object.defineProperty(e.prototype,"BackGroundColor",{get:function(){return this.backgroundColor},set:function(t){this.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HudOverlay",{get:function(){return this.hudScene},set:function(t){if(this.hudScene&&this.removeChild(this.hudScene),this.hudScene=t,this.hudScene){var e=this.children.length;this.addChildAt(this.hudScene,e)}},enumerable:!0,configurable:!0}),e.prototype.addChild=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=t.prototype.addChild.apply(this,e);if(this.hudScene){var n=this.children.length-1;this.setChildIndex(this.hudScene,n)}return o},e.prototype.addChildAt=function(e,i){var o=t.prototype.addChildAt.call(this,e,i);if(this.hudScene){var n=this.children.length-1;this.setChildIndex(this.hudScene,n)}return o},e.prototype.pause=function(){this.paused=!0},e.prototype.resume=function(){this.paused=!1},e.prototype.isPaused=function(){return this.paused},Object.defineProperty(e.prototype,"clear",{get:function(){return this.clearValue},set:function(t){this.clearValue=t},enumerable:!0,configurable:!0}),e}(o.Container)},,,function(t,e,i){var o=i(13);i(6);function n(t,e,i){i=i||{},o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},n.prototype.setRatio=function(t){var e=this.G;e[2]=t,e[5]=-1,this.ratio=t},n.prototype.setMaxTorque=function(t){this.maxForce=t,this.minForce=-t}},function(t,e,i){t.exports={Polygon:i(106),Point:i(62)}},function(t,e){function i(){}t.exports=i,i.eq=function(t,e,i){return i=i||0,Math.abs(t-e)<i}},function(t,e){function i(){}t.exports=i,i.area=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},i.left=function(t,e,o){return i.area(t,e,o)>0},i.leftOn=function(t,e,o){return i.area(t,e,o)>=0},i.right=function(t,e,o){return i.area(t,e,o)<0},i.rightOn=function(t,e,o){return i.area(t,e,o)<=0};var o=[],n=[];i.collinear=function(t,e,r,s){if(s){var a=o,c=n;a[0]=e[0]-t[0],a[1]=e[1]-t[1],c[0]=r[0]-e[0],c[1]=r[1]-e[1];var h=a[0]*c[0]+a[1]*c[1],u=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=Math.sqrt(c[0]*c[0]+c[1]*c[1]);return Math.acos(h/(u*l))<s}return 0==i.area(t,e,r)},i.sqdist=function(t,e){var i=e[0]-t[0],o=e[1]-t[1];return i*i+o*o}},function(t,e,i){var o=i(14),n=i(6);function r(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),t=t||{},this.length=t.length||1,this.radius=t.radius||1,t.type=o.CAPSULE,o.call(this,t)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){var e=this.radius,i=this.length+e,o=2*e;return t*(o*o+i*i)/12},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},r.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var s=n.create();r.prototype.computeAABB=function(t,e,i){var o=this.radius;n.set(s,this.length/2,0),0!==i&&n.rotate(s,s,i),n.set(t.upperBound,Math.max(s[0]+o,-s[0]+o),Math.max(s[1]+o,-s[1]+o)),n.set(t.lowerBound,Math.min(s[0]-o,-s[0]-o),Math.min(s[1]-o,-s[1]-o)),n.add(t.lowerBound,t.lowerBound,e),n.add(t.upperBound,t.upperBound,e)};var a=n.create(),c=n.create(),h=n.create(),u=n.create(),l=n.fromValues(0,1);r.prototype.raycast=function(t,e,i,o){for(var r=e.from,s=e.to,p=(e.direction,a),d=c,f=h,v=u,m=this.length/2,y=0;y<2;y++){var g=this.radius*(2*y-1);if(n.set(f,-m,g),n.set(v,m,g),n.toGlobalFrame(f,f,i,o),n.toGlobalFrame(v,v,i,o),(A=n.getLineSegmentsIntersectionFraction(r,s,f,v))>=0&&(n.rotate(d,l,o),n.scale(d,d,2*y-1),e.reportIntersection(t,A,d,-1),t.shouldStop(e)))return}var _=Math.pow(this.radius,2)+Math.pow(m,2);for(y=0;y<2;y++){n.set(f,m*(2*y-1),0),n.toGlobalFrame(f,f,i,o);var A,b=Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2),w=2*((s[0]-r[0])*(r[0]-f[0])+(s[1]-r[1])*(r[1]-f[1])),x=Math.pow(r[0]-f[0],2)+Math.pow(r[1]-f[1],2)-Math.pow(this.radius,2);if(!((A=Math.pow(w,2)-4*b*x)<0))if(0===A){if(n.lerp(p,r,s,A),n.squaredDistance(p,i)>_&&(n.sub(d,p,f),n.normalize(d,d),e.reportIntersection(t,A,d,-1),t.shouldStop(e)))return}else{var S=Math.sqrt(A),P=1/(2*b),E=(-w-S)*P,B=(-w+S)*P;if(E>=0&&E<=1&&(n.lerp(p,r,s,E),n.squaredDistance(p,i)>_&&(n.sub(d,p,f),n.normalize(d,d),e.reportIntersection(t,E,d,-1),t.shouldStop(e))))return;if(B>=0&&B<=1&&(n.lerp(p,r,s,B),n.squaredDistance(p,i)>_&&(n.sub(d,p,f),n.normalize(d,d),e.reportIntersection(t,B,d,-1),t.shouldStop(e))))return}}}},function(t,e,i){var o=i(40),n=i(24);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new o},r.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,i){var o=i(45),n=i(13);function r(t,e,i){if(i=i||{},!(t instanceof o&&e instanceof o))throw new Error("First two arguments must be Material instances.");this.id=r.idCounter++,this.materialA=t,this.materialB=e,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):n.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):n.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):n.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):n.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}t.exports=r,r.idCounter=0},function(t,e,i){var o=i(19),n=i(13),r=i(6),s=i(11);function a(t,e,i){i=s.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),o.call(this,t,e,o.DISTANCE,i),this.localAnchorA=r.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=r.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var a,c=this.localAnchorA,h=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var u=r.create(),l=r.create(),p=r.create();r.rotate(u,c,t.angle),r.rotate(l,h,e.angle),r.add(p,e.position,l),r.sub(p,p,u),r.sub(p,p,t.position),this.distance=r.length(p)}a=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var d=new n(t,e,-a,a);this.equations=[d],this.maxForce=a;p=r.create();var f=r.create(),v=r.create(),m=this;d.computeGq=function(){var t=this.bodyA,e=this.bodyB,i=t.position,o=e.position;return r.rotate(f,c,t.angle),r.rotate(v,h,e.angle),r.add(p,o,v),r.sub(p,p,f),r.sub(p,p,i),r.length(p)-m.distance},this.setMaxForce(a),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}t.exports=a,a.prototype=new o,a.prototype.constructor=a;var c=r.create(),h=r.create(),u=r.create();a.prototype.update=function(){var t=this.equations[0],e=this.bodyA,i=this.bodyB,o=(this.distance,e.position),n=i.position,s=this.equations[0],a=t.G;r.rotate(h,this.localAnchorA,e.angle),r.rotate(u,this.localAnchorB,i.angle),r.add(c,n,u),r.sub(c,c,h),r.sub(c,c,o),this.position=r.length(c);var l=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(s.maxForce=0,s.minForce=-this.maxForce,this.distance=this.upperLimit,l=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(s.maxForce=this.maxForce,s.minForce=0,this.distance=this.lowerLimit,l=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||l){s.enabled=!0,r.normalize(c,c);var p=r.crossLength(h,c),d=r.crossLength(u,c);a[0]=-c[0],a[1]=-c[1],a[2]=-p,a[3]=c[0],a[4]=c[1],a[5]=d}else s.enabled=!1},a.prototype.setMaxForce=function(t){var e=this.equations[0];e.minForce=-t,e.maxForce=t},a.prototype.getMaxForce=function(){return this.equations[0].maxForce}},function(t,e,i){var o=i(31),n=i(24);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new o},r.prototype.destroy=function(t){return t.bodyA=t.bodyB=null,this}},function(t,e,i){var o=i(19),n=(i(13),i(59));i(6);function r(t,e,i){i=i||{},o.call(this,t,e,o.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:e.angle-this.ratio*t.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new n(t,e,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.update=function(){var t=this.equations[0];t.ratio!==this.ratio&&t.setRatio(this.ratio),t.angle=this.angle},r.prototype.setMaxTorque=function(t){this.equations[0].setMaxTorque(t)},r.prototype.getMaxTorque=function(t){return this.equations[0].maxForce}},function(t,e,i){var o=i(6),n=i(46),r=i(11),s=i(31);function a(t){n.call(this,t,n.GS),t=t||{},this.iterations=t.iterations||10,this.tolerance=t.tolerance||1e-7,this.arrayStep=30,this.lambda=new r.ARRAY_TYPE(this.arrayStep),this.Bs=new r.ARRAY_TYPE(this.arrayStep),this.invCs=new r.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=void 0!==t.frictionIterations?0:t.frictionIterations,this.usedIterations=0}t.exports=a,a.prototype=new n,a.prototype.constructor=a,a.prototype.solve=function(t,e){this.sortEquations();var i=0,n=this.iterations,c=this.frictionIterations,h=this.equations,u=h.length,l=Math.pow(this.tolerance*u,2),p=e.bodies,d=e.bodies.length,f=(o.add,o.set,this.useZeroRHS),v=this.lambda;if(this.usedIterations=0,u)for(var m=0;m!==d;m++){p[m].updateSolveMassProperties()}v.length<u&&(v=this.lambda=new r.ARRAY_TYPE(u+this.arrayStep),this.Bs=new r.ARRAY_TYPE(u+this.arrayStep),this.invCs=new r.ARRAY_TYPE(u+this.arrayStep)),function(t){for(var e=t.length;e--;)t[e]=0}(v);var y,g,_=this.invCs,A=this.Bs;for(v=this.lambda,m=0;m!==h.length;m++){var b;((b=h[m]).timeStep!==t||b.needsUpdate)&&(b.timeStep=t,b.update()),A[m]=b.computeB(b.a,b.b,t),_[m]=b.computeInvC(b.epsilon)}if(0!==u){for(m=0;m!==d;m++){p[m].resetConstraintVelocity()}if(c){for(i=0;i!==c;i++){for(y=0,g=0;g!==u;g++){b=h[g];var w=a.iterateEquation(g,b,b.epsilon,A,_,v,f,t,i);y+=Math.abs(w)}if(this.usedIterations++,y*y<=l)break}for(a.updateMultipliers(h,v,1/t),g=0;g!==u;g++){var x=h[g];if(x instanceof s){for(var S=0,P=0;P!==x.contactEquations.length;P++)S+=x.contactEquations[P].multiplier;S*=x.frictionCoefficient/x.contactEquations.length,x.maxForce=S,x.minForce=-S}}}for(i=0;i!==n;i++){for(y=0,g=0;g!==u;g++){b=h[g];w=a.iterateEquation(g,b,b.epsilon,A,_,v,f,t,i);y+=Math.abs(w)}if(this.usedIterations++,y*y<=l)break}for(m=0;m!==d;m++)p[m].addConstraintVelocity();a.updateMultipliers(h,v,1/t)}},a.updateMultipliers=function(t,e,i){for(var o=t.length;o--;)t[o].multiplier=e[o]*i},a.iterateEquation=function(t,e,i,o,n,r,s,a,c){var h=o[t],u=n[t],l=r[t],p=e.computeGWlambda(),d=e.maxForce,f=e.minForce;s&&(h=0);var v=u*(h-p-i*l),m=l+v;return m<f*a?v=f*a-l:m>d*a&&(v=d*a-l),r[t]+=v,e.addToWlambda(v),v}},function(t,e,i){var o=i(14),n=i(6);function r(t){"number"==typeof arguments[0]&&(t={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),t=t||{},this.length=t.length||1,t.type=o.LINE,o.call(this,t)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.computeMomentOfInertia=function(t){return t*Math.pow(this.length,2)/12},r.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var s=[n.create(),n.create()];r.prototype.computeAABB=function(t,e,i){var o=this.length/2;n.set(s[0],-o,0),n.set(s[1],o,0),t.setFromPoints(s,e,i,0)};n.create();var a=n.create(),c=n.create(),h=n.create(),u=n.fromValues(0,1);r.prototype.raycast=function(t,e,i,o){var r=e.from,s=e.to,l=c,p=h,d=this.length/2;n.set(l,-d,0),n.set(p,d,0),n.toGlobalFrame(l,l,i,o),n.toGlobalFrame(p,p,i,o);var f=n.getLineSegmentsIntersectionFraction(l,p,r,s);if(f>=0){var v=a;n.rotate(v,u,o),e.reportIntersection(t,f,v,-1)}}},function(t,e,i){var o=i(19),n=i(6),r=i(13);function s(t,e,i){i=i||{},o.call(this,t,e,o.LOCK,i);var s=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,a=(i.localAngleB,new r(t,e,-s,s)),c=new r(t,e,-s,s),h=new r(t,e,-s,s),u=n.create(),l=n.create(),p=this;a.computeGq=function(){return n.rotate(u,p.localOffsetB,t.angle),n.sub(l,e.position,t.position),n.sub(l,l,u),l[0]},c.computeGq=function(){return n.rotate(u,p.localOffsetB,t.angle),n.sub(l,e.position,t.position),n.sub(l,l,u),l[1]};var d=n.create(),f=n.create();h.computeGq=function(){return n.rotate(d,p.localOffsetB,e.angle-p.localAngleB),n.scale(d,d,-1),n.sub(l,t.position,e.position),n.add(l,l,d),n.rotate(f,d,-Math.PI/2),n.normalize(f,f),n.dot(l,f)},this.localOffsetB=n.create(),i.localOffsetB?n.copy(this.localOffsetB,i.localOffsetB):(n.sub(this.localOffsetB,e.position,t.position),n.rotate(this.localOffsetB,this.localOffsetB,-t.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=e.angle-t.angle,this.equations.push(a,c,h),this.setMaxForce(s)}t.exports=s,s.prototype=new o,s.prototype.constructor=s,s.prototype.setMaxForce=function(t){for(var e=this.equations,i=0;i<this.equations.length;i++)e[i].maxForce=t,e[i].minForce=-t},s.prototype.getMaxForce=function(){return this.equations[0].maxForce};var a=n.create(),c=n.create(),h=n.create(),u=n.fromValues(1,0),l=n.fromValues(0,1);s.prototype.update=function(){var t=this.equations[0],e=this.equations[1],i=this.equations[2],o=this.bodyA,r=this.bodyB;n.rotate(a,this.localOffsetB,o.angle),n.rotate(c,this.localOffsetB,r.angle-this.localAngleB),n.scale(c,c,-1),n.rotate(h,c,Math.PI/2),n.normalize(h,h),t.G[0]=-1,t.G[1]=0,t.G[2]=-n.crossLength(a,u),t.G[3]=1,e.G[0]=0,e.G[1]=-1,e.G[2]=-n.crossLength(a,l),e.G[4]=1,i.G[0]=-h[0],i.G[1]=-h[1],i.G[3]=h[0],i.G[4]=h[1],i.G[5]=n.crossLength(c,h)}},function(t,e,i){var o=i(6),n=o.sub,r=o.add,s=o.dot,a=(i(11),i(64)),c=i(67),h=i(73),u=i(13),l=(i(40),i(31),i(39)),p=i(30),d=i(14),f=(i(18),i(74));t.exports=R;var v=o.fromValues(0,1),m=o.fromValues(0,0),y=o.fromValues(0,0),g=o.fromValues(0,0),_=o.fromValues(0,0),A=o.fromValues(0,0),b=o.fromValues(0,0),w=o.fromValues(0,0),x=o.fromValues(0,0),S=o.fromValues(0,0),P=o.fromValues(0,0),E=o.fromValues(0,0),B=o.fromValues(0,0),L=o.fromValues(0,0),C=o.fromValues(0,0),T=o.fromValues(0,0),M=o.fromValues(0,0),F=o.fromValues(0,0),I=o.fromValues(0,0),q=[];function R(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new a({size:32}),this.frictionEquationPool=new c({size:64}),this.restitution=0,this.stiffness=u.DEFAULT_STIFFNESS,this.relaxation=u.DEFAULT_RELAXATION,this.frictionStiffness=u.DEFAULT_STIFFNESS,this.frictionRelaxation=u.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new h,this.contactSkinSize=.01}var O=o.create(),V=o.create();function k(t,e){o.set(t.vertices[0],.5*-e.length,-e.radius),o.set(t.vertices[1],.5*e.length,-e.radius),o.set(t.vertices[2],.5*e.length,e.radius),o.set(t.vertices[3],.5*-e.length,e.radius)}R.prototype.bodiesOverlap=function(t,e){for(var i=O,o=V,n=0,r=t.shapes.length;n!==r;n++){var s=t.shapes[n];t.toWorldFrame(i,s.position);for(var a=0,c=e.shapes.length;a!==c;a++){var h=e.shapes[a];if(e.toWorldFrame(o,h.position),this[s.type|h.type](t,s,i,s.angle+t.angle,e,h,o,h.angle+e.angle,!0))return!0}}return!1},R.prototype.collidedLastStep=function(t,e){var i=0|t.id,o=0|e.id;return!!this.collidingBodiesLastStep.get(i,o)},R.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var t=this.contactEquations,e=t.length;e--;){var i=t[e],o=i.bodyA.id,n=i.bodyB.id;this.collidingBodiesLastStep.set(o,n,!0)}for(var r=this.contactEquations,s=this.frictionEquations,a=0;a<r.length;a++)this.contactEquationPool.release(r[a]);for(a=0;a<s.length;a++)this.frictionEquationPool.release(s[a]);this.contactEquations.length=this.frictionEquations.length=0},R.prototype.createContactEquation=function(t,e,i,o){var n=this.contactEquationPool.get();return n.bodyA=t,n.bodyB=e,n.shapeA=i,n.shapeB=o,n.restitution=this.restitution,n.firstImpact=!this.collidedLastStep(t,e),n.stiffness=this.stiffness,n.relaxation=this.relaxation,n.needsUpdate=!0,n.enabled=this.enabledEquations,n.offset=this.contactSkinSize,n},R.prototype.createFrictionEquation=function(t,e,i,o){var n=this.frictionEquationPool.get();return n.bodyA=t,n.bodyB=e,n.shapeA=i,n.shapeB=o,n.setSlipForce(this.slipForce),n.frictionCoefficient=this.frictionCoefficient,n.relativeVelocity=this.surfaceVelocity,n.enabled=this.enabledEquations,n.needsUpdate=!0,n.stiffness=this.frictionStiffness,n.relaxation=this.frictionRelaxation,n.contactEquations.length=0,n},R.prototype.createFrictionFromContact=function(t){var e=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB);return o.copy(e.contactPointA,t.contactPointA),o.copy(e.contactPointB,t.contactPointB),o.rotate90cw(e.t,t.normalA),e.contactEquations.push(t),e},R.prototype.createFrictionFromAverage=function(t){var e=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB),n=e.bodyA;e.bodyB;o.set(i.contactPointA,0,0),o.set(i.contactPointB,0,0),o.set(i.t,0,0);for(var r=0;r!==t;r++)(e=this.contactEquations[this.contactEquations.length-1-r]).bodyA===n?(o.add(i.t,i.t,e.normalA),o.add(i.contactPointA,i.contactPointA,e.contactPointA),o.add(i.contactPointB,i.contactPointB,e.contactPointB)):(o.sub(i.t,i.t,e.normalA),o.add(i.contactPointA,i.contactPointA,e.contactPointB),o.add(i.contactPointB,i.contactPointB,e.contactPointA)),i.contactEquations.push(e);var s=1/t;return o.scale(i.contactPointA,i.contactPointA,s),o.scale(i.contactPointB,i.contactPointB,s),o.normalize(i.t,i.t),o.rotate90cw(i.t,i.t),i},R.prototype[d.LINE|d.CONVEX]=R.prototype.convexLine=function(t,e,i,o,n,r,s,a,c){return!c&&0},R.prototype[d.LINE|d.BOX]=R.prototype.lineBox=function(t,e,i,o,n,r,s,a,c){return!c&&0};var G=new f({width:1,height:1}),N=o.create();R.prototype[d.CAPSULE|d.CONVEX]=R.prototype[d.CAPSULE|d.BOX]=R.prototype.convexCapsule=function(t,e,i,n,r,s,a,c,h){var u=N;o.set(u,s.length/2,0),o.rotate(u,u,c),o.add(u,u,a);var l=this.circleConvex(r,s,u,c,t,e,i,n,h,s.radius);o.set(u,-s.length/2,0),o.rotate(u,u,c),o.add(u,u,a);var p=this.circleConvex(r,s,u,c,t,e,i,n,h,s.radius);if(h&&(l||p))return!0;var d=G;return k(d,s),this.convexConvex(t,e,i,n,r,d,a,c,h)+l+p},R.prototype[d.CAPSULE|d.LINE]=R.prototype.lineCapsule=function(t,e,i,o,n,r,s,a,c){return!c&&0};var D=o.create(),U=o.create(),H=new f({width:1,height:1});R.prototype[d.CAPSULE|d.CAPSULE]=R.prototype.capsuleCapsule=function(t,e,i,n,r,s,a,c,h){for(var u=D,l=U,p=0,d=0;d<2;d++){o.set(u,(0===d?-1:1)*e.length/2,0),o.rotate(u,u,n),o.add(u,u,i);for(var f=0;f<2;f++){o.set(l,(0===f?-1:1)*s.length/2,0),o.rotate(l,l,c),o.add(l,l,a),this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var v=this.circleCircle(t,e,u,n,r,s,l,c,h,e.radius,s.radius);if(this.enableFrictionReduction&&(this.enableFriction=g),h&&v)return!0;p+=v}}this.enableFrictionReduction&&(g=this.enableFriction,this.enableFriction=!1);var m=H;k(m,e);var y=this.convexCapsule(t,m,i,n,r,s,a,c,h);if(this.enableFrictionReduction&&(this.enableFriction=g),h&&y)return!0;if(p+=y,this.enableFrictionReduction){var g=this.enableFriction;this.enableFriction=!1}k(m,s);var _=this.convexCapsule(r,m,a,c,t,e,i,n,h);return this.enableFrictionReduction&&(this.enableFriction=g),!(!h||!_)||(p+=_,this.enableFrictionReduction&&p&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(p)),p)},R.prototype[d.LINE|d.LINE]=R.prototype.lineLine=function(t,e,i,o,n,r,s,a,c){return!c&&0},R.prototype[d.PLANE|d.LINE]=R.prototype.planeLine=function(t,e,i,a,c,h,u,l,p){var d=m,f=y,P=g,E=_,B=A,L=b,C=w,T=x,M=S,F=q,I=0;o.set(d,-h.length/2,0),o.set(f,h.length/2,0),o.rotate(P,d,l),o.rotate(E,f,l),r(P,P,u),r(E,E,u),o.copy(d,P),o.copy(f,E),n(B,f,d),o.normalize(L,B),o.rotate90cw(M,L),o.rotate(T,v,a),F[0]=d,F[1]=f;for(var R=0;R<F.length;R++){var O=F[R];n(C,O,i);var V=s(C,T);if(V<0){if(p)return!0;var k=this.createContactEquation(t,c,e,h);I++,o.copy(k.normalA,T),o.normalize(k.normalA,k.normalA),o.scale(C,T,V),n(k.contactPointA,O,C),n(k.contactPointA,k.contactPointA,t.position),n(k.contactPointB,O,u),r(k.contactPointB,k.contactPointB,u),n(k.contactPointB,k.contactPointB,c.position),this.contactEquations.push(k),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k))}}return!p&&(this.enableFrictionReduction||I&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(I)),I)},R.prototype[d.PARTICLE|d.CAPSULE]=R.prototype.particleCapsule=function(t,e,i,o,n,r,s,a,c){return this.circleLine(t,e,i,o,n,r,s,a,c,r.radius,0)},R.prototype[d.CIRCLE|d.LINE]=R.prototype.circleLine=function(t,e,i,a,c,h,u,l,p,d,f){d=d||0,f=void 0!==f?f:e.radius;var v=m,T=y,M=g,F=_,I=A,R=b,O=w,V=x,k=S,G=P,N=E,D=B,U=L,H=C,W=q;o.set(V,-h.length/2,0),o.set(k,h.length/2,0),o.rotate(G,V,l),o.rotate(N,k,l),r(G,G,u),r(N,N,u),o.copy(V,G),o.copy(k,N),n(R,k,V),o.normalize(O,R),o.rotate90cw(I,O),n(D,i,V);var z=s(D,I);n(F,V,u),n(U,i,u);var X=f+d;if(Math.abs(z)<X){o.scale(v,I,z),n(M,i,v),o.scale(T,I,s(I,U)),o.normalize(T,T),o.scale(T,T,d),r(M,M,T);var j=s(O,M),Y=s(O,V),K=s(O,k);if(j>Y&&j<K){if(p)return!0;var Z=this.createContactEquation(t,c,e,h);return o.scale(Z.normalA,v,-1),o.normalize(Z.normalA,Z.normalA),o.scale(Z.contactPointA,Z.normalA,f),r(Z.contactPointA,Z.contactPointA,i),n(Z.contactPointA,Z.contactPointA,t.position),n(Z.contactPointB,M,u),r(Z.contactPointB,Z.contactPointB,u),n(Z.contactPointB,Z.contactPointB,c.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}W[0]=V,W[1]=k;for(var Q=0;Q<W.length;Q++){var $=W[Q];if(n(D,$,i),o.squaredLength(D)<Math.pow(X,2)){if(p)return!0;Z=this.createContactEquation(t,c,e,h);return o.copy(Z.normalA,D),o.normalize(Z.normalA,Z.normalA),o.scale(Z.contactPointA,Z.normalA,f),r(Z.contactPointA,Z.contactPointA,i),n(Z.contactPointA,Z.contactPointA,t.position),n(Z.contactPointB,$,u),o.scale(H,Z.normalA,-d),r(Z.contactPointB,Z.contactPointB,H),r(Z.contactPointB,Z.contactPointB,u),n(Z.contactPointB,Z.contactPointB,c.position),this.contactEquations.push(Z),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Z)),1}}return 0},R.prototype[d.CIRCLE|d.CAPSULE]=R.prototype.circleCapsule=function(t,e,i,o,n,r,s,a,c){return this.circleLine(t,e,i,o,n,r,s,a,c,r.radius)},R.prototype[d.CIRCLE|d.CONVEX]=R.prototype[d.CIRCLE|d.BOX]=R.prototype.circleConvex=function(t,e,i,s,a,c,h,u,l,p){p="number"==typeof p?p:e.radius;for(var d=m,f=y,v=g,b=_,w=A,x=P,S=E,B=L,F=C,I=T,q=M,R=!1,O=Number.MAX_VALUE,V=c.vertices,k=0;k!==V.length+1;k++){var G=V[k%V.length],N=V[(k+1)%V.length];if(o.rotate(d,G,u),o.rotate(f,N,u),r(d,d,h),r(f,f,h),n(v,f,d),o.normalize(b,v),o.rotate90cw(w,b),o.scale(F,w,-e.radius),r(F,F,i),Y(F,c,h,u)){o.sub(I,d,F);var D=Math.abs(o.dot(I,w));D<O&&(o.copy(q,F),O=D,o.scale(B,w,D),o.add(B,B,F),R=!0)}}if(R){if(l)return!0;var U=this.createContactEquation(t,a,e,c);return o.sub(U.normalA,q,i),o.normalize(U.normalA,U.normalA),o.scale(U.contactPointA,U.normalA,p),r(U.contactPointA,U.contactPointA,i),n(U.contactPointA,U.contactPointA,t.position),n(U.contactPointB,B,h),r(U.contactPointB,U.contactPointB,h),n(U.contactPointB,U.contactPointB,a.position),this.contactEquations.push(U),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U)),1}if(p>0)for(k=0;k<V.length;k++){var H=V[k];if(o.rotate(S,H,u),r(S,S,h),n(x,S,i),o.squaredLength(x)<Math.pow(p,2)){if(l)return!0;U=this.createContactEquation(t,a,e,c);return o.copy(U.normalA,x),o.normalize(U.normalA,U.normalA),o.scale(U.contactPointA,U.normalA,p),r(U.contactPointA,U.contactPointA,i),n(U.contactPointA,U.contactPointA,t.position),n(U.contactPointB,S,h),r(U.contactPointB,U.contactPointB,h),n(U.contactPointB,U.contactPointB,a.position),this.contactEquations.push(U),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U)),1}}return 0};var W=o.create(),z=o.create(),X=o.create(),j=o.create();function Y(t,e,i,s){for(var a=W,c=z,h=X,u=j,l=t,p=e.vertices,d=null,f=0;f!==p.length+1;f++){var v=p[f%p.length],m=p[(f+1)%p.length];o.rotate(a,v,s),o.rotate(c,m,s),r(a,a,i),r(c,c,i),n(h,a,l),n(u,c,l);var y=o.crossLength(h,u);if(null===d&&(d=y),y*d<=0)return!1;d=y}return!0}R.prototype[d.PARTICLE|d.CONVEX]=R.prototype[d.PARTICLE|d.BOX]=R.prototype.particleConvex=function(t,e,i,a,c,h,u,l,p){var d=m,f=y,v=g,x=_,S=A,E=b,B=w,C=P,T=L,M=F,q=I,R=Number.MAX_VALUE,O=!1,V=h.vertices;if(!Y(i,h,u,l))return 0;if(p)return!0;for(var k=0;k!==V.length+1;k++){var G=V[k%V.length],N=V[(k+1)%V.length];o.rotate(d,G,l),o.rotate(f,N,l),r(d,d,u),r(f,f,u),n(v,f,d),o.normalize(x,v),o.rotate90cw(S,x),n(C,i,d);s(C,S);n(E,d,u),n(B,i,u),o.sub(M,d,i);var D=Math.abs(o.dot(M,S));D<R&&(R=D,o.scale(T,S,D),o.add(T,T,i),o.copy(q,S),O=!0)}if(O){var U=this.createContactEquation(t,c,e,h);return o.scale(U.normalA,q,-1),o.normalize(U.normalA,U.normalA),o.set(U.contactPointA,0,0),r(U.contactPointA,U.contactPointA,i),n(U.contactPointA,U.contactPointA,t.position),n(U.contactPointB,T,u),r(U.contactPointB,U.contactPointB,u),n(U.contactPointB,U.contactPointB,c.position),this.contactEquations.push(U),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(U)),1}return 0},R.prototype[d.CIRCLE]=R.prototype.circleCircle=function(t,e,i,s,a,c,h,u,l,p,d){var f=m;p=p||e.radius,d=d||c.radius;n(f,i,h);var v=p+d;if(o.squaredLength(f)>Math.pow(v,2))return 0;if(l)return!0;var y=this.createContactEquation(t,a,e,c);return n(y.normalA,h,i),o.normalize(y.normalA,y.normalA),o.scale(y.contactPointA,y.normalA,p),o.scale(y.contactPointB,y.normalA,-d),r(y.contactPointA,y.contactPointA,i),n(y.contactPointA,y.contactPointA,t.position),r(y.contactPointB,y.contactPointB,h),n(y.contactPointB,y.contactPointB,a.position),this.contactEquations.push(y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y)),1},R.prototype[d.PLANE|d.CONVEX]=R.prototype[d.PLANE|d.BOX]=R.prototype.planeConvex=function(t,e,i,a,c,h,u,l,p){var d=m,f=y,_=g,A=0;o.rotate(f,v,a);for(var b=0;b!==h.vertices.length;b++){var w=h.vertices[b];if(o.rotate(d,w,l),r(d,d,u),n(_,d,i),s(_,f)<=0){if(p)return!0;A++;var x=this.createContactEquation(t,c,e,h);n(_,d,i),o.copy(x.normalA,f);var S=s(_,x.normalA);o.scale(_,x.normalA,S),n(x.contactPointB,d,c.position),n(x.contactPointA,d,_),n(x.contactPointA,x.contactPointA,t.position),this.contactEquations.push(x),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}return this.enableFrictionReduction&&this.enableFriction&&A&&this.frictionEquations.push(this.createFrictionFromAverage(A)),A},R.prototype[d.PARTICLE|d.PLANE]=R.prototype.particlePlane=function(t,e,i,r,a,c,h,u,l){var p=m,d=y;u=u||0,n(p,i,h),o.rotate(d,v,u);var f=s(p,d);if(f>0)return 0;if(l)return!0;var g=this.createContactEquation(a,t,c,e);return o.copy(g.normalA,d),o.scale(p,g.normalA,f),n(g.contactPointA,i,p),n(g.contactPointA,g.contactPointA,a.position),n(g.contactPointB,i,t.position),this.contactEquations.push(g),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(g)),1},R.prototype[d.CIRCLE|d.PARTICLE]=R.prototype.circleParticle=function(t,e,i,s,a,c,h,u,l){var p=m;if(n(p,h,i),o.squaredLength(p)>Math.pow(e.radius,2))return 0;if(l)return!0;var d=this.createContactEquation(t,a,e,c);return o.copy(d.normalA,p),o.normalize(d.normalA,d.normalA),o.scale(d.contactPointA,d.normalA,e.radius),r(d.contactPointA,d.contactPointA,i),n(d.contactPointA,d.contactPointA,t.position),n(d.contactPointB,h,a.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1};var K=new l({radius:1}),Z=o.create(),Q=o.create();o.create();R.prototype[d.PLANE|d.CAPSULE]=R.prototype.planeCapsule=function(t,e,i,n,s,a,c,h,u){var l,p=Z,d=Q,f=K;o.set(p,-a.length/2,0),o.rotate(p,p,h),r(p,p,c),o.set(d,a.length/2,0),o.rotate(d,d,h),r(d,d,c),f.radius=a.radius,this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var v=this.circlePlane(s,f,p,0,t,e,i,n,u),m=this.circlePlane(s,f,d,0,t,e,i,n,u);if(this.enableFrictionReduction&&(this.enableFriction=l),u)return v||m;var y=v+m;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},R.prototype[d.CIRCLE|d.PLANE]=R.prototype.circlePlane=function(t,e,i,a,c,h,u,l,p){var d=t,f=e,_=i,A=c,b=u,w=l;w=w||0;var x=m,S=y,P=g;n(x,_,b),o.rotate(S,v,w);var E=s(S,x);if(E>f.radius)return 0;if(p)return!0;var B=this.createContactEquation(A,d,h,e);return o.copy(B.normalA,S),o.scale(B.contactPointB,B.normalA,-f.radius),r(B.contactPointB,B.contactPointB,_),n(B.contactPointB,B.contactPointB,d.position),o.scale(P,B.normalA,E),n(B.contactPointA,x,P),r(B.contactPointA,B.contactPointA,b),n(B.contactPointA,B.contactPointA,A.position),this.contactEquations.push(B),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(B)),1},R.prototype[d.CONVEX]=R.prototype[d.CONVEX|d.BOX]=R.prototype[d.BOX]=R.prototype.convexConvex=function(t,e,i,a,c,h,u,l,p,d){var f=m,v=y,b=g,P=_,E=A,B=w,L=x,C=S,T=0;d="number"==typeof d?d:0;if(!R.findSeparatingAxis(e,i,a,h,u,l,f))return 0;n(L,u,i),s(f,L)>0&&o.scale(f,f,-1);var M=R.getClosestEdge(e,a,f,!0),F=R.getClosestEdge(h,l,f);if(-1===M||-1===F)return 0;for(var I=0;I<2;I++){var q,O=M,V=F,k=e,G=h,N=i,D=u,U=a,H=l,W=t,z=c;if(0===I)q=O,O=V,V=q,q=k,k=G,G=q,q=N,N=D,D=q,q=U,U=H,H=q,q=W,W=z,z=q;for(var X=V;X<V+2;X++){var j=G.vertices[(X+G.vertices.length)%G.vertices.length];o.rotate(v,j,H),r(v,v,D);for(var Y=0,K=O-1;K<O+2;K++){var Z=k.vertices[(K+k.vertices.length)%k.vertices.length],Q=k.vertices[(K+1+k.vertices.length)%k.vertices.length];o.rotate(b,Z,U),o.rotate(P,Q,U),r(b,b,N),r(P,P,N),n(E,P,b),o.rotate90cw(C,E),o.normalize(C,C),n(L,v,b);var $=s(C,L);(K===O&&$<=d||K!==O&&$<=0)&&Y++}if(Y>=3){if(p)return!0;var J=this.createContactEquation(W,z,k,G);T++;Z=k.vertices[O%k.vertices.length],Q=k.vertices[(O+1)%k.vertices.length];o.rotate(b,Z,U),o.rotate(P,Q,U),r(b,b,N),r(P,P,N),n(E,P,b),o.rotate90cw(J.normalA,E),o.normalize(J.normalA,J.normalA),n(L,v,b);$=s(J.normalA,L);o.scale(B,J.normalA,$),n(J.contactPointA,v,N),n(J.contactPointA,J.contactPointA,B),r(J.contactPointA,J.contactPointA,N),n(J.contactPointA,J.contactPointA,W.position),n(J.contactPointB,v,D),r(J.contactPointB,J.contactPointB,D),n(J.contactPointB,J.contactPointB,z.position),this.contactEquations.push(J),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(J))}}}return this.enableFrictionReduction&&this.enableFriction&&T&&this.frictionEquations.push(this.createFrictionFromAverage(T)),T};var $=o.fromValues(0,0);R.projectConvexOntoAxis=function(t,e,i,n,r){var a,c,h=null,u=null,l=$;o.rotate(l,n,-i);for(var p=0;p<t.vertices.length;p++)a=t.vertices[p],c=s(a,l),(null===h||c>h)&&(h=c),(null===u||c<u)&&(u=c);if(u>h){var d=u;u=h,h=d}var f=s(e,n);o.set(r,u+f,h+f)};var J=o.fromValues(0,0),tt=o.fromValues(0,0),et=o.fromValues(0,0),it=o.fromValues(0,0),ot=o.fromValues(0,0),nt=o.fromValues(0,0);R.findSeparatingAxis=function(t,e,i,r,s,a,c){var h=null,u=!1,l=!1,p=J,d=tt,v=et,m=it,y=ot,g=nt;if(t instanceof f&&r instanceof f)for(var _=0;2!==_;_++){var A=t,b=i;1===_&&(A=r,b=a);for(var w=0;2!==w;w++){0===w?o.set(m,0,1):1===w&&o.set(m,1,0),0!==b&&o.rotate(m,m,b),R.projectConvexOntoAxis(t,e,i,m,y),R.projectConvexOntoAxis(r,s,a,m,g);var x=y,S=g;y[0]>g[0]&&(S=y,x=g,!0),u=(P=S[0]-x[1])<=0,(null===h||P>h)&&(o.copy(c,m),h=P,l=u)}}else for(_=0;2!==_;_++){A=t,b=i;1===_&&(A=r,b=a);for(w=0;w!==A.vertices.length;w++){o.rotate(d,A.vertices[w],b),o.rotate(v,A.vertices[(w+1)%A.vertices.length],b),n(p,v,d),o.rotate90cw(m,p),o.normalize(m,m),R.projectConvexOntoAxis(t,e,i,m,y),R.projectConvexOntoAxis(r,s,a,m,g);var P;x=y,S=g;y[0]>g[0]&&(S=y,x=g,!0),u=(P=S[0]-x[1])<=0,(null===h||P>h)&&(o.copy(c,m),h=P,l=u)}}return l};var rt=o.fromValues(0,0),st=o.fromValues(0,0),at=o.fromValues(0,0);R.getClosestEdge=function(t,e,i,r){var a=rt,c=st,h=at;o.rotate(a,i,-e),r&&o.scale(a,a,-1);for(var u=-1,l=t.vertices.length,p=-1,d=0;d!==l;d++){n(c,t.vertices[(d+1)%l],t.vertices[d%l]),o.rotate90cw(h,c),o.normalize(h,h);var f=s(h,a);(-1===u||f>p)&&(u=d%l,p=f)}return u};var ct=o.create(),ht=o.create(),ut=o.create(),lt=o.create(),pt=o.create(),dt=o.create(),ft=o.create();R.prototype[d.CIRCLE|d.HEIGHTFIELD]=R.prototype.circleHeightfield=function(t,e,i,s,a,c,h,u,l,p){var d=c.heights,f=(p=p||e.radius,c.elementWidth),v=ht,m=ct,y=pt,g=ft,_=dt,A=ut,b=lt,w=Math.floor((i[0]-p-h[0])/f),x=Math.ceil((i[0]+p-h[0])/f);w<0&&(w=0),x>=d.length&&(x=d.length-1);for(var S=d[w],P=d[x],E=w;E<x;E++)d[E]<P&&(P=d[E]),d[E]>S&&(S=d[E]);if(i[1]-p>S)return!l&&0;var B=!1;for(E=w;E<x;E++){o.set(A,E*f,d[E]),o.set(b,(E+1)*f,d[E+1]),o.add(A,A,h),o.add(b,b,h),o.sub(_,b,A),o.rotate(_,_,Math.PI/2),o.normalize(_,_),o.scale(m,_,-p),o.add(m,m,i),o.sub(v,m,A);var L=o.dot(v,_);if(m[0]>=A[0]&&m[0]<b[0]&&L<=0){if(l)return!0;B=!0,o.scale(v,_,-L),o.add(y,m,v),o.copy(g,_);var C=this.createContactEquation(a,t,c,e);o.copy(C.normalA,g),o.scale(C.contactPointB,C.normalA,-p),r(C.contactPointB,C.contactPointB,i),n(C.contactPointB,C.contactPointB,t.position),o.copy(C.contactPointA,y),o.sub(C.contactPointA,C.contactPointA,a.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}}if(B=!1,p>0)for(E=w;E<=x;E++)if(o.set(A,E*f,d[E]),o.add(A,A,h),o.sub(v,i,A),o.squaredLength(v)<Math.pow(p,2)){if(l)return!0;B=!0;C=this.createContactEquation(a,t,c,e);o.copy(C.normalA,v),o.normalize(C.normalA,C.normalA),o.scale(C.contactPointB,C.normalA,-p),r(C.contactPointB,C.contactPointB,i),n(C.contactPointB,C.contactPointB,t.position),n(C.contactPointA,A,h),r(C.contactPointA,C.contactPointA,h),n(C.contactPointA,C.contactPointA,a.position),this.contactEquations.push(C),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(C))}return B?1:0};var vt=o.create(),mt=o.create(),yt=o.create(),gt=new p({vertices:[o.create(),o.create(),o.create(),o.create()]});R.prototype[d.BOX|d.HEIGHTFIELD]=R.prototype[d.CONVEX|d.HEIGHTFIELD]=R.prototype.convexHeightfield=function(t,e,i,n,r,s,a,c,h){var u=s.heights,l=s.elementWidth,p=vt,d=mt,f=yt,v=gt,m=Math.floor((t.aabb.lowerBound[0]-a[0])/l),y=Math.ceil((t.aabb.upperBound[0]-a[0])/l);m<0&&(m=0),y>=u.length&&(y=u.length-1);for(var g=u[m],_=u[y],A=m;A<y;A++)u[A]<_&&(_=u[A]),u[A]>g&&(g=u[A]);if(t.aabb.lowerBound[1]>g)return!h&&0;var b=0;for(A=m;A<y;A++){o.set(p,A*l,u[A]),o.set(d,(A+1)*l,u[A+1]),o.add(p,p,a),o.add(d,d,a);o.set(f,.5*(d[0]+p[0]),.5*(d[1]+p[1]-100)),o.sub(v.vertices[0],d,f),o.sub(v.vertices[1],p,f),o.copy(v.vertices[2],v.vertices[1]),o.copy(v.vertices[3],v.vertices[0]),v.vertices[2][1]-=100,v.vertices[3][1]-=100,b+=this.convexConvex(t,e,i,n,r,v,f,0,h)}return b}},function(t,e,i){var o=i(11);function n(){this.data={},this.keys=[]}t.exports=n,n.prototype.getKey=function(t,e){return(0|(t|=0))==(0|(e|=0))?-1:0|((0|t)>(0|e)?t<<16|65535&e:e<<16|65535&t)},n.prototype.getByKey=function(t){return t|=0,this.data[t]},n.prototype.get=function(t,e){return this.data[this.getKey(t,e)]},n.prototype.set=function(t,e,i){if(!i)throw new Error("No data!");var o=this.getKey(t,e);return this.data[o]||this.keys.push(o),this.data[o]=i,o},n.prototype.reset=function(){for(var t=this.data,e=this.keys,i=e.length;i--;)delete t[e[i]];e.length=0},n.prototype.copy=function(t){this.reset(),o.appendArray(this.keys,t.keys);for(var e=t.keys.length;e--;){var i=t.keys[e];this.data[i]=t.data[i]}}},function(t,e,i){var o=i(6),n=i(14),r=i(30);function s(t){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(t={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),t=t||{};var e=this.width=t.width||1,i=this.height=t.height||1,s=[o.fromValues(-e/2,-i/2),o.fromValues(e/2,-i/2),o.fromValues(e/2,i/2),o.fromValues(-e/2,i/2)],a=[o.fromValues(1,0),o.fromValues(0,1)];t.vertices=s,t.axes=a,t.type=n.BOX,r.call(this,t)}t.exports=s,s.prototype=new r,s.prototype.constructor=s,s.prototype.computeMomentOfInertia=function(t){var e=this.width,i=this.height;return t*(i*i+e*e)/12},s.prototype.updateBoundingRadius=function(){var t=this.width,e=this.height;this.boundingRadius=Math.sqrt(t*t+e*e)/2};o.create(),o.create(),o.create(),o.create();s.prototype.computeAABB=function(t,e,i){t.setFromPoints(this.vertices,e,i,0)},s.prototype.updateArea=function(){this.area=this.width*this.height}},function(t,e,i){var o=i(19),n=i(13),r=i(76),s=i(77),a=i(6);t.exports=d;var c=a.create(),h=a.create(),u=a.fromValues(1,0),l=a.fromValues(0,1),p=a.create();function d(t,e,i){i=i||{},o.call(this,t,e,o.REVOLUTE,i);var d=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=a.create(),this.pivotB=a.create(),i.worldPivot?(a.sub(this.pivotA,i.worldPivot,t.position),a.sub(this.pivotB,i.worldPivot,e.position),a.rotate(this.pivotA,this.pivotA,-t.angle),a.rotate(this.pivotB,this.pivotB,-e.angle)):(a.copy(this.pivotA,i.localPivotA),a.copy(this.pivotB,i.localPivotB));var f=this.equations=[new n(t,e,-d,d),new n(t,e,-d,d)],v=f[0],m=f[1],y=this;v.computeGq=function(){return a.rotate(c,y.pivotA,t.angle),a.rotate(h,y.pivotB,e.angle),a.add(p,e.position,h),a.sub(p,p,t.position),a.sub(p,p,c),a.dot(p,u)},m.computeGq=function(){return a.rotate(c,y.pivotA,t.angle),a.rotate(h,y.pivotB,e.angle),a.add(p,e.position,h),a.sub(p,p,t.position),a.sub(p,p,c),a.dot(p,l)},m.minForce=v.minForce=-d,m.maxForce=v.maxForce=d,this.motorEquation=new r(t,e),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new s(t,e),this.lowerLimitEquation=new s(t,e),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}d.prototype=new o,d.prototype.constructor=d,d.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)},d.prototype.update=function(){var t,e=this.bodyA,i=this.bodyB,o=this.pivotA,n=this.pivotB,r=this.equations,s=(r[0],r[1],r[0]),p=r[1],d=this.upperLimit,f=this.lowerLimit,v=this.upperLimitEquation,m=this.lowerLimitEquation,y=this.angle=i.angle-e.angle;this.upperLimitEnabled&&y>d?(v.angle=d,-1===r.indexOf(v)&&r.push(v)):-1!==(t=r.indexOf(v))&&r.splice(t,1);this.lowerLimitEnabled&&y<f?(m.angle=f,-1===r.indexOf(m)&&r.push(m)):-1!==(t=r.indexOf(m))&&r.splice(t,1);a.rotate(c,o,e.angle),a.rotate(h,n,i.angle),s.G[0]=-1,s.G[1]=0,s.G[2]=-a.crossLength(c,u),s.G[3]=1,s.G[4]=0,s.G[5]=a.crossLength(h,u),p.G[0]=0,p.G[1]=-1,p.G[2]=-a.crossLength(c,l),p.G[3]=0,p.G[4]=1,p.G[5]=a.crossLength(h,l)},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},d.prototype.motorIsEnabled=function(){return!!this.motorEnabled},d.prototype.setMotorSpeed=function(t){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations[e].relativeVelocity=t}},d.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},function(t,e,i){var o=i(13);i(6);function n(t,e){o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.computeB=function(t,e,i){var o=this.G;o[2]=-1,o[5]=this.ratio;var n=this.computeGiMf();return-this.computeGW()*e-i*n}},function(t,e,i){var o=i(13),n=i(6);function r(t,e,i){i=i||{},o.call(this,t,e,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var n=this.G;n[2]=1,n[5]=-1}t.exports=r,r.prototype=new o,r.prototype.constructor=r;var s=n.create(),a=n.create(),c=n.fromValues(1,0),h=n.fromValues(0,1);r.prototype.computeGq=function(){return n.rotate(s,c,this.bodyA.angle+this.angle),n.rotate(a,h,this.bodyB.angle),n.dot(s,a)}},function(t,e,i){var o=i(19),n=i(40),r=i(13),s=i(6),a=i(77);function c(t,e,i){i=i||{},o.call(this,t,e,o.PRISMATIC,i);var c=s.fromValues(0,0),h=s.fromValues(1,0),u=s.fromValues(0,0);i.localAnchorA&&s.copy(c,i.localAnchorA),i.localAxisA&&s.copy(h,i.localAxisA),i.localAnchorB&&s.copy(u,i.localAnchorB),this.localAnchorA=c,this.localAnchorB=u,this.localAxisA=h;var l=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE,p=new r(t,e,-l,l),d=new s.create,f=new s.create,v=new s.create,m=new s.create;if(p.computeGq=function(){return s.dot(v,m)},p.updateJacobian=function(){var i=this.G,o=t.position,n=e.position;s.rotate(d,c,t.angle),s.rotate(f,u,e.angle),s.add(v,n,f),s.sub(v,v,o),s.sub(v,v,d),s.rotate(m,h,t.angle+Math.PI/2),i[0]=-m[0],i[1]=-m[1],i[2]=-s.crossLength(d,m)+s.crossLength(m,v),i[3]=m[0],i[4]=m[1],i[5]=s.crossLength(f,m)},this.equations.push(p),!i.disableRotationalLock){var y=new a(t,e,-l,l);this.equations.push(y)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==i.lowerLimit,this.upperLimitEnabled=void 0!==i.upperLimit,this.lowerLimit=void 0!==i.lowerLimit?i.lowerLimit:0,this.upperLimit=void 0!==i.upperLimit?i.upperLimit:1,this.upperLimitEquation=new n(t,e),this.lowerLimitEquation=new n(t,e),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=l,this.motorEquation=new r(t,e),this.motorEnabled=!1,this.motorSpeed=0;var g=this,_=this.motorEquation;_.computeGW;_.computeGq=function(){return 0},_.computeGW=function(){var t=this.G,e=this.bodyA,i=this.bodyB,o=e.velocity,n=i.velocity,r=e.angularVelocity,s=i.angularVelocity;return this.gmult(t,o,r,n,s)+g.motorSpeed}}t.exports=c,c.prototype=new o,c.prototype.constructor=c;var h=s.create(),u=s.create(),l=s.create(),p=s.create(),d=s.create(),f=s.create();c.prototype.update=function(){var t=this.equations,e=t[0],i=this.upperLimit,o=this.lowerLimit,n=this.upperLimitEquation,r=this.lowerLimitEquation,a=this.bodyA,c=this.bodyB,v=this.localAxisA,m=this.localAnchorA,y=this.localAnchorB;e.updateJacobian(),s.rotate(h,v,a.angle),s.rotate(p,m,a.angle),s.add(u,p,a.position),s.rotate(d,y,c.angle),s.add(l,d,c.position);var g,_=this.position=s.dot(l,h)-s.dot(u,h);if(this.motorEnabled){var A=this.motorEquation.G;A[0]=h[0],A[1]=h[1],A[2]=s.crossLength(h,d),A[3]=-h[0],A[4]=-h[1],A[5]=-s.crossLength(h,p)}this.upperLimitEnabled&&_>i?(s.scale(n.normalA,h,-1),s.sub(n.contactPointA,u,a.position),s.sub(n.contactPointB,l,c.position),s.scale(f,h,i),s.add(n.contactPointA,n.contactPointA,f),-1===t.indexOf(n)&&t.push(n)):-1!==(g=t.indexOf(n))&&t.splice(g,1);this.lowerLimitEnabled&&_<o?(s.scale(r.normalA,h,1),s.sub(r.contactPointA,u,a.position),s.sub(r.contactPointB,l,c.position),s.scale(f,h,o),s.sub(r.contactPointB,r.contactPointB,f),-1===t.indexOf(r)&&t.push(r)):-1!==(g=t.indexOf(r))&&t.splice(g,1)},c.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},c.prototype.disableMotor=function(){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations.splice(t,1),this.motorEnabled=!1}},c.prototype.setLimits=function(t,e){"number"==typeof t?(this.lowerLimit=t,this.lowerLimitEnabled=!0):(this.lowerLimit=t,this.lowerLimitEnabled=!1),"number"==typeof e?(this.upperLimit=e,this.upperLimitEnabled=!0):(this.upperLimit=e,this.upperLimitEnabled=!1)}},function(t,e,i){var o=i(11),n=i(38);function r(){n.call(this,n.SAP),this.axisList=[],this.axisIndex=0;var t=this;this._addBodyHandler=function(e){t.axisList.push(e.body)},this._removeBodyHandler=function(e){var i=t.axisList.indexOf(e.body);-1!==i&&t.axisList.splice(i,1)}}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.setWorld=function(t){this.axisList.length=0,o.appendArray(this.axisList,t.bodies),t.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),t.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=t},r.sortAxisList=function(t,e){e|=0;for(var i=1,o=t.length;i<o;i++){for(var n=t[i],r=i-1;r>=0&&!(t[r].aabb.lowerBound[e]<=n.aabb.lowerBound[e]);r--)t[r+1]=t[r];t[r+1]=n}return t},r.prototype.sortList=function(){var t=this.axisList,e=this.axisIndex;r.sortAxisList(t,e)},r.prototype.getCollisionPairs=function(t){var e=this.axisList,i=this.result,o=this.axisIndex;i.length=0;for(var r=e.length;r--;){var s=e[r];s.aabbNeedsUpdate&&s.updateAABB()}this.sortList();for(var a=0,c=0|e.length;a!==c;a++)for(var h=e[a],u=a+1;u<c;u++){var l=e[u];if(!(l.aabb.lowerBound[o]<=h.aabb.upperBound[o]))break;n.canCollide(h,l)&&this.boundingVolumeCheck(h,l)&&i.push(h,l)}return i},r.prototype.aabbQuery=function(t,e,i){i=i||[],this.sortList();var o=this.axisIndex,n="x";1===o&&(n="y"),2===o&&(n="z");for(var r=this.axisList,s=(e.lowerBound[n],e.upperBound[n],0);s<r.length;s++){var a=r[s];a.aabbNeedsUpdate&&a.updateAABB(),a.aabb.overlaps(e)&&i.push(a)}return i}},function(t,e,i){var o=i(6),n=i(49);i(11);function r(t,e,i){i=i||{},n.call(this,t,e,i),this.localAnchorA=o.fromValues(0,0),this.localAnchorB=o.fromValues(0,0),i.localAnchorA&&o.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&o.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var r=o.create(),s=o.create();this.getWorldAnchorA(r),this.getWorldAnchorB(s);var a=o.distance(r,s);this.restLength="number"==typeof i.restLength?i.restLength:a}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.setWorldAnchorA=function(t){this.bodyA.toLocalFrame(this.localAnchorA,t)},r.prototype.setWorldAnchorB=function(t){this.bodyB.toLocalFrame(this.localAnchorB,t)},r.prototype.getWorldAnchorA=function(t){this.bodyA.toWorldFrame(t,this.localAnchorA)},r.prototype.getWorldAnchorB=function(t){this.bodyB.toWorldFrame(t,this.localAnchorB)};var s=o.create(),a=o.create(),c=o.create(),h=o.create(),u=o.create(),l=o.create(),p=o.create(),d=o.create(),f=o.create();r.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restLength,n=this.bodyA,r=this.bodyB,v=s,m=a,y=c,g=h,_=f,A=u,b=l,w=p,x=d;this.getWorldAnchorA(A),this.getWorldAnchorB(b),o.sub(w,A,n.position),o.sub(x,b,r.position),o.sub(v,b,A);var S=o.len(v);o.normalize(m,v),o.sub(y,r.velocity,n.velocity),o.crossZV(_,r.angularVelocity,x),o.add(y,y,_),o.crossZV(_,n.angularVelocity,w),o.sub(y,y,_),o.scale(g,m,-t*(S-i)-e*o.dot(y,m)),o.sub(n.force,n.force,g),o.add(r.force,r.force,g);var P=o.crossLength(w,g),E=o.crossLength(x,g);n.angularForce-=P,r.angularForce+=E}},function(t,e,i){i(6);var o=i(49);function n(t,e,i){i=i||{},o.call(this,t,e,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:e.angle-t.angle}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.applyForce=function(){var t=this.stiffness,e=this.damping,i=this.restAngle,o=this.bodyA,n=this.bodyB,r=-t*(n.angle-o.angle-i)-e*(n.angularVelocity-o.angularVelocity)*0;o.angularForce-=r,n.angularForce+=r}},function(t){t.exports=JSON.parse('{"_args":[["p2@0.7.1","C:\\\\VS_Projects\\\\jam_2018"]],"_from":"p2@0.7.1","_id":"p2@0.7.1","_inBundle":false,"_integrity":"sha1-JfJHTZvDptMUCh2iamfJ4RislUM=","_location":"/p2","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"p2@0.7.1","name":"p2","escapedName":"p2","rawSpec":"0.7.1","saveSpec":null,"fetchSpec":"0.7.1"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/p2/-/p2-0.7.1.tgz","_spec":"0.7.1","_where":"C:\\\\VS_Projects\\\\jam_2018","author":{"name":"Stefan Hedman","email":"schteppe@gmail.com","url":"http://steffe.se"},"bugs":{"url":"https://github.com/schteppe/p2.js/issues"},"dependencies":{"poly-decomp":"0.1.1"},"description":"A JavaScript 2D physics engine.","devDependencies":{"grunt":"^0.4.5","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0"},"engines":{"node":"*"},"homepage":"https://github.com/schteppe/p2.js#readme","keywords":["p2.js","p2","physics","engine","2d"],"licenses":[{"type":"MIT"}],"main":"./src/p2.js","name":"p2","repository":{"type":"git","url":"git+https://github.com/schteppe/p2.js.git"},"version":"0.7.1"}')},function(t,e){function i(t,e,i,o){this.shapeA=e,this.shapeB=o,this.bodyA=t,this.bodyB=i}t.exports=i,i.prototype.set=function(t,e,o,n){i.call(this,t,e,o,n)}},function(t,e,i){var o=i(18);function n(){this.equations=[],this.bodies=[]}t.exports=n,n.prototype.reset=function(){this.equations.length=this.bodies.length=0};var r=[];n.prototype.getBodies=function(t){var e=t||[],i=this.equations;r.length=0;for(var o=0;o!==i.length;o++){var n=i[o];-1===r.indexOf(n.bodyA.id)&&(e.push(n.bodyA),r.push(n.bodyA.id)),-1===r.indexOf(n.bodyB.id)&&(e.push(n.bodyB),r.push(n.bodyB.id))}return e},n.prototype.wantsToSleep=function(){for(var t=0;t<this.bodies.length;t++){var e=this.bodies[t];if(e.type===o.DYNAMIC&&!e.wantsToSleep)return!1}return!0},n.prototype.sleep=function(){for(var t=0;t<this.bodies.length;t++){this.bodies[t].sleep()}return!0}},function(t,e){function i(t){this.body=t,this.neighbors=[],this.equations=[],this.visited=!1}t.exports=i,i.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"GetTextureFromString",(function(){return c})),i.d(e,"ParticleUtils",(function(){return n})),i.d(e,"Particle",(function(){return _})),i.d(e,"Emitter",(function(){return x})),i.d(e,"PathParticle",(function(){return B})),i.d(e,"AnimatedParticle",(function(){return L})),i.d(e,"PolygonalChain",(function(){return A})),i.d(e,"PropertyList",(function(){return l})),i.d(e,"PropertyNode",(function(){return s}));var o,n,r=i(7),s=function(){function t(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:n.generateEase(i):null}return t.createList=function(e){if("list"in e){var i=e.list,o=void 0,r=void 0,s=i[0],a=s.value,c=s.time;if(r=o=new t("string"==typeof a?n.hexToRGB(a):a,c,e.ease),i.length>2||2===i.length&&i[1].value!==a)for(var h=1;h<i.length;++h){var u=i[h],l=u.value,p=u.time;o.next=new t("string"==typeof l?n.hexToRGB(l):l,p),o=o.next}return r.isStepped=!!e.isStepped,r}var d=new t("string"==typeof e.start?n.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(d.next=new t("string"==typeof e.end?n.hexToRGB(e.end):e.end,1)),d},t}(),a=r;
/*!
 * pixi-particles - v4.2.0
 * Compiled Sat, 26 Oct 2019 14:40:23 UTC
 *
 * pixi-particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function c(t){return o(t)}o=parseInt(/^(\d+)\./.exec(r.VERSION)[1])<5?a.Texture.fromImage:a.Texture.from,function(t){t.verbose=!1,t.DEG_TO_RADS=Math.PI/180,t.rotatePoint=function(e,i){if(e){e*=t.DEG_TO_RADS;var o=Math.sin(e),n=Math.cos(e),r=i.x*n-i.y*o,s=i.x*o+i.y*n;i.x=r,i.y=s}},t.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},t.normalize=function(e){var i=1/t.length(e);e.x*=i,e.y*=i},t.scaleBy=function(t,e){t.x*=e,t.y*=e},t.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.hexToRGB=function(t,e){var i;return e||(e={}),"#"==t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8==t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e},t.generateEase=function(t){var e=t.length,i=1/e;return function(o){var n,r,s=e*o|0;return n=(o-s*i)*e,(r=t[s]||t[e-1]).s+n*(2*(1-n)*(r.cp-r.s)+n*(r.e-r.s))}},t.getBlendMode=function(t){if(!t)return r.BLEND_MODES.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return r.BLEND_MODES[t]||r.BLEND_MODES.NORMAL},t.createSteppedGradient=function(e,i){void 0===i&&(i=10),("number"!=typeof i||i<=0)&&(i=10);var o=new s(t.hexToRGB(e[0].value),e[0].time);o.isStepped=!0;for(var n=o,r=e[0],a=1,c=e[a],h=1;h<i;++h){for(var u=h/i;u>c.time;)r=c,c=e[++a];u=(u-r.time)/(c.time-r.time);var l=t.hexToRGB(r.value),p=t.hexToRGB(c.value),d={r:(p.r-l.r)*u+l.r,g:(p.g-l.g)*u+l.g,b:(p.b-l.b)*u+l.b};n.next=new s(d,h/i),n=n.next}return o}}(n||(n={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function u(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?d:p:t.isStepped?this.interpolate=this.isColor?y:m:this.interpolate=this.isColor?v:f,this.ease=this.current.ease},t}();function p(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function d(t){this.ease&&(t=this.ease(t));var e=this.current.value,i=this.next.value,o=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,s=(i.b-e.b)*t+e.b;return n.combineRGBComponents(o,r,s)}function f(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function v(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,i=this.next.value,o=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,s=(i.b-e.b)*t+e.b;return n.combineRGBComponents(o,r,s)}function m(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function y(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return n.combineRGBComponents(e.r,e.g,e.b)}var g,_=function(t){function e(i){var o=t.call(this)||this;return o.emitter=i,o.anchor.x=o.anchor.y=.5,o.velocity=new r.Point,o.rotationSpeed=0,o.rotationAcceleration=0,o.maxLife=0,o.age=0,o.ease=null,o.extraData=null,o.alphaList=new l,o.speedList=new l,o.speedMultiplier=1,o.acceleration=new r.Point,o.maxSpeed=NaN,o.scaleList=new l,o.scaleMultiplier=1,o.colorList=new l(!0),o._doAlpha=!1,o._doScale=!1,o._doSpeed=!1,o._doAcceleration=!1,o._doColor=!1,o._doNormalMovement=!1,o._oneOverLife=0,o.next=null,o.prev=null,o.init=o.init,o.Particle_init=e.prototype.init,o.update=o.update,o.Particle_update=e.prototype.update,o.Sprite_destroy=t.prototype.destroy,o.Particle_destroy=e.prototype.destroy,o.applyArt=o.applyArt,o.kill=o.kill,o}return u(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,n.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=n.DEG_TO_RADS,this.rotationSpeed*=n.DEG_TO_RADS,this.rotationAcceleration*=n.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=n.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||r.Texture.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var i=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=i}if(this._doNormalMovement){var o=void 0,r=void 0;if(this._doSpeed){var s=this.speedList.interpolate(e)*this.speedMultiplier;n.normalize(this.velocity),n.scaleBy(this.velocity,s),o=this.velocity.x*t,r=this.velocity.y*t}else if(this._doAcceleration){var a=this.velocity.x,c=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var h=n.length(this.velocity);h>this.maxSpeed&&n.scaleBy(this.velocity,this.maxSpeed/h)}o=(a+this.velocity.x)/2*t,r=(c+this.velocity.y)/2*t}else o=this.velocity.x*t,r=this.velocity.y*t;this.position.x+=o,this.position.y+=r}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var u=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+u)/2*t,this.rotationSpeed=u}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=c(t[e]));if(n.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!=t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(r.Sprite),A=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var i=t[e],o=i[0],n=1;n<i.length;++n){var r=i[n];this.segments.push({p1:o,p2:r,l:0}),o=r}else for(o=t[0],e=1;e<t.length;++e){r=t[e];this.segments.push({p1:o,p2:r,l:0}),o=r}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var s=this.segments[e],a=s.p1,c=s.p2,h=Math.sqrt((c.x-a.x)*(c.x-a.x)+(c.y-a.y)*(c.y-a.y));this.segments[e].l=h,this.totalLength+=h,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,i,o=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],i=o;else for(var n=0;n<this.countingLengths.length;++n)if(o<this.countingLengths[n]){e=this.segments[n],i=0===n?o:o-this.countingLengths[n-1];break}i/=e.l||1;var r=e.p1,s=e.p2;t.x=r.x+i*(s.x-r.x),t.y=r.y+i*(s.y-r.y)},t}(),b=r;g=parseInt(/^(\d+)\./.exec(r.VERSION)[1])<5?b.ticker.shared:b.Ticker.shared;var w=new r.Point,x=function(){function t(t,e,i){this._currentImageIndex=-1,this._particleConstructor=_,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!=this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?this.startAlpha=s.createList(e.alpha):this.startAlpha=new s(1,0),e.speed?(this.startSpeed=s.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new s(0,0));var o=e.acceleration;o&&(o.x||o.y)?(this.startSpeed.next=null,this.acceleration=new r.Point(o.x,o.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new r.Point,e.scale?(this.startScale=s.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new s(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=s.createList(e.color):this.startColor=new s({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=n.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:n.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new r.Point,this.spawnPos=new r.Point(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var i=t.spawnRect;this.spawnRect=new r.Rectangle(i.x,i.y,i.w,i.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new r.Circle(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new r.Circle(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new A(t.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t==this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t==this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!=t){var e=t-this.rotation;this.rotation=t,n.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?g.remove(this.update,this):!this._autoUpdate&&t&&g.add(this.update,this),this._autoUpdate=!!t},enumerable:!0,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/r.settings.TARGET_FPMS/1e3),this._parent){var e,i,o,n,s;for(i=this._activeParticlesFirst;i;i=o)o=i.next,i.update(t);this._prevPosIsValid&&(n=this._prevEmitterPos.x,s=this._prevEmitterPos.y);var a=this.ownerPos.x+this.spawnPos.x,c=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var h=void 0;if(h=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<h){var u=void 0,l=void 0;if(this._prevPosIsValid&&this._posChanged){var p=1+this._spawnTimer/t;u=(a-n)*p+n,l=(c-s)*p+s}else u=a,l=c;e=0;for(var d=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<d;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var f=void 0;if(this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(f.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):f.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):f.applyArt(this.particleImages[0]),f.alphaList.reset(this.startAlpha),1!=this.minimumSpeedMultiplier&&(f.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),f.speedList.reset(this.startSpeed),f.acceleration.x=this.acceleration.x,f.acceleration.y=this.acceleration.y,f.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier&&(f.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),f.scaleList.reset(this.startScale),f.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?f.rotationSpeed=this.minRotationSpeed:f.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,f.rotationAcceleration=this.rotationAcceleration,f.noRotation=this.noRotation,f.maxLife=h,f.blendMode=this.particleBlendMode,f.ease=this.customEase,f.extraData=this.extraData,this.applyAdditionalProperties(f),this._spawnFunc(f,u,l,e),f.init(),f.update(-this._spawnTimer),f.parent){var v=this._parent.children;if(v[0]==f)v.shift();else if(v[v.length-1]==f)v.pop();else{var m=v.indexOf(f);v.splice(m,1)}this.addAtBack?v.unshift(f):v.push(f)}else this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f);this._activeParticlesLast?(this._activeParticlesLast.next=f,f.prev=this._activeParticlesLast,this._activeParticlesLast=f):this._activeParticlesLast=this._activeParticlesFirst=f,++this.particleCount}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=c,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var y=this._completeCallback;this._completeCallback=null,y()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},t.prototype._spawnRect=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,w.x=Math.random()*this.spawnRect.width+this.spawnRect.x,w.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&n.rotatePoint(this.rotation,w),t.position.x=e+w.x,t.position.y=i+w.y},t.prototype._spawnCircle=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,w.x=Math.random()*this.spawnCircle.radius,w.y=0,n.rotatePoint(360*Math.random(),w),w.x+=this.spawnCircle.x,w.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,w),t.position.x=e+w.x,t.position.y=i+w.y},t.prototype._spawnRing=function(t,e,i){var o=this.spawnCircle;this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,o.minRadius!==o.radius?w.x=Math.random()*(o.radius-o.minRadius)+o.minRadius:w.x=o.radius,w.y=0;var r=360*Math.random();t.rotation+=r,n.rotatePoint(r,w),w.x+=this.spawnCircle.x,w.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,w),t.position.x=e+w.x,t.position.y=i+w.y},t.prototype._spawnPolygonalChain=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(w),0!==this.rotation&&n.rotatePoint(this.rotation,w),t.position.x=e+w.x,t.position.y=i+w.y},t.prototype._spawnBurst=function(t,e,i,o){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*o+this.rotation,t.position.x=e,t.position.y=i},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}(),S=new r.Point,P=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],E=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(P).join("|"),"g"),B=function(t){function e(e){var i=t.call(this,e)||this;return i.path=null,i.initialRotation=0,i.initialPosition=new r.Point,i.movement=0,i}return u(e,t),e.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){var i=this.speedList.interpolate(e)*this.speedMultiplier;this.movement+=i*t,S.x=this.movement,S.y=this.path(this.movement),n.rotatePoint(this.initialRotation,S),this.position.x=this.initialPosition.x+S.x,this.position.y=this.initialPosition.y+S.y}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},e.parseArt=function(t){return _.parseArt(t)},e.parseData=function(t){var e={};if(t&&t.path)try{e.path=function(t){for(var e=t.match(E),i=e.length-1;i>=0;--i)P.indexOf(e[i])>=0&&(e[i]="Math."+e[i]);return t=e.join(""),new Function("x","return "+t+";")}(t.path)}catch(t){n.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else n.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e},e}(_),L=function(t){function e(e){var i=t.call(this,e)||this;return i.textures=null,i.duration=0,i.framerate=0,i.elapsed=0,i.loop=!1,i}return u(e,t),e.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},e.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||r.Texture.EMPTY}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},e.parseArt=function(t){for(var e,i,o,n,s,a=[],h=0;h<t.length;++h){e=t[h],a[h]=i={},i.textures=s=[],o=e.textures;for(var u=0;u<o.length;++u)if("string"==typeof(n=o[u]))s.push(c(n));else if(n instanceof r.Texture)s.push(n);else{var l=n.count||1;for(n="string"==typeof n.texture?c(n.texture):n.texture;l>0;--l)s.push(n)}"matchLife"==e.framerate?(i.framerate=-1,i.duration=0,i.loop=!1):(i.loop=!!e.loop,i.framerate=e.framerate>0?e.framerate:60,i.duration=s.length/i.framerate)}return a},e}(_)},,,,,,function(t,e,i){var o=i(107),n=i(62),r=i(61);function s(){this.vertices=[]}t.exports=s,s.prototype.at=function(t){var e=this.vertices,i=e.length;return e[t<0?t%i+i:t%i]},s.prototype.first=function(){return this.vertices[0]},s.prototype.last=function(){return this.vertices[this.vertices.length-1]},s.prototype.clear=function(){this.vertices.length=0},s.prototype.append=function(t,e,i){if(void 0===e)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<e)throw new Error("lol1");if(i>t.vertices.length)throw new Error("lol2");if(e<0)throw new Error("lol3");for(var o=e;o<i;o++)this.vertices.push(t.vertices[o])},s.prototype.makeCCW=function(){for(var t=0,e=this.vertices,i=1;i<this.vertices.length;++i)(e[i][1]<e[t][1]||e[i][1]==e[t][1]&&e[i][0]>e[t][0])&&(t=i);n.left(this.at(t-1),this.at(t),this.at(t+1))||this.reverse()},s.prototype.reverse=function(){for(var t=[],e=0,i=this.vertices.length;e!==i;e++)t.push(this.vertices.pop());this.vertices=t},s.prototype.isReflex=function(t){return n.right(this.at(t-1),this.at(t),this.at(t+1))};var a=[],c=[];function h(t,e,i,o,n){n=n||0;var s=e[1]-t[1],a=t[0]-e[0],c=s*t[0]+a*t[1],h=o[1]-i[1],u=i[0]-o[0],l=h*i[0]+u*i[1],p=s*u-h*a;return r.eq(p,0,n)?[0,0]:[(u*c-a*l)/p,(s*l-h*c)/p]}s.prototype.canSee=function(t,e){var i,r,s=a,h=c;if(n.leftOn(this.at(t+1),this.at(t),this.at(e))&&n.rightOn(this.at(t-1),this.at(t),this.at(e)))return!1;r=n.sqdist(this.at(t),this.at(e));for(var u=0;u!==this.vertices.length;++u)if((u+1)%this.vertices.length!==t&&u!==t&&n.leftOn(this.at(t),this.at(e),this.at(u+1))&&n.rightOn(this.at(t),this.at(e),this.at(u))&&(s[0]=this.at(t),s[1]=this.at(e),h[0]=this.at(u),h[1]=this.at(u+1),i=o.lineInt(s,h),n.sqdist(this.at(t),i)<r))return!1;return!0},s.prototype.copy=function(t,e,i){var o=i||new s;if(o.clear(),t<e)for(var n=t;n<=e;n++)o.vertices.push(this.vertices[n]);else{for(n=0;n<=e;n++)o.vertices.push(this.vertices[n]);for(n=t;n<this.vertices.length;n++)o.vertices.push(this.vertices[n])}return o},s.prototype.getCutEdges=function(){for(var t=[],e=[],i=[],o=new s,n=Number.MAX_VALUE,r=0;r<this.vertices.length;++r)if(this.isReflex(r))for(var a=0;a<this.vertices.length;++a)if(this.canSee(r,a)){e=this.copy(r,a,o).getCutEdges(),i=this.copy(a,r,o).getCutEdges();for(var c=0;c<i.length;c++)e.push(i[c]);e.length<n&&(t=e,n=e.length,t.push([this.at(r),this.at(a)]))}return t},s.prototype.decomp=function(){var t=this.getCutEdges();return t.length>0?this.slice(t):[this]},s.prototype.slice=function(t){if(0==t.length)return[this];if(t instanceof Array&&t.length&&t[0]instanceof Array&&2==t[0].length&&t[0][0]instanceof Array){for(var e=[this],i=0;i<t.length;i++)for(var o=t[i],n=0;n<e.length;n++){var r=e[n].slice(o);if(r){e.splice(n,1),e.push(r[0],r[1]);break}}return e}o=t,i=this.vertices.indexOf(o[0]),n=this.vertices.indexOf(o[1]);return-1!=i&&-1!=n&&[this.copy(i,n),this.copy(n,i)]},s.prototype.isSimple=function(){for(var t=this.vertices,e=0;e<t.length-1;e++)for(var i=0;i<e-1;i++)if(o.segmentsIntersect(t[e],t[e+1],t[i],t[i+1]))return!1;for(e=1;e<t.length-2;e++)if(o.segmentsIntersect(t[0],t[t.length-1],t[e],t[e+1]))return!1;return!0},s.prototype.quickDecomp=function(t,e,i,o,r,a){r=r||100,a=a||0,o=o||25,t=void 0!==t?t:[],e=e||[],i=i||[];var c=[0,0],u=[0,0],l=[0,0],p=0,d=0,f=0,v=0,m=0,y=0,g=0,_=new s,A=new s,b=this.vertices;if(b.length<3)return t;if(++a>r)return console.warn("quickDecomp: max level ("+r+") reached."),t;for(var w=0;w<this.vertices.length;++w)if(this.isReflex(w)){e.push(this.vertices[w]),p=d=Number.MAX_VALUE;for(var x=0;x<this.vertices.length;++x)n.left(this.at(w-1),this.at(w),this.at(x))&&n.rightOn(this.at(w-1),this.at(w),this.at(x-1))&&(l=h(this.at(w-1),this.at(w),this.at(x),this.at(x-1)),n.right(this.at(w+1),this.at(w),l)&&(f=n.sqdist(this.vertices[w],l))<d&&(d=f,u=l,y=x)),n.left(this.at(w+1),this.at(w),this.at(x+1))&&n.rightOn(this.at(w+1),this.at(w),this.at(x))&&(l=h(this.at(w+1),this.at(w),this.at(x),this.at(x+1)),n.left(this.at(w-1),this.at(w),l)&&(f=n.sqdist(this.vertices[w],l))<p&&(p=f,c=l,m=x));if(y==(m+1)%this.vertices.length)l[0]=(u[0]+c[0])/2,l[1]=(u[1]+c[1])/2,i.push(l),w<m?(_.append(this,w,m+1),_.vertices.push(l),A.vertices.push(l),0!=y&&A.append(this,y,this.vertices.length),A.append(this,0,w+1)):(0!=w&&_.append(this,w,this.vertices.length),_.append(this,0,m+1),_.vertices.push(l),A.vertices.push(l),A.append(this,y,w+1));else{if(y>m&&(m+=this.vertices.length),v=Number.MAX_VALUE,m<y)return t;for(x=y;x<=m;++x)n.leftOn(this.at(w-1),this.at(w),this.at(x))&&n.rightOn(this.at(w+1),this.at(w),this.at(x))&&(f=n.sqdist(this.at(w),this.at(x)))<v&&(v=f,g=x%this.vertices.length);w<g?(_.append(this,w,g+1),0!=g&&A.append(this,g,b.length),A.append(this,0,w+1)):(0!=w&&_.append(this,w,b.length),_.append(this,0,g+1),A.append(this,g,w+1))}return _.vertices.length<A.vertices.length?(_.quickDecomp(t,e,i,o,r,a),A.quickDecomp(t,e,i,o,r,a)):(A.quickDecomp(t,e,i,o,r,a),_.quickDecomp(t,e,i,o,r,a)),t}return t.push(this),t},s.prototype.removeCollinearPoints=function(t){for(var e=0,i=this.vertices.length-1;this.vertices.length>3&&i>=0;--i)n.collinear(this.at(i-1),this.at(i),this.at(i+1),t)&&(this.vertices.splice(i%this.vertices.length,1),i--,e++);return e}},function(t,e,i){var o=i(61);function n(){}t.exports=n,n.lineInt=function(t,e,i){i=i||0;var n,r,s,a,c,h,u,l=[0,0];return n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],s=n*t[0][0]+r*t[0][1],a=e[1][1]-e[0][1],c=e[0][0]-e[1][0],h=a*e[0][0]+c*e[0][1],u=n*c-a*r,o.eq(u,0,i)||(l[0]=(c*s-r*h)/u,l[1]=(n*h-a*s)/u),l},n.segmentsIntersect=function(t,e,i,o){var n=e[0]-t[0],r=e[1]-t[1],s=o[0]-i[0],a=o[1]-i[1];if(s*r-a*n==0)return!1;var c=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(s*r-a*n),h=(s*(t[1]-i[1])+a*(i[0]-t[0]))/(a*n-s*r);return c>=0&&c<=1&&h>=0&&h<=1}},function(t,e){var i={GetArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,i=0,o=0;o<e;o+=2)i+=(t[o+2]-t[o])*(t[o+1]+t[o+3]);return.5*-(i+=(t[0]-t[e])*(t[e+1]+t[1]))},Triangulate:function(t){var e=t.length>>1;if(e<3)return[];for(var o=[],n=[],r=0;r<e;r++)n.push(r);r=0;for(var s=e;s>3;){var a=n[(r+0)%s],c=n[(r+1)%s],h=n[(r+2)%s],u=t[2*a],l=t[2*a+1],p=t[2*c],d=t[2*c+1],f=t[2*h],v=t[2*h+1],m=!1;if(i._convex(u,l,p,d,f,v)){m=!0;for(var y=0;y<s;y++){var g=n[y];if(g!=a&&g!=c&&g!=h&&i._PointInTriangle(t[2*g],t[2*g+1],u,l,p,d,f,v)){m=!1;break}}}if(m)o.push(a,c,h),n.splice((r+1)%s,1),s--,r=0;else if(r++>3*s)break}return o.push(n[0],n[1],n[2]),o},_PointInTriangle:function(t,e,i,o,n,r,s,a){var c=s-i,h=a-o,u=n-i,l=r-o,p=t-i,d=e-o,f=c*c+h*h,v=c*u+h*l,m=c*p+h*d,y=u*u+l*l,g=u*p+l*d,_=1/(f*y-v*v),A=(y*m-v*g)*_,b=(f*g-v*m)*_;return A>=0&&b>=0&&A+b<1},_convex:function(t,e,i,o,n,r){return(e-o)*(n-i)+(i-t)*(r-o)>=0}};t.exports=i},function(t,e,i){var o=i(14),n=i(6);i(11);function r(t){if(Array.isArray(arguments[0])){if(t={heights:arguments[0]},"object"==typeof arguments[1])for(var e in arguments[1])t[e]=arguments[1][e];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}t=t||{},this.heights=t.heights?t.heights.slice(0):[],this.maxValue=t.maxValue||null,this.minValue=t.minValue||null,this.elementWidth=t.elementWidth||.1,void 0!==t.maxValue&&void 0!==t.minValue||this.updateMaxMinValues(),t.type=o.HEIGHTFIELD,o.call(this,t)}t.exports=r,r.prototype=new o,r.prototype.constructor=r,r.prototype.updateMaxMinValues=function(){for(var t=this.heights,e=t[0],i=t[0],o=0;o!==t.length;o++){var n=t[o];n>e&&(e=n),n<i&&(i=n)}this.maxValue=e,this.minValue=i},r.prototype.computeMomentOfInertia=function(t){return Number.MAX_VALUE},r.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},r.prototype.updateArea=function(){for(var t=this.heights,e=0,i=0;i<t.length-1;i++)e+=(t[i]+t[i+1])/2*this.elementWidth;this.area=e};var s=[n.create(),n.create(),n.create(),n.create()];r.prototype.computeAABB=function(t,e,i){n.set(s[0],0,this.maxValue),n.set(s[1],this.elementWidth*this.heights.length,this.maxValue),n.set(s[2],this.elementWidth*this.heights.length,this.minValue),n.set(s[3],0,this.minValue),t.setFromPoints(s,e,i)},r.prototype.getLineSegment=function(t,e,i){var o=this.heights,r=this.elementWidth;n.set(t,i*r,o[i]),n.set(e,(i+1)*r,o[i+1])},r.prototype.getSegmentIndex=function(t){return Math.floor(t[0]/this.elementWidth)},r.prototype.getClampedSegmentIndex=function(t){var e=this.getSegmentIndex(t);return e=Math.min(this.heights.length,Math.max(e,0))};n.create();var a=n.create(),c=n.create(),h=n.create(),u=n.create(),l=n.create();n.fromValues(0,1);r.prototype.raycast=function(t,e,i,o){var r=e.from,s=e.to,p=(e.direction,a),d=c,f=h,v=u,m=l;n.toLocalFrame(v,r,i,o),n.toLocalFrame(m,s,i,o);var y=this.getClampedSegmentIndex(v),g=this.getClampedSegmentIndex(m);if(y>g){var _=y;y=g,g=_}for(var A=0;A<this.heights.length-1;A++){this.getLineSegment(d,f,A);var b=n.getLineSegmentsIntersectionFraction(v,m,d,f);if(b>=0&&(n.sub(p,f,d),n.rotate(p,p,o+Math.PI/2),n.normalize(p,p),e.reportIntersection(t,b,p,-1),t.shouldStop(e)))return}}},function(t,e,i){i(39),i(47),i(14),i(48);var o=i(38);i(6);function n(){o.call(this,o.NAIVE)}t.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.getCollisionPairs=function(t){var e=t.bodies,i=this.result;i.length=0;for(var n=0,r=e.length;n!==r;n++)for(var s=e[n],a=0;a<n;a++){var c=e[a];o.canCollide(s,c)&&this.boundingVolumeCheck(s,c)&&i.push(s,c)}return i},n.prototype.aabbQuery=function(t,e,i){i=i||[];for(var o=t.bodies,n=0;n<o.length;n++){var r=o[n];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(e)&&i.push(r)}return i}},function(t,e,i){var o=i(6),n=(i(11),i(19)),r=i(31),s=i(18);function a(t,e){e=e||{},this.chassisBody=t,this.wheels=[],this.groundBody=new s({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function c(t,e){e=e||{},this.vehicle=t,this.forwardEquation=new r(t.chassisBody,t.groundBody),this.sideEquation=new r(t.chassisBody,t.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==e.sideFriction?e.sideFriction:5),this.localForwardVector=o.fromValues(0,1),e.localForwardVector&&o.copy(this.localForwardVector,e.localForwardVector),this.localPosition=o.fromValues(0,0),e.localPosition&&o.copy(this.localPosition,e.localPosition),n.apply(this,t.chassisBody,t.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}t.exports=a,a.prototype.addToWorld=function(t){this.world=t,t.addBody(this.groundBody),t.on("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var i=this.wheels[e];t.addConstraint(i)}},a.prototype.removeFromWorld=function(){var t=this.world;t.removeBody(this.groundBody),t.off("preStep",this.preStepCallback);for(var e=0;e<this.wheels.length;e++){var i=this.wheels[e];t.removeConstraint(i)}this.world=null},a.prototype.addWheel=function(t){var e=new c(this,t);return this.wheels.push(e),e},a.prototype.update=function(){for(var t=0;t<this.wheels.length;t++)this.wheels[t].update()},c.prototype=new n,c.prototype.setBrakeForce=function(t){this.forwardEquation.setSlipForce(t)},c.prototype.setSideFriction=function(t){this.sideEquation.setSlipForce(t)};var h=o.create(),u=o.create();c.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(u,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(h,u),o.dot(h,u)};var l=o.create();c.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),o.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),o.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),o.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),o.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),o.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),o.normalize(l,this.forwardEquation.t),o.scale(l,l,this.engineForce),this.vehicle.chassisBody.applyForce(l,this.forwardEquation.contactPointA)}},function(t,e,i){var o=i(69),n=(i(46),i(36),i(6)),r=i(39),s=i(30),a=(i(70),i(47)),c=i(63),h=i(48),u=i(37),l=i(18),p=(i(14),i(80),i(45)),d=i(65),f=(i(66),i(19),i(71),i(75),i(78),i(68),i(82),i(38),i(35)),v=i(79),m=i(72),y=i(11),g=i(113),_=i(115);i(81);function A(t){u.apply(this),t=t||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=t.solver||new o,this.narrowphase=new m(this),this.islandManager=new _,this.gravity=n.fromValues(0,-9.78),t.gravity&&n.copy(this.gravity,t.gravity),this.frictionGravity=n.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=t.broadphase||new v,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new p,this.defaultContactMaterial=new d(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===t.islandSplit||!!t.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=A.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new g}t.exports=A,A.prototype=new Object(u.prototype),A.prototype.constructor=A,A.NO_SLEEPING=1,A.BODY_SLEEPING=2,A.ISLAND_SLEEPING=4,A.prototype.addConstraint=function(t){this.constraints.push(t)},A.prototype.addContactMaterial=function(t){this.contactMaterials.push(t)},A.prototype.removeContactMaterial=function(t){var e=this.contactMaterials.indexOf(t);-1!==e&&y.splice(this.contactMaterials,e,1)},A.prototype.getContactMaterial=function(t,e){for(var i=this.contactMaterials,o=0,n=i.length;o!==n;o++){var r=i[o];if(r.materialA.id===t.id&&r.materialB.id===e.id||r.materialA.id===e.id&&r.materialB.id===t.id)return r}return!1},A.prototype.removeConstraint=function(t){var e=this.constraints.indexOf(t);-1!==e&&y.splice(this.constraints,e,1)};n.create(),n.create(),n.create(),n.create(),n.create(),n.create();var b=n.create(),w=n.fromValues(0,0),x=n.fromValues(0,0);n.fromValues(0,0),n.fromValues(0,0);A.prototype.step=function(t,e,i){if(i=i||10,0===(e=e||0))this.internalStep(t),this.time+=t;else{this.accumulator+=e;for(var o=0;this.accumulator>=t&&o<i;)this.internalStep(t),this.time+=t,this.accumulator-=t,o++;for(var r=this.accumulator%t/t,s=0;s!==this.bodies.length;s++){var a=this.bodies[s];n.lerp(a.interpolatedPosition,a.previousPosition,a.position,r),a.interpolatedAngle=a.previousAngle+r*(a.angle-a.previousAngle)}}};var S=[];A.prototype.internalStep=function(t){this.stepping=!0;var e=this.springs.length,i=this.springs,o=this.bodies,r=this.gravity,s=this.solver,a=this.bodies.length,c=this.broadphase,h=this.narrowphase,u=this.constraints,p=b,d=(n.scale,n.add),f=(n.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=t,this.useWorldGravityAsFrictionGravity){var v=n.length(this.gravity);0===v&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=v)}if(this.applyGravity)for(var m=0;m!==a;m++){var g=(_=o[m]).force;_.type===l.DYNAMIC&&_.sleepState!==l.SLEEPING&&(n.scale(p,r,_.mass*_.gravityScale),d(g,g,p))}if(this.applySpringForces)for(m=0;m!==e;m++){i[m].applyForce()}if(this.applyDamping)for(m=0;m!==a;m++){var _;(_=o[m]).type===l.DYNAMIC&&_.applyDamping(t)}var w=c.getCollisionPairs(this),x=this.disabledBodyCollisionPairs;for(m=x.length-2;m>=0;m-=2)for(var P=w.length-2;P>=0;P-=2)(x[m]===w[P]&&x[m+1]===w[P+1]||x[m+1]===w[P]&&x[m]===w[P+1])&&w.splice(P,2);var E=u.length;for(m=0;m!==E;m++){var B=u[m];if(!B.collideConnected)for(P=w.length-2;P>=0;P-=2)(B.bodyA===w[P]&&B.bodyB===w[P+1]||B.bodyB===w[P]&&B.bodyA===w[P+1])&&w.splice(P,2)}this.postBroadphaseEvent.pairs=w,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,h.reset(this);m=0;for(var L=w.length;m!==L;m+=2)for(var C=w[m],T=w[m+1],M=0,F=C.shapes.length;M!==F;M++)for(var I=C.shapes[M],q=I.position,R=I.angle,O=0,V=T.shapes.length;O!==V;O++){var k=T.shapes[O],G=k.position,N=k.angle,D=this.defaultContactMaterial;if(I.material&&k.material){var U=this.getContactMaterial(I.material,k.material);U&&(D=U)}this.runNarrowphase(h,C,I,q,R,T,k,G,N,D,this.frictionGravity)}for(m=0;m!==a;m++){(X=o[m])._wakeUpAfterNarrowphase&&(X.wakeUp(),X._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(S);var H=this.endContactEvent;for(O=S.length;O--;){var W=S[O];H.shapeA=W.shapeA,H.shapeB=W.shapeB,H.bodyA=W.bodyA,H.bodyB=W.bodyB,this.emit(H)}S.length=0}var z=this.preSolveEvent;z.contactEquations=h.contactEquations,z.frictionEquations=h.frictionEquations,this.emit(z),z.contactEquations=z.frictionEquations=null;E=u.length;for(m=0;m!==E;m++)u[m].update();if(h.contactEquations.length||h.frictionEquations.length||E)if(this.islandSplit){for(f.equations.length=0,y.appendArray(f.equations,h.contactEquations),y.appendArray(f.equations,h.frictionEquations),m=0;m!==E;m++)y.appendArray(f.equations,u[m].equations);f.split(this);for(m=0;m!==f.islands.length;m++){(K=f.islands[m]).equations.length&&s.solveIsland(t,K)}}else{for(s.addEquations(h.contactEquations),s.addEquations(h.frictionEquations),m=0;m!==E;m++)s.addEquations(u[m].equations);this.solveConstraints&&s.solve(t,this),s.removeAllEquations()}for(m=0;m!==a;m++){var X;(X=o[m]).integrate(t)}for(m=0;m!==a;m++)o[m].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var j=this.impactEvent;for(m=0;m!==h.contactEquations.length;m++){var Y=h.contactEquations[m];Y.firstImpact&&(j.bodyA=Y.bodyA,j.bodyB=Y.bodyB,j.shapeA=Y.shapeA,j.shapeB=Y.shapeB,j.contactEquation=Y,this.emit(j))}}if(this.sleepMode===A.BODY_SLEEPING)for(m=0;m!==a;m++)o[m].sleepTick(this.time,!1,t);else if(this.sleepMode===A.ISLAND_SLEEPING&&this.islandSplit){for(m=0;m!==a;m++)o[m].sleepTick(this.time,!0,t);for(m=0;m<this.islandManager.islands.length;m++){var K;(K=this.islandManager.islands[m]).wantsToSleep()&&K.sleep()}}this.stepping=!1;var Z=this.bodiesToBeRemoved;for(m=0;m!==Z.length;m++)this.removeBody(Z[m]);Z.length=0,this.emit(this.postStepEvent)},A.prototype.runNarrowphase=function(t,e,i,o,r,s,a,c,h,u,p){if(0!=(i.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&i.collisionMask)){n.rotate(w,o,e.angle),n.rotate(x,c,s.angle),n.add(w,w,e.position),n.add(x,x,s.position);var d,f=r+e.angle,v=h+s.angle;t.enableFriction=u.friction>0,t.frictionCoefficient=u.friction,d=e.type===l.STATIC||e.type===l.KINEMATIC?s.mass:s.type===l.STATIC||s.type===l.KINEMATIC?e.mass:e.mass*s.mass/(e.mass+s.mass),t.slipForce=u.friction*p*d,t.restitution=u.restitution,t.surfaceVelocity=u.surfaceVelocity,t.frictionStiffness=u.frictionStiffness,t.frictionRelaxation=u.frictionRelaxation,t.stiffness=u.stiffness,t.relaxation=u.relaxation,t.contactSkinSize=u.contactSkinSize,t.enabledEquations=e.collisionResponse&&s.collisionResponse&&i.collisionResponse&&a.collisionResponse;var m=t[i.type|a.type],y=0;if(m){var g=i.sensor||a.sensor,_=t.frictionEquations.length;y=i.type<a.type?m.call(t,e,i,w,f,s,a,x,v,g):m.call(t,s,a,x,v,e,i,w,f,g);var A=t.frictionEquations.length-_;if(y){if(e.allowSleep&&e.type===l.DYNAMIC&&e.sleepState===l.SLEEPING&&s.sleepState===l.AWAKE&&s.type!==l.STATIC)n.squaredLength(s.velocity)+Math.pow(s.angularVelocity,2)>=2*Math.pow(s.sleepSpeedLimit,2)&&(e._wakeUpAfterNarrowphase=!0);if(s.allowSleep&&s.type===l.DYNAMIC&&s.sleepState===l.SLEEPING&&e.sleepState===l.AWAKE&&e.type!==l.STATIC)n.squaredLength(e.velocity)+Math.pow(e.angularVelocity,2)>=2*Math.pow(e.sleepSpeedLimit,2)&&(s._wakeUpAfterNarrowphase=!0);if(this.overlapKeeper.setOverlapping(e,i,s,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,a)){var b=this.beginContactEvent;if(b.shapeA=i,b.shapeB=a,b.bodyA=e,b.bodyB=s,b.contactEquations.length=0,"number"==typeof y)for(var S=t.contactEquations.length-y;S<t.contactEquations.length;S++)b.contactEquations.push(t.contactEquations[S]);this.emit(b)}if("number"==typeof y&&A>1)for(S=t.frictionEquations.length-A;S<t.frictionEquations.length;S++){var P=t.frictionEquations[S];P.setSlipForce(P.getSlipForce()/A)}}}}},A.prototype.addSpring=function(t){this.springs.push(t);var e=this.addSpringEvent;e.spring=t,this.emit(e),e.spring=null},A.prototype.removeSpring=function(t){var e=this.springs.indexOf(t);-1!==e&&y.splice(this.springs,e,1)},A.prototype.addBody=function(t){if(-1===this.bodies.indexOf(t)){this.bodies.push(t),t.world=this;var e=this.addBodyEvent;e.body=t,this.emit(e),e.body=null}},A.prototype.removeBody=function(t){if(this.stepping)this.bodiesToBeRemoved.push(t);else{t.world=null;var e=this.bodies.indexOf(t);-1!==e&&(y.splice(this.bodies,e,1),this.removeBodyEvent.body=t,t.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},A.prototype.getBodyById=function(t){for(var e=this.bodies,i=0;i<e.length;i++){var o=e[i];if(o.id===t)return o}return!1},A.prototype.disableBodyCollision=function(t,e){this.disabledBodyCollisionPairs.push(t,e)},A.prototype.enableBodyCollision=function(t,e){for(var i=this.disabledBodyCollisionPairs,o=0;o<i.length;o+=2)if(i[o]===t&&i[o+1]===e||i[o+1]===t&&i[o]===e)return void i.splice(o,2)},A.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var t=this.constraints,e=t.length-1;e>=0;e--)this.removeConstraint(t[e]);var i=this.bodies;for(e=i.length-1;e>=0;e--)this.removeBody(i[e]);var o=this.springs;for(e=o.length-1;e>=0;e--)this.removeSpring(o[e]);var n=this.contactMaterials;for(e=n.length-1;e>=0;e--)this.removeContactMaterial(n[e]);A.apply(this)};var P=n.create(),E=(n.fromValues(0,0),n.fromValues(0,0));A.prototype.hitTest=function(t,e,i){i=i||0;var o=new l({position:t}),u=new h,p=t,d=P,f=E;o.addShape(u);for(var v=this.narrowphase,m=[],y=0,g=e.length;y!==g;y++)for(var _=e[y],A=0,b=_.shapes.length;A!==b;A++){var w=_.shapes[A];n.rotate(d,w.position,_.angle),n.add(d,d,_.position);var x=w.angle+_.angle;(w instanceof r&&v.circleParticle(_,w,d,x,o,u,p,0,!0)||w instanceof s&&v.particleConvex(o,u,p,0,_,w,d,x,!0)||w instanceof a&&v.particlePlane(o,u,p,0,_,w,d,x,!0)||w instanceof c&&v.particleCapsule(o,u,p,0,_,w,d,x,!0)||w instanceof h&&n.squaredLength(n.sub(f,d,t))<i*i)&&m.push(_)}return m},A.prototype.setGlobalStiffness=function(t){for(var e=this.constraints,i=0;i!==e.length;i++)for(var o=e[i],n=0;n!==o.equations.length;n++){var r=o.equations[n];r.stiffness=t,r.needsUpdate=!0}var s=this.contactMaterials;for(i=0;i!==s.length;i++){(o=s[i]).stiffness=o.frictionStiffness=t}(o=this.defaultContactMaterial).stiffness=o.frictionStiffness=t},A.prototype.setGlobalRelaxation=function(t){for(var e=0;e!==this.constraints.length;e++)for(var i=this.constraints[e],o=0;o!==i.equations.length;o++){var n=i.equations[o];n.relaxation=t,n.needsUpdate=!0}for(e=0;e!==this.contactMaterials.length;e++){(i=this.contactMaterials[e]).relaxation=i.frictionRelaxation=t}(i=this.defaultContactMaterial).relaxation=i.frictionRelaxation=t};var B=new f,L=[];A.prototype.raycast=function(t,e){return e.getAABB(B),this.broadphase.aabbQuery(this,B,L),e.intersectBodies(t,L),L.length=0,t.hasHit()}},function(t,e,i){var o=i(73),n=(i(83),i(114));i(11);function r(){this.overlappingShapesLastState=new o,this.overlappingShapesCurrentState=new o,this.recordPool=new n({size:16}),this.tmpDict=new o,this.tmpArray1=[]}t.exports=r,r.prototype.tick=function(){for(var t=this.overlappingShapesLastState,e=this.overlappingShapesCurrentState,i=t.keys.length;i--;){var o=t.keys[i],n=t.getByKey(o);e.getByKey(o);n&&this.recordPool.release(n)}t.reset(),t.copy(e),e.reset()},r.prototype.setOverlapping=function(t,e,i,o){this.overlappingShapesLastState;var n=this.overlappingShapesCurrentState;if(!n.get(e.id,o.id)){var r=this.recordPool.get();r.set(t,e,i,o),n.set(e.id,o.id,r)}},r.prototype.getNewOverlaps=function(t){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,t)},r.prototype.getEndOverlaps=function(t){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,t)},r.prototype.bodiesAreOverlapping=function(t,e){for(var i=this.overlappingShapesCurrentState,o=i.keys.length;o--;){var n=i.keys[o],r=i.data[n];if(r.bodyA===t&&r.bodyB===e||r.bodyA===e&&r.bodyB===t)return!0}return!1},r.prototype.getDiff=function(t,e,i){var o=t,n=e;(i=i||[]).length=0;for(var r=n.keys.length;r--;){var s=n.keys[r],a=n.data[s];if(!a)throw new Error("Key "+s+" had no data!");o.data[s]||i.push(a)}return i},r.prototype.isNewOverlap=function(t,e){var i=0|t.id,o=0|e.id,n=this.overlappingShapesLastState,r=this.overlappingShapesCurrentState;return!n.get(i,o)&&!!r.get(i,o)},r.prototype.getNewBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},r.prototype.getEndBodyOverlaps=function(t){this.tmpArray1.length=0;var e=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(e,t)},r.prototype.getBodyDiff=function(t,e){e=e||[];for(var i=this.tmpDict,o=t.length;o--;){var n=t[o];i.set(0|n.bodyA.id,0|n.bodyB.id,n)}for(o=i.keys.length;o--;){(n=i.getByKey(i.keys[o]))&&e.push(n.bodyA,n.bodyB)}return i.reset(),e}},function(t,e,i){var o=i(83),n=i(24);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new o},r.prototype.destroy=function(t){return t.bodyA=t.bodyB=t.shapeA=t.shapeB=null,this}},function(t,e,i){i(6),i(84),i(85);var o=i(116),n=i(117),r=i(18);function s(t){this.nodePool=new o({size:16}),this.islandPool=new n({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}t.exports=s,s.getUnvisitedNode=function(t){for(var e=t.length,i=0;i!==e;i++){var o=t[i];if(!o.visited&&o.body.type===r.DYNAMIC)return o}return!1},s.prototype.visit=function(t,e,i){e.push(t.body);for(var o=t.equations.length,n=0;n!==o;n++){var r=t.equations[n];-1===i.indexOf(r)&&i.push(r)}},s.prototype.bfs=function(t,e,i){var o=this.queue;for(o.length=0,o.push(t),t.visited=!0,this.visit(t,e,i);o.length;)for(var n,a=o.pop();n=s.getUnvisitedNode(a.neighbors);)n.visited=!0,this.visit(n,e,i),n.body.type===r.DYNAMIC&&o.push(n)},s.prototype.split=function(t){for(var e=t.bodies,i=this.nodes,o=this.equations;i.length;)this.nodePool.release(i.pop());for(var n=0;n!==e.length;n++){var r=this.nodePool.get();r.body=e[n],i.push(r)}for(var a=0;a!==o.length;a++){var c=o[a],h=(n=e.indexOf(c.bodyA),e.indexOf(c.bodyB)),u=i[n],l=i[h];u.neighbors.push(l),l.neighbors.push(u),u.equations.push(c),l.equations.push(c)}var p,d=this.islands;for(n=0;n<d.length;n++)this.islandPool.release(d[n]);for(d.length=0;p=s.getUnvisitedNode(i);){var f=this.islandPool.get();this.bfs(p,f.bodies,f.equations),d.push(f)}return d}},function(t,e,i){var o=i(85),n=i(24);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new o},r.prototype.destroy=function(t){return t.reset(),this}},function(t,e,i){var o=i(84),n=i(24);function r(){n.apply(this,arguments)}t.exports=r,r.prototype=new n,r.prototype.constructor=r,r.prototype.create=function(){return new o},r.prototype.destroy=function(t){return t.reset(),this}},,function(t,e,i){(function(i){var o;
/*!
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var n=function(){this.init()};n.prototype={init:function(){var t=this||r;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||r;if(t=parseFloat(t),e.ctx||d(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),n=0;n<o.length;n++){var s=e._howls[i]._soundById(o[n]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||r;e.ctx||d(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),n=0;n<o.length;n++){var s=e._howls[i]._soundById(o[n]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},unload:function(){for(var t=this||r,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,d()),t},codecs:function(t){return(this||r)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||r;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||r,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),o=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),n=o&&parseInt(o[0].split("/")[1],10)<33;return t._codecs={mp3:!(n||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||r;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(var o=0;o<t.html5PoolSize;o++)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0}for(o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var r=t._howls[o]._getSoundIds(),s=0;s<r.length;s++){var a=t._howls[o]._soundById(r[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var c=t.ctx.createBufferSource();c.buffer=t._scratchBuffer,c.connect(t.ctx.destination),void 0===c.start?c.noteOn(0):c.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),c.onended=function(){c.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||r;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||r;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&r.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then((function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())})))}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&r.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var r=new n,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return r.ctx||d(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=r.usingWebAudio&&!e._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=null;if(r.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var i,o;if(this._format&&this._format[e])i=this._format[e];else{if("string"!=typeof(o=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(o))||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&r.codecs(i)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&h(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,o=null;if("number"==typeof t)o=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var n=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(n++,o=i._sounds[s]._id);1===n?t=null:o=null}}var a=o?i._soundById(o):i._inactiveSound();if(!a)return null;if(o&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var c=a._id;return i._queue.push({event:"play",action:function(){i.play(c)}}),c}if(o&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&r._autoResume();var h=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),u=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-h),l=1e3*u/Math.abs(a._rate),p=i._sprite[t][0]/1e3,d=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=h,a._start=p,a._stop=d,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(h>=d)){var v=a._node;if(i._webAudio){var m=function(){i._playLock=!1,f(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;v.gain.setValueAtTime(t,r.ctx.currentTime),a._playStart=r.ctx.currentTime,void 0===v.bufferSource.start?a._loop?v.bufferSource.noteGrainOn(0,h,86400):v.bufferSource.noteGrainOn(0,h,u):a._loop?v.bufferSource.start(0,h,86400):v.bufferSource.start(0,h,u),l!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),l)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===r.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(a._id))}else{var y=function(){v.currentTime=h,v.muted=a._muted||i._muted||r._muted||v.muted,v.volume=a._volume*r.volume(),v.playbackRate=a._rate;try{var o=v.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(i._playLock=!0,f(),o.then((function(){i._playLock=!1,v._unlocked=!0,e||(i._emit("play",a._id),i._loadQueue())})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",a._id),i._loadQueue()),v.playbackRate=a._rate,v.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),l):(i._endTimers[a._id]=function(){i._ended(a),v.removeEventListener("ended",i._endTimers[a._id],!1)},v.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===v.src&&(v.src=i._src,v.load());var g=window&&window.ejecta||!v.readyState&&r._navigator.isCocoonJS;if(v.readyState>=3||g)y();else{i._playLock=!0;var _=function(){y(),v.removeEventListener(r._canPlayEvent,_,!1)};v.addEventListener(r._canPlayEvent,_,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),o=0;o<i.length;o++){e._clearTimer(i[o]);var n=e._soundById(i[o]);if(n&&!n._paused&&(n._seek=e.seek(i[o]),n._rateSeek=0,n._paused=!0,e._stopFade(i[o]),n._node))if(e._webAudio){if(!n._node.bufferSource)continue;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),e._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||e._emit("pause",n?n._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var o=i._getSoundIds(t),n=0;n<o.length;n++){i._clearTimer(o[n]);var r=i._soundById(o[n]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(o[n]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&i._clearSound(r._node))),e||i._emit("stop",r._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var o=i._getSoundIds(e),n=0;n<o.length;n++){var s=i._soundById(o[n]);s&&(s._muted=t,s._interval&&i._stopFade(s._id),i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,r.ctx.currentTime):s._node&&(s._node.muted=!!r._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i,o=this,n=arguments;if(0===n.length)return o._volume;if(1===n.length||2===n.length&&void 0===n[1]){var s=o._getSoundIds(),a=s.indexOf(n[0]);a>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else n.length>=2&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?o._soundById(e):o._sounds[0])?i._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,n)}}),o;void 0===e&&(o._volume=t),e=o._getSoundIds(e);for(var c=0;c<e.length;c++)(i=o._soundById(e[c]))&&(i._volume=t,n[2]||o._stopFade(e[c]),o._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,r.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*r.volume()),o._emit("volume",i._id));return o},fade:function(t,e,i,o){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"fade",action:function(){n.fade(t,e,i,o)}}),n;t=parseFloat(t),e=parseFloat(e),i=parseFloat(i),n.volume(t,o);for(var s=n._getSoundIds(o),a=0;a<s.length;a++){var c=n._soundById(s[a]);if(c){if(o||n._stopFade(s[a]),n._webAudio&&!c._muted){var h=r.ctx.currentTime,u=h+i/1e3;c._volume=t,c._node.gain.setValueAtTime(t,h),c._node.gain.linearRampToValueAtTime(e,u)}n._startFadeInterval(c,t,e,i,s[a],void 0===o)}}return n},_startFadeInterval:function(t,e,i,o,n,r){var s=this,a=e,c=i-e,h=Math.abs(c/.01),u=Math.max(4,h>0?o/h:o),l=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var n=(Date.now()-l)/o;l=Date.now(),a+=c*n,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,s._webAudio?t._volume=a:s.volume(a,t._id,!0),r&&(s._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(i,t._id),s._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,o=this,n=arguments;if(0===n.length)return o._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(i=o._soundById(parseInt(n[0],10)))&&i._loop;t=n[0],o._loop=t}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var r=o._getSoundIds(e),s=0;s<r.length;s++)(i=o._soundById(r[s]))&&(i._loop=t,o._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return o},rate:function(){var t,e,i,o=this,n=arguments;if(0===n.length)e=o._sounds[0]._id;else if(1===n.length){var s=o._getSoundIds(),a=s.indexOf(n[0]);a>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("number"!=typeof t)return(i=o._soundById(e))?i._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,n)}}),o;void 0===e&&(o._rate=t),e=o._getSoundIds(e);for(var c=0;c<e.length;c++)if(i=o._soundById(e[c])){o.playing(e[c])&&(i._rateSeek=o.seek(e[c]),i._playStart=o._webAudio?r.ctx.currentTime:i._playStart),i._rate=t,o._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):i._node&&(i._node.playbackRate=t);var h=o.seek(e[c]),u=(o._sprite[i._sprite][0]+o._sprite[i._sprite][1])/1e3-h,l=1e3*u/Math.abs(i._rate);!o._endTimers[e[c]]&&i._paused||(o._clearTimer(e[c]),o._endTimers[e[c]]=setTimeout(o._ended.bind(o,i),l)),o._emit("rate",i._id)}return o},seek:function(){var t,e,i=this,o=arguments;if(0===o.length)e=i._sounds[0]._id;else if(1===o.length){var n=i._getSoundIds(),s=n.indexOf(o[0]);s>=0?e=parseInt(o[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(o[0]))}else 2===o.length&&(t=parseFloat(o[0]),e=parseInt(o[1],10));if(void 0===e)return i;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,o)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var c=i.playing(e)?r.ctx.currentTime-a._playStart:0,h=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(h+c*Math.abs(a._rate))}return a._node.currentTime}var u=i.playing(e);u&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),i._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var l=function(){i._emit("seek",e),u&&i.play(e,!0)};if(u&&!i._webAudio){var p=function(){i._playLock?setTimeout(p,0):l()};setTimeout(p,0)}else l()}return i},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var i=0;i<this._sounds.length;i++)if(!this._sounds[i]._paused)return!0;return!1},duration:function(t){var e=this._duration,i=this._soundById(t);return i&&(e=this._sprite[i._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(r._canPlayEvent,e[i]._loadFn,!1),r._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var o=r._howls.indexOf(t);o>=0&&r._howls.splice(o,1);var n=!0;for(i=0;i<r._howls.length;i++)if(r._howls[i]._src===t._src||t._src.indexOf(r._howls[i]._src)>=0){n=!1;break}return c&&n&&delete c[t._src],r.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,o){var n=this["_on"+t];return"function"==typeof e&&n.push(o?{id:i,fn:e,once:o}:{id:i,fn:e}),this},off:function(t,e,i){var o=this["_on"+t],n=0;if("number"==typeof e&&(i=e,e=null),e||i)for(n=0;n<o.length;n++){var r=i===o[n].id;if(e===o[n].fn&&r||!e&&r){o.splice(n,1);break}}else if(t)this["_on"+t]=[];else{var s=Object.keys(this);for(n=0;n<s.length;n++)0===s[n].indexOf("_on")&&Array.isArray(this[s[n]])&&(this[s[n]]=[])}return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var o=this["_on"+t],n=o.length-1;n>=0;n--)o[n].id&&o[n].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,o[n].fn),0),o[n].once&&this.off(t,o[n].fn,o[n].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=r.ctx.currentTime;var o=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),o)}return this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),r._autoSuspend()),this._webAudio||i||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new a(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;i>=0;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=r.ctx.createBufferSource(),t._node.bufferSource.buffer=c[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,r.ctx.currentTime),this},_cleanBuffer:function(t){var e=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=r._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=r._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),this._node.gain.setValueAtTime(e,r.ctx.currentTime),this._node.paused=!0,this._node.connect(r.masterGain)):r.noAudio||(this._node=r._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(r._canPlayEvent,this._loadFn,!1),this._node.src=t._src,this._node.preload="auto",this._node.volume=e*r.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++r._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(r._canPlayEvent,this._loadFn,!1)}};var c={},h=function(t){var e=t._src;if(c[e])return t._duration=c[e].duration,void p(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),o=new Uint8Array(i.length),n=0;n<i.length;++n)o[n]=i.charCodeAt(n);l(o.buffer,t)}else{var r=new XMLHttpRequest;r.open("GET",e,!0),r.withCredentials=t._xhrWithCredentials,r.responseType="arraybuffer",r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?l(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete c[e],t.load())},u(r)}},u=function(t){try{t.send()}catch(e){t.onerror()}},l=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},o=function(t){t&&e._sounds.length>0?(c[e._src]=t,p(e,t)):i()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(t).then(o).catch(i):r.ctx.decodeAudioData(t,o,i)},p=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},d=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(t){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),e=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var o=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());(r._navigator&&r._navigator.standalone&&!o||r._navigator&&!r._navigator.standalone&&!o)&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(o=function(){return{Howler:r,Howl:s}}.apply(e,[]))||(t.exports=o),e.Howler=r,e.Howl=s,"undefined"!=typeof window?(window.HowlerGlobal=n,window.Howler=r,window.Howl=s,window.Sound=a):void 0!==i&&(i.HowlerGlobal=n,i.Howler=r,i.Howl=s,i.Sound=a)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,o,n,r){if(!this.ctx||!this.ctx.listener)return this;var s=this._orientation;return e="number"!=typeof e?s[1]:e,i="number"!=typeof i?s[2]:i,o="number"!=typeof o?s[3]:o,n="number"!=typeof n?s[4]:n,r="number"!=typeof r?s[5]:r,"number"!=typeof t?s:(this._orientation=[t,e,i,o,n,r],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,i,o,n,r),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(t,i)}}),o;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0]}for(var r=o._getSoundIds(i),s=0;s<r.length;s++){var a=o._soundById(r[s]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,n),"spatial"===n?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),o._emit("stereo",a._id)}}return o},Howl.prototype.pos=function(t,i,o,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,i,o,n)}}),r;if(i="number"!=typeof i?0:i,o="number"!=typeof o?-.5:o,void 0===n){if("number"!=typeof t)return r._pos;r._pos=[t,i,o]}for(var s=r._getSoundIds(n),a=0;a<s.length;a++){var c=r._soundById(s[a]);if(c){if("number"!=typeof t)return c._pos;c._pos=[t,i,o],c._node&&(c._panner&&!c._panner.pan||e(c,"spatial"),void 0!==c._panner.positionX?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):c._panner.setPosition(t,i,o)),r._emit("pos",c._id)}}return r},Howl.prototype.orientation=function(t,i,o,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,i,o,n)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,o="number"!=typeof o?r._orientation[2]:o,void 0===n){if("number"!=typeof t)return r._orientation;r._orientation=[t,i,o]}for(var s=r._getSoundIds(n),a=0;a<s.length;a++){var c=r._soundById(s[a]);if(c){if("number"!=typeof t)return c._orientation;c._orientation=[t,i,o],c._node&&(c._panner||(c._pos||(c._pos=r._pos||[0,0,-.5]),e(c,"spatial")),void 0!==c._panner.orientationX?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):c._panner.setOrientation(t,i,o)),r._emit("orientation",c._id)}}return r},Howl.prototype.pannerAttr=function(){var t,i,o,n=this,r=arguments;if(!n._webAudio)return n;if(0===r.length)return n._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(o=n._soundById(parseInt(r[0],10)))?o._pannerAttr:n._pannerAttr;t=r[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===r.length&&(t=r[0],i=parseInt(r[1],10));for(var s=n._getSoundIds(i),a=0;a<s.length;a++)if(o=n._soundById(s[a])){var c=o._pannerAttr;c={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:c.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:c.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:c.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:c.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:c.panningModel};var h=o._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,i(22))}]]);