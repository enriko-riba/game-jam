(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./app.ts":
/*!****************!*\
  !*** ./app.ts ***!
  \****************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _1 = __webpack_require__(/*! . */ \"./index.ts\");\r\nvar BootScene_1 = __webpack_require__(/*! ./scenes/BootScene */ \"./scenes/BootScene.ts\");\r\n/**\r\n *  Here we just preload fonts via google webfont.js\r\n *  after the fonts are loaded the bootstraper is taking over\r\n */\r\nvar PRELOAD_FONTS = [\r\n    'Permanent Marker',\r\n    'Orbitron'\r\n];\r\n//------------------------\r\n// webfont loader config\r\n//------------------------\r\nconsole.log('initializing google webfont loader ...', PRELOAD_FONTS);\r\ntry {\r\n    var cfg = {\r\n        google: { families: PRELOAD_FONTS },\r\n        active: function () {\r\n            console.log('fonts preload finished!');\r\n            var scm = _1.Global.getScm();\r\n            var boot = new BootScene_1.BootScene(scm);\r\n            scm.AddScene(boot);\r\n            scm.ActivateScene(boot);\r\n        }\r\n    };\r\n    window.WebFontConfig = cfg;\r\n}\r\ncatch (e) {\r\n    console.log(e);\r\n}\r\n//------------------------\r\n// start webfont loader\r\n//------------------------\r\n/* jshint ignore:start */\r\n{\r\n    var src = ('https:' === document.location.protocol ? 'https' : 'http') +\r\n        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';\r\n    var wf = document.createElement('script');\r\n    wf.src = src;\r\n    wf.type = 'text/javascript';\r\n    wf.async = true;\r\n    var s = document.getElementsByTagName('script')[0];\r\n    if (s.parentNode)\r\n        s.parentNode.insertBefore(wf, s);\r\n}\r\n;\r\n/* jshint ignore:end */ \r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAudHM/YWE4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHbG9iYWwgfSBmcm9tICcuJztcclxuaW1wb3J0IHsgQm9vdFNjZW5lIH0gZnJvbSAnLi9zY2VuZXMvQm9vdFNjZW5lJztcclxuXHJcblxyXG4vKipcclxuICogIEhlcmUgd2UganVzdCBwcmVsb2FkIGZvbnRzIHZpYSBnb29nbGUgd2ViZm9udC5qc1xyXG4gKiAgYWZ0ZXIgdGhlIGZvbnRzIGFyZSBsb2FkZWQgdGhlIGJvb3RzdHJhcGVyIGlzIHRha2luZyBvdmVyXHJcbiAqL1xyXG5cclxuY29uc3QgUFJFTE9BRF9GT05UUyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1Blcm1hbmVudCBNYXJrZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnT3JiaXRyb24nXHJcbiAgICAgICAgICAgICAgICAgICAgXTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIHdlYmZvbnQgbG9hZGVyIGNvbmZpZ1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIGdvb2dsZSB3ZWJmb250IGxvYWRlciAuLi4nLCBQUkVMT0FEX0ZPTlRTKTtcclxudHJ5IHtcclxuICAgIHZhciBjZmcgPSB7XHJcbiAgICAgICAgZ29vZ2xlOiB7IGZhbWlsaWVzOiBQUkVMT0FEX0ZPTlRTIH0sXHJcbiAgICAgICAgYWN0aXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmb250cyBwcmVsb2FkIGZpbmlzaGVkIScpOyAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgc2NtID0gR2xvYmFsLmdldFNjbSgpO1xyXG4gICAgICAgICAgICBjb25zdCBib290ID0gbmV3IEJvb3RTY2VuZShzY20pO1xyXG4gICAgICAgICAgICBzY20uQWRkU2NlbmUoYm9vdCk7XHJcbiAgICAgICAgICAgIHNjbS5BY3RpdmF0ZVNjZW5lKGJvb3QpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAod2luZG93IGFzIGFueSkuV2ViRm9udENvbmZpZyA9IGNmZztcclxufVxyXG5jYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIHN0YXJ0IHdlYmZvbnQgbG9hZGVyXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cclxue1xyXG4gICAgdmFyIHNyYyA9ICgnaHR0cHM6JyA9PT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHMnIDogJ2h0dHAnKSArXHJcbiAgICAgICAgICAgICAgICc6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy93ZWJmb250LzEvd2ViZm9udC5qcyc7XHJcbiAgICB2YXIgd2YgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIHdmLnNyYyA9IHNyYztcclxuICAgIHdmLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgIHdmLmFzeW5jID0gdHJ1ZTtcclxuICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xyXG4gICAgaWYocy5wYXJlbnROb2RlKXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod2YsIHMpO1xyXG59O1xyXG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqLyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBR0E7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app.ts\n");

/***/ }),

/***/ "./constants.ts":
/*!**********************!*\
  !*** ./constants.ts ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SCENE_WIDTH = 1920;\r\nexports.SCENE_HEIGHT = 1080;\r\nexports.SCENE_HALF_WIDTH = exports.SCENE_WIDTH / 2;\r\nexports.SCENE_HALF_HEIGHT = exports.SCENE_HEIGHT / 2;\r\nexports.BTN_WIDTH = 120;\r\nexports.BTN_HEIGHT = 60;\r\nexports.GUI_FONT = \"Orbitron\";\r\nexports.SCENE_BACKCOLOR = 0x112233;\r\nexports.ANIMATION_FPS_NORMAL = 14;\r\nexports.ANIMATION_FPS_SLOW = 4;\r\nexports.BTN_STYLE = {\r\n    align: \"center\",\r\n    padding: 0,\r\n    fontSize: 28,\r\n    fontFamily: exports.GUI_FONT,\r\n    fill: 0x46fbfd,\r\n    strokeThickness: 1,\r\n    stroke: 0x0\r\n};\r\nexports.TEXT_STYLE = {\r\n    align: \"left\",\r\n    font: { name: \"Orbitron\", size: 21 },\r\n    tint: 0xE5E51B,\r\n};\r\nexports.MSG_COIN_STYLE = {\r\n    align: \"left\",\r\n    font: { name: \"Orbitron\", size: 22 },\r\n    tint: 0xfeff44,\r\n};\r\nexports.MSG_HP_STYLE = {\r\n    align: \"center\",\r\n    font: { name: \"Orbitron\", size: 24 },\r\n    tint: 0xff1111\r\n};\r\nexports.MSG_EXP_STYLE = {\r\n    align: \"center\",\r\n    font: { name: \"Orbitron\", size: 24 },\r\n    tint: 0x84c202,\r\n};\r\nexports.MSG_WARN_STYLE = {\r\n    align: \"center\",\r\n    font: { name: \"Orbitron\", size: 27 },\r\n    tint: 0xff0011,\r\n};\r\nexports.QUEST_ITEM_STYLE = {\r\n    align: \"center\",\r\n    font: { name: \"Orbitron\", size: 28 },\r\n    tint: 0x84c2f2\r\n};\r\nexports.QUEST_STYLE = {\r\n    align: \"left\",\r\n    font: { name: \"Orbitron\", size: 24 },\r\n    tint: 0xfeffcc,\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb25zdGFudHMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9jb25zdGFudHMudHM/Mzc3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU0NFTkVfV0lEVEg6IG51bWJlciA9IDE5MjA7XHJcbmV4cG9ydCBjb25zdCBTQ0VORV9IRUlHSFQ6IG51bWJlciA9IDEwODA7XHJcbmV4cG9ydCBjb25zdCBTQ0VORV9IQUxGX1dJRFRIID0gU0NFTkVfV0lEVEggLyAyO1xyXG5leHBvcnQgY29uc3QgU0NFTkVfSEFMRl9IRUlHSFQgPSBTQ0VORV9IRUlHSFQgLyAyO1xyXG5leHBvcnQgY29uc3QgQlROX1dJRFRIOiBudW1iZXIgPSAxMjA7XHJcbmV4cG9ydCBjb25zdCBCVE5fSEVJR0hUOiBudW1iZXIgPSA2MDtcclxuZXhwb3J0IGNvbnN0IEdVSV9GT05UID0gXCJPcmJpdHJvblwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNDRU5FX0JBQ0tDT0xPUiA9IDB4MTEyMjMzO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFOSU1BVElPTl9GUFNfTk9STUFMID0gMTQ7XHJcbmV4cG9ydCBjb25zdCBBTklNQVRJT05fRlBTX1NMT1cgPSA0O1xyXG5cclxuZXhwb3J0IGNvbnN0IEJUTl9TVFlMRSA9IHtcclxuICAgIGFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgcGFkZGluZzogMCxcclxuICAgIGZvbnRTaXplOiAyOCxcclxuICAgIGZvbnRGYW1pbHk6IEdVSV9GT05ULFxyXG4gICAgZmlsbDogMHg0NmZiZmQsXHJcbiAgICBzdHJva2VUaGlja25lc3M6IDEsXHJcbiAgICBzdHJva2U6IDB4MFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFRFWFRfU1RZTEU6IFBJWEkuSUJpdG1hcFRleHRTdHlsZSA9IHtcclxuICAgIGFsaWduOiBcImxlZnRcIixcclxuICAgIGZvbnQ6IHtuYW1lOiBcIk9yYml0cm9uXCIsIHNpemU6IDIxfSxcclxuICAgIHRpbnQ6IDB4RTVFNTFCLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IE1TR19DT0lOX1NUWUxFIDogUElYSS5JQml0bWFwVGV4dFN0eWxlID1cclxue1xyXG4gICAgYWxpZ246IFwibGVmdFwiLFxyXG4gICAgZm9udDoge25hbWU6IFwiT3JiaXRyb25cIiwgc2l6ZTogMjJ9LFxyXG4gICAgdGludDogMHhmZWZmNDQsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgTVNHX0hQX1NUWUxFOiBQSVhJLklCaXRtYXBUZXh0U3R5bGUgPVxyXG57XHJcbiAgICBhbGlnbjogXCJjZW50ZXJcIixcclxuICAgIGZvbnQ6IHtuYW1lOiBcIk9yYml0cm9uXCIsIHNpemU6IDI0fSxcclxuICAgIHRpbnQ6IDB4ZmYxMTExICAgIFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IE1TR19FWFBfU1RZTEU6IFBJWEkuSUJpdG1hcFRleHRTdHlsZSA9XHJcbiAgICB7XHJcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgZm9udDoge25hbWU6IFwiT3JiaXRyb25cIiwgc2l6ZTogMjR9LFxyXG4gICAgICAgIHRpbnQ6IDB4ODRjMjAyLFxyXG4gICAgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBNU0dfV0FSTl9TVFlMRTogUElYSS5JQml0bWFwVGV4dFN0eWxlID1cclxue1xyXG4gICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICBmb250OiB7bmFtZTogXCJPcmJpdHJvblwiLCBzaXplOiAyN30sXHJcbiAgICB0aW50OiAweGZmMDAxMSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBRVUVTVF9JVEVNX1NUWUxFOiBQSVhJLklCaXRtYXBUZXh0U3R5bGUgPVxyXG4gICAge1xyXG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgIGZvbnQ6IHtuYW1lOiBcIk9yYml0cm9uXCIsIHNpemU6IDI4fSxcclxuICAgICAgICB0aW50OiAweDg0YzJmMiAgICAgICAgXHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydCBjb25zdCBRVUVTVF9TVFlMRTogUElYSS5JQml0bWFwVGV4dFN0eWxlID1cclxuICAgIHtcclxuICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXHJcbiAgICAgICAgZm9udDoge25hbWU6IFwiT3JiaXRyb25cIiwgc2l6ZTogMjR9LFxyXG4gICAgICAgIHRpbnQ6IDB4ZmVmZmNjLFxyXG4gICAgfTsiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./constants.ts\n");

/***/ }),

/***/ "./enums.ts":
/*!******************!*\
  !*** ./enums.ts ***!
  \******************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar BaseStatType;\r\n(function (BaseStatType) {\r\n    BaseStatType[BaseStatType[\"MaxHP\"] = 0] = \"MaxHP\";\r\n    BaseStatType[BaseStatType[\"MaxDust\"] = 1] = \"MaxDust\";\r\n    BaseStatType[BaseStatType[\"RegenHP\"] = 2] = \"RegenHP\";\r\n    BaseStatType[BaseStatType[\"RegenDust\"] = 3] = \"RegenDust\";\r\n})(BaseStatType = exports.BaseStatType || (exports.BaseStatType = {}));\r\nvar StatType;\r\n(function (StatType) {\r\n    StatType[StatType[\"MaxHP\"] = 0] = \"MaxHP\";\r\n    StatType[StatType[\"HP\"] = 1] = \"HP\";\r\n    StatType[StatType[\"MaxDust\"] = 2] = \"MaxDust\";\r\n    StatType[StatType[\"Dust\"] = 3] = \"Dust\";\r\n    StatType[StatType[\"RegenHP\"] = 4] = \"RegenHP\";\r\n    StatType[StatType[\"RegenDust\"] = 5] = \"RegenDust\";\r\n    StatType[StatType[\"Coins\"] = 6] = \"Coins\";\r\n    StatType[StatType[\"Gold\"] = 7] = \"Gold\";\r\n    StatType[StatType[\"LevelExp\"] = 8] = \"LevelExp\";\r\n    StatType[StatType[\"LevelMaxExp\"] = 9] = \"LevelMaxExp\";\r\n    StatType[StatType[\"TotalExp\"] = 10] = \"TotalExp\";\r\n    StatType[StatType[\"AttributePoints\"] = 11] = \"AttributePoints\";\r\n    StatType[StatType[\"CharacterLevel\"] = 12] = \"CharacterLevel\";\r\n})(StatType = exports.StatType || (exports.StatType = {}));\r\nvar DamageType;\r\n(function (DamageType) {\r\n    DamageType[DamageType[\"LavaBorder\"] = 1000] = \"LavaBorder\";\r\n    DamageType[DamageType[\"Lava\"] = 1001] = \"Lava\";\r\n    DamageType[DamageType[\"Poison\"] = 1002] = \"Poison\";\r\n})(DamageType = exports.DamageType || (exports.DamageType = {}));\r\nvar AtrType;\r\n(function (AtrType) {\r\n    AtrType[AtrType[\"HP\"] = 0] = \"HP\";\r\n    AtrType[AtrType[\"Atk\"] = 1] = \"Atk\";\r\n    AtrType[AtrType[\"AtkCD\"] = 2] = \"AtkCD\";\r\n    AtrType[AtrType[\"Def\"] = 3] = \"Def\";\r\n})(AtrType = exports.AtrType || (exports.AtrType = {}));\r\nvar DirectionH;\r\n(function (DirectionH) {\r\n    DirectionH[DirectionH[\"Left\"] = 0] = \"Left\";\r\n    DirectionH[DirectionH[\"Right\"] = 1] = \"Right\";\r\n})(DirectionH = exports.DirectionH || (exports.DirectionH = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9lbnVtcy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2VudW1zLnRzP2QyNTYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gQmFzZVN0YXRUeXBlIHtcclxuICAgIE1heEhQLFxyXG4gICAgTWF4RHVzdCxcclxuICAgIFJlZ2VuSFAsXHJcbiAgICBSZWdlbkR1c3QsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIFN0YXRUeXBlIHtcclxuICAgIE1heEhQLFxyXG4gICAgSFAsXHJcblxyXG4gICAgTWF4RHVzdCxcclxuICAgIER1c3QsXHJcblxyXG4gICAgUmVnZW5IUCxcclxuICAgIFJlZ2VuRHVzdCxcclxuXHJcbiAgICBDb2lucyxcclxuICAgIEdvbGQsICAgICAgICAgICAvLyAgbm90IHVzZWRcclxuXHJcbiAgICBMZXZlbEV4cCwgICAgICAgLy8gY2FsY3VsYXRlZCB2YWx1ZTogY3VycmVudCBsZXZlbCBleHAsIHN0YXJ0cyBmcm9tIDAgZWFjaCBsZXZlbFxyXG4gICAgTGV2ZWxNYXhFeHAsICAgIC8vIGNhbGN1bGF0ZWQgdmFsdWU6IGN1cnJlbnQgbGV2ZWwgZXhwIG5lZWRlZCB0byByZWFjaCBuZXh0IGxldmVsIFxyXG4gICAgVG90YWxFeHAsICAgICAgIC8vIHRvdGFsIGV4cCAgXHJcblxyXG4gICAgQXR0cmlidXRlUG9pbnRzLFxyXG5cclxuICAgIENoYXJhY3RlckxldmVsLCAvLyBjYWxjdWxhdGVkIHZhbHVlOiBjdXJyZW50IGNoYXIgbGV2ZWwgYmFzZWQgb24gdG90YWwgZXhwZXJpZW5jZVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBEYW1hZ2VUeXBlIHtcclxuICAgIExhdmFCb3JkZXIgPSAxMDAwLFxyXG4gICAgTGF2YSA9IDEwMDEsXHJcbiAgICBQb2lzb24gPSAxMDAyXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZW51bSBBdHJUeXBlIHtcclxuICAgIEhQLFxyXG4gICAgQXRrLFxyXG4gICAgQXRrQ0QsXHJcbiAgICBEZWYsXHJcbn1cclxuXHJcbmV4cG9ydCBlbnVtIERpcmVjdGlvbkgge1xyXG4gICAgTGVmdCxcclxuICAgIFJpZ2h0LFxyXG59Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./enums.ts\n");

/***/ }),

/***/ "./events.ts":
/*!*******************!*\
  !*** ./events.ts ***!
  \*******************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar _1 = __webpack_require__(/*! . */ \"./index.ts\");\r\nexports.eventEmitter = new _1.PIXI.utils.EventEmitter();\r\nexports.MOVE_TOPIC = \"MOVE\";\r\nexports.BURN_TOPIC = \"BURN\";\r\nexports.STATCHANGE_TOPIC = \"STATCHANGE\";\r\nexports.DAMAGE_TOPIC = \"DAMAGE\";\r\n//  action signaling topics\r\nexports.GROUND_SHAKE = \"SHAKE\";\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ldmVudHMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ldmVudHMudHM/NWZiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1BJWEl9IGZyb20gJy4nO1xyXG5pbXBvcnQgeyBTdGF0VHlwZSB9IGZyb20gJy4vZW51bXMnO1xyXG5cclxuZXhwb3J0IHZhciBldmVudEVtaXR0ZXIgPSBuZXcgUElYSS51dGlscy5FdmVudEVtaXR0ZXIoKTtcclxuZXhwb3J0IHZhciBNT1ZFX1RPUElDID0gXCJNT1ZFXCI7XHJcbmV4cG9ydCB2YXIgQlVSTl9UT1BJQyA9IFwiQlVSTlwiO1xyXG5leHBvcnQgdmFyIFNUQVRDSEFOR0VfVE9QSUMgPSBcIlNUQVRDSEFOR0VcIjtcclxuZXhwb3J0IHZhciBEQU1BR0VfVE9QSUMgPSBcIkRBTUFHRVwiO1xyXG5cclxuLy8gIGFjdGlvbiBzaWduYWxpbmcgdG9waWNzXHJcbmV4cG9ydCB2YXIgR1JPVU5EX1NIQUtFID0gXCJTSEFLRVwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJU3RhdENoYW5nZUV2ZW50IHtcclxuICAgIFR5cGU6IFN0YXRUeXBlO1xyXG4gICAgT2xkVmFsdWU6IG51bWJlcjtcclxuICAgIE5ld1ZhbHVlOiBudW1iZXI7XHJcbiAgICBTdGF0czogQXJyYXk8bnVtYmVyPjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJRHBzQ2hhbmdlRXZlbnQge1xyXG4gICAgT2xkVmFsdWU6IG51bWJlcjtcclxuICAgIEFtb3VudDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElCdXJuQ2hhbmdlRXZlbnQge1xyXG4gICAgd2FzQnVybmluZzogYm9vbGVhbjtcclxuICAgIGlzQnVybmluZzogYm9vbGVhbjtcclxufSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./events.ts\n");

/***/ }),

/***/ "./global.ts":
/*!*******************!*\
  !*** ./global.ts ***!
  \*******************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar PIXI = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/pixi.es.js\");\r\nvar particles = __webpack_require__(/*! pixi-particles */ \"./node_modules/pixi-particles/lib/pixi-particles.es.js\");\r\nvar pixi_scenegraph_1 = __webpack_require__(/*! pixi-scenegraph */ \"./node_modules/pixi-scenegraph/dist/index.es.js\");\r\nvar constants_1 = __webpack_require__(/*! ./constants */ \"./constants.ts\");\r\n/**\r\n * The global scene manager.\r\n */\r\nfunction getScm() {\r\n    if (!sceneManager) {\r\n        var canvas = document.getElementById(\"stage\");\r\n        var renderOptions = {\r\n            width: constants_1.SCENE_WIDTH,\r\n            height: constants_1.SCENE_HEIGHT,\r\n            view: canvas,\r\n            backgroundColor: 0,\r\n            antialias: false,\r\n            transparent: false,\r\n            resolution: window.devicePixelRatio\r\n        };\r\n        sceneManager = new pixi_scenegraph_1.SceneManager(renderOptions /*, SCENE_WIDTH, SCENE_HEIGHT, */);\r\n    }\r\n    return sceneManager;\r\n}\r\nexports.getScm = getScm;\r\nfunction deleteScm() {\r\n    if (sceneManager) {\r\n        sceneManager.Renderer.destroy();\r\n    }\r\n    sceneManager = undefined;\r\n}\r\nexports.deleteScm = deleteScm;\r\nvar sceneManager;\r\n/**\r\n * Player position.\r\n */\r\nexports.position = new PIXI.Point();\r\nfunction createParticleEmitter(container, textures, config) {\r\n    \"use strict\";\r\n    var cfg = {\r\n        alpha: {\r\n            start: 0.8,\r\n            end: 0.03\r\n        },\r\n        color: {\r\n            start: \"#dcff09\",\r\n            end: \"#9f1f1f\"\r\n        },\r\n        scale: {\r\n            start: 0.1,\r\n            end: 0.4,\r\n            minimumScaleMultiplier: 1\r\n        },\r\n        speed: {\r\n            start: 50,\r\n            end: 3,\r\n            minimumSpeedMultiplier: 1\r\n        },\r\n        acceleration: new PIXI.Point(),\r\n        startRotation: {\r\n            min: 0,\r\n            max: 360\r\n        },\r\n        rotationSpeed: {\r\n            min: 5,\r\n            max: 20\r\n        },\r\n        lifetime: {\r\n            min: 0.4,\r\n            max: 1.0\r\n        },\r\n        blendMode: \"add\",\r\n        frequency: 0.01,\r\n        emitterLifetime: -1,\r\n        maxParticles: 200,\r\n        pos: new PIXI.Point(0, -24),\r\n        addAtBack: false,\r\n        spawnType: \"circle\",\r\n        spawnCircle: {\r\n            x: 0,\r\n            y: 0,\r\n            r: 10\r\n        }\r\n    };\r\n    if (config) {\r\n        cfg = tslib_1.__assign(tslib_1.__assign({}, cfg), config);\r\n    }\r\n    var emitter = new particles.Emitter(\r\n    // the PIXI.Container to put the emitter in\r\n    // if using blend modes, it's important to put this\r\n    // on top of a bitmap, and not use the root stage Container\r\n    container, textures, cfg);\r\n    emitter.emit = false;\r\n    return emitter;\r\n}\r\nexports.createParticleEmitter = createParticleEmitter;\r\nexports.LevelDefinitions = {\r\n    templates: undefined,\r\n    levels: undefined,\r\n    quests: undefined\r\n};\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9nbG9iYWwudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9nbG9iYWwudHM/OWU1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBQSVhJIGZyb20gXCJwaXhpLmpzXCI7XHJcbmltcG9ydCAqIGFzIHBhcnRpY2xlcyBmcm9tIFwicGl4aS1wYXJ0aWNsZXNcIjtcclxuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyLCBJUmVuZGVyZXJPcHRpb25zIH0gZnJvbSBcInBpeGktc2NlbmVncmFwaFwiO1xyXG5pbXBvcnQgeyBJUm9vdE9iamVjdCB9IGZyb20gJy4vd29ybGQvTGV2ZWxJbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgU0NFTkVfSEVJR0hULCBTQ0VORV9XSURUSCB9IGZyb20gJy4vY29uc3RhbnRzJztcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIFRoZSBnbG9iYWwgc2NlbmUgbWFuYWdlci5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTY20oKSB7XHJcbiAgICBpZiAoIXNjZW5lTWFuYWdlcikge1xyXG4gICAgICAgIGNvbnN0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YWdlXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHJlbmRlck9wdGlvbnM6IElSZW5kZXJlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHdpZHRoOlNDRU5FX1dJRFRILFxyXG4gICAgICAgICAgICBoZWlnaHQ6IFNDRU5FX0hFSUdIVCxcclxuICAgICAgICAgICAgdmlldzogY2FudmFzLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IDAsXHJcbiAgICAgICAgICAgIGFudGlhbGlhczogZmFsc2UsXHJcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcclxuICAgICAgICAgICAgcmVzb2x1dGlvbjogd2luZG93LmRldmljZVBpeGVsUmF0aW9cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNjZW5lTWFuYWdlciA9IG5ldyBTY2VuZU1hbmFnZXIocmVuZGVyT3B0aW9ucy8qLCBTQ0VORV9XSURUSCwgU0NFTkVfSEVJR0hULCAqLyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2NlbmVNYW5hZ2VyO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTY20oKSB7XHJcbiAgICBpZiAoc2NlbmVNYW5hZ2VyKSB7XHJcbiAgICAgICAgc2NlbmVNYW5hZ2VyLlJlbmRlcmVyLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIChzY2VuZU1hbmFnZXIgYXMgYW55KSA9IHVuZGVmaW5lZDtcclxufVxyXG5sZXQgc2NlbmVNYW5hZ2VyOiBTY2VuZU1hbmFnZXI7XHJcblxyXG4vKipcclxuICogUGxheWVyIHBvc2l0aW9uLlxyXG4gKi9cclxuZXhwb3J0IHZhciBwb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KCk7XHJcblxyXG5leHBvcnQgdmFyIHdvcmxkQ29udGFpbmVyIDogUElYSS5Db250YWluZXI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGFydGljbGVFbWl0dGVyKGNvbnRhaW5lcjogUElYSS5Db250YWluZXIsIHRleHR1cmVzOiBQSVhJLlRleHR1cmVbXSwgY29uZmlnPzogYW55KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBjZmc6IGFueSA9IHtcclxuICAgICAgICBhbHBoYToge1xyXG4gICAgICAgICAgICBzdGFydDogMC44LFxyXG4gICAgICAgICAgICBlbmQ6IDAuMDNcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbG9yOiB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBcIiNkY2ZmMDlcIixcclxuICAgICAgICAgICAgZW5kOiBcIiM5ZjFmMWZcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2NhbGU6IHtcclxuICAgICAgICAgICAgc3RhcnQ6IDAuMSxcclxuICAgICAgICAgICAgZW5kOiAwLjQsXHJcbiAgICAgICAgICAgIG1pbmltdW1TY2FsZU11bHRpcGxpZXI6IDFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNwZWVkOiB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiA1MCxcclxuICAgICAgICAgICAgZW5kOiAzLFxyXG4gICAgICAgICAgICBtaW5pbXVtU3BlZWRNdWx0aXBsaWVyOiAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY2NlbGVyYXRpb246IG5ldyBQSVhJLlBvaW50KCksXHJcbiAgICAgICAgc3RhcnRSb3RhdGlvbjoge1xyXG4gICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgIG1heDogMzYwXHJcbiAgICAgICAgfSxcclxuICAgICAgICByb3RhdGlvblNwZWVkOiB7XHJcbiAgICAgICAgICAgIG1pbjogNSxcclxuICAgICAgICAgICAgbWF4OiAyMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGlmZXRpbWU6IHtcclxuICAgICAgICAgICAgbWluOiAwLjQsXHJcbiAgICAgICAgICAgIG1heDogMS4wXHJcbiAgICAgICAgfSxcclxuICAgICAgICBibGVuZE1vZGU6IFwiYWRkXCIsXHJcbiAgICAgICAgZnJlcXVlbmN5OiAwLjAxLFxyXG4gICAgICAgIGVtaXR0ZXJMaWZldGltZTogLTEsXHJcbiAgICAgICAgbWF4UGFydGljbGVzOiAyMDAsXHJcbiAgICAgICAgcG9zOiBuZXcgUElYSS5Qb2ludCgwLCAtMjQpLFxyXG4gICAgICAgIGFkZEF0QmFjazogZmFsc2UsXHJcbiAgICAgICAgc3Bhd25UeXBlOiBcImNpcmNsZVwiLFxyXG4gICAgICAgIHNwYXduQ2lyY2xlOiB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHI6IDEwXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmIChjb25maWcpIHtcclxuICAgICAgICBjZmcgPSB7IC4uLmNmZywgLi4uY29uZmlnIH07XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGVtaXR0ZXIgPSBuZXcgcGFydGljbGVzLkVtaXR0ZXIoXHJcbiAgICAgICAgLy8gdGhlIFBJWEkuQ29udGFpbmVyIHRvIHB1dCB0aGUgZW1pdHRlciBpblxyXG4gICAgICAgIC8vIGlmIHVzaW5nIGJsZW5kIG1vZGVzLCBpdCdzIGltcG9ydGFudCB0byBwdXQgdGhpc1xyXG4gICAgICAgIC8vIG9uIHRvcCBvZiBhIGJpdG1hcCwgYW5kIG5vdCB1c2UgdGhlIHJvb3Qgc3RhZ2UgQ29udGFpbmVyXHJcbiAgICAgICAgY29udGFpbmVyLFxyXG4gICAgICAgIHRleHR1cmVzLFxyXG4gICAgICAgIGNmZ1xyXG4gICAgKTtcclxuICAgIGVtaXR0ZXIuZW1pdCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIGVtaXR0ZXI7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgTGV2ZWxEZWZpbml0aW9uczogSVJvb3RPYmplY3QgPSB7XHJcbiAgICAgICAgdGVtcGxhdGVzOiB1bmRlZmluZWQsXHJcbiAgICAgICAgbGV2ZWxzOiB1bmRlZmluZWQsXHJcbiAgICAgICAgcXVlc3RzOiB1bmRlZmluZWRcclxufTsiXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFFQTs7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUE3REE7QUErREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./global.ts\n");

/***/ }),

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar pixi = __webpack_require__(/*! pixi.js */ \"./node_modules/pixi.js/lib/pixi.es.js\");\r\nexports.PIXI = pixi;\r\nvar _TWEEN = __webpack_require__(/*! @tweenjs/tween.js */ \"./node_modules/@tweenjs/tween.js/dist/tween.esm.js\");\r\nexports.TWEEN = _TWEEN.default;\r\nvar g = __webpack_require__(/*! ./global */ \"./global.ts\");\r\nexports.Global = g;\r\nexports.createParticleEmitter = g.createParticleEmitter;\r\ntslib_1.__exportStar(__webpack_require__(/*! pixi-scenegraph */ \"./node_modules/pixi-scenegraph/dist/index.es.js\"), exports);\r\ntslib_1.__exportStar(__webpack_require__(/*! ./constants */ \"./constants.ts\"), exports);\r\nvar TextureLoader_1 = __webpack_require__(/*! ./utility/TextureLoader */ \"./utility/TextureLoader.ts\");\r\nexports.TextureLoader = TextureLoader_1.TextureLoader;\r\nvar AnimatedSprite_1 = __webpack_require__(/*! ./objects/AnimatedSprite */ \"./objects/AnimatedSprite.ts\");\r\nexports.AnimatedSprite = AnimatedSprite_1.AnimatedSprite;\r\nvar AnimationSequence_1 = __webpack_require__(/*! ./objects/AnimationSequence */ \"./objects/AnimationSequence.ts\");\r\nexports.AnimationSequence = AnimationSequence_1.AnimationSequence;\r\nvar SpriteButton_1 = __webpack_require__(/*! ./objects/SpriteButton */ \"./objects/SpriteButton.ts\");\r\nexports.SpriteButton = SpriteButton_1.SpriteButton;\r\nvar Parallax_1 = __webpack_require__(/*! ./objects/Parallax */ \"./objects/Parallax.ts\");\r\nexports.Parallax = Parallax_1.Parallax;\r\nvar Dictionary_1 = __webpack_require__(/*! ./utility/Dictionary */ \"./utility/Dictionary.ts\");\r\nexports.Dictionary = Dictionary_1.Dictionary;\r\nvar KeyboardMapper_1 = __webpack_require__(/*! ./utility/KeyboardMapper */ \"./utility/KeyboardMapper.ts\");\r\nexports.KeyboardMapper = KeyboardMapper_1.KeyboardMapper;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9pbmRleC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2luZGV4LnRzP2E5NTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGl4aSBmcm9tICdwaXhpLmpzJztcclxuZXhwb3J0IHZhciBQSVhJID0gcGl4aTtcclxuXHJcbmltcG9ydCAqIGFzIF9UV0VFTiBmcm9tIFwiQHR3ZWVuanMvdHdlZW4uanNcIjtcclxuZXhwb3J0IHZhciBUV0VFTiA9IChfVFdFRU4gYXMgYW55KS5kZWZhdWx0O1xyXG5cclxuaW1wb3J0ICogYXMgZyBmcm9tIFwiLi9nbG9iYWxcIjtcclxuZXhwb3J0IHZhciBHbG9iYWwgPSBnO1xyXG5leHBvcnQgdmFyIGNyZWF0ZVBhcnRpY2xlRW1pdHRlciA9IGcuY3JlYXRlUGFydGljbGVFbWl0dGVyO1xyXG5cclxuZXhwb3J0ICogZnJvbSBcInBpeGktc2NlbmVncmFwaFwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCB7VGV4dHVyZUxvYWRlcn0gZnJvbSAnLi91dGlsaXR5L1RleHR1cmVMb2FkZXInO1xyXG5leHBvcnQge0FuaW1hdGVkU3ByaXRlfSBmcm9tICcuL29iamVjdHMvQW5pbWF0ZWRTcHJpdGUnO1xyXG5leHBvcnQge0FuaW1hdGlvblNlcXVlbmNlfSBmcm9tICcuL29iamVjdHMvQW5pbWF0aW9uU2VxdWVuY2UnO1xyXG5leHBvcnQge1Nwcml0ZUJ1dHRvbn0gZnJvbSAnLi9vYmplY3RzL1Nwcml0ZUJ1dHRvbic7XHJcbmV4cG9ydCB7UGFyYWxsYXh9IGZyb20gJy4vb2JqZWN0cy9QYXJhbGxheCc7XHJcbmV4cG9ydCB7RGljdGlvbmFyeX0gZnJvbSAnLi91dGlsaXR5L0RpY3Rpb25hcnknO1xyXG5leHBvcnQge0tleWJvYXJkTWFwcGVyfSBmcm9tICcuL3V0aWxpdHkvS2V5Ym9hcmRNYXBwZXInOyJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./index.ts\n");

/***/ }),

/***/ "./mobs/AI.ts":
/*!********************!*\
  !*** ./mobs/AI.ts ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Global = __webpack_require__(/*! ../global */ \"./global.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\n/**\r\n * Max distance at which the target can be acquired.\r\n */\r\nvar LOCK_DISTANCE = 800;\r\n/**\r\n * Max distance at which the target is tracked.\r\n */\r\nvar TRACK_DISTANCE = 1050;\r\n/**\r\n * Base for all mob AI. Provides low level AI functions.\r\n */\r\nvar AI = /** @class */ (function () {\r\n    function AI(mobEntity) {\r\n        var _this = this;\r\n        this.mobEntity = mobEntity;\r\n        this.lastFire = 0; //performance.now() + Math.random() * 10;    //  so that the attack is not triggered at init time\r\n        this.onUpdate = function (dt) {\r\n            _this.calcDistance();\r\n            //  TODO: implement visibility check\r\n            if (_this.targetDistance < TRACK_DISTANCE) {\r\n                _this.turnTowardsTarget();\r\n            }\r\n            if (_this.targetDistance < LOCK_DISTANCE) {\r\n                _this.hasTarget = true;\r\n                //  check attack CD            \r\n                if (_this.canFire()) {\r\n                    _this.mobEntity.attack();\r\n                    _this.lastFire = performance.now();\r\n                }\r\n            }\r\n            else {\r\n                _this.hasTarget = false;\r\n            }\r\n        };\r\n        this.attackCD = mobEntity.attributes[enums_1.AtrType.AtkCD];\r\n    }\r\n    AI.prototype.calcDistance = function () {\r\n        var dx = Global.position.x - this.mobEntity.x;\r\n        var dy = Global.position.y - this.mobEntity.y;\r\n        this.targetDistance = Math.sqrt(dx * dx + dy * dy);\r\n    };\r\n    AI.prototype.turnTowardsTarget = function () {\r\n        //  negative left, positive right\r\n        var dir = Global.position.x - this.mobEntity.x;\r\n        if (dir < 0 && this.mobEntity.direction != enums_1.DirectionH.Left) {\r\n            this.mobEntity.direction = enums_1.DirectionH.Left;\r\n        }\r\n        else if (dir > 0 && this.mobEntity.direction != enums_1.DirectionH.Right) {\r\n            this.mobEntity.direction = enums_1.DirectionH.Right;\r\n        }\r\n    };\r\n    AI.prototype.canFire = function () {\r\n        var nowMilliseconds = performance.now();\r\n        return (this.lastFire + this.attackCD <= nowMilliseconds);\r\n    };\r\n    ;\r\n    return AI;\r\n}());\r\nexports.AI = AI;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2JzL0FJLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbW9icy9BSS50cz8yZDk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEdsb2JhbCBmcm9tIFwiLi4vZ2xvYmFsXCI7XHJcbmltcG9ydCB7IE1vYn0gZnJvbSBcIi4vTW9iXCI7XHJcbmltcG9ydCB7IEF0clR5cGUsIERpcmVjdGlvbkggfSBmcm9tICcuLi9lbnVtcyc7XHJcblxyXG4vKipcclxuICogTWF4IGRpc3RhbmNlIGF0IHdoaWNoIHRoZSB0YXJnZXQgY2FuIGJlIGFjcXVpcmVkLlxyXG4gKi9cclxubGV0IExPQ0tfRElTVEFOQ0UgPSA4MDA7XHJcblxyXG4vKipcclxuICogTWF4IGRpc3RhbmNlIGF0IHdoaWNoIHRoZSB0YXJnZXQgaXMgdHJhY2tlZC5cclxuICovXHJcbmxldCBUUkFDS19ESVNUQU5DRSA9IDEwNTA7XHJcblxyXG4vKipcclxuICogQmFzZSBmb3IgYWxsIG1vYiBBSS4gUHJvdmlkZXMgbG93IGxldmVsIEFJIGZ1bmN0aW9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBSSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcnVlIGlmIHRoZSBBSSBoYXMgYSAndGFyZ2V0IGxvY2snIG9uIHRoZSBwbGF5ZXIuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBoYXNUYXJnZXQ6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXN0YW5jZSBmcm9tIHBsYXllci5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHRhcmdldERpc3RhbmNlOiBudW1iZXI7XHJcblxyXG4gICAgcHJvdGVjdGVkIGxhc3RGaXJlOiBudW1iZXIgPSAwOy8vcGVyZm9ybWFuY2Uubm93KCkgKyBNYXRoLnJhbmRvbSgpICogMTA7ICAgIC8vICBzbyB0aGF0IHRoZSBhdHRhY2sgaXMgbm90IHRyaWdnZXJlZCBhdCBpbml0IHRpbWVcclxuXHJcbiAgICBwcm90ZWN0ZWQgYXR0YWNrQ0Q6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbW9iRW50aXR5OiBNb2IpIHtcclxuICAgICAgICB0aGlzLmF0dGFja0NEID0gbW9iRW50aXR5LmF0dHJpYnV0ZXNbQXRyVHlwZS5BdGtDRF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWxjRGlzdGFuY2UoKSB7XHJcbiAgICAgICAgbGV0IGR4ID0gR2xvYmFsLnBvc2l0aW9uLnggLSB0aGlzLm1vYkVudGl0eS54O1xyXG4gICAgICAgIGxldCBkeSA9IEdsb2JhbC5wb3NpdGlvbi55IC0gdGhpcy5tb2JFbnRpdHkueTtcclxuICAgICAgICB0aGlzLnRhcmdldERpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHR1cm5Ub3dhcmRzVGFyZ2V0KCkge1xyXG4gICAgICAgIC8vICBuZWdhdGl2ZSBsZWZ0LCBwb3NpdGl2ZSByaWdodFxyXG4gICAgICAgIGxldCBkaXIgPSBHbG9iYWwucG9zaXRpb24ueCAtIHRoaXMubW9iRW50aXR5Lng7XHJcblxyXG4gICAgICAgIGlmIChkaXIgPCAwICYmIHRoaXMubW9iRW50aXR5LmRpcmVjdGlvbiAhPSBEaXJlY3Rpb25ILkxlZnQpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2JFbnRpdHkuZGlyZWN0aW9uID0gRGlyZWN0aW9uSC5MZWZ0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGlyID4gMCAmJiB0aGlzLm1vYkVudGl0eS5kaXJlY3Rpb24gIT0gRGlyZWN0aW9uSC5SaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vYkVudGl0eS5kaXJlY3Rpb24gPSBEaXJlY3Rpb25ILlJpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FuRmlyZSgpIHtcclxuICAgICAgICBsZXQgbm93TWlsbGlzZWNvbmRzID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmxhc3RGaXJlICsgdGhpcy5hdHRhY2tDRCA8PSBub3dNaWxsaXNlY29uZHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgb25VcGRhdGUgPSAoZHQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIHRoaXMuY2FsY0Rpc3RhbmNlKCk7XHJcblxyXG4gICAgICAgIC8vICBUT0RPOiBpbXBsZW1lbnQgdmlzaWJpbGl0eSBjaGVja1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldERpc3RhbmNlIDwgVFJBQ0tfRElTVEFOQ0UpIHtcclxuICAgICAgICAgICAgdGhpcy50dXJuVG93YXJkc1RhcmdldCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0RGlzdGFuY2UgPCBMT0NLX0RJU1RBTkNFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzVGFyZ2V0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vICBjaGVjayBhdHRhY2sgQ0QgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FuRmlyZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vYkVudGl0eS5hdHRhY2soKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZpcmUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzVGFyZ2V0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFnQkE7QUFBQTtBQUFBO0FBSkE7QUE4QkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBNUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBc0JBO0FBQUE7QUE5REE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mobs/AI.ts\n");

/***/ }),

/***/ "./mobs/BasicStaticAI.ts":
/*!*******************************!*\
  !*** ./mobs/BasicStaticAI.ts ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar AI_1 = __webpack_require__(/*! ./AI */ \"./mobs/AI.ts\");\r\n/**\r\n * Can attack and turn towards player but invokes no other actions.\r\n */\r\nvar BasicStaticAI = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BasicStaticAI, _super);\r\n    function BasicStaticAI(mobEntity) {\r\n        return _super.call(this, mobEntity) || this;\r\n    }\r\n    BasicStaticAI.prototype.canFire = function () {\r\n        var nowMilliseconds = performance.now();\r\n        var rnd = Math.random() * 2000;\r\n        var can = (this.lastFire + this.attackCD + rnd <= nowMilliseconds);\r\n        if (can) {\r\n            var rnd_1 = Math.random();\r\n            can = can && rnd_1 > 0.3;\r\n            this.lastFire = performance.now(); //  set to prevent firing in next update if 'can' is false\r\n        }\r\n        return can;\r\n    };\r\n    ;\r\n    return BasicStaticAI;\r\n}(AI_1.AI));\r\nexports.BasicStaticAI = BasicStaticAI;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2JzL0Jhc2ljU3RhdGljQUkudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2JzL0Jhc2ljU3RhdGljQUkudHM/ODRlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSSB9IGZyb20gXCIuL0FJXCI7XHJcbmltcG9ydCB7IE1vYiB9IGZyb20gXCIuL01vYlwiO1xyXG5cclxuLyoqXHJcbiAqIENhbiBhdHRhY2sgYW5kIHR1cm4gdG93YXJkcyBwbGF5ZXIgYnV0IGludm9rZXMgbm8gb3RoZXIgYWN0aW9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCYXNpY1N0YXRpY0FJIGV4dGVuZHMgQUkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1vYkVudGl0eTogTW9iKSB7XHJcbiAgICAgICAgc3VwZXIobW9iRW50aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FuRmlyZSgpIHtcclxuICAgICAgICBsZXQgbm93TWlsbGlzZWNvbmRzID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgbGV0IHJuZCA9IE1hdGgucmFuZG9tKCkgKiAyMDAwO1xyXG4gICAgICAgIGxldCBjYW4gPSAodGhpcy5sYXN0RmlyZSArIHRoaXMuYXR0YWNrQ0QgICsgcm5kIDw9IG5vd01pbGxpc2Vjb25kcyk7XHJcbiAgICAgICAgaWYgKGNhbikge1xyXG4gICAgICAgICAgICBsZXQgcm5kID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgY2FuID0gY2FuICYmIHJuZCA+IDAuMztcclxuICAgICAgICAgICAgdGhpcy5sYXN0RmlyZSA9IHBlcmZvcm1hbmNlLm5vdygpOyAvLyAgc2V0IHRvIHByZXZlbnQgZmlyaW5nIGluIG5leHQgdXBkYXRlIGlmICdjYW4nIGlzIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYW47XHJcbiAgICB9O1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUdBOztBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFqQkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./mobs/BasicStaticAI.ts\n");

/***/ }),

/***/ "./mobs/Mob.ts":
/*!*********************!*\
  !*** ./mobs/Mob.ts ***!
  \*********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar Bullet_1 = __webpack_require__(/*! ../objects/Bullet */ \"./objects/Bullet.ts\");\r\nvar SoundMan_1 = __webpack_require__(/*! ../world/SoundMan */ \"./world/SoundMan.ts\");\r\nvar BasicStaticAI_1 = __webpack_require__(/*! ./BasicStaticAI */ \"./mobs/BasicStaticAI.ts\");\r\nvar WorldP2_1 = __webpack_require__(/*! ../world/WorldP2 */ \"./world/WorldP2.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\nvar AnimationSequence_1 = __webpack_require__(/*! ../objects/AnimationSequence */ \"./objects/AnimationSequence.ts\");\r\nvar AnimatedSprite_1 = __webpack_require__(/*! ../objects/AnimatedSprite */ \"./objects/AnimatedSprite.ts\");\r\nvar FRAME_SIZE = 48;\r\n/**\r\n * Represents a monster entity\r\n */\r\nvar Mob = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Mob, _super);\r\n    function Mob(textureName) {\r\n        var _this = _super.call(this) || this;\r\n        _this.textureName = textureName;\r\n        _this._isDead = false;\r\n        _this.isLoading = false;\r\n        _this.attack = function () {\r\n            var currentSeq = _this.currentSequence;\r\n            var currentFps = _this.fps;\r\n            SoundMan_1.snd.atkMagic1();\r\n            if (_this._direction == enums_1.DirectionH.Left) {\r\n                _this.play(\"latk\", currentFps, false);\r\n            }\r\n            else {\r\n                _this.play(\"ratk\", currentFps, false);\r\n            }\r\n            _this.onComplete = function (seq) {\r\n                _this.onComplete = null;\r\n                _this.fireBullet();\r\n                _this.play(currentSeq.sequenceName, currentFps);\r\n            };\r\n        };\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"left\", _this.textureName, [0, 1, 2], FRAME_SIZE, FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"right\", _this.textureName, [3, 4, 5], FRAME_SIZE, FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"latk\", _this.textureName, [6, 7, 8], FRAME_SIZE, FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"ratk\", _this.textureName, [9, 10, 11], FRAME_SIZE, FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"lsquish\", _this.textureName, [12, 13, 14, 15, 16, 17], FRAME_SIZE, FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"rsquish\", _this.textureName, [18, 19, 20, 21, 22, 23], FRAME_SIZE, FRAME_SIZE));\r\n        _this.play(\"left\");\r\n        _this._direction = enums_1.DirectionH.Left;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Mob.prototype, \"isDead\", {\r\n        get: function () {\r\n            return this._isDead;\r\n        },\r\n        set: function (value) {\r\n            if (value != this._isDead) {\r\n                this._isDead = value;\r\n                if (this._isDead && this.onDeathCallBack) {\r\n                    this.onDeathCallBack();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Mob.prototype, \"onDeath\", {\r\n        get: function () {\r\n            return this.onDeathCallBack;\r\n        },\r\n        set: function (cb) {\r\n            this.onDeathCallBack = cb;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Kills the mob, plays squish animation and sound. Optionaly invokes the call back on animation end.\r\n     * @param cb\r\n     */\r\n    Mob.prototype.squish = function (cb) {\r\n        this.isDead = true;\r\n        var aname = (this._direction == enums_1.DirectionH.Left ? \"lsquish\" : \"rsquish\");\r\n        this.onComplete = cb;\r\n        this.play(aname, 12, false);\r\n        SoundMan_1.snd.mobSquish();\r\n    };\r\n    Object.defineProperty(Mob.prototype, \"direction\", {\r\n        get: function () {\r\n            return this._direction;\r\n        },\r\n        set: function (dir) {\r\n            if (this._direction != dir) {\r\n                this._direction = dir;\r\n                if (dir === enums_1.DirectionH.Left) {\r\n                    this.play(\"left\");\r\n                }\r\n                else {\r\n                    this.play(\"right\");\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Mob.prototype, \"attributes\", {\r\n        get: function () {\r\n            return this._attributes;\r\n        },\r\n        set: function (values) {\r\n            this._attributes = values;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Mob.prototype.fireBullet = function () {\r\n        if (this.atkTexture.constructor === Array) {\r\n            //  TODO: animated sprite\r\n        }\r\n        else {\r\n            //  sprite\r\n            Bullet_1.Bullet.emitBullet(this.atkTexture, this.position, WorldP2_1.wp2.playerBody.position, this._attributes[enums_1.AtrType.Atk]);\r\n        }\r\n    };\r\n    Mob.prototype.createAI = function (aiTypeName) {\r\n        switch (aiTypeName.toLowerCase()) {\r\n            case \"basic_static\":\r\n                this._ai = new BasicStaticAI_1.BasicStaticAI(this);\r\n                break;\r\n            case \"basic\":\r\n                //  TODO: implement AI logic variations \r\n                break;\r\n        }\r\n    };\r\n    Mob.prototype.onUpdate = function (dt) {\r\n        _super.prototype.onUpdate.call(this, dt);\r\n        if (!this.isDead && !this.isLoading) {\r\n            this._ai.onUpdate(dt);\r\n        }\r\n    };\r\n    return Mob;\r\n}(AnimatedSprite_1.AnimatedSprite));\r\nexports.Mob = Mob;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2JzL01vYi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL21vYnMvTW9iLnRzP2Q5YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnVsbGV0IH0gZnJvbSBcIi4uL29iamVjdHMvQnVsbGV0XCI7XHJcbmltcG9ydCB7IHNuZCB9IGZyb20gXCIuLi93b3JsZC9Tb3VuZE1hblwiO1xyXG5pbXBvcnQgeyBBSSB9IGZyb20gXCIuL0FJXCI7XHJcbmltcG9ydCB7IEJhc2ljU3RhdGljQUkgfSBmcm9tIFwiLi9CYXNpY1N0YXRpY0FJXCI7XHJcbmltcG9ydCB7IHdwMiB9IGZyb20gJy4uL3dvcmxkL1dvcmxkUDInO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb25ILCBBdHJUeXBlIH0gZnJvbSAnLi4vZW51bXMnO1xyXG5pbXBvcnQgeyBBbmltYXRpb25TZXF1ZW5jZSB9IGZyb20gJy4uL29iamVjdHMvQW5pbWF0aW9uU2VxdWVuY2UnO1xyXG5pbXBvcnQgeyBBbmltYXRlZFNwcml0ZSB9IGZyb20gJy4uL29iamVjdHMvQW5pbWF0ZWRTcHJpdGUnO1xyXG5cclxuY29uc3QgRlJBTUVfU0laRTogbnVtYmVyID0gNDg7XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgbW9uc3RlciBlbnRpdHlcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb2IgZXh0ZW5kcyBBbmltYXRlZFNwcml0ZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBvbkRlYXRoQ2FsbEJhY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIF9pc0RlYWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX2F0dHJpYnV0ZXM6IG51bWJlcltdO1xyXG4gICAgcHJpdmF0ZSBfYWk6IEFJO1xyXG4gICAgcHJpdmF0ZSBfZGlyZWN0aW9uOiBEaXJlY3Rpb25IO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHRleHR1cmVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwibGVmdFwiLCB0aGlzLnRleHR1cmVOYW1lLCBbMCwgMSwgMl0sIEZSQU1FX1NJWkUsIEZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwicmlnaHRcIiwgdGhpcy50ZXh0dXJlTmFtZSwgWzMsIDQsIDVdLCBGUkFNRV9TSVpFLCBGUkFNRV9TSVpFKSk7XHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb25zKG5ldyBBbmltYXRpb25TZXF1ZW5jZShcImxhdGtcIiwgdGhpcy50ZXh0dXJlTmFtZSwgWzYsIDcsIDhdLCBGUkFNRV9TSVpFLCBGUkFNRV9TSVpFKSk7XHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb25zKG5ldyBBbmltYXRpb25TZXF1ZW5jZShcInJhdGtcIiwgdGhpcy50ZXh0dXJlTmFtZSwgWzksIDEwLCAxMV0sIEZSQU1FX1NJWkUsIEZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwibHNxdWlzaFwiLCB0aGlzLnRleHR1cmVOYW1lLCBbMTIsIDEzLCAxNCwgMTUsIDE2LCAxN10sIEZSQU1FX1NJWkUsIEZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwicnNxdWlzaFwiLCB0aGlzLnRleHR1cmVOYW1lLCBbMTgsIDE5LCAyMCwgMjEsIDIyLCAyM10sIEZSQU1FX1NJWkUsIEZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLnBsYXkoXCJsZWZ0XCIpOyAgIFxyXG4gICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IERpcmVjdGlvbkguTGVmdDsgIFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzRGVhZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWFkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBpc0RlYWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAodmFsdWUgIT0gdGhpcy5faXNEZWFkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzRGVhZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNEZWFkICYmIHRoaXMub25EZWF0aENhbGxCYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGVhdGhDYWxsQmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgb25EZWF0aChjYjogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMub25EZWF0aENhbGxCYWNrID0gY2I7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IG9uRGVhdGgoKTogKCkgPT4gdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25EZWF0aENhbGxCYWNrO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRleHR1cmUgdXNlZCBmb3IgYXR0YWNrcyBlbWl0dGVkIGJ5IHRoZSBtb2IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhdGtUZXh0dXJlOiBzdHJpbmcgfCBzdHJpbmdbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEtpbGxzIHRoZSBtb2IsIHBsYXlzIHNxdWlzaCBhbmltYXRpb24gYW5kIHNvdW5kLiBPcHRpb25hbHkgaW52b2tlcyB0aGUgY2FsbCBiYWNrIG9uIGFuaW1hdGlvbiBlbmQuXHJcbiAgICAgKiBAcGFyYW0gY2JcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNxdWlzaChjYj86ICgpID0+IHZvaWQpIHsgICAgIFxyXG4gICAgICAgIHRoaXMuaXNEZWFkID0gdHJ1ZTsgICBcclxuICAgICAgICB2YXIgYW5hbWUgPSAodGhpcy5fZGlyZWN0aW9uID09IERpcmVjdGlvbkguTGVmdCA/IFwibHNxdWlzaFwiIDogXCJyc3F1aXNoXCIpO1xyXG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IGNiO1xyXG4gICAgICAgIHRoaXMucGxheShhbmFtZSwgMTIsIGZhbHNlKTtcclxuICAgICAgICBzbmQubW9iU3F1aXNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBkaXJlY3Rpb24oKTogRGlyZWN0aW9uSCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpcmVjdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZGlyZWN0aW9uKGRpcjogRGlyZWN0aW9uSCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXJlY3Rpb24gIT0gZGlyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpcmVjdGlvbiA9IGRpcjtcclxuICAgICAgICAgICAgaWYgKGRpciA9PT0gRGlyZWN0aW9uSC5MZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoXCJsZWZ0XCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5KFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBhdHRyaWJ1dGVzKHZhbHVlczogbnVtYmVyW10pIHtcclxuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVzID0gdmFsdWVzO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBhdHRyaWJ1dGVzKCk6IG51bWJlcltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXR0cmlidXRlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXR0YWNrID0gKCk9PiB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRTZXEgPSB0aGlzLmN1cnJlbnRTZXF1ZW5jZTtcclxuICAgICAgICB2YXIgY3VycmVudEZwcyA9IHRoaXMuZnBzO1xyXG4gICAgICAgIHNuZC5hdGtNYWdpYzEoKTtcclxuICAgICAgICBpZiAodGhpcy5fZGlyZWN0aW9uID09IERpcmVjdGlvbkguTGVmdCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXkoXCJsYXRrXCIsIGN1cnJlbnRGcHMsIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXkoXCJyYXRrXCIsIGN1cnJlbnRGcHMsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMub25Db21wbGV0ZSA9IChzZXE6IEFuaW1hdGlvblNlcXVlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyZUJ1bGxldCgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXkoY3VycmVudFNlcS5zZXF1ZW5jZU5hbWUsIGN1cnJlbnRGcHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmaXJlQnVsbGV0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF0a1RleHR1cmUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8vICBUT0RPOiBhbmltYXRlZCBzcHJpdGVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgc3ByaXRlXHJcbiAgICAgICAgICAgIEJ1bGxldC5lbWl0QnVsbGV0KHRoaXMuYXRrVGV4dHVyZSBhcyBzdHJpbmcsIHRoaXMucG9zaXRpb24sIHdwMi5wbGF5ZXJCb2R5LnBvc2l0aW9uLCB0aGlzLl9hdHRyaWJ1dGVzW0F0clR5cGUuQXRrXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVBSShhaVR5cGVOYW1lOiBzdHJpbmcpOnZvaWQge1xyXG4gICAgICAgIHN3aXRjaCAoYWlUeXBlTmFtZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJiYXNpY19zdGF0aWNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FpID0gbmV3IEJhc2ljU3RhdGljQUkodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJiYXNpY1wiOlxyXG4gICAgICAgICAgICAgICAgLy8gIFRPRE86IGltcGxlbWVudCBBSSBsb2dpYyB2YXJpYXRpb25zIFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIub25VcGRhdGUoZHQpO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNEZWFkICYmICF0aGlzLmlzTG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9haS5vblVwZGF0ZShkdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7O0FBRUE7QUFDQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBTEE7QUFrQkE7QUE0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBUkE7QUFVQTtBQUdBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFDQTs7O0FBQUE7QUFXQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBVkE7QUFZQTtBQUdBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFDQTs7O0FBQUE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBOUhBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./mobs/Mob.ts\n");

/***/ }),

/***/ "./mobs/SpawnPoint.ts":
/*!****************************!*\
  !*** ./mobs/SpawnPoint.ts ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar LevelLoader_1 = __webpack_require__(/*! ../world/LevelLoader */ \"./world/LevelLoader.ts\");\r\nvar WorldP2_1 = __webpack_require__(/*! ../world/WorldP2 */ \"./world/WorldP2.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ../objects/PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar AnimatedSprite_1 = __webpack_require__(/*! ../objects/AnimatedSprite */ \"./objects/AnimatedSprite.ts\");\r\nvar AnimationSequence_1 = __webpack_require__(/*! ../objects/AnimationSequence */ \"./objects/AnimationSequence.ts\");\r\nvar SpawnPoint = /** @class */ (function () {\r\n    function SpawnPoint(name, x, y, area, maxMobCount, respawnSeconds, entity, active) {\r\n        if (active === void 0) { active = true; }\r\n        this.name = name;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.area = area;\r\n        this.maxMobCount = maxMobCount;\r\n        this.respawnSeconds = respawnSeconds;\r\n        this.entity = entity;\r\n        this.active = active;\r\n        this.mobCount = 0;\r\n        this.nextSpawn = 0;\r\n        this.nextSpawn = performance.now() / 1000;\r\n    }\r\n    Object.defineProperty(SpawnPoint.prototype, \"IsActive\", {\r\n        get: function () { return this.active; },\r\n        set: function (value) { this.active = value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    ;\r\n    SpawnPoint.prototype.onUpdate = function (dt) {\r\n        var _this = this;\r\n        if (this.active && this.mobCount < this.maxMobCount) {\r\n            //  is it time to respawn?\r\n            var now = performance.now() / 1000;\r\n            if (this.nextSpawn <= now) {\r\n                if (!this.worldContainer) {\r\n                    this.worldContainer = __1.Global.getScm().GetScene(\"Main\").worldContainer;\r\n                }\r\n                var mobBody = LevelLoader_1.LevelLoader.createMob(PlayerStats_1.stats.currentLevel.templates, this.entity);\r\n                var dispObj_1 = mobBody.DisplayObject;\r\n                var x = this.x + (Math.random() * this.area) - (this.area / 2);\r\n                var y = this.y;\r\n                mobBody.position = [x, y];\r\n                WorldP2_1.wp2.addBody(mobBody);\r\n                dispObj_1.position.set(x, y);\r\n                dispObj_1.visible = false;\r\n                dispObj_1.isLoading = true;\r\n                this.worldContainer.addChild(dispObj_1);\r\n                var loadSpr_1 = new AnimatedSprite_1.AnimatedSprite();\r\n                loadSpr_1.addAnimations(new AnimationSequence_1.AnimationSequence(\"load\", \"assets/entities-atlas.json@load.png\", [0, 1, 2, 3], 64, 64));\r\n                loadSpr_1.anchor.set(0.5);\r\n                loadSpr_1.position.set(x, y + 10);\r\n                loadSpr_1.play(\"load\", 4, true);\r\n                loadSpr_1.scale.set(1, -1); //  the worldContainer has -y scale so we must flip it up again \r\n                this.worldContainer.addChild(loadSpr_1);\r\n                setTimeout(function () {\r\n                    _this.worldContainer.removeChild(loadSpr_1);\r\n                    dispObj_1.isLoading = false;\r\n                    dispObj_1.visible = true;\r\n                }, 3000);\r\n                dispObj_1.onDeath = function () {\r\n                    console.log(\"mob died\");\r\n                    _this.mobCount--;\r\n                };\r\n                this.mobCount++;\r\n                this.nextSpawn = (performance.now() / 1000) + this.respawnSeconds;\r\n            }\r\n        }\r\n    };\r\n    return SpawnPoint;\r\n}());\r\nexports.SpawnPoint = SpawnPoint;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tb2JzL1NwYXduUG9pbnQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2JzL1NwYXduUG9pbnQudHM/MTY1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMZXZlbExvYWRlciB9IGZyb20gXCIuLi93b3JsZC9MZXZlbExvYWRlclwiO1xyXG5pbXBvcnQgeyB3cDIgfSBmcm9tIFwiLi4vd29ybGQvV29ybGRQMlwiO1xyXG5pbXBvcnQgeyBNb2IgfSBmcm9tIFwiLi4vbW9icy9Nb2JcIjtcclxuaW1wb3J0IHsgc3RhdHMgfSBmcm9tICcuLi9vYmplY3RzL1BsYXllclN0YXRzJztcclxuaW1wb3J0IHsgR2xvYmFsIH0gZnJvbSAnLi4nO1xyXG5pbXBvcnQgeyBBbmltYXRlZFNwcml0ZSB9IGZyb20gJy4uL29iamVjdHMvQW5pbWF0ZWRTcHJpdGUnO1xyXG5pbXBvcnQgeyBBbmltYXRpb25TZXF1ZW5jZSB9IGZyb20gJy4uL29iamVjdHMvQW5pbWF0aW9uU2VxdWVuY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwYXduUG9pbnQge1xyXG4gICAgcHJpdmF0ZSBtb2JDb3VudDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbmV4dFNwYXduOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSB3b3JsZENvbnRhaW5lcjogUElYSS5Db250YWluZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIHg6IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIHk6IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIGFyZWE6IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIG1heE1vYkNvdW50OiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSByZXNwYXduU2Vjb25kczogbnVtYmVyLFxyXG4gICAgICAgIHByaXZhdGUgZW50aXR5OiBhbnksXHJcbiAgICAgICAgcHJpdmF0ZSBhY3RpdmU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5uZXh0U3Bhd24gPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBJc0FjdGl2ZSgpIHsgcmV0dXJuIHRoaXMuYWN0aXZlOyB9O1xyXG4gICAgcHVibGljIHNldCBJc0FjdGl2ZSh2YWx1ZTogYm9vbGVhbikgeyB0aGlzLmFjdGl2ZSA9IHZhbHVlOyB9O1xyXG5cclxuICAgIHB1YmxpYyBvblVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlICYmIHRoaXMubW9iQ291bnQgPCB0aGlzLm1heE1vYkNvdW50KSB7XHJcblxyXG4gICAgICAgICAgICAvLyAgaXMgaXQgdGltZSB0byByZXNwYXduP1xyXG4gICAgICAgICAgICB2YXIgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0U3Bhd24gPD0gbm93KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndvcmxkQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53b3JsZENvbnRhaW5lciA9IChHbG9iYWwuZ2V0U2NtKCkuR2V0U2NlbmUoXCJNYWluXCIpIGFzIGFueSkud29ybGRDb250YWluZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9iQm9keSA9IExldmVsTG9hZGVyLmNyZWF0ZU1vYihzdGF0cy5jdXJyZW50TGV2ZWwudGVtcGxhdGVzLCB0aGlzLmVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlzcE9iaiA9IChtb2JCb2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCBhcyBNb2I7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHggPSB0aGlzLnggKyAoTWF0aC5yYW5kb20oKSAqIHRoaXMuYXJlYSkgLSAodGhpcy5hcmVhIC8gMik7XHJcbiAgICAgICAgICAgICAgICBsZXQgeSA9IHRoaXMueTtcclxuXHJcbiAgICAgICAgICAgICAgICBtb2JCb2R5LnBvc2l0aW9uID0gW3gsIHldO1xyXG4gICAgICAgICAgICAgICAgd3AyLmFkZEJvZHkobW9iQm9keSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGlzcE9iai5wb3NpdGlvbi5zZXQoeCwgeSk7XHJcbiAgICAgICAgICAgICAgICBkaXNwT2JqLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGRpc3BPYmouaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGRDb250YWluZXIuYWRkQ2hpbGQoZGlzcE9iaik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGxvYWRTcHIgPSBuZXcgQW5pbWF0ZWRTcHJpdGUoKTtcclxuICAgICAgICAgICAgICAgIGxvYWRTcHIuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJsb2FkXCIsIFwiYXNzZXRzL2VudGl0aWVzLWF0bGFzLmpzb25AbG9hZC5wbmdcIiwgWzAsIDEsIDIsIDNdLCA2NCwgNjQpKTtcclxuICAgICAgICAgICAgICAgIGxvYWRTcHIuYW5jaG9yLnNldCgwLjUpO1xyXG4gICAgICAgICAgICAgICAgbG9hZFNwci5wb3NpdGlvbi5zZXQoeCwgeSArIDEwKTtcclxuICAgICAgICAgICAgICAgIGxvYWRTcHIucGxheShcImxvYWRcIiwgNCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBsb2FkU3ByLnNjYWxlLnNldCgxLCAtMSk7ICAgLy8gIHRoZSB3b3JsZENvbnRhaW5lciBoYXMgLXkgc2NhbGUgc28gd2UgbXVzdCBmbGlwIGl0IHVwIGFnYWluIFxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JsZENvbnRhaW5lci5hZGRDaGlsZChsb2FkU3ByKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKGxvYWRTcHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BPYmouaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcE9iai52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIChkaXNwT2JqIGFzIE1vYikub25EZWF0aCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1vYiBkaWVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9iQ291bnQtLTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vYkNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTcGF3biA9IChwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDApICsgdGhpcy5yZXNwYXduU2Vjb25kcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBT0E7QUFQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFDQTtBQVdBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7OztBQURBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQW5FQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./mobs/SpawnPoint.ts\n");

/***/ }),

/***/ "./objects/AnimatedSprite.ts":
/*!***********************************!*\
  !*** ./objects/AnimatedSprite.ts ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar Dictionary_1 = __webpack_require__(/*! ../utility/Dictionary */ \"./utility/Dictionary.ts\");\r\n/**\r\n * Animated sprite display object. Holds a collection of `AnimationSequence` objects that can be started and stopped on demand.\r\n */\r\nvar AnimatedSprite = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AnimatedSprite, _super);\r\n    function AnimatedSprite() {\r\n        var _this = _super.call(this) || this;\r\n        _this.currentSequence = null;\r\n        _this.accumulator = 0;\r\n        _this.isPlaying = false;\r\n        _this.isLooping = false;\r\n        _this.frameIndex = 0;\r\n        _this.currentFps = 8;\r\n        _this.animations = new Dictionary_1.Dictionary();\r\n        /**\r\n         * Plays the animation sequence by name.\r\n         * @param name - animation sequence to be played\r\n         * @param fps - animation speed in frames per second\r\n         * @param loop - if true the animation keeps looping else the animation stops once last frame is reached\r\n         * @remarks The `onComplete` callback will be invoked only if the `loop` parameter is false\r\n         */\r\n        _this.play = function (name, fps, loop) {\r\n            if (loop === void 0) { loop = true; }\r\n            if (!_this.currentSequence || _this.currentSequence.sequenceName !== name) {\r\n                _this.resetAnimation();\r\n                _this.currentSequence = _this.animations.get(name);\r\n                _this.texture = _this.currentSequence.spriteSheet;\r\n                _this.texture.frame = _this.currentSequence.frames[0];\r\n                _this.isPlaying = true;\r\n            }\r\n            _this.fps = fps || _this.fps;\r\n            _this.isLooping = loop;\r\n        };\r\n        _this.pivot.set(0.5);\r\n        _this.anchor.set(0.5);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Adds one or multiple animation sequences.\r\n     * @example\r\n     * ```\r\n     * explode.addAnimations(new AnimationSequence(\"exp\", \"assets/atlas.json@big_bang.png\", [0, 1, 2, 3, 4, 5], 32, 32));\r\n     * ```\r\n     * @param sequences - animation sequence instances to be added. All animation sequences added to an `AnimatedSprite` **must** have unique names.\r\n     */\r\n    AnimatedSprite.prototype.addAnimations = function () {\r\n        var _this = this;\r\n        var sequences = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            sequences[_i] = arguments[_i];\r\n        }\r\n        sequences.forEach(function (seq, idx) {\r\n            _this.animations.set(seq.sequenceName, seq);\r\n            //  if no clip exists create it from first animation sequence\r\n            if (!_this.texture.valid && idx === 0) {\r\n                _this.texture = seq.spriteSheet;\r\n                _this.texture.frame = seq.frames[0];\r\n            }\r\n        });\r\n    };\r\n    AnimatedSprite.prototype.clearAnimations = function () {\r\n        this.stop();\r\n        this.currentSequence = null;\r\n        this.animations.clear();\r\n    };\r\n    /**\r\n     * Used by the framework to update internal state on each frame.\r\n     */\r\n    AnimatedSprite.prototype.onUpdate = function (dt) {\r\n        if (this.isPlaying && this.texture.valid && this.currentSequence) {\r\n            this.accumulator += dt;\r\n            var secForFrame = 1000 / this.fps;\r\n            if (this.accumulator > secForFrame) {\r\n                this.accumulator -= secForFrame;\r\n                this.texture.frame = this.currentSequence.frames[++this.frameIndex];\r\n                if (this.frameIndex === this.currentSequence.frames.length - 1) {\r\n                    this.frameIndex = 0;\r\n                    //  end the animation if not looping\r\n                    if (!this.isLooping) {\r\n                        this.isPlaying = false;\r\n                        if (this.onCompleteCallBack) {\r\n                            this.onCompleteCallBack(this.currentSequence);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(AnimatedSprite.prototype, \"onComplete\", {\r\n        get: function () {\r\n            return this.onCompleteCallBack;\r\n        },\r\n        /**\r\n         * Sets the callback function to be invoked after the animation ends.\r\n         * @example Use it to trigger actions on animation end `explode.onComplete = () => this.container.removeChild(explode);`\r\n         * @remarks This callback will be invoked only if the animated sprite is not looping.\r\n         */\r\n        set: function (cb) {\r\n            this.onCompleteCallBack = cb;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AnimatedSprite.prototype.stop = function () {\r\n        this.isPlaying = false;\r\n    };\r\n    Object.defineProperty(AnimatedSprite.prototype, \"fps\", {\r\n        get: function () {\r\n            return this.currentFps;\r\n        },\r\n        set: function (fps) {\r\n            this.currentFps = fps;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AnimatedSprite.prototype, \"loop\", {\r\n        get: function () {\r\n            return this.isLooping;\r\n        },\r\n        set: function (isLooping) {\r\n            this.isLooping = isLooping;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AnimatedSprite.prototype.resetAnimation = function () {\r\n        this.stop();\r\n        this.currentSequence = null;\r\n        this.accumulator = 0;\r\n        this.frameIndex = -1;\r\n    };\r\n    return AnimatedSprite;\r\n}(__1.PIXI.Sprite));\r\nexports.AnimatedSprite = AnimatedSprite;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL0FuaW1hdGVkU3ByaXRlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vb2JqZWN0cy9BbmltYXRlZFNwcml0ZS50cz8zNjM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBJWEkgfSBmcm9tICcuLic7XHJcbmltcG9ydCB7IEFuaW1hdGlvblNlcXVlbmNlfSBmcm9tICcuL0FuaW1hdGlvblNlcXVlbmNlJztcclxuaW1wb3J0IHsgRGljdGlvbmFyeSB9IGZyb20gJy4uL3V0aWxpdHkvRGljdGlvbmFyeSc7XHJcblxyXG4vKipcclxuICogQW5pbWF0ZWQgc3ByaXRlIGRpc3BsYXkgb2JqZWN0LiBIb2xkcyBhIGNvbGxlY3Rpb24gb2YgYEFuaW1hdGlvblNlcXVlbmNlYCBvYmplY3RzIHRoYXQgY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgb24gZGVtYW5kLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFuaW1hdGVkU3ByaXRlIGV4dGVuZHMgUElYSS5TcHJpdGUge1xyXG4gICAgcHJvdGVjdGVkIGN1cnJlbnRTZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGFjY3VtdWxhdG9yOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBpc1BsYXlpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaXNMb29waW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGZyYW1lSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRGcHM6IG51bWJlciA9IDg7XHJcbiAgICBwcml2YXRlIG9uQ29tcGxldGVDYWxsQmFjazogKHNlcTogQW5pbWF0aW9uU2VxdWVuY2UpID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIGFuaW1hdGlvbnMgPSBuZXcgRGljdGlvbmFyeTxBbmltYXRpb25TZXF1ZW5jZT4oKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMucGl2b3Quc2V0KDAuNSk7XHJcbiAgICAgICAgdGhpcy5hbmNob3Iuc2V0KDAuNSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIG9uZSBvciBtdWx0aXBsZSBhbmltYXRpb24gc2VxdWVuY2VzLlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYFxyXG4gICAgICogZXhwbG9kZS5hZGRBbmltYXRpb25zKG5ldyBBbmltYXRpb25TZXF1ZW5jZShcImV4cFwiLCBcImFzc2V0cy9hdGxhcy5qc29uQGJpZ19iYW5nLnBuZ1wiLCBbMCwgMSwgMiwgMywgNCwgNV0sIDMyLCAzMikpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKiBAcGFyYW0gc2VxdWVuY2VzIC0gYW5pbWF0aW9uIHNlcXVlbmNlIGluc3RhbmNlcyB0byBiZSBhZGRlZC4gQWxsIGFuaW1hdGlvbiBzZXF1ZW5jZXMgYWRkZWQgdG8gYW4gYEFuaW1hdGVkU3ByaXRlYCAqKm11c3QqKiBoYXZlIHVuaXF1ZSBuYW1lcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbnMoLi4uc2VxdWVuY2VzOiBBbmltYXRpb25TZXF1ZW5jZVtdKTogdm9pZCB7XHJcbiAgICAgICAgc2VxdWVuY2VzLmZvckVhY2goKHNlcTogQW5pbWF0aW9uU2VxdWVuY2UsIGlkeDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zZXQoc2VxLnNlcXVlbmNlTmFtZSwgc2VxKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBpZiBubyBjbGlwIGV4aXN0cyBjcmVhdGUgaXQgZnJvbSBmaXJzdCBhbmltYXRpb24gc2VxdWVuY2VcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnRleHR1cmUudmFsaWQgJiYgaWR4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmUgPSBzZXEuc3ByaXRlU2hlZXQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmUuZnJhbWUgPSBzZXEuZnJhbWVzWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyQW5pbWF0aW9ucygpIHtcclxuICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTZXF1ZW5jZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQbGF5cyB0aGUgYW5pbWF0aW9uIHNlcXVlbmNlIGJ5IG5hbWUuXHJcbiAgICAgKiBAcGFyYW0gbmFtZSAtIGFuaW1hdGlvbiBzZXF1ZW5jZSB0byBiZSBwbGF5ZWRcclxuICAgICAqIEBwYXJhbSBmcHMgLSBhbmltYXRpb24gc3BlZWQgaW4gZnJhbWVzIHBlciBzZWNvbmRcclxuICAgICAqIEBwYXJhbSBsb29wIC0gaWYgdHJ1ZSB0aGUgYW5pbWF0aW9uIGtlZXBzIGxvb3BpbmcgZWxzZSB0aGUgYW5pbWF0aW9uIHN0b3BzIG9uY2UgbGFzdCBmcmFtZSBpcyByZWFjaGVkXHJcbiAgICAgKiBAcmVtYXJrcyBUaGUgYG9uQ29tcGxldGVgIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCBvbmx5IGlmIHRoZSBgbG9vcGAgcGFyYW1ldGVyIGlzIGZhbHNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwbGF5ID0gKG5hbWU6IHN0cmluZywgZnBzPzogbnVtYmVyLCBsb29wID0gdHJ1ZSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U2VxdWVuY2UgfHwgdGhpcy5jdXJyZW50U2VxdWVuY2Uuc2VxdWVuY2VOYW1lICE9PSBuYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VxdWVuY2UgPSB0aGlzLmFuaW1hdGlvbnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLnRleHR1cmUgPSB0aGlzLmN1cnJlbnRTZXF1ZW5jZS5zcHJpdGVTaGVldDtcclxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlLmZyYW1lID0gdGhpcy5jdXJyZW50U2VxdWVuY2UuZnJhbWVzWzBdO1xyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnBzID0gZnBzIHx8IHRoaXMuZnBzO1xyXG4gICAgICAgIHRoaXMuaXNMb29waW5nID0gbG9vcDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGJ5IHRoZSBmcmFtZXdvcmsgdG8gdXBkYXRlIGludGVybmFsIHN0YXRlIG9uIGVhY2ggZnJhbWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblVwZGF0ZShkdDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQbGF5aW5nICYmIHRoaXMudGV4dHVyZS52YWxpZCAmJiB0aGlzLmN1cnJlbnRTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IGR0O1xyXG4gICAgICAgICAgICBjb25zdCBzZWNGb3JGcmFtZSA9IDEwMDAgLyB0aGlzLmZwcztcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0b3IgPiBzZWNGb3JGcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBzZWNGb3JGcmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZS5mcmFtZSA9IHRoaXMuY3VycmVudFNlcXVlbmNlLmZyYW1lc1srK3RoaXMuZnJhbWVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZUluZGV4ID09PSB0aGlzLmN1cnJlbnRTZXF1ZW5jZS5mcmFtZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICBlbmQgdGhlIGFuaW1hdGlvbiBpZiBub3QgbG9vcGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0xvb3BpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25Db21wbGV0ZUNhbGxCYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGVDYWxsQmFjayh0aGlzLmN1cnJlbnRTZXF1ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIGFmdGVyIHRoZSBhbmltYXRpb24gZW5kcy5cclxuICAgICAqIEBleGFtcGxlIFVzZSBpdCB0byB0cmlnZ2VyIGFjdGlvbnMgb24gYW5pbWF0aW9uIGVuZCBgZXhwbG9kZS5vbkNvbXBsZXRlID0gKCkgPT4gdGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQoZXhwbG9kZSk7YFxyXG4gICAgICogQHJlbWFya3MgVGhpcyBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgb25seSBpZiB0aGUgYW5pbWF0ZWQgc3ByaXRlIGlzIG5vdCBsb29waW5nLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IG9uQ29tcGxldGUoY2I6IChzZXE6IEFuaW1hdGlvblNlcXVlbmNlKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlQ2FsbEJhY2sgPSBjYjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgb25Db21wbGV0ZSgpOiAoc2VxOiBBbmltYXRpb25TZXF1ZW5jZSkgPT4gdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25Db21wbGV0ZUNhbGxCYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IGZwcygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRGcHM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGZwcyhmcHM6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEZwcyA9IGZwcztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbG9vcChpc0xvb3Bpbmc6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmlzTG9vcGluZyA9IGlzTG9vcGluZztcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgbG9vcCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0xvb3Bpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlc2V0QW5pbWF0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNlcXVlbmNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gMDtcclxuICAgICAgICB0aGlzLmZyYW1lSW5kZXggPSAtMTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQVdBO0FBQUE7QUFWQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWtDQTs7Ozs7O0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvQ0E7QUFDQTs7QUFDQTtBQUVBOzs7Ozs7O0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxQkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFHQTtBQUNBO0FBQ0E7QUFWQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFIQTtBQUlBO0FBR0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQUNBOzs7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF6SEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./objects/AnimatedSprite.ts\n");

/***/ }),

/***/ "./objects/AnimationSequence.ts":
/*!**************************************!*\
  !*** ./objects/AnimationSequence.ts ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\n/**\r\n *  Defines a single animation. Consists of a a texture and individual animation frames.\r\n *  @remarks The texture (`spriteSheetName`) is either a spritesheet or an image inside a larger texture atlas.\r\n */\r\nvar AnimationSequence = /** @class */ (function () {\r\n    /**\r\n     * Creates a new AnimationSequence instance.\r\n     * @param sequenceName - the unique name of this animation\r\n     * @param spriteSheetName - the texture name holding all animation frames or atlas/image name\r\n     * @param frames - sequential list of frame indices defining the frame animation order.\r\n     * @param frameWidth - width of a single frame in pixels\r\n     * @param frameHeight - height of a single frame in pixels\r\n     */\r\n    function AnimationSequence(sequenceName, spriteSheetName, frames, frameWidth, frameHeight) {\r\n        var _this = this;\r\n        if (frames === void 0) { frames = []; }\r\n        this.sequenceName = sequenceName;\r\n        this.frames = [];\r\n        var tempTexure = __1.TextureLoader.Get(spriteSheetName);\r\n        var isAtlas = __1.TextureLoader.IsAtlas(tempTexure);\r\n        this.spriteSheet = new __1.PIXI.Texture(tempTexure.baseTexture);\r\n        var xFrames = isAtlas ? Math.floor(tempTexure.frame.width / frameWidth) : Math.floor(this.spriteSheet.width / frameWidth);\r\n        frames.forEach(function (frame) {\r\n            var y = Math.floor(frame / xFrames);\r\n            var x = frame % xFrames;\r\n            var rect;\r\n            if (isAtlas) {\r\n                rect = new __1.PIXI.Rectangle(tempTexure.frame.x + x * frameWidth, tempTexure.frame.y + y * frameHeight, frameWidth, frameHeight);\r\n            }\r\n            else {\r\n                rect = new __1.PIXI.Rectangle(x * frameWidth, y * frameHeight, frameWidth, frameHeight);\r\n            }\r\n            _this.frames.push(rect);\r\n        });\r\n    }\r\n    Object.defineProperty(AnimationSequence.prototype, \"frameCount\", {\r\n        /**\r\n         * Returns the number of frames defined in this animation instance.\r\n         */\r\n        get: function () {\r\n            return this.frames.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AnimationSequence;\r\n}());\r\nexports.AnimationSequence = AnimationSequence;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL0FuaW1hdGlvblNlcXVlbmNlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vb2JqZWN0cy9BbmltYXRpb25TZXF1ZW5jZS50cz81YTBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBJWEksIFRleHR1cmVMb2FkZXIgfSBmcm9tICcuLic7XHJcblxyXG4vKipcclxuICogIERlZmluZXMgYSBzaW5nbGUgYW5pbWF0aW9uLiBDb25zaXN0cyBvZiBhIGEgdGV4dHVyZSBhbmQgaW5kaXZpZHVhbCBhbmltYXRpb24gZnJhbWVzLlxyXG4gKiAgQHJlbWFya3MgVGhlIHRleHR1cmUgKGBzcHJpdGVTaGVldE5hbWVgKSBpcyBlaXRoZXIgYSBzcHJpdGVzaGVldCBvciBhbiBpbWFnZSBpbnNpZGUgYSBsYXJnZXIgdGV4dHVyZSBhdGxhcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb25TZXF1ZW5jZSB7XHJcbiAgICBwdWJsaWMgc3ByaXRlU2hlZXQ6IFBJWEkuVGV4dHVyZTtcclxuICAgIHB1YmxpYyBmcmFtZXM6IFBJWEkuUmVjdGFuZ2xlW10gPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gc2VxdWVuY2VOYW1lIC0gdGhlIHVuaXF1ZSBuYW1lIG9mIHRoaXMgYW5pbWF0aW9uXHJcbiAgICAgKiBAcGFyYW0gc3ByaXRlU2hlZXROYW1lIC0gdGhlIHRleHR1cmUgbmFtZSBob2xkaW5nIGFsbCBhbmltYXRpb24gZnJhbWVzIG9yIGF0bGFzL2ltYWdlIG5hbWVcclxuICAgICAqIEBwYXJhbSBmcmFtZXMgLSBzZXF1ZW50aWFsIGxpc3Qgb2YgZnJhbWUgaW5kaWNlcyBkZWZpbmluZyB0aGUgZnJhbWUgYW5pbWF0aW9uIG9yZGVyLlxyXG4gICAgICogQHBhcmFtIGZyYW1lV2lkdGggLSB3aWR0aCBvZiBhIHNpbmdsZSBmcmFtZSBpbiBwaXhlbHNcclxuICAgICAqIEBwYXJhbSBmcmFtZUhlaWdodCAtIGhlaWdodCBvZiBhIHNpbmdsZSBmcmFtZSBpbiBwaXhlbHNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIHNlcXVlbmNlTmFtZTogc3RyaW5nLCBzcHJpdGVTaGVldE5hbWU6IHN0cmluZywgZnJhbWVzOiBudW1iZXJbXSA9IFtdLCBmcmFtZVdpZHRoOiBudW1iZXIsIGZyYW1lSGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB0ZW1wVGV4dXJlID0gVGV4dHVyZUxvYWRlci5HZXQoc3ByaXRlU2hlZXROYW1lKSE7XHJcbiAgICAgICAgY29uc3QgaXNBdGxhcyA9IFRleHR1cmVMb2FkZXIuSXNBdGxhcyh0ZW1wVGV4dXJlKTtcclxuXHJcbiAgICAgICAgdGhpcy5zcHJpdGVTaGVldCA9IG5ldyBQSVhJLlRleHR1cmUodGVtcFRleHVyZS5iYXNlVGV4dHVyZSk7XHJcbiAgICAgICAgY29uc3QgeEZyYW1lcyA9IGlzQXRsYXMgPyBNYXRoLmZsb29yKHRlbXBUZXh1cmUuZnJhbWUud2lkdGggLyBmcmFtZVdpZHRoKSA6IE1hdGguZmxvb3IodGhpcy5zcHJpdGVTaGVldC53aWR0aCAvIGZyYW1lV2lkdGgpO1xyXG5cclxuICAgICAgICBmcmFtZXMuZm9yRWFjaCgoZnJhbWU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihmcmFtZSAvIHhGcmFtZXMpO1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gZnJhbWUgJSB4RnJhbWVzO1xyXG4gICAgICAgICAgICBsZXQgcmVjdDogUElYSS5SZWN0YW5nbGU7XHJcbiAgICAgICAgICAgIGlmIChpc0F0bGFzKSB7XHJcbiAgICAgICAgICAgICAgICByZWN0ID0gbmV3IFBJWEkuUmVjdGFuZ2xlKFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBUZXh1cmUuZnJhbWUueCArIHggKiBmcmFtZVdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBUZXh1cmUuZnJhbWUueSArIHkgKiBmcmFtZUhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZVdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoeCAqIGZyYW1lV2lkdGgsIHkgKiBmcmFtZUhlaWdodCwgZnJhbWVXaWR0aCwgZnJhbWVIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzLnB1c2gocmVjdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZnJhbWVzIGRlZmluZWQgaW4gdGhpcyBhbmltYXRpb24gaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgZnJhbWVDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1lcy5sZW5ndGg7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFFQTs7O0FBR0E7QUFDQTtBQUlBOzs7Ozs7O0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQVZBO0FBV0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQTNDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./objects/AnimationSequence.ts\n");

/***/ }),

/***/ "./objects/Bullet.ts":
/*!***************************!*\
  !*** ./objects/Bullet.ts ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar p2 = __webpack_require__(/*! p2 */ \"./node_modules/p2/src/p2.js\");\r\nvar CollisionGroups_1 = __webpack_require__(/*! ../world/CollisionGroups */ \"./world/CollisionGroups.ts\");\r\nvar WorldP2_1 = __webpack_require__(/*! ../world/WorldP2 */ \"./world/WorldP2.ts\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar TextureLoader_1 = __webpack_require__(/*! ../utility/TextureLoader */ \"./utility/TextureLoader.ts\");\r\n/**\r\n * Base for bullets, decals etc.\r\n */\r\nvar Bullet = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Bullet, _super);\r\n    /**\r\n     * Creates a new bullet particle.\r\n     *\r\n     * @param texture\r\n     * @param velocity in pixels per second\r\n     * @param ttl time to live in seconds\r\n     * @param damage bullet hit damage\r\n     */\r\n    function Bullet(texture, velocity, ttl, damage) {\r\n        var _this = _super.call(this, texture) || this;\r\n        _this.velocity = velocity;\r\n        _this.damage = damage;\r\n        _this.direction = new __1.PIXI.Point();\r\n        _this.interactionType = 666;\r\n        _this.onUpdate = function () {\r\n            // TTL expiry\r\n            if (!_this.isDead) {\r\n                var now = performance.now() / 1000;\r\n                var ellapsed = now - _this.startTime;\r\n                _this.IsDead = _this.ttl < ellapsed;\r\n            }\r\n        };\r\n        _this.ttl = ttl;\r\n        _this.IsDead = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Bullet.prototype, \"Direction\", {\r\n        get: function () {\r\n            return this.direction;\r\n        },\r\n        set: function (direction) {\r\n            //  normalize movement vector\r\n            var len = direction.x * direction.x + direction.y * direction.y;\r\n            len = 1 / Math.sqrt(len);\r\n            this.direction.set(direction.x * len, direction.y * len);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"IsDead\", {\r\n        get: function () {\r\n            return this.isDead;\r\n        },\r\n        set: function (value) {\r\n            if (value != this.isDead) {\r\n                this.isDead = value;\r\n                //console.log(\"bullet is dead: \" + value);\r\n                //  if set to alive remember start time\r\n                if (this.isDead) {\r\n                    if (this.body) {\r\n                        this.body.velocity = [0, 0];\r\n                    }\r\n                }\r\n                else {\r\n                    this.startTime = performance.now() / 1000;\r\n                    if (this.body) {\r\n                        this.body.position = [this.position.x, this.position.y];\r\n                    }\r\n                }\r\n                //  fire OnDeath if needed\r\n                if (this.isDead && this.onDeath) {\r\n                    this.onDeath();\r\n                }\r\n                this.visible = !this.isDead;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Bullet.prototype, \"OnDeath\", {\r\n        get: function () {\r\n            return this.onDeath;\r\n        },\r\n        set: function (cb) {\r\n            this.onDeath = cb;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Bullet.reset = function () {\r\n        Bullet.bullets = [];\r\n    };\r\n    Bullet.bullets = [];\r\n    Bullet.emitBullet = function (textureName, position, target, damage) {\r\n        var bullet = Bullet.findDeadBullet();\r\n        if (!bullet) {\r\n            //  create new bullet\r\n            var t = TextureLoader_1.TextureLoader.Get(textureName);\r\n            bullet = new Bullet(t, 200, 5, damage);\r\n            bullet.anchor.set(0.5);\r\n            bullet.scale.set(0.5, -0.5); //  worldcontainer is upside down\r\n            Bullet.bullets.push(bullet);\r\n            __1.Global.worldContainer.addChild(bullet);\r\n            //-----------------------------\r\n            //  create body (sensor shape)\r\n            //-----------------------------\r\n            var shape = new p2.Circle({ radius: bullet.width / 2 });\r\n            shape.collisionGroup = CollisionGroups_1.COL_GRP_BULLET;\r\n            shape.collisionMask = CollisionGroups_1.COL_GRP_PLAYER | CollisionGroups_1.COL_GRP_SCENE | CollisionGroups_1.COL_GRP_GROUND;\r\n            shape.sensor = true;\r\n            var options = {\r\n                mass: 0,\r\n                position: [position.x, position.y],\r\n                angle: 0,\r\n                fixedRotation: false,\r\n                angularDamping: 0,\r\n                damping: 0\r\n            };\r\n            var body = new p2.Body(options);\r\n            body.addShape(shape);\r\n            body.setDensity(0.0);\r\n            body.gravityScale = 0;\r\n            body.angularVelocity = 2;\r\n            body.collisionResponse = false;\r\n            body.type = p2.Body.DYNAMIC;\r\n            body.DisplayObject = bullet;\r\n            bullet.body = body;\r\n            WorldP2_1.wp2.addBody(body);\r\n        }\r\n        bullet.position = position;\r\n        var pt = (target instanceof Float32Array) ? new __1.PIXI.Point(target[0] - position.x, target[1] - position.y) : new __1.PIXI.Point(target.x - position.x, target.y - position.y);\r\n        bullet.Direction = pt;\r\n        bullet.damage = damage;\r\n        bullet.IsDead = false;\r\n        bullet.body.velocity[0] = bullet.Direction.x * bullet.velocity;\r\n        bullet.body.velocity[1] = bullet.Direction.y * bullet.velocity;\r\n        return bullet;\r\n    };\r\n    Bullet.findDeadBullet = function () {\r\n        for (var i = 0, len = Bullet.bullets.length; i < len; i++) {\r\n            var blt = Bullet.bullets[i];\r\n            if (blt.IsDead) {\r\n                return blt;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return Bullet;\r\n}(__1.PIXI.Sprite));\r\nexports.Bullet = Bullet;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL0J1bGxldC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL29iamVjdHMvQnVsbGV0LnRzPzE2NTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcDIgZnJvbSBcInAyXCI7XHJcbmltcG9ydCB7IENPTF9HUlBfUExBWUVSLCBDT0xfR1JQX0JVTExFVCwgQ09MX0dSUF9TQ0VORSwgQ09MX0dSUF9HUk9VTkQgfSBmcm9tICcuLi93b3JsZC9Db2xsaXNpb25Hcm91cHMnO1xyXG5pbXBvcnQgeyB3cDIgfSBmcm9tICcuLi93b3JsZC9Xb3JsZFAyJztcclxuaW1wb3J0IHsgR2xvYmFsLCBQSVhJIH0gZnJvbSAnLi4nO1xyXG5pbXBvcnQgeyBUZXh0dXJlTG9hZGVyIH0gZnJvbSAnLi4vdXRpbGl0eS9UZXh0dXJlTG9hZGVyJztcclxuXHJcbi8qKlxyXG4gKiBCYXNlIGZvciBidWxsZXRzLCBkZWNhbHMgZXRjLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1bGxldCBleHRlbmRzIFBJWEkuU3ByaXRlIHtcclxuICAgIHByaXZhdGUgZGlyZWN0aW9uOiBQSVhJLlBvaW50ID0gbmV3IFBJWEkuUG9pbnQoKTtcclxuICAgIHByaXZhdGUgdHRsOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN0YXJ0VGltZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBpc0RlYWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIG9uRGVhdGg6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGludGVyYWN0aW9uVHlwZTogbnVtYmVyID0gNjY2O1xyXG4gICAgcHVibGljIGJvZHk6IHAyLkJvZHk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGJ1bGxldCBwYXJ0aWNsZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGV4dHVyZVxyXG4gICAgICogQHBhcmFtIHZlbG9jaXR5IGluIHBpeGVscyBwZXIgc2Vjb25kXHJcbiAgICAgKiBAcGFyYW0gdHRsIHRpbWUgdG8gbGl2ZSBpbiBzZWNvbmRzXHJcbiAgICAgKiBAcGFyYW0gZGFtYWdlIGJ1bGxldCBoaXQgZGFtYWdlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmU6IFBJWEkuVGV4dHVyZSwgcHVibGljIHZlbG9jaXR5OiBudW1iZXIsIHR0bDogbnVtYmVyLCBwdWJsaWMgZGFtYWdlOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcih0ZXh0dXJlKTtcclxuICAgICAgICB0aGlzLnR0bCA9IHR0bDtcclxuICAgICAgICB0aGlzLklzRGVhZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgRGlyZWN0aW9uKGRpcmVjdGlvbjogUElYSS5Qb2ludCkge1xyXG4gICAgICAgIC8vICBub3JtYWxpemUgbW92ZW1lbnQgdmVjdG9yXHJcbiAgICAgICAgbGV0IGxlbiA9IGRpcmVjdGlvbi54ICogZGlyZWN0aW9uLnggKyBkaXJlY3Rpb24ueSAqIGRpcmVjdGlvbi55O1xyXG4gICAgICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbi5zZXQoZGlyZWN0aW9uLnggKiBsZW4sIGRpcmVjdGlvbi55ICogbGVuKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IElzRGVhZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0RlYWQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IElzRGVhZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLmlzRGVhZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzRGVhZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiYnVsbGV0IGlzIGRlYWQ6IFwiICsgdmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gIGlmIHNldCB0byBhbGl2ZSByZW1lbWJlciBzdGFydCB0aW1lXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVhZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keS52ZWxvY2l0eSA9IFswLCAwXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keS5wb3NpdGlvbiA9IFt0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICBmaXJlIE9uRGVhdGggaWYgbmVlZGVkXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVhZCAmJiB0aGlzLm9uRGVhdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25EZWF0aCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSAhdGhpcy5pc0RlYWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgT25EZWF0aChjYjogeyAoKTogdm9pZCB9KSB7XHJcbiAgICAgICAgdGhpcy5vbkRlYXRoID0gY2I7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IE9uRGVhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25EZWF0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gVFRMIGV4cGlyeVxyXG4gICAgICAgIGlmICghdGhpcy5pc0RlYWQpIHtcclxuICAgICAgICAgICAgbGV0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDtcclxuICAgICAgICAgICAgbGV0IGVsbGFwc2VkID0gbm93IC0gdGhpcy5zdGFydFRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuSXNEZWFkID0gdGhpcy50dGwgPCBlbGxhcHNlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYnVsbGV0czogQnVsbGV0W10gPSBbXTtcclxuICAgIHB1YmxpYyBzdGF0aWMgZW1pdEJ1bGxldCA9ICh0ZXh0dXJlTmFtZTogc3RyaW5nLCBwb3NpdGlvbjogUElYSS5JUG9pbnQsIHRhcmdldDphbnksIGRhbWFnZTogbnVtYmVyKTogQnVsbGV0ID0+IHtcclxuICAgICAgICBsZXQgYnVsbGV0ID0gQnVsbGV0LmZpbmREZWFkQnVsbGV0KCk7XHJcbiAgICAgICAgaWYgKCFidWxsZXQpIHtcclxuXHJcbiAgICAgICAgICAgIC8vICBjcmVhdGUgbmV3IGJ1bGxldFxyXG4gICAgICAgICAgICB2YXIgdCA9IFRleHR1cmVMb2FkZXIuR2V0KHRleHR1cmVOYW1lKTtcclxuICAgICAgICAgICAgYnVsbGV0ID0gbmV3IEJ1bGxldCh0LCAyMDAsIDUsIGRhbWFnZSk7XHJcbiAgICAgICAgICAgIGJ1bGxldC5hbmNob3Iuc2V0KDAuNSk7XHJcbiAgICAgICAgICAgIGJ1bGxldC5zY2FsZS5zZXQoMC41LCAtMC41KTsgICAgLy8gIHdvcmxkY29udGFpbmVyIGlzIHVwc2lkZSBkb3duXHJcbiAgICAgICAgICAgIEJ1bGxldC5idWxsZXRzLnB1c2goYnVsbGV0KTtcclxuICAgICAgICAgICAgR2xvYmFsLndvcmxkQ29udGFpbmVyLmFkZENoaWxkKGJ1bGxldCk7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgICAgIC8vICBjcmVhdGUgYm9keSAoc2Vuc29yIHNoYXBlKVxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgICAgIGxldCBzaGFwZSA9IG5ldyBwMi5DaXJjbGUoeyByYWRpdXM6IGJ1bGxldC53aWR0aCAvIDIgfSk7XHJcbiAgICAgICAgICAgIHNoYXBlLmNvbGxpc2lvbkdyb3VwID0gQ09MX0dSUF9CVUxMRVQ7XHJcbiAgICAgICAgICAgIHNoYXBlLmNvbGxpc2lvbk1hc2sgPSBDT0xfR1JQX1BMQVlFUiB8IENPTF9HUlBfU0NFTkUgfCBDT0xfR1JQX0dST1VORDtcclxuICAgICAgICAgICAgc2hhcGUuc2Vuc29yID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnM6IHAyLkJvZHlPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbWFzczogMCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBbcG9zaXRpb24ueCwgcG9zaXRpb24ueV0sXHJcbiAgICAgICAgICAgICAgICBhbmdsZTogMCxcclxuICAgICAgICAgICAgICAgIGZpeGVkUm90YXRpb246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYW5ndWxhckRhbXBpbmc6IDAsXHJcbiAgICAgICAgICAgICAgICBkYW1waW5nOiAwXHJcbiAgICAgICAgICAgIH0gYXMgcDIuQm9keU9wdGlvbnM7XHJcbiAgICAgICAgICAgIGxldCBib2R5ID0gbmV3IHAyLkJvZHkob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGJvZHkuYWRkU2hhcGUoc2hhcGUpO1xyXG4gICAgICAgICAgICBib2R5LnNldERlbnNpdHkoMC4wKTtcclxuICAgICAgICAgICAgYm9keS5ncmF2aXR5U2NhbGUgPSAwO1xyXG4gICAgICAgICAgICBib2R5LmFuZ3VsYXJWZWxvY2l0eSA9IDI7XHJcbiAgICAgICAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgYm9keS50eXBlID0gcDIuQm9keS5EWU5BTUlDO1xyXG4gICAgICAgICAgICAoYm9keSBhcyBhbnkpLkRpc3BsYXlPYmplY3QgPSBidWxsZXQ7XHJcbiAgICAgICAgICAgIGJ1bGxldC5ib2R5ID0gYm9keTtcclxuICAgICAgICAgICAgd3AyLmFkZEJvZHkoYm9keSk7XHJcbiAgICAgICAgfSBcclxuXHJcbiAgICAgICAgYnVsbGV0LnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgbGV0IHB0ID0gKHRhcmdldCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgPyBuZXcgUElYSS5Qb2ludCh0YXJnZXRbMF0gLSBwb3NpdGlvbi54LCB0YXJnZXRbMV0gLSBwb3NpdGlvbi55KSA6IG5ldyBQSVhJLlBvaW50KHRhcmdldC54IC0gcG9zaXRpb24ueCwgdGFyZ2V0LnkgLSBwb3NpdGlvbi55KTtcclxuICAgICAgICBidWxsZXQuRGlyZWN0aW9uID0gcHQ7XHJcbiAgICAgICAgYnVsbGV0LmRhbWFnZSA9IGRhbWFnZTtcclxuICAgICAgICBidWxsZXQuSXNEZWFkID0gZmFsc2U7XHJcbiAgICAgICAgYnVsbGV0LmJvZHkudmVsb2NpdHlbMF0gPSBidWxsZXQuRGlyZWN0aW9uLnggKiBidWxsZXQudmVsb2NpdHk7XHJcbiAgICAgICAgYnVsbGV0LmJvZHkudmVsb2NpdHlbMV0gPSBidWxsZXQuRGlyZWN0aW9uLnkgKiBidWxsZXQudmVsb2NpdHk7XHJcblxyXG4gICAgICAgIHJldHVybiBidWxsZXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVzZXQoKXtcclxuICAgICAgICBCdWxsZXQuYnVsbGV0cyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGZpbmREZWFkQnVsbGV0ID0gKCk6IEJ1bGxldCA9PiB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IEJ1bGxldC5idWxsZXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBibHQgPSBCdWxsZXQuYnVsbGV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKGJsdC5Jc0RlYWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBibHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBVUE7Ozs7Ozs7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBakJBO0FBTUE7QUErREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpEQTtBQUNBOztBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUF6QkE7QUEyQkE7QUFHQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBQ0E7OztBQUFBO0FBaUVBO0FBQ0E7QUFDQTtBQXJEQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUEvSUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./objects/Bullet.ts\n");

/***/ }),

/***/ "./objects/Bumper.ts":
/*!***************************!*\
  !*** ./objects/Bumper.ts ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar TEXTURE_BUMPER = \"assets/objects-atlas.json@bumper_01.png\";\r\nvar TEXTURE_ROTOR = \"assets/objects-atlas.json@bumper_rotor_01.png\";\r\nvar ROTATION = Math.PI / 8;\r\nvar Bumper = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Bumper, _super);\r\n    function Bumper() {\r\n        var _this = _super.call(this, __1.TextureLoader.Get(TEXTURE_BUMPER) /*PIXI.loader.resources[TEXTURE_BUMPER].texture*/) || this;\r\n        _this.onUpdate = function (dt) {\r\n            var rot = _this.rotor.rotation - (ROTATION * dt / 1000);\r\n            _this.rotor.rotation = rot % Math.PI;\r\n        };\r\n        _this.rotor = new __1.PIXI.Sprite(__1.TextureLoader.Get(TEXTURE_ROTOR) /*PIXI.loader.resources[TEXTURE_ROTOR].texture*/);\r\n        _this.rotor.anchor.set(0.5);\r\n        _this.rotor.pivot.set(0.5);\r\n        _this.addChild(_this.rotor);\r\n        _this.anchor.set(0.5);\r\n        return _this;\r\n    }\r\n    return Bumper;\r\n}(__1.PIXI.Sprite));\r\nexports.Bumper = Bumper;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL0J1bXBlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL29iamVjdHMvQnVtcGVyLnRzPzkzMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUElYSSwgVGV4dHVyZUxvYWRlciB9IGZyb20gJy4uJztcclxuXHJcbmNvbnN0IFRFWFRVUkVfQlVNUEVSID0gXCJhc3NldHMvb2JqZWN0cy1hdGxhcy5qc29uQGJ1bXBlcl8wMS5wbmdcIjtcclxuY29uc3QgVEVYVFVSRV9ST1RPUiA9ICBcImFzc2V0cy9vYmplY3RzLWF0bGFzLmpzb25AYnVtcGVyX3JvdG9yXzAxLnBuZ1wiO1xyXG5jb25zdCBST1RBVElPTiA9IE1hdGguUEkgLyA4O1xyXG5cclxuZXhwb3J0IGNsYXNzIEJ1bXBlciBleHRlbmRzIFBJWEkuU3ByaXRlIHtcclxuICAgIHByaXZhdGUgcm90b3I6IFBJWEkuU3ByaXRlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFRleHR1cmVMb2FkZXIuR2V0KFRFWFRVUkVfQlVNUEVSKS8qUElYSS5sb2FkZXIucmVzb3VyY2VzW1RFWFRVUkVfQlVNUEVSXS50ZXh0dXJlKi8pO1xyXG4gICAgICAgIHRoaXMucm90b3IgPSBuZXcgUElYSS5TcHJpdGUoVGV4dHVyZUxvYWRlci5HZXQoVEVYVFVSRV9ST1RPUikvKlBJWEkubG9hZGVyLnJlc291cmNlc1tURVhUVVJFX1JPVE9SXS50ZXh0dXJlKi8pO1xyXG4gICAgICAgIHRoaXMucm90b3IuYW5jaG9yLnNldCgwLjUpO1xyXG4gICAgICAgIHRoaXMucm90b3IucGl2b3Quc2V0KDAuNSk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnJvdG9yKTtcclxuICAgICAgICB0aGlzLmFuY2hvci5zZXQoMC41KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25VcGRhdGUgPSAoZHQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIHZhciByb3QgPSB0aGlzLnJvdG9yLnJvdGF0aW9uIC0gKFJPVEFUSU9OICogZHQgLyAxMDAwKTtcclxuICAgICAgICB0aGlzLnJvdG9yLnJvdGF0aW9uID0gcm90ICUgTWF0aC5QSTtcclxuICAgIH07XHJcbn0iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUdBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFNQTtBQUFBO0FBaEJBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./objects/Bumper.ts\n");

/***/ }),

/***/ "./objects/HeroCharacter.ts":
/*!**********************************!*\
  !*** ./objects/HeroCharacter.ts ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar global_1 = __webpack_require__(/*! ../global */ \"./global.ts\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar events_1 = __webpack_require__(/*! ../events */ \"./events.ts\");\r\nvar MovementController_1 = __webpack_require__(/*! ./MovementController */ \"./objects/MovementController.ts\");\r\nvar WorldP2_1 = __webpack_require__(/*! ../world/WorldP2 */ \"./world/WorldP2.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ./PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar Mob_1 = __webpack_require__(/*! ../mobs/Mob */ \"./mobs/Mob.ts\");\r\nvar LevelLoader_1 = __webpack_require__(/*! ../world/LevelLoader */ \"./world/LevelLoader.ts\");\r\nvar SoundMan_1 = __webpack_require__(/*! ../world/SoundMan */ \"./world/SoundMan.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\nvar AnimatedSprite_1 = __webpack_require__(/*! ./AnimatedSprite */ \"./objects/AnimatedSprite.ts\");\r\nvar TextureLoader_1 = __webpack_require__(/*! ../utility/TextureLoader */ \"./utility/TextureLoader.ts\");\r\nvar AnimationSequence_1 = __webpack_require__(/*! ./AnimationSequence */ \"./objects/AnimationSequence.ts\");\r\nvar HERO_FRAME_SIZE = 64;\r\nvar HeroCharacter = /** @class */ (function (_super) {\r\n    tslib_1.__extends(HeroCharacter, _super);\r\n    function HeroCharacter(container) {\r\n        var _this = _super.call(this) || this;\r\n        _this.container = container;\r\n        /**\r\n         * Checks movementCtrl.MovementState and updates pixi dust emitter and consumption.\r\n         * @param dt elapsed time in milliseconds\r\n         */\r\n        _this.onUpdate = function (dt) {\r\n            _this.position.x = __1.Global.position.x;\r\n            _this.position.y = __1.Global.position.y;\r\n            if (_this.IsInteractive) {\r\n                _this.movementCtrl.update(dt);\r\n            }\r\n            switch (_this.movementCtrl.MovementState) {\r\n                case MovementController_1.MovementState.Idle:\r\n                    _this.emitterPixies.emit = false;\r\n                    break;\r\n                case MovementController_1.MovementState.Left:\r\n                case MovementController_1.MovementState.JumpLeft:\r\n                    _this.emitterPixies.emit = _this.movementCtrl.IsRunning;\r\n                    _this.emitterPixies.minStartRotation = -25;\r\n                    _this.emitterPixies.maxStartRotation = 25;\r\n                    break;\r\n                case MovementController_1.MovementState.Right:\r\n                case MovementController_1.MovementState.JumpRight:\r\n                    _this.emitterPixies.emit = _this.movementCtrl.IsRunning;\r\n                    _this.emitterPixies.minStartRotation = 155;\r\n                    _this.emitterPixies.maxStartRotation = 205;\r\n                    break;\r\n                case MovementController_1.MovementState.JumpUp:\r\n                    _this.emitterPixies.emit = _this.movementCtrl.IsRunning;\r\n                    _this.emitterPixies.minStartRotation = 245;\r\n                    _this.emitterPixies.maxStartRotation = 295;\r\n                    break;\r\n            }\r\n            _this.emitterPixies.update(dt * 0.001);\r\n            _this.emitterPixies.updateOwnerPos(_this.position.x, _this.position.y);\r\n            _this.emitterBurn.update(dt * 0.001);\r\n            //--------------------------\r\n            //  check if running\r\n            //--------------------------\r\n            if (_this.movementCtrl.IsRunning && _this.movementCtrl.MovementState !== MovementController_1.MovementState.Idle) {\r\n                PlayerStats_1.stats.increaseStat(enums_1.StatType.Dust, -dt * 0.005); //  5/sec\r\n                var angle = 8;\r\n                var degree = Math.PI * angle / 180;\r\n                _this.rotation = (_this.movementCtrl.MovementState === MovementController_1.MovementState.Left) ? degree : -degree;\r\n            }\r\n            else {\r\n                _this.rotation = 0;\r\n            }\r\n            _this.emitterBurn.emit = PlayerStats_1.stats.isBurning;\r\n            _super.prototype.onUpdate.call(_this, dt);\r\n        };\r\n        _this.onPlayerMove = function (event) {\r\n            var state = event.newState;\r\n            var fps = event.isRunning ? __1.ANIMATION_FPS_NORMAL * 1.6 : __1.ANIMATION_FPS_NORMAL;\r\n            switch (state) {\r\n                case MovementController_1.MovementState.Idle:\r\n                    if (_this.idleAnimationTimeoutHandle)\r\n                        clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.idleAnimationTimeoutHandle = setTimeout(function () {\r\n                        _this.play(\"idle\", __1.ANIMATION_FPS_SLOW);\r\n                        SoundMan_1.snd.idle();\r\n                    }, 300);\r\n                    break;\r\n                case MovementController_1.MovementState.Left:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"left\", fps);\r\n                    SoundMan_1.snd.walk(event.isRunning);\r\n                    break;\r\n                case MovementController_1.MovementState.Right:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"right\", fps);\r\n                    SoundMan_1.snd.walk(event.isRunning);\r\n                    break;\r\n                case MovementController_1.MovementState.JumpLeft:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"jumpleft\", fps);\r\n                    SoundMan_1.snd.jump();\r\n                    break;\r\n                case MovementController_1.MovementState.JumpRight:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"jumpright\", fps);\r\n                    SoundMan_1.snd.jump();\r\n                    break;\r\n                case MovementController_1.MovementState.JumpUp:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"jumpup\", fps);\r\n                    SoundMan_1.snd.jump();\r\n                    break;\r\n                case MovementController_1.MovementState.JumpDownLeft:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"jumpdownleft\", fps, false);\r\n                    SoundMan_1.snd.jumpAttack();\r\n                    break;\r\n                case MovementController_1.MovementState.JumpDownRight:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"jumpdownright\", fps, false);\r\n                    SoundMan_1.snd.jumpAttack();\r\n                    break;\r\n                case MovementController_1.MovementState.JumpDown:\r\n                    clearTimeout(_this.idleAnimationTimeoutHandle);\r\n                    _this.play(\"jumpdown\", fps, false);\r\n                    SoundMan_1.snd.jumpAttack();\r\n                    break;\r\n            }\r\n        };\r\n        _this.movementCtrl = new MovementController_1.MovementController(WorldP2_1.wp2);\r\n        WorldP2_1.wp2.on(\"playerContact\", _this.onPlayerContact, _this);\r\n        WorldP2_1.wp2.on(\"bulletContact\", _this.onBulletContact, _this);\r\n        var cfg = {\r\n            alpha: {\r\n                start: 0.7,\r\n                end: 0\r\n            },\r\n            blendMode: \"normal\",\r\n            frequency: 0.01,\r\n            startRotation: {\r\n                min: 265,\r\n                max: 275\r\n            },\r\n            color: {\r\n                start: \"#ffffff\",\r\n                end: \"#ff5050\"\r\n            },\r\n            speed: {\r\n                start: 1,\r\n                end: 0.5,\r\n                minimumSpeedMultiplier: 1\r\n            },\r\n            scale: {\r\n                start: 0.2,\r\n                end: 0.6\r\n            },\r\n            maxParticles: 20,\r\n            lifetime: {\r\n                min: 0.25,\r\n                max: 0.75\r\n            },\r\n            spawnType: \"circle\",\r\n            spawnCircle: {\r\n                x: 0,\r\n                y: HERO_FRAME_SIZE - 25,\r\n                r: 25\r\n            }\r\n        };\r\n        //    attached to hero sprite\r\n        _this.emitterBurn = global_1.createParticleEmitter(_this, [TextureLoader_1.TextureLoader.Get(\"assets/entities-atlas.json@flame.png\")], cfg);\r\n        //   attached to container since it must emit outside hero sprite\r\n        _this.emitterPixies = global_1.createParticleEmitter(container, [TextureLoader_1.TextureLoader.Get(\"assets/objects-atlas.json@star.png\")]);\r\n        var asset = \"assets/objects-atlas.json@hero.png\";\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"right\", asset, [18, 19, 20, 21, 22, 23], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"left\", asset, [12, 13, 14, 15, 16, 17], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"jumpleft\", asset, [24, 25, 26, 27, 28, 29], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"jumpright\", asset, [30, 31, 32, 33, 34, 35], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"jumpup\", asset, [1, 3, 4, 6], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"idle\", asset, [1, 1, 0, 1, 2, 3, , 4, 5, 13, 12, 6, 7, 11, 18, 19, 0], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"jumpdownleft\", asset, [36, 37, 38], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"jumpdownright\", asset, [39, 40, 41], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"jumpdown\", asset, [42, 43, 44], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n        _this.anchor.set(0.5, 0.58);\r\n        _this.scale.y *= -1; //  the worldContainer has -y scale so we must flip it up again \r\n        events_1.eventEmitter.on(events_1.MOVE_TOPIC, _this.onPlayerMove);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(HeroCharacter.prototype, \"IsInteractive\", {\r\n        /**\r\n         * Returns if the player can interact via controls.\r\n         */\r\n        get: function () {\r\n            return this.movementCtrl.isInteractive;\r\n        },\r\n        /**\r\n         * Sets if the player can interact via controls.\r\n         */\r\n        set: function (newValue) {\r\n            this.movementCtrl.isInteractive = newValue;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Checks if the player has jumped on something with a high velocity.\r\n     * Adds smoke for ground contacts and handles mob collision for npc's.\r\n     *\r\n     * @param event\r\n     */\r\n    HeroCharacter.prototype.onPlayerContact = function (event) {\r\n        var _this = this;\r\n        var SND_TRESHOLD_VELOCITY = 400;\r\n        var SMOKE_VELOCITY = 450;\r\n        var ATTACK_VELOCITY = 505;\r\n        var body = event.body;\r\n        var mob = event.body.DisplayObject;\r\n        var verticalVelocity = Math.abs(event.velocity[1]);\r\n        if (verticalVelocity > ATTACK_VELOCITY) {\r\n            //console.log(\"Vert velocity: \" + verticalVelocity);\r\n            //  check collision vs mobs\r\n            if (mob instanceof Mob_1.Mob) {\r\n                if (!mob.isLoading) {\r\n                    this.handleMobInteraction(mob, body);\r\n                }\r\n            }\r\n            var movementState = this.movementCtrl.MovementState;\r\n            if (movementState === MovementController_1.MovementState.JumpDown ||\r\n                movementState === MovementController_1.MovementState.JumpDownLeft ||\r\n                movementState === MovementController_1.MovementState.JumpDownRight) {\r\n                SoundMan_1.snd.jumpContact();\r\n                events_1.eventEmitter.emit(events_1.GROUND_SHAKE, { milliSeconds: 600, magnitudeInPixels: 9 });\r\n                return;\r\n            }\r\n        }\r\n        if (verticalVelocity > SMOKE_VELOCITY) {\r\n            console.log(\"Vert velocity: \" + verticalVelocity);\r\n            var smoke = new AnimatedSprite_1.AnimatedSprite();\r\n            smoke.addAnimations(new AnimationSequence_1.AnimationSequence(\"smoke\", \"assets/entities-atlas.json@jump_smoke.png\", [0, 1, 2, 3, 4, 5], HERO_FRAME_SIZE, HERO_FRAME_SIZE));\r\n            smoke.anchor.set(0.5);\r\n            smoke.pivot.set(0.5);\r\n            smoke.x = this.x;\r\n            smoke.y = this.y - 25;\r\n            smoke.alpha = 0.7;\r\n            smoke.rotation = Math.random() * Math.PI;\r\n            this.container.addChild(smoke);\r\n            smoke.onComplete = function () { return _this.container.removeChild(smoke); };\r\n            smoke.play(\"smoke\", 6, false);\r\n        }\r\n        if (verticalVelocity > SND_TRESHOLD_VELOCITY) {\r\n            SoundMan_1.snd.jumpContact();\r\n            console.log(\"velocity: \" + event.velocity);\r\n        }\r\n    };\r\n    /**\r\n     * Handles bullets hitting the player or obstacle.\r\n     *\r\n     * @param event\r\n     */\r\n    HeroCharacter.prototype.onBulletContact = function (event) {\r\n        var _this = this;\r\n        var bullet = event.bulletBody.DisplayObject;\r\n        if (!bullet.IsDead) {\r\n            if (event.playerHit) {\r\n                SoundMan_1.snd.hitPain();\r\n                //this.hud.addInfoMessage(this.position, `${-bullet.damage} HP`, MSG_HP_STYLE, 50);\r\n                PlayerStats_1.stats.increaseStat(enums_1.StatType.HP, -bullet.damage);\r\n            }\r\n            else {\r\n                //  TODO: recycle explode animations\r\n                var explode = new AnimatedSprite_1.AnimatedSprite();\r\n                explode.addAnimations(new AnimationSequence_1.AnimationSequence(\"exp\", \"assets/entities-atlas.json@slime_atk_exp.png\", [0, 1, 2, 3, 4, 5], 32, 32));\r\n                explode.anchor.set(0.5);\r\n                explode.pivot.set(0.5);\r\n                explode.x = bullet.x;\r\n                explode.y = bullet.y;\r\n                explode.alpha = 0.7;\r\n                explode.rotation = Math.random() * Math.PI;\r\n                this.container.addChild(explode);\r\n                explode.onComplete = function () { return _this.container.removeChild(explode); };\r\n                explode.play(\"exp\", 10, false);\r\n                SoundMan_1.snd.bulletHitWall();\r\n            }\r\n            bullet.IsDead = true;\r\n        }\r\n    };\r\n    /**\r\n     * Handles interaction with mobs (mob kill).\r\n     * @param mob\r\n     * @param body\r\n     */\r\n    HeroCharacter.prototype.handleMobInteraction = function (mob, body) {\r\n        var _this = this;\r\n        var dispObj = body.DisplayObject;\r\n        var it = dispObj;\r\n        //  generate drop\r\n        if (it.drop) {\r\n            var isDropping = Math.random() <= it.drop.chance;\r\n            if (isDropping) {\r\n                var dropItemBody = LevelLoader_1.LevelLoader.createEntity(PlayerStats_1.stats.currentLevel.templates, it.drop.entity);\r\n                this.addDropItem(mob, dropItemBody);\r\n            }\r\n        }\r\n        this.removeEntity(body);\r\n        mob.squish(function () { return _this.container.removeChild(dispObj); });\r\n        //  add exp       \r\n        var exp = mob.attributes[enums_1.AtrType.HP] / 2;\r\n        PlayerStats_1.stats.increaseStat(enums_1.StatType.TotalExp, exp);\r\n    };\r\n    /**\r\n     * Adds an drop item to the scene with a tween animation.\r\n     * @param dispObj\r\n     */\r\n    HeroCharacter.prototype.addDropItem = function (mob, itemBody) {\r\n        var dispObj = itemBody.DisplayObject;\r\n        dispObj.x = mob.x;\r\n        dispObj.y = mob.y + 40;\r\n        this.container.addChild(dispObj);\r\n        //  tween from mob position to random position near hero\r\n        var upX = dispObj.position.x + 75;\r\n        var upY = dispObj.position.y + 200;\r\n        var moveUp = new __1.TWEEN.Tween(dispObj.position)\r\n            .to({ x: upX, y: upY }, 400)\r\n            .onComplete(function () {\r\n            itemBody.position = [dispObj.position.x, dispObj.position.y];\r\n            WorldP2_1.wp2.addBody(itemBody);\r\n        });\r\n        var orgScaleX = dispObj.scale.x;\r\n        var orgScaleY = dispObj.scale.y;\r\n        var scale = new __1.TWEEN.Tween(dispObj.scale)\r\n            .to({ x: orgScaleX + 0.3, y: orgScaleX + 0.3 }, 350)\r\n            .easing(__1.TWEEN.Easing.Linear.None);\r\n        var endX = this.x;\r\n        var endY = this.y + 8;\r\n        var moveAway = new __1.TWEEN.Tween(dispObj.position)\r\n            .to({ x: endX, y: endY }, 350)\r\n            .easing(__1.TWEEN.Easing.Back.In)\r\n            .onUpdate(function (pos) {\r\n            itemBody.position = [dispObj.position.x, dispObj.position.y];\r\n        })\r\n            .onComplete(function () { return dispObj.scale.set(orgScaleX, orgScaleY); });\r\n        moveUp.chain(scale, moveAway).start();\r\n    };\r\n    /**\r\n     * Removes an entity from the p2 world and sets its DisplayObject to null.\r\n     * If the removeDisplayObject is true the display object will be also removed from the worldContainer\r\n     *\r\n     * @param body\r\n     * @param removeDisplayObject\r\n     */\r\n    HeroCharacter.prototype.removeEntity = function (body, removeDisplayObject) {\r\n        if (removeDisplayObject === void 0) { removeDisplayObject = false; }\r\n        WorldP2_1.wp2.removeBody(body);\r\n        if (removeDisplayObject) {\r\n            this.container.removeChild(body.DisplayObject);\r\n        }\r\n        body.DisplayObject = null;\r\n    };\r\n    return HeroCharacter;\r\n}(AnimatedSprite_1.AnimatedSprite));\r\nexports.HeroCharacter = HeroCharacter;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL0hlcm9DaGFyYWN0ZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9vYmplY3RzL0hlcm9DaGFyYWN0ZXIudHM/YjlkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXJ0aWNsZXMgZnJvbSBcInBpeGktcGFydGljbGVzXCI7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVQYXJ0aWNsZUVtaXR0ZXIgfSBmcm9tICcuLi9nbG9iYWwnO1xyXG5pbXBvcnQgeyBBTklNQVRJT05fRlBTX1NMT1csIEFOSU1BVElPTl9GUFNfTk9STUFMLCBHbG9iYWwsIFRXRUVOIH0gZnJvbSAnLi4nO1xyXG5pbXBvcnQgeyBNT1ZFX1RPUElDLCBHUk9VTkRfU0hBS0UsIGV2ZW50RW1pdHRlciB9IGZyb20gJy4uL2V2ZW50cyc7XHJcbmltcG9ydCB7IE1vdmVtZW50Q29udHJvbGxlciwgTW92ZW1lbnRTdGF0ZSB9IGZyb20gJy4vTW92ZW1lbnRDb250cm9sbGVyJztcclxuaW1wb3J0IHsgd3AyIH0gZnJvbSAnLi4vd29ybGQvV29ybGRQMic7XHJcbmltcG9ydCB7IHN0YXRzIH0gZnJvbSAnLi9QbGF5ZXJTdGF0cyc7XHJcbmltcG9ydCB7IE1vYiB9IGZyb20gJy4uL21vYnMvTW9iJztcclxuaW1wb3J0IHsgTGV2ZWxMb2FkZXIgfSBmcm9tICcuLi93b3JsZC9MZXZlbExvYWRlcic7XHJcbmltcG9ydCB7IElJbnRlcmFjdGlvblR5cGUgfSBmcm9tICcuLi93b3JsZC9MZXZlbEludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBzbmQgfSBmcm9tICcuLi93b3JsZC9Tb3VuZE1hbic7XHJcbmltcG9ydCB7IEJ1bGxldCB9IGZyb20gJy4vQnVsbGV0JztcclxuaW1wb3J0IHsgU3RhdFR5cGUsIEF0clR5cGUgfSBmcm9tICcuLi9lbnVtcyc7XHJcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSAnLi9BbmltYXRlZFNwcml0ZSc7XHJcbmltcG9ydCB7IFRleHR1cmVMb2FkZXIgfSBmcm9tICcuLi91dGlsaXR5L1RleHR1cmVMb2FkZXInO1xyXG5pbXBvcnQgeyBBbmltYXRpb25TZXF1ZW5jZSB9IGZyb20gJy4vQW5pbWF0aW9uU2VxdWVuY2UnO1xyXG5cclxuY29uc3QgSEVST19GUkFNRV9TSVpFOiBudW1iZXIgPSA2NDtcclxuXHJcbmV4cG9ydCBjbGFzcyBIZXJvQ2hhcmFjdGVyIGV4dGVuZHMgQW5pbWF0ZWRTcHJpdGUge1xyXG4gICAgcHJpdmF0ZSBlbWl0dGVyUGl4aWVzOiBwYXJ0aWNsZXMuRW1pdHRlcjtcclxuICAgIHByaXZhdGUgZW1pdHRlckJ1cm46IHBhcnRpY2xlcy5FbWl0dGVyO1xyXG4gICAgcHJpdmF0ZSBtb3ZlbWVudEN0cmw6IE1vdmVtZW50Q29udHJvbGxlcjtcclxuICAgIHByaXZhdGUgaWRsZUFuaW1hdGlvblRpbWVvdXRIYW5kbGU6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbnRhaW5lcjogUElYSS5Db250YWluZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubW92ZW1lbnRDdHJsID0gbmV3IE1vdmVtZW50Q29udHJvbGxlcih3cDIpO1xyXG4gICAgICAgIHdwMi5vbihcInBsYXllckNvbnRhY3RcIiwgdGhpcy5vblBsYXllckNvbnRhY3QsIHRoaXMpO1xyXG4gICAgICAgIHdwMi5vbihcImJ1bGxldENvbnRhY3RcIiwgdGhpcy5vbkJ1bGxldENvbnRhY3QsIHRoaXMpO1xyXG5cclxuICAgICAgICB2YXIgY2ZnID0geyAgICAgXHJcbiAgICAgICAgICAgIGFscGhhOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogMC43LFxyXG4gICAgICAgICAgICAgICAgZW5kOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJsZW5kTW9kZTogXCJub3JtYWxcIixcclxuICAgICAgICAgICAgZnJlcXVlbmN5OiAwLjAxLFxyXG4gICAgICAgICAgICBzdGFydFJvdGF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBtaW46IDI2NSxcclxuICAgICAgICAgICAgICAgIG1heDogMjc1XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbG9yOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogXCIjZmZmZmZmXCIsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IFwiI2ZmNTA1MFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNwZWVkOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogMSxcclxuICAgICAgICAgICAgICAgIGVuZDogMC41LFxyXG4gICAgICAgICAgICAgICAgbWluaW11bVNwZWVkTXVsdGlwbGllcjogMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzY2FsZToge1xyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IDAuMixcclxuICAgICAgICAgICAgICAgIGVuZDogMC42XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1heFBhcnRpY2xlczogMjAsXHJcbiAgICAgICAgICAgIGxpZmV0aW1lOiB7XHJcbiAgICAgICAgICAgICAgICBtaW46IDAuMjUsXHJcbiAgICAgICAgICAgICAgICBtYXg6IDAuNzVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3Bhd25UeXBlOiBcImNpcmNsZVwiLFxyXG4gICAgICAgICAgICBzcGF3bkNpcmNsZToge1xyXG4gICAgICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgICAgIHk6IEhFUk9fRlJBTUVfU0laRS0yNSxcclxuICAgICAgICAgICAgICAgIHI6IDI1XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vICAgIGF0dGFjaGVkIHRvIGhlcm8gc3ByaXRlXHJcbiAgICAgICAgdGhpcy5lbWl0dGVyQnVybiA9IGNyZWF0ZVBhcnRpY2xlRW1pdHRlcih0aGlzLCBbVGV4dHVyZUxvYWRlci5HZXQoXCJhc3NldHMvZW50aXRpZXMtYXRsYXMuanNvbkBmbGFtZS5wbmdcIildLCBjZmcpOyAgXHJcbiAgICAgICAgLy8gICBhdHRhY2hlZCB0byBjb250YWluZXIgc2luY2UgaXQgbXVzdCBlbWl0IG91dHNpZGUgaGVybyBzcHJpdGVcclxuICAgICAgICB0aGlzLmVtaXR0ZXJQaXhpZXMgPSBjcmVhdGVQYXJ0aWNsZUVtaXR0ZXIoY29udGFpbmVyLCBbVGV4dHVyZUxvYWRlci5HZXQoXCJhc3NldHMvb2JqZWN0cy1hdGxhcy5qc29uQHN0YXIucG5nXCIpXSk7ICBcclxuXHJcbiAgICAgICAgY29uc3QgYXNzZXQgPSBcImFzc2V0cy9vYmplY3RzLWF0bGFzLmpzb25AaGVyby5wbmdcIjtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwicmlnaHRcIiwgYXNzZXQsIFsxOCwgMTksIDIwLCAyMSwgMjIsIDIzXSwgSEVST19GUkFNRV9TSVpFLCBIRVJPX0ZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwibGVmdFwiLCBhc3NldCwgWzEyLCAxMywgMTQsIDE1LCAxNiwgMTddLCBIRVJPX0ZSQU1FX1NJWkUsIEhFUk9fRlJBTUVfU0laRSkpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJqdW1wbGVmdFwiLCBhc3NldCwgWzI0LCAyNSwgMjYsIDI3LCAyOCwgMjldLCBIRVJPX0ZSQU1FX1NJWkUsIEhFUk9fRlJBTUVfU0laRSkpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJqdW1wcmlnaHRcIiwgYXNzZXQsIFszMCwgMzEsIDMyLCAzMywgMzQsIDM1XSwgSEVST19GUkFNRV9TSVpFLCBIRVJPX0ZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwianVtcHVwXCIsIGFzc2V0LCBbMSwgMywgNCwgNl0sIEhFUk9fRlJBTUVfU0laRSwgSEVST19GUkFNRV9TSVpFKSk7XHJcbiAgICAgICAgdGhpcy5hZGRBbmltYXRpb25zKG5ldyBBbmltYXRpb25TZXF1ZW5jZShcImlkbGVcIiwgYXNzZXQsIFsxLCAxLCAwLCAxLCAyLCAzLCAsIDQsIDUsIDEzLCAxMiwgNiwgNywgMTEsIDE4LCAxOSwgMF0sIEhFUk9fRlJBTUVfU0laRSwgSEVST19GUkFNRV9TSVpFKSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJqdW1wZG93bmxlZnRcIiwgYXNzZXQsIFszNiwgMzcsIDM4XSwgSEVST19GUkFNRV9TSVpFLCBIRVJPX0ZSQU1FX1NJWkUpKTtcclxuICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbnMobmV3IEFuaW1hdGlvblNlcXVlbmNlKFwianVtcGRvd25yaWdodFwiLCBhc3NldCwgWzM5LCA0MCwgNDFdLCBIRVJPX0ZSQU1FX1NJWkUsIEhFUk9fRlJBTUVfU0laRSkpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJqdW1wZG93blwiLCBhc3NldCwgWzQyLCA0MywgNDRdLCBIRVJPX0ZSQU1FX1NJWkUsIEhFUk9fRlJBTUVfU0laRSkpO1xyXG4gICAgICAgIHRoaXMuYW5jaG9yLnNldCgwLjUsIDAuNTgpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUueSAqPSAtMTsgLy8gIHRoZSB3b3JsZENvbnRhaW5lciBoYXMgLXkgc2NhbGUgc28gd2UgbXVzdCBmbGlwIGl0IHVwIGFnYWluIFxyXG4gICAgICAgIGV2ZW50RW1pdHRlci5vbihNT1ZFX1RPUElDLCB0aGlzLm9uUGxheWVyTW92ZSk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgaWYgdGhlIHBsYXllciBjYW4gaW50ZXJhY3QgdmlhIGNvbnRyb2xzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IElzSW50ZXJhY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW92ZW1lbnRDdHJsLmlzSW50ZXJhY3RpdmU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBpZiB0aGUgcGxheWVyIGNhbiBpbnRlcmFjdCB2aWEgY29udHJvbHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQgSXNJbnRlcmFjdGl2ZShuZXdWYWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMubW92ZW1lbnRDdHJsLmlzSW50ZXJhY3RpdmUgPSBuZXdWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgIFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIG1vdmVtZW50Q3RybC5Nb3ZlbWVudFN0YXRlIGFuZCB1cGRhdGVzIHBpeGkgZHVzdCBlbWl0dGVyIGFuZCBjb25zdW1wdGlvbi5cclxuICAgICAqIEBwYXJhbSBkdCBlbGFwc2VkIHRpbWUgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblVwZGF0ZSA9IChkdDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gR2xvYmFsLnBvc2l0aW9uLng7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gR2xvYmFsLnBvc2l0aW9uLnk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLklzSW50ZXJhY3RpdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlbWVudEN0cmwudXBkYXRlKGR0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5tb3ZlbWVudEN0cmwuTW92ZW1lbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSWRsZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlclBpeGllcy5lbWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLkxlZnQ6XHJcbiAgICAgICAgICAgIGNhc2UgTW92ZW1lbnRTdGF0ZS5KdW1wTGVmdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlclBpeGllcy5lbWl0ID0gdGhpcy5tb3ZlbWVudEN0cmwuSXNSdW5uaW5nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyUGl4aWVzLm1pblN0YXJ0Um90YXRpb24gPSAtMjU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXJQaXhpZXMubWF4U3RhcnRSb3RhdGlvbiA9IDI1O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTW92ZW1lbnRTdGF0ZS5SaWdodDpcclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLkp1bXBSaWdodDpcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlclBpeGllcy5lbWl0ID0gdGhpcy5tb3ZlbWVudEN0cmwuSXNSdW5uaW5nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyUGl4aWVzLm1pblN0YXJ0Um90YXRpb24gPSAxNTU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXJQaXhpZXMubWF4U3RhcnRSb3RhdGlvbiA9IDIwNTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLkp1bXBVcDpcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlclBpeGllcy5lbWl0ID0gdGhpcy5tb3ZlbWVudEN0cmwuSXNSdW5uaW5nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyUGl4aWVzLm1pblN0YXJ0Um90YXRpb24gPSAyNDU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXJQaXhpZXMubWF4U3RhcnRSb3RhdGlvbiA9IDI5NTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXR0ZXJQaXhpZXMudXBkYXRlKGR0ICogMC4wMDEpO1xyXG4gICAgICAgIHRoaXMuZW1pdHRlclBpeGllcy51cGRhdGVPd25lclBvcyh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XHJcbiAgICAgICAgdGhpcy5lbWl0dGVyQnVybi51cGRhdGUoZHQgKiAwLjAwMSk7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgY2hlY2sgaWYgcnVubmluZ1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBpZiAodGhpcy5tb3ZlbWVudEN0cmwuSXNSdW5uaW5nICYmIHRoaXMubW92ZW1lbnRDdHJsLk1vdmVtZW50U3RhdGUgIT09IE1vdmVtZW50U3RhdGUuSWRsZSkge1xyXG4gICAgICAgICAgICBzdGF0cy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuRHVzdCwgLWR0ICogMC4wMDUpOyAgIC8vICA1L3NlY1xyXG4gICAgICAgICAgICBsZXQgYW5nbGUgPSA4O1xyXG4gICAgICAgICAgICBsZXQgZGVncmVlID0gTWF0aC5QSSAqIGFuZ2xlIC8gMTgwO1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0gKHRoaXMubW92ZW1lbnRDdHJsLk1vdmVtZW50U3RhdGUgPT09IE1vdmVtZW50U3RhdGUuTGVmdCkgPyBkZWdyZWUgOiAtZGVncmVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVtaXR0ZXJCdXJuLmVtaXQgPSBzdGF0cy5pc0J1cm5pbmc7XHJcbiAgICAgICAgc3VwZXIub25VcGRhdGUoZHQpOyAgICAgICAgXHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgb25QbGF5ZXJNb3ZlID0gKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICB2YXIgc3RhdGU6IE1vdmVtZW50U3RhdGUgPSBldmVudC5uZXdTdGF0ZSBhcyBNb3ZlbWVudFN0YXRlO1xyXG4gICAgICAgIHZhciBmcHMgPSBldmVudC5pc1J1bm5pbmcgPyBBTklNQVRJT05fRlBTX05PUk1BTCAqIDEuNiA6IEFOSU1BVElPTl9GUFNfTk9STUFMO1xyXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmlkbGVBbmltYXRpb25UaW1lb3V0SGFuZGxlKSBjbGVhclRpbWVvdXQodGhpcy5pZGxlQW5pbWF0aW9uVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlkbGVBbmltYXRpb25UaW1lb3V0SGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5KFwiaWRsZVwiLCBBTklNQVRJT05fRlBTX1NMT1cpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNuZC5pZGxlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTW92ZW1lbnRTdGF0ZS5MZWZ0OlxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaWRsZUFuaW1hdGlvblRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5KFwibGVmdFwiLCBmcHMpO1xyXG4gICAgICAgICAgICAgICAgc25kLndhbGsoZXZlbnQuaXNSdW5uaW5nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlQW5pbWF0aW9uVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoXCJyaWdodFwiLCBmcHMpO1xyXG4gICAgICAgICAgICAgICAgc25kLndhbGsoZXZlbnQuaXNSdW5uaW5nKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSnVtcExlZnQ6XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlQW5pbWF0aW9uVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoXCJqdW1wbGVmdFwiLCBmcHMpO1xyXG4gICAgICAgICAgICAgICAgc25kLmp1bXAoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSnVtcFJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaWRsZUFuaW1hdGlvblRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5KFwianVtcHJpZ2h0XCIsIGZwcyk7XHJcbiAgICAgICAgICAgICAgICBzbmQuanVtcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgTW92ZW1lbnRTdGF0ZS5KdW1wVXA6XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlQW5pbWF0aW9uVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoXCJqdW1wdXBcIiwgZnBzKTtcclxuICAgICAgICAgICAgICAgIHNuZC5qdW1wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLkp1bXBEb3duTGVmdDpcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmlkbGVBbmltYXRpb25UaW1lb3V0SGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheShcImp1bXBkb3dubGVmdFwiLCBmcHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHNuZC5qdW1wQXR0YWNrKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLkp1bXBEb3duUmlnaHQ6XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlQW5pbWF0aW9uVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoXCJqdW1wZG93bnJpZ2h0XCIsIGZwcywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgc25kLmp1bXBBdHRhY2soKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSnVtcERvd246XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5pZGxlQW5pbWF0aW9uVGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoXCJqdW1wZG93blwiLCBmcHMsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHNuZC5qdW1wQXR0YWNrKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHBsYXllciBoYXMganVtcGVkIG9uIHNvbWV0aGluZyB3aXRoIGEgaGlnaCB2ZWxvY2l0eS5cclxuICAgICAqIEFkZHMgc21va2UgZm9yIGdyb3VuZCBjb250YWN0cyBhbmQgaGFuZGxlcyBtb2IgY29sbGlzaW9uIGZvciBucGMncy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvblBsYXllckNvbnRhY3QoZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IFNORF9UUkVTSE9MRF9WRUxPQ0lUWTogbnVtYmVyID0gNDAwO1xyXG4gICAgICAgIGNvbnN0IFNNT0tFX1ZFTE9DSVRZOiBudW1iZXIgPSA0NTA7XHJcbiAgICAgICAgY29uc3QgQVRUQUNLX1ZFTE9DSVRZOiBudW1iZXIgPSA1MDU7XHJcblxyXG4gICAgICAgIGxldCBib2R5OiBwMi5Cb2R5ID0gZXZlbnQuYm9keSBhcyBwMi5Cb2R5O1xyXG4gICAgICAgIHZhciBtb2I6IE1vYiA9IGV2ZW50LmJvZHkuRGlzcGxheU9iamVjdCBhcyBNb2I7XHJcblxyXG4gICAgICAgIGxldCB2ZXJ0aWNhbFZlbG9jaXR5ID0gTWF0aC5hYnMoZXZlbnQudmVsb2NpdHlbMV0pO1xyXG4gICAgICAgXHJcbiAgICAgICAgaWYgKHZlcnRpY2FsVmVsb2NpdHkgPiBBVFRBQ0tfVkVMT0NJVFkpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlZlcnQgdmVsb2NpdHk6IFwiICsgdmVydGljYWxWZWxvY2l0eSk7XHJcbiAgICAgICAgICAgIC8vICBjaGVjayBjb2xsaXNpb24gdnMgbW9ic1xyXG4gICAgICAgICAgICBpZiAobW9iIGluc3RhbmNlb2YgTW9iKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1vYi5pc0xvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vYkludGVyYWN0aW9uKG1vYiwgYm9keSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBtb3ZlbWVudFN0YXRlID0gdGhpcy5tb3ZlbWVudEN0cmwuTW92ZW1lbnRTdGF0ZTtcclxuICAgICAgICAgICAgaWYgKG1vdmVtZW50U3RhdGUgPT09IE1vdmVtZW50U3RhdGUuSnVtcERvd24gfHwgXHJcbiAgICAgICAgICAgICAgICBtb3ZlbWVudFN0YXRlID09PSBNb3ZlbWVudFN0YXRlLkp1bXBEb3duTGVmdCB8fFxyXG4gICAgICAgICAgICAgICAgbW92ZW1lbnRTdGF0ZSA9PT0gTW92ZW1lbnRTdGF0ZS5KdW1wRG93blJpZ2h0XHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgc25kLmp1bXBDb250YWN0KCk7XHJcbiAgICAgICAgICAgICAgICBldmVudEVtaXR0ZXIuZW1pdChHUk9VTkRfU0hBS0UsIHttaWxsaVNlY29uZHM6IDYwMCwgbWFnbml0dWRlSW5QaXhlbHM6IDl9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHZlcnRpY2FsVmVsb2NpdHkgPiBTTU9LRV9WRUxPQ0lUWSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlZlcnQgdmVsb2NpdHk6IFwiICsgdmVydGljYWxWZWxvY2l0eSk7XHJcbiAgICAgICAgICAgIHZhciBzbW9rZTogQW5pbWF0ZWRTcHJpdGUgPSBuZXcgQW5pbWF0ZWRTcHJpdGUoKTtcclxuICAgICAgICAgICAgc21va2UuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJzbW9rZVwiLCBcImFzc2V0cy9lbnRpdGllcy1hdGxhcy5qc29uQGp1bXBfc21va2UucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBbMCwgMSwgMiwgMywgNCwgNV0sIEhFUk9fRlJBTUVfU0laRSwgSEVST19GUkFNRV9TSVpFKSk7XHJcbiAgICAgICAgICAgIHNtb2tlLmFuY2hvci5zZXQoMC41KTtcclxuICAgICAgICAgICAgc21va2UucGl2b3Quc2V0KDAuNSk7XHJcbiAgICAgICAgICAgIHNtb2tlLnggPSB0aGlzLng7XHJcbiAgICAgICAgICAgIHNtb2tlLnkgPSB0aGlzLnkgLSAyNTtcclxuICAgICAgICAgICAgc21va2UuYWxwaGEgPSAwLjc7XHJcbiAgICAgICAgICAgIHNtb2tlLnJvdGF0aW9uID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHNtb2tlKTtcclxuICAgICAgICAgICAgc21va2Uub25Db21wbGV0ZSA9ICgpID0+IHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHNtb2tlKTtcclxuICAgICAgICAgICAgc21va2UucGxheShcInNtb2tlXCIsIDYsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYodmVydGljYWxWZWxvY2l0eSA+IFNORF9UUkVTSE9MRF9WRUxPQ0lUWSl7XHJcbiAgICAgICAgICAgIHNuZC5qdW1wQ29udGFjdCgpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInZlbG9jaXR5OiBcIiArIGV2ZW50LnZlbG9jaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIGJ1bGxldHMgaGl0dGluZyB0aGUgcGxheWVyIG9yIG9ic3RhY2xlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQnVsbGV0Q29udGFjdChldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGJ1bGxldDogQnVsbGV0ID0gZXZlbnQuYnVsbGV0Qm9keS5EaXNwbGF5T2JqZWN0IGFzIEJ1bGxldDtcclxuICAgICAgICBpZiAoIWJ1bGxldC5Jc0RlYWQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnBsYXllckhpdCkge1xyXG4gICAgICAgICAgICAgICAgc25kLmhpdFBhaW4oKTtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5odWQuYWRkSW5mb01lc3NhZ2UodGhpcy5wb3NpdGlvbiwgYCR7LWJ1bGxldC5kYW1hZ2V9IEhQYCwgTVNHX0hQX1NUWUxFLCA1MCk7XHJcbiAgICAgICAgICAgICAgICBzdGF0cy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuSFAsIC1idWxsZXQuZGFtYWdlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgVE9ETzogcmVjeWNsZSBleHBsb2RlIGFuaW1hdGlvbnNcclxuICAgICAgICAgICAgICAgIHZhciBleHBsb2RlOiBBbmltYXRlZFNwcml0ZSA9IG5ldyBBbmltYXRlZFNwcml0ZSgpO1xyXG4gICAgICAgICAgICAgICAgZXhwbG9kZS5hZGRBbmltYXRpb25zKG5ldyBBbmltYXRpb25TZXF1ZW5jZShcImV4cFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYXNzZXRzL2VudGl0aWVzLWF0bGFzLmpzb25Ac2xpbWVfYXRrX2V4cC5wbmdcIixcclxuICAgICAgICAgICAgICAgICAgICBbMCwgMSwgMiwgMywgNCwgNV0sIDMyLCAzMilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBleHBsb2RlLmFuY2hvci5zZXQoMC41KTtcclxuICAgICAgICAgICAgICAgIGV4cGxvZGUucGl2b3Quc2V0KDAuNSk7XHJcbiAgICAgICAgICAgICAgICBleHBsb2RlLnggPSBidWxsZXQueDtcclxuICAgICAgICAgICAgICAgIGV4cGxvZGUueSA9IGJ1bGxldC55O1xyXG4gICAgICAgICAgICAgICAgZXhwbG9kZS5hbHBoYSA9IDAuNztcclxuICAgICAgICAgICAgICAgIGV4cGxvZGUucm90YXRpb24gPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGV4cGxvZGUpO1xyXG4gICAgICAgICAgICAgICAgZXhwbG9kZS5vbkNvbXBsZXRlID0gKCkgPT4gdGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQoZXhwbG9kZSk7XHJcbiAgICAgICAgICAgICAgICBleHBsb2RlLnBsYXkoXCJleHBcIiwgMTAsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHNuZC5idWxsZXRIaXRXYWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnVsbGV0LklzRGVhZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBpbnRlcmFjdGlvbiB3aXRoIG1vYnMgKG1vYiBraWxsKS5cclxuICAgICAqIEBwYXJhbSBtb2JcclxuICAgICAqIEBwYXJhbSBib2R5XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlTW9iSW50ZXJhY3Rpb24obW9iOiBNb2IsIGJvZHk6IHAyLkJvZHkpIHtcclxuICAgICAgICBsZXQgZGlzcE9iaiA9IChib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCBhcyBQSVhJLkRpc3BsYXlPYmplY3Q7XHJcbiAgICAgICAgbGV0IGl0ID0gZGlzcE9iaiBhcyBJSW50ZXJhY3Rpb25UeXBlO1xyXG5cclxuICAgICAgICAvLyAgZ2VuZXJhdGUgZHJvcFxyXG4gICAgICAgIGlmIChpdC5kcm9wKSB7XHJcbiAgICAgICAgICAgIGxldCBpc0Ryb3BwaW5nID0gTWF0aC5yYW5kb20oKSA8PSBpdC5kcm9wLmNoYW5jZTtcclxuICAgICAgICAgICAgaWYgKGlzRHJvcHBpbmcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkcm9wSXRlbUJvZHkgPSBMZXZlbExvYWRlci5jcmVhdGVFbnRpdHkoc3RhdHMuY3VycmVudExldmVsLnRlbXBsYXRlcywgaXQuZHJvcC5lbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGREcm9wSXRlbShtb2IsIGRyb3BJdGVtQm9keSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlbW92ZUVudGl0eShib2R5KTtcclxuICAgICAgICBtb2Iuc3F1aXNoKCgpID0+IHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKGRpc3BPYmopKTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gIGFkZCBleHAgICAgICAgXHJcbiAgICAgICAgdmFyIGV4cCA9IG1vYi5hdHRyaWJ1dGVzW0F0clR5cGUuSFBdIC8gMjtcclxuICAgICAgICBzdGF0cy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuVG90YWxFeHAsIGV4cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGFuIGRyb3AgaXRlbSB0byB0aGUgc2NlbmUgd2l0aCBhIHR3ZWVuIGFuaW1hdGlvbi5cclxuICAgICAqIEBwYXJhbSBkaXNwT2JqXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWRkRHJvcEl0ZW0obW9iOiBNb2IsIGl0ZW1Cb2R5OiBwMi5Cb2R5KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGRpc3BPYmogPSAoaXRlbUJvZHkgYXMgYW55KS5EaXNwbGF5T2JqZWN0IGFzIFBJWEkuRGlzcGxheU9iamVjdDtcclxuICAgICAgICBkaXNwT2JqLnggPSBtb2IueDtcclxuICAgICAgICBkaXNwT2JqLnkgPSBtb2IueSArIDQwO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGRpc3BPYmopO1xyXG5cclxuICAgICAgICAvLyAgdHdlZW4gZnJvbSBtb2IgcG9zaXRpb24gdG8gcmFuZG9tIHBvc2l0aW9uIG5lYXIgaGVyb1xyXG4gICAgICAgIHZhciB1cFggPSBkaXNwT2JqLnBvc2l0aW9uLnggKyA3NTtcclxuICAgICAgICB2YXIgdXBZID0gZGlzcE9iai5wb3NpdGlvbi55ICsgMjAwO1xyXG4gICAgICAgIHZhciBtb3ZlVXAgPSBuZXcgVFdFRU4uVHdlZW4oZGlzcE9iai5wb3NpdGlvbilcclxuICAgICAgICAgICAgLnRvKHsgeDogdXBYLCB5OiB1cFkgfSwgNDAwKVxyXG4gICAgICAgICAgICAub25Db21wbGV0ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtQm9keS5wb3NpdGlvbiA9IFtkaXNwT2JqLnBvc2l0aW9uLngsIGRpc3BPYmoucG9zaXRpb24ueV07XHJcbiAgICAgICAgICAgICAgICB3cDIuYWRkQm9keShpdGVtQm9keSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIG9yZ1NjYWxlWCA9IGRpc3BPYmouc2NhbGUueDtcclxuICAgICAgICB2YXIgb3JnU2NhbGVZID0gZGlzcE9iai5zY2FsZS55O1xyXG4gICAgICAgIHZhciBzY2FsZSA9IG5ldyBUV0VFTi5Ud2VlbihkaXNwT2JqLnNjYWxlKVxyXG4gICAgICAgICAgICAudG8oeyB4OiBvcmdTY2FsZVggKyAwLjMsIHk6IG9yZ1NjYWxlWCArIDAuMyB9LCAzNTApXHJcbiAgICAgICAgICAgIC5lYXNpbmcoVFdFRU4uRWFzaW5nLkxpbmVhci5Ob25lKTtcclxuXHJcbiAgICAgICAgdmFyIGVuZFggPSB0aGlzLng7XHJcbiAgICAgICAgdmFyIGVuZFkgPSB0aGlzLnkgKyA4O1xyXG4gICAgICAgIHZhciBtb3ZlQXdheSA9IG5ldyBUV0VFTi5Ud2VlbihkaXNwT2JqLnBvc2l0aW9uKVxyXG4gICAgICAgICAgICAudG8oeyB4OiBlbmRYLCB5OiBlbmRZIH0sIDM1MClcclxuICAgICAgICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuQmFjay5JbilcclxuICAgICAgICAgICAgLm9uVXBkYXRlKChwb3M6IFBJWEkuUG9pbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1Cb2R5LnBvc2l0aW9uID0gW2Rpc3BPYmoucG9zaXRpb24ueCwgZGlzcE9iai5wb3NpdGlvbi55XTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uQ29tcGxldGUoKCkgPT4gZGlzcE9iai5zY2FsZS5zZXQob3JnU2NhbGVYLCBvcmdTY2FsZVkpKTtcclxuXHJcbiAgICAgICAgbW92ZVVwLmNoYWluKHNjYWxlLCBtb3ZlQXdheSkuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYW4gZW50aXR5IGZyb20gdGhlIHAyIHdvcmxkIGFuZCBzZXRzIGl0cyBEaXNwbGF5T2JqZWN0IHRvIG51bGwuXHJcbiAgICAgKiBJZiB0aGUgcmVtb3ZlRGlzcGxheU9iamVjdCBpcyB0cnVlIHRoZSBkaXNwbGF5IG9iamVjdCB3aWxsIGJlIGFsc28gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZENvbnRhaW5lclxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBib2R5XHJcbiAgICAgKiBAcGFyYW0gcmVtb3ZlRGlzcGxheU9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlRW50aXR5KGJvZHk6IHAyLkJvZHksIHJlbW92ZURpc3BsYXlPYmplY3Q6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICAgIHdwMi5yZW1vdmVCb2R5KGJvZHkpO1xyXG4gICAgICAgIGlmIChyZW1vdmVEaXNwbGF5T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKChib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIChib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCA9IG51bGw7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBTUE7QUFBQTtBQUFBO0FBa0ZBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekxBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFPQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQVBBO0FBdUhBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFuWEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./objects/HeroCharacter.ts\n");

/***/ }),

/***/ "./objects/Lava.ts":
/*!*************************!*\
  !*** ./objects/Lava.ts ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar AnimatedSprite_1 = __webpack_require__(/*! ./AnimatedSprite */ \"./objects/AnimatedSprite.ts\");\r\nvar AnimationSequence_1 = __webpack_require__(/*! ./AnimationSequence */ \"./objects/AnimationSequence.ts\");\r\nvar Lava = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Lava, _super);\r\n    function Lava(textureName) {\r\n        var _this = _super.call(this) || this;\r\n        _this.FRAME_SIZE_X = 64;\r\n        _this.FRAME_SIZE_Y = 128;\r\n        _this.addAnimations(new AnimationSequence_1.AnimationSequence(\"lava\", textureName, [0, 1, 2, 3], _this.FRAME_SIZE_X, _this.FRAME_SIZE_Y));\r\n        _this.play(\"lava\", 3);\r\n        return _this;\r\n    }\r\n    return Lava;\r\n}(AnimatedSprite_1.AnimatedSprite));\r\nexports.Lava = Lava;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL0xhdmEudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9vYmplY3RzL0xhdmEudHM/M2M2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbmltYXRlZFNwcml0ZSB9IGZyb20gJy4vQW5pbWF0ZWRTcHJpdGUnO1xyXG5pbXBvcnQgeyBBbmltYXRpb25TZXF1ZW5jZSB9IGZyb20gJy4vQW5pbWF0aW9uU2VxdWVuY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExhdmEgZXh0ZW5kcyBBbmltYXRlZFNwcml0ZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IEZSQU1FX1NJWkVfWDogbnVtYmVyID0gNjQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IEZSQU1FX1NJWkVfWTogbnVtYmVyID0gMTI4O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRleHR1cmVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYWRkQW5pbWF0aW9ucyhuZXcgQW5pbWF0aW9uU2VxdWVuY2UoXCJsYXZhXCIsIHRleHR1cmVOYW1lLCBbMCwgMSwgMiwgM10sIHRoaXMuRlJBTUVfU0laRV9YLCB0aGlzLkZSQU1FX1NJWkVfWSkpO1xyXG4gICAgICAgIHRoaXMucGxheShcImxhdmFcIiwgMyk7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBSUE7QUFBQTtBQUhBO0FBQ0E7QUFJQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQVRBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./objects/Lava.ts\n");

/***/ }),

/***/ "./objects/MasterHud.ts":
/*!******************************!*\
  !*** ./objects/MasterHud.ts ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar BTN_X = __1.SCENE_WIDTH - 48;\r\nvar BTN_Y = 4;\r\nvar BTN_SCALE = 1.0;\r\n/**\r\n * Implements options and full screen togle buttons.\r\n */\r\nvar MasterHud = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MasterHud, _super);\r\n    function MasterHud(sceneManager) {\r\n        var _this = _super.call(this) || this;\r\n        _this.sceneManager = sceneManager;\r\n        //----------------------------\r\n        //  full screen toggler\r\n        //----------------------------\r\n        [\"\", \"webkit\", \"moz\", \"ms\"].forEach(function (prefix) { return document.addEventListener(prefix + \"fullscreenchange\", function (event) {\r\n            if (_this.isFullScreen) {\r\n                btnFullScreen.setTexture(\"assets/gui-atlas.json@gui_fs_exit.png\");\r\n            }\r\n            else {\r\n                btnFullScreen.setTexture(\"assets/gui-atlas.json@gui_fs_enter.png\");\r\n            }\r\n            btnFullScreen.scale.set(BTN_SCALE);\r\n        }, false); });\r\n        //--------------------------------\r\n        //  add full screen, options and \r\n        //  back buttons\r\n        //--------------------------------       \r\n        var btnFullScreen = new __1.SpriteButton(\"assets/gui-atlas.json@gui_fs_enter.png\", BTN_X, BTN_Y);\r\n        btnFullScreen.onClick = function () { return _this.toggleFullScreen(); };\r\n        btnFullScreen.scale.set(BTN_SCALE);\r\n        _this.addChild(btnFullScreen);\r\n        var btnOptions = new __1.SpriteButton(\"assets/gui-atlas.json@gui_options.png\", BTN_X - 48, BTN_Y);\r\n        btnOptions.onClick = function () { return _this.sceneManager.ActivateScene(\"Options\"); };\r\n        btnOptions.name = \"BTN_OPTIONS\";\r\n        btnOptions.scale.set(BTN_SCALE);\r\n        _this.addChild(btnOptions);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MasterHud.prototype, \"isFullScreen\", {\r\n        get: function () {\r\n            var doc = document;\r\n            return !(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MasterHud.prototype.toggleFullScreen = function () {\r\n        var doc = document;\r\n        var docElm = document.documentElement;\r\n        var requestFullScreen = docElm.requestFullscreen || docElm.mozRequestFullScreen || docElm.webkitRequestFullScreen || docElm.msRequestFullscreen;\r\n        var exitFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;\r\n        if (!this.isFullScreen) {\r\n            requestFullScreen.call(docElm);\r\n        }\r\n        else {\r\n            exitFullScreen.call(doc);\r\n        }\r\n    };\r\n    return MasterHud;\r\n}(__1.PIXI.Container));\r\nexports.MasterHud = MasterHud;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL01hc3Rlckh1ZC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL29iamVjdHMvTWFzdGVySHVkLnRzP2M3M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUElYSSwgU2NlbmVNYW5hZ2VyLCBTcHJpdGVCdXR0b24sIFNDRU5FX1dJRFRIIH0gZnJvbSBcIi4uXCI7XHJcblxyXG5jb25zdCBCVE5fWCA9IFNDRU5FX1dJRFRIIC0gNDg7XHJcbmNvbnN0IEJUTl9ZID0gNDtcclxuY29uc3QgQlROX1NDQUxFID0gMS4wO1xyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudHMgb3B0aW9ucyBhbmQgZnVsbCBzY3JlZW4gdG9nbGUgYnV0dG9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNYXN0ZXJIdWQgZXh0ZW5kcyBQSVhJLkNvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjZW5lTWFuYWdlcjpTY2VuZU1hbmFnZXIpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICBmdWxsIHNjcmVlbiB0b2dnbGVyXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgW1wiXCIsIFwid2Via2l0XCIsIFwibW96XCIsIFwibXNcIl0uZm9yRWFjaChcclxuICAgICAgICAgICAgcHJlZml4ID0+IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIocHJlZml4ICsgXCJmdWxsc2NyZWVuY2hhbmdlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRnVsbFNjcmVlbi5zZXRUZXh0dXJlKFwiYXNzZXRzL2d1aS1hdGxhcy5qc29uQGd1aV9mc19leGl0LnBuZ1wiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuRnVsbFNjcmVlbi5zZXRUZXh0dXJlKFwiYXNzZXRzL2d1aS1hdGxhcy5qc29uQGd1aV9mc19lbnRlci5wbmdcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBidG5GdWxsU2NyZWVuLnNjYWxlLnNldChCVE5fU0NBTEUpO1xyXG4gICAgICAgICAgICB9LCBmYWxzZSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIGFkZCBmdWxsIHNjcmVlbiwgb3B0aW9ucyBhbmQgXHJcbiAgICAgICAgLy8gIGJhY2sgYnV0dG9uc1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICAgXHJcbiAgICAgICAgdmFyIGJ0bkZ1bGxTY3JlZW4gPSBuZXcgU3ByaXRlQnV0dG9uKFwiYXNzZXRzL2d1aS1hdGxhcy5qc29uQGd1aV9mc19lbnRlci5wbmdcIiwgQlROX1gsIEJUTl9ZKTtcclxuICAgICAgICBidG5GdWxsU2NyZWVuLm9uQ2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZUZ1bGxTY3JlZW4oKTtcclxuICAgICAgICBidG5GdWxsU2NyZWVuLnNjYWxlLnNldChCVE5fU0NBTEUpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoYnRuRnVsbFNjcmVlbik7XHJcblxyXG4gICAgICAgIHZhciBidG5PcHRpb25zID0gbmV3IFNwcml0ZUJ1dHRvbihcImFzc2V0cy9ndWktYXRsYXMuanNvbkBndWlfb3B0aW9ucy5wbmdcIiwgQlROX1ggLSA0OCwgQlROX1kpO1xyXG4gICAgICAgIGJ0bk9wdGlvbnMub25DbGljayA9ICgpID0+IHRoaXMuc2NlbmVNYW5hZ2VyLkFjdGl2YXRlU2NlbmUoXCJPcHRpb25zXCIpO1xyXG4gICAgICAgIGJ0bk9wdGlvbnMubmFtZSA9IFwiQlROX09QVElPTlNcIjtcclxuICAgICAgICBidG5PcHRpb25zLnNjYWxlLnNldChCVE5fU0NBTEUpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoYnRuT3B0aW9ucyk7XHJcbiAgICB9ICAgXHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgaXNGdWxsU2NyZWVuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHZhciBkb2M6IGFueSA9IGRvY3VtZW50O1xyXG4gICAgICAgIHJldHVybiAhKCFkb2MuZnVsbHNjcmVlbkVsZW1lbnQgJiYgIWRvYy5tb3pGdWxsU2NyZWVuRWxlbWVudCAmJiAhZG9jLndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50ICYmICFkb2MubXNGdWxsc2NyZWVuRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZUZ1bGxTY3JlZW4oKSB7XHJcbiAgICAgICAgdmFyIGRvYzogYW55ID0gZG9jdW1lbnQ7XHJcbiAgICAgICAgdmFyIGRvY0VsbTogYW55ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuICAgICAgICB2YXIgcmVxdWVzdEZ1bGxTY3JlZW4gPSBkb2NFbG0ucmVxdWVzdEZ1bGxzY3JlZW4gfHwgZG9jRWxtLm1velJlcXVlc3RGdWxsU2NyZWVuIHx8IGRvY0VsbS53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiB8fCBkb2NFbG0ubXNSZXF1ZXN0RnVsbHNjcmVlbjtcclxuICAgICAgICB2YXIgZXhpdEZ1bGxTY3JlZW4gPSBkb2MuZXhpdEZ1bGxzY3JlZW4gfHwgZG9jLm1vekNhbmNlbEZ1bGxTY3JlZW4gfHwgZG9jLndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8IGRvYy5tc0V4aXRGdWxsc2NyZWVuO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuaXNGdWxsU2NyZWVuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuLmNhbGwoZG9jRWxtKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBleGl0RnVsbFNjcmVlbi5jYWxsKGRvYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBcclxufSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQW5EQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./objects/MasterHud.ts\n");

/***/ }),

/***/ "./objects/MovementController.ts":
/*!***************************************!*\
  !*** ./objects/MovementController.ts ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ./PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar events_1 = __webpack_require__(/*! ../events */ \"./events.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\nvar MovementController = /** @class */ (function () {\r\n    function MovementController(world) {\r\n        this.VELOCITY = 150;\r\n        this.JUMP_FORCE = 17000;\r\n        this.JUMP_ATTACK_FORCE = -17000;\r\n        this.JUMP_COOLDOWN = 500;\r\n        this.JUMP_ATTACK_COOLDOWN = 1000;\r\n        this.JUMP_ATTACK_FREEZE = 800;\r\n        this.nextJumpAllowed = 0;\r\n        this.nextJumpDownAllowed = 0;\r\n        this.movementState = -1;\r\n        this.kbd = new __1.KeyboardMapper();\r\n        this.isRunning = false;\r\n        this.isJumping = false;\r\n        this.newState = MovementState.Idle;\r\n        this._isInteractive = true;\r\n        this.world = world;\r\n    }\r\n    Object.defineProperty(MovementController.prototype, \"isInteractive\", {\r\n        /**\r\n         * Returns if the player can interact via controls.\r\n         */\r\n        get: function () {\r\n            return this._isInteractive;\r\n        },\r\n        /**\r\n         * Sets if the player can interact via controls.\r\n         */\r\n        set: function (newValue) {\r\n            this._isInteractive = newValue;\r\n            if (!this._isInteractive) {\r\n                this.isRunning = false;\r\n                this.movementState = MovementState.Idle;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MovementController.prototype, \"IsJumping\", {\r\n        get: function () {\r\n            return this.isJumping;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MovementController.prototype, \"CanJump\", {\r\n        get: function () {\r\n            return !this.isJumping && this.nextJumpAllowed < performance.now();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MovementController.prototype, \"IsRunning\", {\r\n        get: function () {\r\n            return this.isRunning;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MovementController.prototype, \"MovementState\", {\r\n        get: function () {\r\n            return this.movementState;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MovementController.prototype.StartJump = function (direction) {\r\n        var forceVector;\r\n        if (direction === MovementState.JumpUp) {\r\n            forceVector = [0, this.JUMP_FORCE];\r\n        }\r\n        else if (direction === MovementState.JumpLeft) {\r\n            forceVector = [-this.JUMP_FORCE * 0.10, this.JUMP_FORCE];\r\n        }\r\n        else if (direction === MovementState.JumpRight) {\r\n            forceVector = [this.JUMP_FORCE * 0.10, this.JUMP_FORCE];\r\n        }\r\n        this.world.playerBody.applyImpulse(forceVector);\r\n        this.world.clearContactsForBody(this.world.playerBody);\r\n        this.nextJumpAllowed = performance.now() + this.JUMP_COOLDOWN;\r\n    };\r\n    MovementController.prototype.StartJumpDown = function () {\r\n        var _this = this;\r\n        switch (this.movementState) {\r\n            case MovementState.Left:\r\n            case MovementState.JumpLeft:\r\n                this.newState = MovementState.JumpDownLeft;\r\n                break;\r\n            case MovementState.Right:\r\n            case MovementState.JumpRight:\r\n                this.newState = MovementState.JumpDownRight;\r\n                break;\r\n            default:\r\n                this.newState = MovementState.JumpDown;\r\n                break;\r\n        }\r\n        console.log(\"state change: \" + MovementState[this.movementState] + \" -> \" + MovementState[this.newState]);\r\n        var forceVector = [0, this.JUMP_ATTACK_FORCE];\r\n        this.world.playerBody.setZeroForce();\r\n        this.world.playerBody.applyImpulse(forceVector);\r\n        this.nextJumpDownAllowed = performance.now() + this.JUMP_ATTACK_COOLDOWN;\r\n        this.isInteractive = false;\r\n        setTimeout(function () { return _this.isInteractive = true; }, this.JUMP_ATTACK_FREEZE);\r\n        events_1.eventEmitter.emit(events_1.MOVE_TOPIC, {\r\n            newState: this.newState,\r\n            oldState: this.movementState,\r\n            isJumping: true,\r\n            isRunning: false // makes no difference during jumps\r\n        });\r\n        this.movementState = this.newState;\r\n    };\r\n    MovementController.prototype.update = function (dt) {\r\n        var KEY_A = 65;\r\n        var KEY_D = 68;\r\n        var KEY_W = 87;\r\n        var KEY_S = 83;\r\n        var KEY_SHIFT = 16;\r\n        var KEY_LEFT = 37;\r\n        var KEY_RIGHT = 39;\r\n        var KEY_UP = 38;\r\n        var KEY_DOWN = 40;\r\n        var SPACE = 32;\r\n        this.newState = MovementState.Idle;\r\n        var isMovingVerticaly = Math.abs(this.world.playerBody.velocity[1]) > 0.01;\r\n        if (isMovingVerticaly) {\r\n            var hasOnlySensorContacts = this.world.playerContacts.every(function (body) { return body.shapes[0].sensor; });\r\n            this.isJumping = hasOnlySensorContacts;\r\n        }\r\n        else {\r\n            this.isJumping = false;\r\n        }\r\n        //  calculate the horizontal velocity\r\n        var v = this.calcMovementVelocity();\r\n        //  no movement (except jump down) while jumping\r\n        if (this.isJumping && this._isInteractive) {\r\n            if ((this.kbd.isKeyDown(KEY_S) || this.kbd.isKeyDown(KEY_DOWN)) && PlayerStats_1.stats.HasJumpAtack && this.nextJumpDownAllowed < performance.now()) {\r\n                this.StartJumpDown();\r\n            }\r\n            this.world.playerBody.velocity[0] += v;\r\n            return;\r\n        }\r\n        else {\r\n            //  calculate the horizontal velocity\r\n            this.world.playerBody.velocity[0] = v;\r\n        }\r\n        var canRun = PlayerStats_1.stats.getStat(enums_1.StatType.Dust) > 1;\r\n        var newIsRunning = this.kbd.isKeyDown(KEY_SHIFT) && canRun && this._isInteractive;\r\n        if (this.kbd.isKeyDown(KEY_A) || this.kbd.isKeyDown(KEY_LEFT)) {\r\n            this.newState = MovementState.Left;\r\n        }\r\n        else if (this.kbd.isKeyDown(KEY_D) || this.kbd.isKeyDown(KEY_RIGHT)) {\r\n            this.newState = MovementState.Right;\r\n        }\r\n        //  check if jump is pressed\r\n        if ((this.kbd.isKeyDown(KEY_W) || this.kbd.isKeyDown(KEY_UP) || this.kbd.isKeyDown(SPACE)) && this.CanJump) {\r\n            if (this.movementState === MovementState.Left) {\r\n                this.newState = MovementState.JumpLeft;\r\n            }\r\n            else if (this.movementState === MovementState.Right) {\r\n                this.newState = MovementState.JumpRight;\r\n            }\r\n            else if (this.movementState === MovementState.Idle) {\r\n                this.newState = MovementState.JumpUp;\r\n                newIsRunning = false;\r\n            }\r\n        }\r\n        //  has state changed\r\n        if (this.newState !== this.movementState || newIsRunning !== this.IsRunning) {\r\n            var isCurrentJumping = false;\r\n            switch (this.newState) {\r\n                case MovementState.JumpLeft:\r\n                    this.StartJump(MovementState.JumpLeft);\r\n                    isCurrentJumping = true;\r\n                    break;\r\n                case MovementState.JumpRight:\r\n                    this.StartJump(MovementState.JumpRight);\r\n                    isCurrentJumping = true;\r\n                    break;\r\n                case MovementState.JumpUp:\r\n                    this.StartJump(MovementState.JumpUp);\r\n                    isCurrentJumping = true;\r\n                    break;\r\n            }\r\n            events_1.eventEmitter.emit(events_1.MOVE_TOPIC, {\r\n                newState: this.newState,\r\n                oldState: this.movementState,\r\n                isJumping: isCurrentJumping,\r\n                isRunning: newIsRunning\r\n            });\r\n        }\r\n        //  update new states\r\n        this.movementState = this.newState;\r\n        this.isRunning = newIsRunning;\r\n    };\r\n    MovementController.prototype.calcMovementVelocity = function () {\r\n        var direction = 0;\r\n        if (this.movementState === MovementState.Left || this.movementState === MovementState.JumpLeft) {\r\n            direction = -1;\r\n        }\r\n        else if (this.movementState === MovementState.Right || this.movementState === MovementState.JumpRight) {\r\n            direction = 1;\r\n        }\r\n        if (this.IsJumping) {\r\n            //  allow for some minimal horizontal movement (this is to prevent getting stuck in air if between two bodies with friction and no contacts)\r\n            return direction * 0.2;\r\n        }\r\n        else {\r\n            var velocity = direction * this.VELOCITY * (this.IsRunning ? 2 : 1.0);\r\n            return velocity;\r\n        }\r\n    };\r\n    return MovementController;\r\n}());\r\nexports.MovementController = MovementController;\r\nvar MovementState;\r\n(function (MovementState) {\r\n    MovementState[MovementState[\"Left\"] = 0] = \"Left\";\r\n    MovementState[MovementState[\"Right\"] = 1] = \"Right\";\r\n    MovementState[MovementState[\"Idle\"] = 2] = \"Idle\";\r\n    MovementState[MovementState[\"JumpLeft\"] = 3] = \"JumpLeft\";\r\n    MovementState[MovementState[\"JumpRight\"] = 4] = \"JumpRight\";\r\n    MovementState[MovementState[\"JumpUp\"] = 5] = \"JumpUp\";\r\n    MovementState[MovementState[\"JumpDownLeft\"] = 6] = \"JumpDownLeft\";\r\n    MovementState[MovementState[\"JumpDownRight\"] = 7] = \"JumpDownRight\";\r\n    MovementState[MovementState[\"JumpDown\"] = 8] = \"JumpDown\";\r\n})(MovementState = exports.MovementState || (exports.MovementState = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL01vdmVtZW50Q29udHJvbGxlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL29iamVjdHMvTW92ZW1lbnRDb250cm9sbGVyLnRzP2EzNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS2V5Ym9hcmRNYXBwZXIgfSBmcm9tICcuLic7XHJcbmltcG9ydCB7IFdvcmxkUDIgfSBmcm9tICcuLi93b3JsZC9Xb3JsZFAyJztcclxuaW1wb3J0IHsgc3RhdHMgfSBmcm9tICcuL1BsYXllclN0YXRzJztcclxuaW1wb3J0IHsgZXZlbnRFbWl0dGVyLCBNT1ZFX1RPUElDIH0gZnJvbSAnLi4vZXZlbnRzJztcclxuaW1wb3J0IHsgU3RhdFR5cGUgfSBmcm9tICcuLi9lbnVtcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTW92ZW1lbnRDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgVkVMT0NJVFkgPSAxNTA7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IEpVTVBfRk9SQ0UgPSAxNzAwMDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgSlVNUF9BVFRBQ0tfRk9SQ0UgPSAtMTcwMDA7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBKVU1QX0NPT0xET1dOID0gNTAwO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBKVU1QX0FUVEFDS19DT09MRE9XTiA9IDEwMDA7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IEpVTVBfQVRUQUNLX0ZSRUVaRSA9IDgwMDtcclxuXHJcblxyXG4gICAgcHJpdmF0ZSBuZXh0SnVtcEFsbG93ZWQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIG5leHRKdW1wRG93bkFsbG93ZWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSB3b3JsZDogV29ybGRQMjtcclxuICAgIHByaXZhdGUgbW92ZW1lbnRTdGF0ZTogTW92ZW1lbnRTdGF0ZSA9IC0xO1xyXG4gICAgcHJpdmF0ZSBrYmQgPSBuZXcgS2V5Ym9hcmRNYXBwZXIoKTtcclxuXHJcbiAgICBwcml2YXRlIGlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBpc0p1bXBpbmcgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgbmV3U3RhdGU6IE1vdmVtZW50U3RhdGUgPSBNb3ZlbWVudFN0YXRlLklkbGU7XHJcblxyXG4gICAgcHJpdmF0ZSBfaXNJbnRlcmFjdGl2ZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHdvcmxkOiBXb3JsZFAyKSB7XHJcbiAgICAgICAgdGhpcy53b3JsZCA9IHdvcmxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBpZiB0aGUgcGxheWVyIGNhbiBpbnRlcmFjdCB2aWEgY29udHJvbHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgaXNJbnRlcmFjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNJbnRlcmFjdGl2ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgaWYgdGhlIHBsYXllciBjYW4gaW50ZXJhY3QgdmlhIGNvbnRyb2xzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IGlzSW50ZXJhY3RpdmUobmV3VmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLl9pc0ludGVyYWN0aXZlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0ludGVyYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMubW92ZW1lbnRTdGF0ZSA9IE1vdmVtZW50U3RhdGUuSWRsZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBJc0p1bXBpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNKdW1waW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgQ2FuSnVtcCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNKdW1waW5nICYmIHRoaXMubmV4dEp1bXBBbGxvd2VkIDwgcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBJc1J1bm5pbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNSdW5uaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgTW92ZW1lbnRTdGF0ZSgpOiBNb3ZlbWVudFN0YXRlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb3ZlbWVudFN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBTdGFydEp1bXAoZGlyZWN0aW9uOiBNb3ZlbWVudFN0YXRlLkp1bXBMZWZ0IHwgTW92ZW1lbnRTdGF0ZS5KdW1wUmlnaHQgfCBNb3ZlbWVudFN0YXRlLkp1bXBVcCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBmb3JjZVZlY3RvcjogW251bWJlciwgbnVtYmVyXTtcclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gTW92ZW1lbnRTdGF0ZS5KdW1wVXApIHtcclxuICAgICAgICAgICAgZm9yY2VWZWN0b3IgPSBbMCwgdGhpcy5KVU1QX0ZPUkNFXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gTW92ZW1lbnRTdGF0ZS5KdW1wTGVmdCkge1xyXG4gICAgICAgICAgICBmb3JjZVZlY3RvciA9IFstdGhpcy5KVU1QX0ZPUkNFICogMC4xMCwgdGhpcy5KVU1QX0ZPUkNFXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gTW92ZW1lbnRTdGF0ZS5KdW1wUmlnaHQpIHtcclxuICAgICAgICAgICAgZm9yY2VWZWN0b3IgPSBbdGhpcy5KVU1QX0ZPUkNFICogMC4xMCwgdGhpcy5KVU1QX0ZPUkNFXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53b3JsZC5wbGF5ZXJCb2R5LmFwcGx5SW1wdWxzZShmb3JjZVZlY3Rvcik7XHJcbiAgICAgICAgdGhpcy53b3JsZC5jbGVhckNvbnRhY3RzRm9yQm9keSh0aGlzLndvcmxkLnBsYXllckJvZHkpO1xyXG4gICAgICAgIHRoaXMubmV4dEp1bXBBbGxvd2VkID0gcGVyZm9ybWFuY2Uubm93KCkgKyB0aGlzLkpVTVBfQ09PTERPV047XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFN0YXJ0SnVtcERvd24oKTogdm9pZCB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm1vdmVtZW50U3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLkxlZnQ6XHJcbiAgICAgICAgICAgIGNhc2UgTW92ZW1lbnRTdGF0ZS5KdW1wTGVmdDpcclxuICAgICAgICAgICAgICAgIHRoaXMubmV3U3RhdGUgPSBNb3ZlbWVudFN0YXRlLkp1bXBEb3duTGVmdDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBNb3ZlbWVudFN0YXRlLlJpZ2h0OlxyXG4gICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSnVtcFJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdTdGF0ZSA9IE1vdmVtZW50U3RhdGUuSnVtcERvd25SaWdodDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMubmV3U3RhdGUgPSBNb3ZlbWVudFN0YXRlLkp1bXBEb3duO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3RhdGUgY2hhbmdlOiBcIiArIE1vdmVtZW50U3RhdGVbdGhpcy5tb3ZlbWVudFN0YXRlXSArIFwiIC0+IFwiICsgTW92ZW1lbnRTdGF0ZVt0aGlzLm5ld1N0YXRlXSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGZvcmNlVmVjdG9yOiBbbnVtYmVyLCBudW1iZXJdID0gWzAsIHRoaXMuSlVNUF9BVFRBQ0tfRk9SQ0VdO1xyXG4gICAgICAgIHRoaXMud29ybGQucGxheWVyQm9keS5zZXRaZXJvRm9yY2UoKTtcclxuICAgICAgICB0aGlzLndvcmxkLnBsYXllckJvZHkuYXBwbHlJbXB1bHNlKGZvcmNlVmVjdG9yKTtcclxuICAgICAgICB0aGlzLm5leHRKdW1wRG93bkFsbG93ZWQgPSBwZXJmb3JtYW5jZS5ub3coKSArIHRoaXMuSlVNUF9BVFRBQ0tfQ09PTERPV047XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5pc0ludGVyYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmlzSW50ZXJhY3RpdmUgPSB0cnVlLCB0aGlzLkpVTVBfQVRUQUNLX0ZSRUVaRSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoTU9WRV9UT1BJQywge1xyXG4gICAgICAgICAgICBuZXdTdGF0ZTogdGhpcy5uZXdTdGF0ZSxcclxuICAgICAgICAgICAgb2xkU3RhdGU6IHRoaXMubW92ZW1lbnRTdGF0ZSxcclxuICAgICAgICAgICAgaXNKdW1waW5nOiB0cnVlLFxyXG4gICAgICAgICAgICBpc1J1bm5pbmc6IGZhbHNlIC8vIG1ha2VzIG5vIGRpZmZlcmVuY2UgZHVyaW5nIGp1bXBzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5tb3ZlbWVudFN0YXRlID0gdGhpcy5uZXdTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlKGR0OiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY29uc3QgS0VZX0E6IG51bWJlciA9IDY1O1xyXG4gICAgICAgIGNvbnN0IEtFWV9EOiBudW1iZXIgPSA2ODtcclxuICAgICAgICBjb25zdCBLRVlfVzogbnVtYmVyID0gODc7XHJcbiAgICAgICAgY29uc3QgS0VZX1M6IG51bWJlciA9IDgzO1xyXG5cclxuICAgICAgICBjb25zdCBLRVlfU0hJRlQ6IG51bWJlciA9IDE2O1xyXG4gICAgICAgIGNvbnN0IEtFWV9MRUZUOiBudW1iZXIgPSAzNztcclxuICAgICAgICBjb25zdCBLRVlfUklHSFQ6IG51bWJlciA9IDM5O1xyXG4gICAgICAgIGNvbnN0IEtFWV9VUDogbnVtYmVyID0gMzg7XHJcbiAgICAgICAgY29uc3QgS0VZX0RPV046IG51bWJlciA9IDQwO1xyXG4gICAgICAgIGNvbnN0IFNQQUNFOiBudW1iZXIgPSAzMjtcclxuXHJcbiAgICAgICAgdGhpcy5uZXdTdGF0ZSA9IE1vdmVtZW50U3RhdGUuSWRsZTtcclxuXHJcbiAgICAgICAgdmFyIGlzTW92aW5nVmVydGljYWx5ID0gTWF0aC5hYnModGhpcy53b3JsZC5wbGF5ZXJCb2R5LnZlbG9jaXR5WzFdKSA+IDAuMDE7XHJcbiAgICAgICAgaWYgKGlzTW92aW5nVmVydGljYWx5KSB7XHJcbiAgICAgICAgICAgIGxldCBoYXNPbmx5U2Vuc29yQ29udGFjdHMgPSB0aGlzLndvcmxkLnBsYXllckNvbnRhY3RzLmV2ZXJ5KChib2R5KSA9PiBib2R5LnNoYXBlc1swXS5zZW5zb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmlzSnVtcGluZyA9IGhhc09ubHlTZW5zb3JDb250YWN0cztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmlzSnVtcGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gIGNhbGN1bGF0ZSB0aGUgaG9yaXpvbnRhbCB2ZWxvY2l0eVxyXG4gICAgICAgIHZhciB2OiBudW1iZXIgPSB0aGlzLmNhbGNNb3ZlbWVudFZlbG9jaXR5KCk7XHJcblxyXG4gICAgICAgIC8vICBubyBtb3ZlbWVudCAoZXhjZXB0IGp1bXAgZG93bikgd2hpbGUganVtcGluZ1xyXG4gICAgICAgIGlmICh0aGlzLmlzSnVtcGluZyAmJiB0aGlzLl9pc0ludGVyYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGlmICgodGhpcy5rYmQuaXNLZXlEb3duKEtFWV9TKSB8fCB0aGlzLmtiZC5pc0tleURvd24oS0VZX0RPV04pKSAmJiBzdGF0cy5IYXNKdW1wQXRhY2sgJiYgdGhpcy5uZXh0SnVtcERvd25BbGxvd2VkIDwgcGVyZm9ybWFuY2Uubm93KCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuU3RhcnRKdW1wRG93bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMud29ybGQucGxheWVyQm9keS52ZWxvY2l0eVswXSArPSB2O1xyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICBjYWxjdWxhdGUgdGhlIGhvcml6b250YWwgdmVsb2NpdHlcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5wbGF5ZXJCb2R5LnZlbG9jaXR5WzBdID0gdjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgY2FuUnVuID0gc3RhdHMuZ2V0U3RhdChTdGF0VHlwZS5EdXN0KSA+IDE7XHJcbiAgICAgICAgdmFyIG5ld0lzUnVubmluZzogYm9vbGVhbiA9IHRoaXMua2JkLmlzS2V5RG93bihLRVlfU0hJRlQpICYmIGNhblJ1biAmJiB0aGlzLl9pc0ludGVyYWN0aXZlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5rYmQuaXNLZXlEb3duKEtFWV9BKSB8fCB0aGlzLmtiZC5pc0tleURvd24oS0VZX0xFRlQpICkge1xyXG4gICAgICAgICAgICB0aGlzLm5ld1N0YXRlID0gTW92ZW1lbnRTdGF0ZS5MZWZ0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5rYmQuaXNLZXlEb3duKEtFWV9EKSB8fCB0aGlzLmtiZC5pc0tleURvd24oS0VZX1JJR0hUKSkge1xyXG4gICAgICAgICAgICB0aGlzLm5ld1N0YXRlID0gTW92ZW1lbnRTdGF0ZS5SaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICBjaGVjayBpZiBqdW1wIGlzIHByZXNzZWRcclxuICAgICAgICBpZiAoKHRoaXMua2JkLmlzS2V5RG93bihLRVlfVykgfHwgdGhpcy5rYmQuaXNLZXlEb3duKEtFWV9VUCkgfHwgdGhpcy5rYmQuaXNLZXlEb3duKFNQQUNFKSkgJiYgdGhpcy5DYW5KdW1wKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdmVtZW50U3RhdGUgPT09IE1vdmVtZW50U3RhdGUuTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdTdGF0ZSA9IE1vdmVtZW50U3RhdGUuSnVtcExlZnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb3ZlbWVudFN0YXRlID09PSBNb3ZlbWVudFN0YXRlLlJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5ld1N0YXRlID0gTW92ZW1lbnRTdGF0ZS5KdW1wUmlnaHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb3ZlbWVudFN0YXRlID09PSBNb3ZlbWVudFN0YXRlLklkbGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV3U3RhdGUgPSBNb3ZlbWVudFN0YXRlLkp1bXBVcDtcclxuICAgICAgICAgICAgICAgIG5ld0lzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgaGFzIHN0YXRlIGNoYW5nZWRcclxuICAgICAgICBpZiAodGhpcy5uZXdTdGF0ZSAhPT0gdGhpcy5tb3ZlbWVudFN0YXRlIHx8IG5ld0lzUnVubmluZyAhPT0gdGhpcy5Jc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgdmFyIGlzQ3VycmVudEp1bXBpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLm5ld1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSnVtcExlZnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5TdGFydEp1bXAoTW92ZW1lbnRTdGF0ZS5KdW1wTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdXJyZW50SnVtcGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1vdmVtZW50U3RhdGUuSnVtcFJpZ2h0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU3RhcnRKdW1wKE1vdmVtZW50U3RhdGUuSnVtcFJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBpc0N1cnJlbnRKdW1waW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTW92ZW1lbnRTdGF0ZS5KdW1wVXA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5TdGFydEp1bXAoTW92ZW1lbnRTdGF0ZS5KdW1wVXApO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQ3VycmVudEp1bXBpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KE1PVkVfVE9QSUMsIHtcclxuICAgICAgICAgICAgICAgIG5ld1N0YXRlOiB0aGlzLm5ld1N0YXRlLFxyXG4gICAgICAgICAgICAgICAgb2xkU3RhdGU6IHRoaXMubW92ZW1lbnRTdGF0ZSxcclxuICAgICAgICAgICAgICAgIGlzSnVtcGluZzogaXNDdXJyZW50SnVtcGluZyxcclxuICAgICAgICAgICAgICAgIGlzUnVubmluZzogbmV3SXNSdW5uaW5nIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICB1cGRhdGUgbmV3IHN0YXRlc1xyXG4gICAgICAgIHRoaXMubW92ZW1lbnRTdGF0ZSA9IHRoaXMubmV3U3RhdGU7XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBuZXdJc1J1bm5pbmc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWxjTW92ZW1lbnRWZWxvY2l0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb246IG51bWJlciA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMubW92ZW1lbnRTdGF0ZSA9PT0gTW92ZW1lbnRTdGF0ZS5MZWZ0IHx8IHRoaXMubW92ZW1lbnRTdGF0ZSA9PT0gTW92ZW1lbnRTdGF0ZS5KdW1wTGVmdCkge1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAtMTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubW92ZW1lbnRTdGF0ZSA9PT0gTW92ZW1lbnRTdGF0ZS5SaWdodCB8fCB0aGlzLm1vdmVtZW50U3RhdGUgPT09IE1vdmVtZW50U3RhdGUuSnVtcFJpZ2h0KSB7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5Jc0p1bXBpbmcpIHtcclxuICAgICAgICAgICAgLy8gIGFsbG93IGZvciBzb21lIG1pbmltYWwgaG9yaXpvbnRhbCBtb3ZlbWVudCAodGhpcyBpcyB0byBwcmV2ZW50IGdldHRpbmcgc3R1Y2sgaW4gYWlyIGlmIGJldHdlZW4gdHdvIGJvZGllcyB3aXRoIGZyaWN0aW9uIGFuZCBubyBjb250YWN0cylcclxuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGlvbiAqIDAuMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdmVsb2NpdHk6IG51bWJlciA9IGRpcmVjdGlvbiAqIHRoaXMuVkVMT0NJVFkgKiAodGhpcy5Jc1J1bm5pbmcgPyAyIDogMS4wKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZlbG9jaXR5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gTW92ZW1lbnRTdGF0ZSB7XHJcbiAgICBMZWZ0LFxyXG4gICAgUmlnaHQsXHJcbiAgICBJZGxlLFxyXG5cclxuICAgIEp1bXBMZWZ0LFxyXG4gICAgSnVtcFJpZ2h0LFxyXG4gICAgSnVtcFVwLFxyXG5cclxuICAgIEp1bXBEb3duTGVmdCxcclxuICAgIEp1bXBEb3duUmlnaHQsXHJcbiAgICBKdW1wRG93bixcclxufSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBdUJBO0FBdEJBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVhBO0FBYUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBM05BO0FBNk5BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./objects/MovementController.ts\n");

/***/ }),

/***/ "./objects/Parallax.ts":
/*!*****************************!*\
  !*** ./objects/Parallax.ts ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\n/**\r\n *   Represents a parallax background with textures that tile inside the viewport.\r\n */\r\nvar Parallax = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Parallax, _super);\r\n    /**\r\n     *   Creates a new ParalaxSprite instance.\r\n     */\r\n    function Parallax(size, parallaxFactor, textures, textureScale) {\r\n        var _this = _super.call(this) || this;\r\n        _this.textureScale = textureScale;\r\n        _this.spriteBuffer = [];\r\n        _this.spriteOrderList = [];\r\n        /**\r\n         * total width of all textures\r\n         */\r\n        _this.totalWidth = 0;\r\n        _this.recalculatePosition = function (newPositionX) {\r\n            var firstIdx = _this.spriteOrderList[0];\r\n            var firstSpr = _this.spriteBuffer[firstIdx];\r\n            var lastIdx = _this.spriteOrderList[_this.spriteOrderList.length - 1];\r\n            var lastSpr = _this.spriteBuffer[lastIdx];\r\n            //  update sprite positions\r\n            var delta = (_this.worldPosition - newPositionX) * _this.parallaxFactor;\r\n            _this.updatePositions(delta);\r\n            if (newPositionX > _this.worldPosition) {\r\n                //  check for removals from left side\r\n                if (firstSpr.x + firstSpr.width < 0) {\r\n                    _this.spriteOrderList.push(_this.spriteOrderList.shift()); //  move first element to end\r\n                    firstSpr.x = lastSpr.x + lastSpr.width;\r\n                }\r\n            }\r\n            else {\r\n                //  check for removals from right side\r\n                if (lastSpr.x > _this.viewPortSize.x) {\r\n                    _this.spriteOrderList.unshift(_this.spriteOrderList.pop()); //  move last element to start\r\n                    lastSpr.x = firstSpr.x - lastSpr.width;\r\n                }\r\n            }\r\n            _this.worldPosition = newPositionX;\r\n        };\r\n        _this.viewPortSize = size || new __1.PIXI.Point(100, 100);\r\n        _this.parallaxFactor = parallaxFactor || 1;\r\n        _this.textureScale = _this.textureScale || 1;\r\n        _this.setTextures(textures);\r\n        _this.worldPosition = 0;\r\n        _this.SetViewPortX(1);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Parallax.prototype, \"WorldPosition\", {\r\n        get: function () {\r\n            return this.worldPosition;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Parallax.prototype.SetViewPortX = function (newPositionX) {\r\n        if (this.worldPosition !== newPositionX) {\r\n            this.recalculatePosition(newPositionX);\r\n        }\r\n    };\r\n    Object.defineProperty(Parallax.prototype, \"ViewPortSize\", {\r\n        get: function () {\r\n            return this.viewPortSize;\r\n        },\r\n        set: function (point) {\r\n            this.viewPortSize = point;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Parallax.prototype, \"ParallaxFactor\", {\r\n        get: function () {\r\n            return this.parallaxFactor;\r\n        },\r\n        set: function (factor) {\r\n            this.parallaxFactor = factor;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Parallax.prototype.setTextures = function (textures) {\r\n        var index = 0;\r\n        var textureIndex;\r\n        //  get the first texture to fetch the width\r\n        var t = this.getTexture(textures, 0);\r\n        var width = t.width * this.textureScale;\r\n        while (this.spriteBuffer.length < 3 || //  at least 3 textures (for shifting right/left and central)\r\n            this.spriteBuffer.length < textures.length || //  at least as many as given in input\r\n            this.totalWidth <= this.viewPortSize.x + width //  at least to cover whole viewport size extended for one width\r\n        ) {\r\n            //  get the texture\r\n            textureIndex = index % textures.length;\r\n            t = this.getTexture(textures, textureIndex);\r\n            t.rotate = 8; //  to adjust for worldContainer y scale -1\r\n            // create a sprite\r\n            var spr = new __1.PIXI.Sprite(t);\r\n            spr.x = this.totalWidth;\r\n            spr.scale.set(this.textureScale, this.textureScale);\r\n            spr.anchor.set(0, 0);\r\n            this.spriteBuffer.push(spr);\r\n            this.spriteOrderList.push(this.spriteBuffer.length - 1); //   will hold sprite indices from spritebuffer [0,1,2,3,4...]\r\n            this.addChild(spr);\r\n            //  update\r\n            this.totalWidth += spr.width;\r\n            //console.log(`${t.baseTexture.imageUrl} -> width: ${t.width} spr width: ${spr.width}, total width: ${this.totalWidth}`);\r\n            index++;\r\n        }\r\n    };\r\n    Parallax.prototype.getTexture = function (textures, textureIndex) {\r\n        var t;\r\n        if (typeof textures[textureIndex] === 'string') {\r\n            t = __1.TextureLoader.Get(textures[textureIndex]);\r\n        }\r\n        else {\r\n            t = textures[textureIndex];\r\n        }\r\n        return t;\r\n    };\r\n    Parallax.prototype.updatePositions = function (delta) {\r\n        // for(let i = 0; i< this.spriteBuffer.length; i++){\r\n        //     this.spriteBuffer[i].position.x += delta;\r\n        // }\r\n        for (var _i = 0, _a = this.spriteBuffer; _i < _a.length; _i++) {\r\n            var sb = _a[_i];\r\n            sb.position.x += delta;\r\n        }\r\n    };\r\n    return Parallax;\r\n}(__1.PIXI.Container));\r\nexports.Parallax = Parallax;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL1BhcmFsbGF4LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vb2JqZWN0cy9QYXJhbGxheC50cz8xN2E3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBJWEksIFRleHR1cmVMb2FkZXIgfSBmcm9tICcuLic7XHJcblxyXG4vKipcclxuICogICBSZXByZXNlbnRzIGEgcGFyYWxsYXggYmFja2dyb3VuZCB3aXRoIHRleHR1cmVzIHRoYXQgdGlsZSBpbnNpZGUgdGhlIHZpZXdwb3J0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBhcmFsbGF4IGV4dGVuZHMgUElYSS5Db250YWluZXIge1xyXG4gICAgcHJpdmF0ZSB2aWV3UG9ydFNpemU6IFBJWEkuUG9pbnQ7XHJcbiAgICBwcml2YXRlIHdvcmxkUG9zaXRpb246IG51bWJlcjtcclxuICAgIHByaXZhdGUgcGFyYWxsYXhGYWN0b3I6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIHNwcml0ZUJ1ZmZlcjogUElYSS5TcHJpdGVbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzcHJpdGVPcmRlckxpc3Q6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0b3RhbCB3aWR0aCBvZiBhbGwgdGV4dHVyZXNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0b3RhbFdpZHRoOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogICBDcmVhdGVzIGEgbmV3IFBhcmFsYXhTcHJpdGUgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHNpemU6IFBJWEkuUG9pbnQsIHBhcmFsbGF4RmFjdG9yOiBudW1iZXIsIHRleHR1cmVzOiBBcnJheTxzdHJpbmcgfCBQSVhJLlRleHR1cmU+LCBwcml2YXRlIHRleHR1cmVTY2FsZT86IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy52aWV3UG9ydFNpemUgPSBzaXplIHx8IG5ldyBQSVhJLlBvaW50KDEwMCwgMTAwKTtcclxuICAgICAgICB0aGlzLnBhcmFsbGF4RmFjdG9yID0gcGFyYWxsYXhGYWN0b3IgfHwgMTtcclxuICAgICAgICB0aGlzLnRleHR1cmVTY2FsZSA9IHRoaXMudGV4dHVyZVNjYWxlIHx8IDE7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0dXJlcyh0ZXh0dXJlcyk7XHJcbiAgICAgICAgdGhpcy53b3JsZFBvc2l0aW9uID0gMDtcclxuICAgICAgICB0aGlzLlNldFZpZXdQb3J0WCgxKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IFdvcmxkUG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud29ybGRQb3NpdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgU2V0Vmlld1BvcnRYKG5ld1Bvc2l0aW9uWDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMud29ybGRQb3NpdGlvbiAhPT0gbmV3UG9zaXRpb25YKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjYWxjdWxhdGVQb3NpdGlvbihuZXdQb3NpdGlvblgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IFZpZXdQb3J0U2l6ZSgpOiBQSVhJLlBvaW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aWV3UG9ydFNpemU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IFZpZXdQb3J0U2l6ZShwb2ludDogUElYSS5Qb2ludCkge1xyXG4gICAgICAgIHRoaXMudmlld1BvcnRTaXplID0gcG9pbnQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IFBhcmFsbGF4RmFjdG9yKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYWxsYXhGYWN0b3I7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IFBhcmFsbGF4RmFjdG9yKGZhY3RvcjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbGxheEZhY3RvciA9IGZhY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VGV4dHVyZXModGV4dHVyZXM6IEFycmF5PHN0cmluZyB8IFBJWEkuVGV4dHVyZT4pOiB2b2lkIHtcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlSW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLy8gIGdldCB0aGUgZmlyc3QgdGV4dHVyZSB0byBmZXRjaCB0aGUgd2lkdGhcclxuICAgICAgICBsZXQgdDogUElYSS5UZXh0dXJlID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVzLCAwKTtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IHQud2lkdGggKiB0aGlzLnRleHR1cmVTY2FsZSE7XHJcblxyXG4gICAgICAgIHdoaWxlIChcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVCdWZmZXIubGVuZ3RoIDwgMyB8fCAvLyAgYXQgbGVhc3QgMyB0ZXh0dXJlcyAoZm9yIHNoaWZ0aW5nIHJpZ2h0L2xlZnQgYW5kIGNlbnRyYWwpXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlQnVmZmVyLmxlbmd0aCA8IHRleHR1cmVzLmxlbmd0aCB8fCAvLyAgYXQgbGVhc3QgYXMgbWFueSBhcyBnaXZlbiBpbiBpbnB1dFxyXG4gICAgICAgICAgICB0aGlzLnRvdGFsV2lkdGggPD0gdGhpcy52aWV3UG9ydFNpemUueCArIHdpZHRoIC8vICBhdCBsZWFzdCB0byBjb3ZlciB3aG9sZSB2aWV3cG9ydCBzaXplIGV4dGVuZGVkIGZvciBvbmUgd2lkdGhcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8gIGdldCB0aGUgdGV4dHVyZVxyXG4gICAgICAgICAgICB0ZXh0dXJlSW5kZXggPSBpbmRleCAlIHRleHR1cmVzLmxlbmd0aDtcclxuICAgICAgICAgICAgdCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlcywgdGV4dHVyZUluZGV4KTtcclxuICAgICAgICAgICAgdC5yb3RhdGUgPSA4OyAvLyAgdG8gYWRqdXN0IGZvciB3b3JsZENvbnRhaW5lciB5IHNjYWxlIC0xXHJcblxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBzcHJpdGVcclxuICAgICAgICAgICAgY29uc3Qgc3ByID0gbmV3IFBJWEkuU3ByaXRlKHQpO1xyXG4gICAgICAgICAgICBzcHIueCA9IHRoaXMudG90YWxXaWR0aDtcclxuICAgICAgICAgICAgc3ByLnNjYWxlLnNldCh0aGlzLnRleHR1cmVTY2FsZSwgdGhpcy50ZXh0dXJlU2NhbGUpO1xyXG4gICAgICAgICAgICBzcHIuYW5jaG9yLnNldCgwLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5zcHJpdGVCdWZmZXIucHVzaChzcHIpO1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZU9yZGVyTGlzdC5wdXNoKHRoaXMuc3ByaXRlQnVmZmVyLmxlbmd0aCAtIDEpOyAvLyAgIHdpbGwgaG9sZCBzcHJpdGUgaW5kaWNlcyBmcm9tIHNwcml0ZWJ1ZmZlciBbMCwxLDIsMyw0Li4uXVxyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHNwcik7XHJcblxyXG4gICAgICAgICAgICAvLyAgdXBkYXRlXHJcbiAgICAgICAgICAgIHRoaXMudG90YWxXaWR0aCArPSBzcHIud2lkdGg7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coYCR7dC5iYXNlVGV4dHVyZS5pbWFnZVVybH0gLT4gd2lkdGg6ICR7dC53aWR0aH0gc3ByIHdpZHRoOiAke3Nwci53aWR0aH0sIHRvdGFsIHdpZHRoOiAke3RoaXMudG90YWxXaWR0aH1gKTtcclxuICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRUZXh0dXJlKHRleHR1cmVzOiBBcnJheTxzdHJpbmcgfCBQSVhJLlRleHR1cmU+LCB0ZXh0dXJlSW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGxldCB0OiBQSVhJLlRleHR1cmU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0ZXh0dXJlc1t0ZXh0dXJlSW5kZXhdID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0ID0gVGV4dHVyZUxvYWRlci5HZXQodGV4dHVyZXNbdGV4dHVyZUluZGV4XSBhcyBzdHJpbmcpITtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0ID0gdGV4dHVyZXNbdGV4dHVyZUluZGV4XSBhcyBQSVhJLlRleHR1cmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVjYWxjdWxhdGVQb3NpdGlvbiA9IChuZXdQb3NpdGlvblg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpcnN0SWR4ID0gdGhpcy5zcHJpdGVPcmRlckxpc3RbMF07XHJcbiAgICAgICAgY29uc3QgZmlyc3RTcHI6IFBJWEkuU3ByaXRlID0gdGhpcy5zcHJpdGVCdWZmZXJbZmlyc3RJZHhdO1xyXG4gICAgICAgIGNvbnN0IGxhc3RJZHggPSB0aGlzLnNwcml0ZU9yZGVyTGlzdFt0aGlzLnNwcml0ZU9yZGVyTGlzdC5sZW5ndGggLSAxXTtcclxuICAgICAgICBjb25zdCBsYXN0U3ByOiBQSVhJLlNwcml0ZSA9IHRoaXMuc3ByaXRlQnVmZmVyW2xhc3RJZHhdO1xyXG5cclxuICAgICAgICAvLyAgdXBkYXRlIHNwcml0ZSBwb3NpdGlvbnNcclxuICAgICAgICBjb25zdCBkZWx0YSA9ICh0aGlzLndvcmxkUG9zaXRpb24gLSBuZXdQb3NpdGlvblgpICogdGhpcy5wYXJhbGxheEZhY3RvcjtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9ucyhkZWx0YSk7XHJcblxyXG4gICAgICAgIGlmIChuZXdQb3NpdGlvblggPiB0aGlzLndvcmxkUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgLy8gIGNoZWNrIGZvciByZW1vdmFscyBmcm9tIGxlZnQgc2lkZVxyXG4gICAgICAgICAgICBpZiAoZmlyc3RTcHIueCArIGZpcnN0U3ByLndpZHRoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVPcmRlckxpc3QucHVzaCh0aGlzLnNwcml0ZU9yZGVyTGlzdC5zaGlmdCgpISk7IC8vICBtb3ZlIGZpcnN0IGVsZW1lbnQgdG8gZW5kXHJcbiAgICAgICAgICAgICAgICBmaXJzdFNwci54ID0gbGFzdFNwci54ICsgbGFzdFNwci53aWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICBjaGVjayBmb3IgcmVtb3ZhbHMgZnJvbSByaWdodCBzaWRlXHJcbiAgICAgICAgICAgIGlmIChsYXN0U3ByLnggPiB0aGlzLnZpZXdQb3J0U2l6ZS54KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZU9yZGVyTGlzdC51bnNoaWZ0KHRoaXMuc3ByaXRlT3JkZXJMaXN0LnBvcCgpISk7IC8vICBtb3ZlIGxhc3QgZWxlbWVudCB0byBzdGFydFxyXG4gICAgICAgICAgICAgICAgbGFzdFNwci54ID0gZmlyc3RTcHIueCAtIGxhc3RTcHIud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53b3JsZFBvc2l0aW9uID0gbmV3UG9zaXRpb25YO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVBvc2l0aW9ucyhkZWx0YTogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gZm9yKGxldCBpID0gMDsgaTwgdGhpcy5zcHJpdGVCdWZmZXIubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIC8vICAgICB0aGlzLnNwcml0ZUJ1ZmZlcltpXS5wb3NpdGlvbi54ICs9IGRlbHRhO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBmb3IgKGNvbnN0IHNiIG9mIHRoaXMuc3ByaXRlQnVmZmVyKSB7XHJcbiAgICAgICAgICAgIHNiLnBvc2l0aW9uLnggKz0gZGVsdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQWFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBWEE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFrRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSEE7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUEvSEE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./objects/Parallax.ts\n");

/***/ }),

/***/ "./objects/Platform.ts":
/*!*****************************!*\
  !*** ./objects/Platform.ts ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar Platform = /** @class */ (function (_super) {\r\n    tslib_1.__extends(Platform, _super);\r\n    /**\r\n     *\r\n     * @param tilesX number of horizontal mid tiles. Note: this is the number of mid tiles - the actual width is tilesX + 2\r\n     * @param tilesY number of vertical tiles\r\n     * @param textures array of textures in specific order: top mid, top left, top right, bottom mid, bottom left, bottom right.\r\n     */\r\n    function Platform(tilesX, tilesY, textures) {\r\n        if (tilesX === void 0) { tilesX = 1; }\r\n        if (tilesY === void 0) { tilesY = 1; }\r\n        var _this = _super.call(this) || this;\r\n        _this.scale.y *= -1; //  the worldContainer has -y scale so we must flip it up again\r\n        var textureNameTopLeft, textureNameTopRight, textureNameBtmMid, textureNameBtmLeft, textureNameBtmRight;\r\n        //  this one must exist\r\n        var textureNameTopMid = textures[0];\r\n        if (tilesX > 1 || textures.length > 1) {\r\n            textureNameTopLeft = textures[1];\r\n            textureNameTopRight = textures[2];\r\n        }\r\n        if (tilesY > 1) {\r\n            textureNameBtmMid = textures[3];\r\n            textureNameBtmLeft = textures[4];\r\n            textureNameBtmRight = textures[5];\r\n        }\r\n        var spr;\r\n        var x = 0;\r\n        //--------------------------\r\n        //  left border\r\n        //--------------------------\r\n        if (textureNameTopLeft) {\r\n            //texture = PIXI.loader.resources[textureNameTopLeft].texture;\r\n            texture = __1.TextureLoader.Get(textureNameTopLeft);\r\n            spr = new __1.PIXI.Sprite(texture);\r\n            spr.position.set(x + 1, 0);\r\n            x += texture.width;\r\n            _this.addChild(spr);\r\n        }\r\n        //--------------------------\r\n        //  mid tiles\r\n        //--------------------------\r\n        //var texture = PIXI.loader.resources[textureNameTopMid].texture;\r\n        var texture = __1.TextureLoader.Get(textureNameTopMid);\r\n        if (tilesX > 1) {\r\n            var w = texture.width * tilesX;\r\n            var h = texture.height;\r\n            spr = new __1.PIXI.TilingSprite(texture, w, h);\r\n            spr.position.set(x, 0);\r\n            x += w;\r\n        }\r\n        else {\r\n            spr = new __1.PIXI.Sprite(texture);\r\n            spr.position.set(x, 0);\r\n            x += spr.width;\r\n        }\r\n        _this.addChild(spr);\r\n        //--------------------------\r\n        //  right border\r\n        //--------------------------\r\n        if (textureNameTopRight) {\r\n            //texture = PIXI.loader.resources[textureNameTopRight].texture;\r\n            texture = __1.TextureLoader.Get(textureNameTopRight);\r\n            spr = new __1.PIXI.Sprite(texture);\r\n            spr.position.set(x - 1, 0);\r\n            x += spr.width;\r\n            _this.addChild(spr);\r\n        }\r\n        //--------------------------\r\n        //  fill downwards\r\n        //--------------------------\r\n        var xTiles = tilesX + 2;\r\n        if (tilesY > 1) {\r\n            for (var x = 0; x < xTiles; x++) {\r\n                var name;\r\n                if (x === 0) {\r\n                    name = textureNameBtmLeft;\r\n                }\r\n                else if (x === xTiles - 1) {\r\n                    name = textureNameBtmRight;\r\n                }\r\n                else {\r\n                    name = textureNameBtmMid;\r\n                }\r\n                for (var y = 1; y < tilesY; y++) {\r\n                    //texture = PIXI.loader.resources[name].texture;\r\n                    texture = __1.TextureLoader.Get(name);\r\n                    spr = new __1.PIXI.Sprite(texture);\r\n                    spr.position.set(x * spr.width, y * spr.height);\r\n                    _this.addChild(spr);\r\n                }\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    return Platform;\r\n}(__1.PIXI.Container));\r\nexports.Platform = Platform;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL1BsYXRmb3JtLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vb2JqZWN0cy9QbGF0Zm9ybS50cz9iYmJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBJWEksIFRleHR1cmVMb2FkZXIgfSBmcm9tICcuLic7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxhdGZvcm0gZXh0ZW5kcyBQSVhJLkNvbnRhaW5lciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB0aWxlc1ggbnVtYmVyIG9mIGhvcml6b250YWwgbWlkIHRpbGVzLiBOb3RlOiB0aGlzIGlzIHRoZSBudW1iZXIgb2YgbWlkIHRpbGVzIC0gdGhlIGFjdHVhbCB3aWR0aCBpcyB0aWxlc1ggKyAyXHJcbiAgICAgKiBAcGFyYW0gdGlsZXNZIG51bWJlciBvZiB2ZXJ0aWNhbCB0aWxlc1xyXG4gICAgICogQHBhcmFtIHRleHR1cmVzIGFycmF5IG9mIHRleHR1cmVzIGluIHNwZWNpZmljIG9yZGVyOiB0b3AgbWlkLCB0b3AgbGVmdCwgdG9wIHJpZ2h0LCBib3R0b20gbWlkLCBib3R0b20gbGVmdCwgYm90dG9tIHJpZ2h0LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0aWxlc1g6IG51bWJlciA9IDEsIHRpbGVzWTogbnVtYmVyID0gMSwgdGV4dHVyZXM6c3RyaW5nW10pIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUueSAqPSAtMTsgLy8gIHRoZSB3b3JsZENvbnRhaW5lciBoYXMgLXkgc2NhbGUgc28gd2UgbXVzdCBmbGlwIGl0IHVwIGFnYWluXHJcbiAgICAgICAgdmFyIHRleHR1cmVOYW1lVG9wTGVmdDogc3RyaW5nLFxyXG4gICAgICAgICAgICB0ZXh0dXJlTmFtZVRvcFJpZ2h0OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHRleHR1cmVOYW1lQnRtTWlkOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHRleHR1cmVOYW1lQnRtTGVmdDogc3RyaW5nLFxyXG4gICAgICAgICAgICB0ZXh0dXJlTmFtZUJ0bVJpZ2h0OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8vICB0aGlzIG9uZSBtdXN0IGV4aXN0XHJcbiAgICAgICAgdmFyIHRleHR1cmVOYW1lVG9wTWlkOiBzdHJpbmcgPSB0ZXh0dXJlc1swXTtcclxuICAgICAgICBpZiAodGlsZXNYID4gMSB8fCB0ZXh0dXJlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHRleHR1cmVOYW1lVG9wTGVmdCA9IHRleHR1cmVzWzFdO1xyXG4gICAgICAgICAgICB0ZXh0dXJlTmFtZVRvcFJpZ2h0ID0gdGV4dHVyZXNbMl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aWxlc1kgPiAxKSB7XHJcbiAgICAgICAgICAgIHRleHR1cmVOYW1lQnRtTWlkID0gdGV4dHVyZXNbM107XHJcbiAgICAgICAgICAgIHRleHR1cmVOYW1lQnRtTGVmdCA9IHRleHR1cmVzWzRdO1xyXG4gICAgICAgICAgICB0ZXh0dXJlTmFtZUJ0bVJpZ2h0ID0gdGV4dHVyZXNbNV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzcHI6IFBJWEkuU3ByaXRlO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICBsZWZ0IGJvcmRlclxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBpZiAodGV4dHVyZU5hbWVUb3BMZWZ0KSB7XHJcbiAgICAgICAgICAgIC8vdGV4dHVyZSA9IFBJWEkubG9hZGVyLnJlc291cmNlc1t0ZXh0dXJlTmFtZVRvcExlZnRdLnRleHR1cmU7XHJcbiAgICAgICAgICAgIHRleHR1cmUgPSBUZXh0dXJlTG9hZGVyLkdldCh0ZXh0dXJlTmFtZVRvcExlZnQpO1xyXG4gICAgICAgICAgICBzcHIgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgIHNwci5wb3NpdGlvbi5zZXQoeCsxLCAwKTtcclxuICAgICAgICAgICAgeCArPSB0ZXh0dXJlLndpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHNwcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIG1pZCB0aWxlc1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvL3ZhciB0ZXh0dXJlID0gUElYSS5sb2FkZXIucmVzb3VyY2VzW3RleHR1cmVOYW1lVG9wTWlkXS50ZXh0dXJlO1xyXG4gICAgICAgIHZhciB0ZXh0dXJlID0gVGV4dHVyZUxvYWRlci5HZXQodGV4dHVyZU5hbWVUb3BNaWQpO1xyXG4gICAgICAgIGlmICh0aWxlc1ggPiAxKSB7XHJcbiAgICAgICAgICAgIGxldCB3ID0gdGV4dHVyZS53aWR0aCAqIHRpbGVzWDtcclxuICAgICAgICAgICAgbGV0IGggPSB0ZXh0dXJlLmhlaWdodDtcclxuICAgICAgICAgICAgc3ByID0gbmV3IFBJWEkuVGlsaW5nU3ByaXRlKHRleHR1cmUsIHcsIGgpO1xyXG4gICAgICAgICAgICBzcHIucG9zaXRpb24uc2V0KHgsIDApO1xyXG4gICAgICAgICAgICB4ICs9IHc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3ByID0gbmV3IFBJWEkuU3ByaXRlKHRleHR1cmUpO1xyXG4gICAgICAgICAgICBzcHIucG9zaXRpb24uc2V0KHgsIDApO1xyXG4gICAgICAgICAgICB4ICs9IHNwci53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZChzcHIpO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIHJpZ2h0IGJvcmRlclxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBpZiAodGV4dHVyZU5hbWVUb3BSaWdodCkge1xyXG4gICAgICAgICAgICAvL3RleHR1cmUgPSBQSVhJLmxvYWRlci5yZXNvdXJjZXNbdGV4dHVyZU5hbWVUb3BSaWdodF0udGV4dHVyZTtcclxuICAgICAgICAgICAgdGV4dHVyZSA9IFRleHR1cmVMb2FkZXIuR2V0KHRleHR1cmVOYW1lVG9wUmlnaHQpO1xyXG4gICAgICAgICAgICBzcHIgPSBuZXcgUElYSS5TcHJpdGUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgIHNwci5wb3NpdGlvbi5zZXQoeCAtMSwgMCk7XHJcbiAgICAgICAgICAgIHggKz0gc3ByLndpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHNwcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIGZpbGwgZG93bndhcmRzXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGxldCB4VGlsZXMgPSB0aWxlc1ggKyAyO1xyXG4gICAgICAgIGlmICh0aWxlc1kgPiAxKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgeFRpbGVzOyB4KyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSB0ZXh0dXJlTmFtZUJ0bUxlZnQ7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeCA9PT0geFRpbGVzIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSB0ZXh0dXJlTmFtZUJ0bVJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gdGV4dHVyZU5hbWVCdG1NaWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeSA9IDE7IHkgPCB0aWxlc1k7IHkrKykgeyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy90ZXh0dXJlID0gUElYSS5sb2FkZXIucmVzb3VyY2VzW25hbWVdLnRleHR1cmU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZSA9IFRleHR1cmVMb2FkZXIuR2V0KG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwciA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBzcHIucG9zaXRpb24uc2V0KHggKiBzcHIud2lkdGgsIHkgKiBzcHIuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENoaWxkKHNwcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBRUE7QUFBQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFBQTtBQXBHQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./objects/Platform.ts\n");

/***/ }),

/***/ "./objects/PlayerStats.ts":
/*!********************************!*\
  !*** ./objects/PlayerStats.ts ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar global_1 = __webpack_require__(/*! ../global */ \"./global.ts\");\r\nvar events_1 = __webpack_require__(/*! ../events */ \"./events.ts\");\r\nvar LevelLoader_1 = __webpack_require__(/*! ../world/LevelLoader */ \"./world/LevelLoader.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\nvar PlayerStats = /** @class */ (function () {\r\n    function PlayerStats() {\r\n        var _this = this;\r\n        /**\r\n         * Base stats are fixed values increased with level.\r\n         */\r\n        this.baseStats = [];\r\n        /**\r\n         * Attribute stats are player assigned values (point distribution).\r\n         */\r\n        this.attributeStats = [];\r\n        this.stats = [];\r\n        this.accumulator = 0.0;\r\n        this.dpsDecreaseAmount = 0;\r\n        //  acquired skills\r\n        this.hasJumpAttack = false;\r\n        this.hasMagicAttack = false;\r\n        //  achievement levels\r\n        this.characterLevel = 0;\r\n        this.currentGameLevel = 0;\r\n        this.expForNextLevel = 0;\r\n        this.isBurningBuff = false;\r\n        /**\r\n         *   Stores timestamps (Unix timestamps in seconds with fractions) when the buff elapses.\r\n         */\r\n        this.buffs = [];\r\n        /**\r\n         *  Updates stats that increase/decrease over time.\r\n         *  The update is calculated in a half second interval.\r\n         */\r\n        this.onUpdate = function (dt) {\r\n            var INTERVAL = 500;\r\n            var SECOND_2_INTERVAL = INTERVAL / 1000; //  this factor converts per second values to per interval values\r\n            var now = performance.now() / 1000;\r\n            //  accumulate dps\r\n            for (var i = 1000, len = _this.buffs.length; i < len; i++) {\r\n                if (_this.buffs[i] && _this.buffs[i] > now) {\r\n                    var dps = 0;\r\n                    switch (i) {\r\n                        case enums_1.DamageType.LavaBorder:\r\n                            dps = 5;\r\n                            break;\r\n                        case enums_1.DamageType.Lava:\r\n                            dps = 15;\r\n                            break;\r\n                        case enums_1.DamageType.Poison:\r\n                            dps = 10;\r\n                            break;\r\n                    }\r\n                    var dmg = dt * 0.001 * dps;\r\n                    _this.dpsDecreaseAmount += dmg;\r\n                }\r\n            }\r\n            //  handle once per interval ticks\r\n            _this.accumulator += dt;\r\n            if (_this.accumulator > INTERVAL) {\r\n                _this.accumulator -= INTERVAL;\r\n                //  dust\r\n                if (_this.stats[enums_1.StatType.Dust] < _this.stats[enums_1.StatType.MaxDust]) {\r\n                    var v = _this.stats[enums_1.StatType.RegenDust] * SECOND_2_INTERVAL;\r\n                    _this.increaseStat(enums_1.StatType.Dust, v);\r\n                }\r\n                //  hp\r\n                if (_this.stats[enums_1.StatType.HP] < _this.stats[enums_1.StatType.MaxHP]) {\r\n                    var v = _this.stats[enums_1.StatType.RegenHP] * SECOND_2_INTERVAL;\r\n                    _this.increaseStat(enums_1.StatType.HP, v);\r\n                }\r\n                //  dps\r\n                if (_this.dpsDecreaseAmount >= 1) {\r\n                    var amount = Math.floor(_this.dpsDecreaseAmount);\r\n                    var event = {\r\n                        OldValue: _this.stats[enums_1.StatType.HP],\r\n                        Amount: -amount\r\n                    };\r\n                    events_1.eventEmitter.emit(events_1.DAMAGE_TOPIC, event);\r\n                    _this.increaseStat(enums_1.StatType.HP, -amount);\r\n                    _this.dpsDecreaseAmount -= amount;\r\n                }\r\n            }\r\n            //--------------------------\r\n            //  check if is burning\r\n            //--------------------------\r\n            var wasBurning = _this.isBurningBuff;\r\n            _this.isBurningBuff = _this.buffs[enums_1.DamageType.LavaBorder] > now || _this.buffs[enums_1.DamageType.Lava] > now;\r\n            if (wasBurning !== _this.isBurning) {\r\n                events_1.eventEmitter.emit(events_1.BURN_TOPIC, { wasBurning: wasBurning, isBurning: _this.isBurningBuff });\r\n            }\r\n        };\r\n        this.scevent = {\r\n            Type: enums_1.StatType.Coins,\r\n            OldValue: 0,\r\n            NewValue: 0,\r\n            Stats: []\r\n        };\r\n        this.id = 0;\r\n        //  attr  stats\r\n        this.attributeStats[enums_1.BaseStatType.RegenHP] = 0;\r\n        this.attributeStats[enums_1.BaseStatType.RegenDust] = 0;\r\n        this.attributeStats[enums_1.BaseStatType.MaxHP] = 0;\r\n        this.attributeStats[enums_1.BaseStatType.MaxDust] = 0;\r\n        // runtime stats\r\n        this.stats[enums_1.StatType.Coins] = 0;\r\n        this.stats[enums_1.StatType.Dust] = 600;\r\n        this.stats[enums_1.StatType.TotalExp] = 0;\r\n        this.stats[enums_1.StatType.AttributePoints] = 0;\r\n        this.stats[enums_1.StatType.HP] = 120;\r\n        var diff = 1000;\r\n        PlayerStats.expForLevel[0] = 0;\r\n        for (var i = 1; i < 10000; i++) {\r\n            PlayerStats.expForLevel[i] = PlayerStats.expForLevel[i - 1] + (i * diff);\r\n        }\r\n        this.rebuildStats();\r\n    }\r\n    Object.defineProperty(PlayerStats.prototype, \"LevelLoader\", {\r\n        /**\r\n         * Rteurns the level loader.\r\n         */\r\n        get: function () {\r\n            if (!this.levelLoader) {\r\n                this.levelLoader = new LevelLoader_1.LevelLoader(global_1.LevelDefinitions);\r\n            }\r\n            return this.levelLoader;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PlayerStats.prototype, \"isBurning\", {\r\n        /**\r\n         * Returns true if the player is taking burn damage.\r\n         */\r\n        get: function () {\r\n            return this.isBurningBuff;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    PlayerStats.prototype.loadLevel = function () {\r\n        this.loadUserState();\r\n        this.currentLevel = this.LevelLoader.buildLevel(this.currentGameLevel);\r\n    };\r\n    /**\r\n     * Saves user data.\r\n     */\r\n    PlayerStats.prototype.saveUserState = function (isLevelCompleted) {\r\n        if (isLevelCompleted) {\r\n            this.currentGameLevel += 1;\r\n        }\r\n        var model = {\r\n            ExternalId: this.id,\r\n            Coins: this.stats[enums_1.StatType.Coins],\r\n            Gold: this.stats[enums_1.StatType.Gold],\r\n            Dust: Math.floor(this.stats[enums_1.StatType.Dust]),\r\n            Exp: this.stats[enums_1.StatType.TotalExp],\r\n            AtrPts: this.stats[enums_1.StatType.AttributePoints],\r\n            HP: this.stats[enums_1.StatType.HP],\r\n            LastLevel: this.currentGameLevel,\r\n        };\r\n        // AjaxHelper.Post(baseUrl + \"/api/user/save\", model, (data, status) => {\r\n        //     console.log(\"connectUser() response\", data);\r\n        // });\r\n        //TODO: implement\r\n    };\r\n    /**\r\n     * Loads user data.\r\n     */\r\n    PlayerStats.prototype.loadUserState = function () {\r\n        var model = { id: this.id };\r\n        var data = {\r\n            HP: this.getStat(enums_1.StatType.MaxHP),\r\n            Exp: this.getStat(enums_1.StatType.TotalExp),\r\n            Coins: this.getStat(enums_1.StatType.Coins),\r\n            Dust: this.getStat(enums_1.StatType.MaxDust),\r\n            Gold: 0,\r\n            AtrPts: 0,\r\n            LastLevel: this.currentGameLevel\r\n        };\r\n        //  todo: http get\r\n        console.log(\"loadUserState() response\", data);\r\n        exports.stats.currentGameLevel = data.LastLevel;\r\n        //  we never accept 0 hp, convert to full health instead\r\n        if (data.HP <= 0) {\r\n            data.HP = this.stats[enums_1.StatType.MaxHP];\r\n        }\r\n        this.setStat(enums_1.StatType.HP, data.HP);\r\n        this.setStat(enums_1.StatType.Coins, data.Coins);\r\n        this.setStat(enums_1.StatType.Gold, data.Gold);\r\n        this.setStat(enums_1.StatType.Dust, data.Dust);\r\n        this.setStat(enums_1.StatType.AttributePoints, data.AtrPts);\r\n        this.setStat(enums_1.StatType.TotalExp, data.Exp);\r\n        //  TODO: attributeStats\r\n        this.rebuildStats();\r\n    };\r\n    Object.defineProperty(PlayerStats.prototype, \"HasJumpAtack\", {\r\n        get: function () {\r\n            return this.hasJumpAttack;\r\n        },\r\n        set: function (value) {\r\n            this.hasJumpAttack = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    PlayerStats.prototype.setStat = function (type, value) {\r\n        this.stats[type] = value;\r\n        if (type === enums_1.StatType.TotalExp) {\r\n            this.characterLevel = PlayerStats.findExpLevel(value);\r\n            this.stats[enums_1.StatType.LevelMaxExp] = PlayerStats.expForLevel[this.characterLevel + 1] - PlayerStats.expForLevel[this.characterLevel];\r\n            this.stats[enums_1.StatType.LevelExp] = this.stats[enums_1.StatType.TotalExp] - PlayerStats.expForLevel[this.characterLevel];\r\n            this.expForNextLevel = PlayerStats.expForLevel[this.characterLevel + 1];\r\n        }\r\n        this.updateEvent(type, value);\r\n        events_1.eventEmitter.emit(events_1.STATCHANGE_TOPIC, this.scevent);\r\n    };\r\n    PlayerStats.prototype.getStat = function (type) {\r\n        return this.stats[type];\r\n    };\r\n    PlayerStats.prototype.increaseStat = function (type, value, maxValue) {\r\n        var newValue = this.stats[type] + value;\r\n        if (maxValue && newValue > maxValue) {\r\n            newValue = maxValue;\r\n        }\r\n        if (newValue < 0) {\r\n            newValue = 0;\r\n        }\r\n        this.updateEvent(type, newValue);\r\n        this.stats[type] = newValue;\r\n        //  special logic for experience\r\n        if (type === enums_1.StatType.TotalExp) {\r\n            this.stats[enums_1.StatType.LevelExp] = newValue - PlayerStats.expForLevel[this.characterLevel];\r\n            //  level up check\r\n            if (newValue >= this.expForNextLevel) {\r\n                this.characterLevel = PlayerStats.findExpLevel(newValue);\r\n                this.expForNextLevel = PlayerStats.expForLevel[this.characterLevel + 1];\r\n                this.stats[enums_1.StatType.LevelMaxExp] = this.expForNextLevel - PlayerStats.expForLevel[this.characterLevel];\r\n                this.stats[enums_1.StatType.LevelExp] = newValue - PlayerStats.expForLevel[this.characterLevel];\r\n                //  lvl up event\r\n                this.scevent.Type = enums_1.StatType.CharacterLevel;\r\n                this.scevent.OldValue = this.characterLevel - 1;\r\n                this.scevent.NewValue = this.characterLevel;\r\n                this.scevent.Stats = this.stats;\r\n                events_1.eventEmitter.emit(events_1.STATCHANGE_TOPIC, this.scevent);\r\n                //  attr change event\r\n                newValue = this.stats[enums_1.StatType.AttributePoints] + 5;\r\n                this.scevent.Type = enums_1.StatType.AttributePoints;\r\n                this.scevent.OldValue = this.getStat(enums_1.StatType.AttributePoints);\r\n                this.scevent.NewValue = newValue;\r\n                this.setStat(enums_1.StatType.AttributePoints, newValue);\r\n                this.scevent.Stats = this.stats;\r\n                events_1.eventEmitter.emit(events_1.STATCHANGE_TOPIC, this.scevent);\r\n                // refill HP & dust\r\n                this.setStat(enums_1.StatType.Dust, this.stats[enums_1.StatType.MaxDust]);\r\n                this.setStat(enums_1.StatType.HP, this.stats[enums_1.StatType.MaxHP]);\r\n                //  prepare regular stat change event (for exp)\r\n                this.scevent.Type = type;\r\n                this.scevent.OldValue = 0;\r\n                this.scevent.NewValue = this.stats[enums_1.StatType.LevelExp];\r\n                this.scevent.Stats = this.stats;\r\n                //this.saveUserState(false);\r\n            }\r\n        }\r\n        events_1.eventEmitter.emit(events_1.STATCHANGE_TOPIC, this.scevent);\r\n    };\r\n    /**\r\n     * Finds the exp level for the given total exp value.\r\n     * @param exp\r\n     */\r\n    PlayerStats.findExpLevel = function (exp) {\r\n        for (var i = 0, len = PlayerStats.expForLevel.length; i < len; i++) {\r\n            if (exp < PlayerStats.expForLevel[i]) {\r\n                return i - 1;\r\n            }\r\n        }\r\n    };\r\n    PlayerStats.prototype.rebuildStats = function () {\r\n        //  calc max & regen stats\r\n        this.baseStats[enums_1.BaseStatType.MaxHP] = 150 + (this.characterLevel * 10);\r\n        this.baseStats[enums_1.BaseStatType.MaxDust] = 600 + (this.characterLevel * 50);\r\n        this.baseStats[enums_1.BaseStatType.RegenDust] = 2 + (this.characterLevel / 2);\r\n        this.baseStats[enums_1.BaseStatType.RegenHP] = 1 + (this.characterLevel / 2);\r\n        //  each max attribute increases base stat by 10%\r\n        this.stats[enums_1.StatType.MaxHP] = this.baseStats[enums_1.BaseStatType.MaxHP] * (1 + this.attributeStats[enums_1.BaseStatType.MaxHP] / 10);\r\n        this.stats[enums_1.StatType.MaxDust] = this.baseStats[enums_1.BaseStatType.MaxDust] * (1 + this.attributeStats[enums_1.BaseStatType.MaxDust] / 10);\r\n        //  each regen attribute increases base stat by 10%\r\n        this.stats[enums_1.StatType.RegenHP] = this.baseStats[enums_1.BaseStatType.RegenHP] * (1 + this.attributeStats[enums_1.BaseStatType.RegenHP] / 10);\r\n        this.stats[enums_1.StatType.RegenDust] = this.baseStats[enums_1.BaseStatType.RegenDust] * (1 + this.attributeStats[enums_1.BaseStatType.RegenDust] / 10);\r\n    };\r\n    PlayerStats.prototype.updateEvent = function (type, newValue) {\r\n        this.scevent.Type = type;\r\n        this.scevent.OldValue = this.stats[type];\r\n        this.scevent.NewValue = newValue;\r\n        this.scevent.Stats = this.stats;\r\n    };\r\n    PlayerStats.expForLevel = [];\r\n    return PlayerStats;\r\n}());\r\nexports.stats = new PlayerStats();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL1BsYXllclN0YXRzLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vb2JqZWN0cy9QbGF5ZXJTdGF0cy50cz8zOGQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExldmVsRGVmaW5pdGlvbnMgfSBmcm9tICcuLi9nbG9iYWwnO1xyXG5pbXBvcnQgeyBldmVudEVtaXR0ZXIsIERBTUFHRV9UT1BJQywgU1RBVENIQU5HRV9UT1BJQywgQlVSTl9UT1BJQywgSVN0YXRDaGFuZ2VFdmVudCwgSURwc0NoYW5nZUV2ZW50fSBmcm9tIFwiLi4vZXZlbnRzXCI7XHJcbmltcG9ydCB7IExldmVsTG9hZGVyIH0gZnJvbSAnLi4vd29ybGQvTGV2ZWxMb2FkZXInO1xyXG5pbXBvcnQgeyBJTGV2ZWwgfSBmcm9tICcuLi93b3JsZC9MZXZlbEludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBCYXNlU3RhdFR5cGUsIFN0YXRUeXBlLCBEYW1hZ2VUeXBlIH0gZnJvbSAnLi4vZW51bXMnO1xyXG5cclxuXHJcblxyXG5jbGFzcyBQbGF5ZXJTdGF0cyB7XHJcbiAgICAvKipcclxuICAgICAqIEJhc2Ugc3RhdHMgYXJlIGZpeGVkIHZhbHVlcyBpbmNyZWFzZWQgd2l0aCBsZXZlbC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBiYXNlU3RhdHM6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dHJpYnV0ZSBzdGF0cyBhcmUgcGxheWVyIGFzc2lnbmVkIHZhbHVlcyAocG9pbnQgZGlzdHJpYnV0aW9uKS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhdHRyaWJ1dGVTdGF0czogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgXHJcbiAgICBwcml2YXRlIHN0YXRzOiBBcnJheTxudW1iZXI+ID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBhY2N1bXVsYXRvcjogbnVtYmVyID0gMC4wO1xyXG4gICAgcHJpdmF0ZSBkcHNEZWNyZWFzZUFtb3VudDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIGV4cEZvckxldmVsOiBBcnJheTxudW1iZXI+ID0gW107XHJcblxyXG4gICAgLy8gIGFjcXVpcmVkIHNraWxsc1xyXG4gICAgcHJpdmF0ZSBoYXNKdW1wQXR0YWNrOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGhhc01hZ2ljQXR0YWNrOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLy8gIGFjaGlldmVtZW50IGxldmVsc1xyXG4gICAgcHVibGljIGNoYXJhY3RlckxldmVsOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGN1cnJlbnRHYW1lTGV2ZWw6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGV4cEZvck5leHRMZXZlbDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvLyAgdXNlciByZWxhdGVkXHJcbiAgICBwdWJsaWMgaWQ6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIGlzQnVybmluZ0J1ZmY6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICAgU3RvcmVzIHRpbWVzdGFtcHMgKFVuaXggdGltZXN0YW1wcyBpbiBzZWNvbmRzIHdpdGggZnJhY3Rpb25zKSB3aGVuIHRoZSBidWZmIGVsYXBzZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBidWZmczogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgbGV2ZWxMb2FkZXIgOiBMZXZlbExvYWRlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmlkID0gMDtcclxuXHJcbiAgICAgICAgLy8gIGF0dHIgIHN0YXRzXHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVTdGF0c1tCYXNlU3RhdFR5cGUuUmVnZW5IUF0gPSAwO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlU3RhdHNbQmFzZVN0YXRUeXBlLlJlZ2VuRHVzdF0gPSAwO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlU3RhdHNbQmFzZVN0YXRUeXBlLk1heEhQXSA9IDA7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVTdGF0c1tCYXNlU3RhdFR5cGUuTWF4RHVzdF0gPSAwO1xyXG5cclxuICAgICAgICAvLyBydW50aW1lIHN0YXRzXHJcbiAgICAgICAgdGhpcy5zdGF0c1tTdGF0VHlwZS5Db2luc10gPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhdHNbU3RhdFR5cGUuRHVzdF0gPSA2MDA7XHJcbiAgICAgICAgdGhpcy5zdGF0c1tTdGF0VHlwZS5Ub3RhbEV4cF0gPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhdHNbU3RhdFR5cGUuQXR0cmlidXRlUG9pbnRzXSA9IDA7XHJcbiAgICAgICAgdGhpcy5zdGF0c1tTdGF0VHlwZS5IUF0gPSAxMjA7XHJcblxyXG4gICAgICAgIGxldCBkaWZmID0gMTAwMDtcclxuICAgICAgICBQbGF5ZXJTdGF0cy5leHBGb3JMZXZlbFswXSA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCAxMDAwMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIFBsYXllclN0YXRzLmV4cEZvckxldmVsW2ldID0gUGxheWVyU3RhdHMuZXhwRm9yTGV2ZWxbaSAtIDFdICsgKGkgKiBkaWZmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVidWlsZFN0YXRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSdGV1cm5zIHRoZSBsZXZlbCBsb2FkZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgTGV2ZWxMb2FkZXIoKXtcclxuICAgICAgICBpZighdGhpcy5sZXZlbExvYWRlcil7XHJcbiAgICAgICAgICAgIHRoaXMubGV2ZWxMb2FkZXIgPSBuZXcgTGV2ZWxMb2FkZXIoTGV2ZWxEZWZpbml0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmxldmVsTG9hZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIFVwZGF0ZXMgc3RhdHMgdGhhdCBpbmNyZWFzZS9kZWNyZWFzZSBvdmVyIHRpbWUuXHJcbiAgICAgKiAgVGhlIHVwZGF0ZSBpcyBjYWxjdWxhdGVkIGluIGEgaGFsZiBzZWNvbmQgaW50ZXJ2YWwuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvblVwZGF0ZSA9IChkdDogbnVtYmVyKSA9PiB7XHJcblxyXG4gICAgICAgIGxldCBJTlRFUlZBTCA9IDUwMDtcclxuICAgICAgICBsZXQgU0VDT05EXzJfSU5URVJWQUwgPSBJTlRFUlZBTCAvIDEwMDA7IC8vICB0aGlzIGZhY3RvciBjb252ZXJ0cyBwZXIgc2Vjb25kIHZhbHVlcyB0byBwZXIgaW50ZXJ2YWwgdmFsdWVzXHJcblxyXG4gICAgICAgIHZhciBub3cgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcblxyXG4gICAgICAgIC8vICBhY2N1bXVsYXRlIGRwc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxMDAwLCBsZW4gPSB0aGlzLmJ1ZmZzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZzW2ldICYmIHRoaXMuYnVmZnNbaV0gPiBub3cpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkcHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYW1hZ2VUeXBlLkxhdmFCb3JkZXI6ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHBzID0gNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBEYW1hZ2VUeXBlLkxhdmE6ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHBzID0gMTU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRGFtYWdlVHlwZS5Qb2lzb246ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHBzID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGRtZyA9IGR0ICogMC4wMDEgKiBkcHM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRwc0RlY3JlYXNlQW1vdW50ICs9IGRtZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gIGhhbmRsZSBvbmNlIHBlciBpbnRlcnZhbCB0aWNrc1xyXG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gZHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0b3IgPiBJTlRFUlZBTCkge1xyXG4gICAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IElOVEVSVkFMO1xyXG5cclxuICAgICAgICAgICAgLy8gIGR1c3RcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHNbU3RhdFR5cGUuRHVzdF0gPCB0aGlzLnN0YXRzW1N0YXRUeXBlLk1heER1c3RdKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdiA9IHRoaXMuc3RhdHNbU3RhdFR5cGUuUmVnZW5EdXN0XSAqIFNFQ09ORF8yX0lOVEVSVkFMO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuRHVzdCwgdik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICBocFxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0c1tTdGF0VHlwZS5IUF0gPCB0aGlzLnN0YXRzW1N0YXRUeXBlLk1heEhQXSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSB0aGlzLnN0YXRzW1N0YXRUeXBlLlJlZ2VuSFBdICogU0VDT05EXzJfSU5URVJWQUw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3RhdChTdGF0VHlwZS5IUCwgdik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICBkcHNcclxuICAgICAgICAgICAgaWYgKHRoaXMuZHBzRGVjcmVhc2VBbW91bnQgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFtb3VudCA9IE1hdGguZmxvb3IodGhpcy5kcHNEZWNyZWFzZUFtb3VudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnQ6IElEcHNDaGFuZ2VFdmVudCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBPbGRWYWx1ZTogdGhpcy5zdGF0c1tTdGF0VHlwZS5IUF0sXHJcbiAgICAgICAgICAgICAgICAgICAgQW1vdW50OiAtYW1vdW50XHJcbiAgICAgICAgICAgICAgICB9OyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KERBTUFHRV9UT1BJQywgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuSFAsIC1hbW91bnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcHNEZWNyZWFzZUFtb3VudCAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgY2hlY2sgaWYgaXMgYnVybmluZ1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBsZXQgd2FzQnVybmluZyA9IHRoaXMuaXNCdXJuaW5nQnVmZjtcclxuICAgICAgICB0aGlzLmlzQnVybmluZ0J1ZmYgPSB0aGlzLmJ1ZmZzW0RhbWFnZVR5cGUuTGF2YUJvcmRlcl0gPiBub3cgfHwgdGhpcy5idWZmc1tEYW1hZ2VUeXBlLkxhdmFdID4gbm93O1xyXG4gICAgICAgIGlmICh3YXNCdXJuaW5nICE9PSB0aGlzLmlzQnVybmluZykgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBldmVudEVtaXR0ZXIuZW1pdChCVVJOX1RPUElDLCB7IHdhc0J1cm5pbmc6IHdhc0J1cm5pbmcsIGlzQnVybmluZzogdGhpcy5pc0J1cm5pbmdCdWZmIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBsYXllciBpcyB0YWtpbmcgYnVybiBkYW1hZ2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgaXNCdXJuaW5nKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQnVybmluZ0J1ZmY7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcGFyc2VkIGN1cnJlbnQgbGV2ZWwuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjdXJyZW50TGV2ZWwgOiBJTGV2ZWw7XHJcblxyXG4gICAgcHVibGljIGxvYWRMZXZlbCgpe1xyXG4gICAgICAgIHRoaXMubG9hZFVzZXJTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudExldmVsID0gdGhpcy5MZXZlbExvYWRlci5idWlsZExldmVsKHRoaXMuY3VycmVudEdhbWVMZXZlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlcyB1c2VyIGRhdGEuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzYXZlVXNlclN0YXRlKGlzTGV2ZWxDb21wbGV0ZWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaXNMZXZlbENvbXBsZXRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRHYW1lTGV2ZWwgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1vZGVsID0ge1xyXG4gICAgICAgICAgICBFeHRlcm5hbElkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICBDb2luczogdGhpcy5zdGF0c1tTdGF0VHlwZS5Db2luc10sXHJcbiAgICAgICAgICAgIEdvbGQ6IHRoaXMuc3RhdHNbU3RhdFR5cGUuR29sZF0sXHJcbiAgICAgICAgICAgIER1c3Q6IE1hdGguZmxvb3IodGhpcy5zdGF0c1tTdGF0VHlwZS5EdXN0XSksXHJcbiAgICAgICAgICAgIEV4cDogdGhpcy5zdGF0c1tTdGF0VHlwZS5Ub3RhbEV4cF0sXHJcbiAgICAgICAgICAgIEF0clB0czogdGhpcy5zdGF0c1tTdGF0VHlwZS5BdHRyaWJ1dGVQb2ludHNdLFxyXG4gICAgICAgICAgICBIUDogdGhpcy5zdGF0c1tTdGF0VHlwZS5IUF0sXHJcbiAgICAgICAgICAgIExhc3RMZXZlbDogdGhpcy5jdXJyZW50R2FtZUxldmVsLFxyXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgc2VuZGluZyBza2lsbHMgZXRjLlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gQWpheEhlbHBlci5Qb3N0KGJhc2VVcmwgKyBcIi9hcGkvdXNlci9zYXZlXCIsIG1vZGVsLCAoZGF0YSwgc3RhdHVzKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiY29ubmVjdFVzZXIoKSByZXNwb25zZVwiLCBkYXRhKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgICAvL1RPRE86IGltcGxlbWVudFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgdXNlciBkYXRhLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbG9hZFVzZXJTdGF0ZSgpIHtcclxuICAgICAgICBsZXQgbW9kZWwgPSB7IGlkOiB0aGlzLmlkIH07XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIEhQOiB0aGlzLmdldFN0YXQoU3RhdFR5cGUuTWF4SFApLFxyXG4gICAgICAgICAgICBFeHAgOiB0aGlzLmdldFN0YXQoU3RhdFR5cGUuVG90YWxFeHApLFxyXG4gICAgICAgICAgICBDb2luczogdGhpcy5nZXRTdGF0KFN0YXRUeXBlLkNvaW5zKSxcclxuICAgICAgICAgICAgRHVzdDogdGhpcy5nZXRTdGF0KFN0YXRUeXBlLk1heER1c3QpLFxyXG4gICAgICAgICAgICBHb2xkOiAwLFxyXG4gICAgICAgICAgICBBdHJQdHM6IDAsXHJcbiAgICAgICAgICAgIExhc3RMZXZlbDogdGhpcy5jdXJyZW50R2FtZUxldmVsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyAgdG9kbzogaHR0cCBnZXRcclxuICAgICAgICBjb25zb2xlLmxvZyhcImxvYWRVc2VyU3RhdGUoKSByZXNwb25zZVwiLCBkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHN0YXRzLmN1cnJlbnRHYW1lTGV2ZWwgPSBkYXRhLkxhc3RMZXZlbDtcclxuXHJcbiAgICAgICAgICAgIC8vICB3ZSBuZXZlciBhY2NlcHQgMCBocCwgY29udmVydCB0byBmdWxsIGhlYWx0aCBpbnN0ZWFkXHJcbiAgICAgICAgICAgIGlmIChkYXRhLkhQIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuSFAgPSB0aGlzLnN0YXRzW1N0YXRUeXBlLk1heEhQXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXQoU3RhdFR5cGUuSFAsIGRhdGEuSFApO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXQoU3RhdFR5cGUuQ29pbnMsIGRhdGEuQ29pbnMpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXQoU3RhdFR5cGUuR29sZCwgZGF0YS5Hb2xkKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0KFN0YXRUeXBlLkR1c3QsIGRhdGEuRHVzdCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdChTdGF0VHlwZS5BdHRyaWJ1dGVQb2ludHMsIGRhdGEuQXRyUHRzKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0KFN0YXRUeXBlLlRvdGFsRXhwLCBkYXRhLkV4cCk7XHJcbiAgICAgICAgICAgIC8vICBUT0RPOiBhdHRyaWJ1dGVTdGF0c1xyXG4gICAgICAgICAgICB0aGlzLnJlYnVpbGRTdGF0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgSGFzSnVtcEF0YWNrKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhc0p1bXBBdHRhY2s7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IEhhc0p1bXBBdGFjayh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuaGFzSnVtcEF0dGFjayA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRTdGF0KHR5cGU6IFN0YXRUeXBlLCB2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0c1t0eXBlXSA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0eXBlID09PSBTdGF0VHlwZS5Ub3RhbEV4cCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckxldmVsID0gUGxheWVyU3RhdHMuZmluZEV4cExldmVsKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0c1tTdGF0VHlwZS5MZXZlbE1heEV4cF0gPSBQbGF5ZXJTdGF0cy5leHBGb3JMZXZlbFt0aGlzLmNoYXJhY3RlckxldmVsICsgMV0gLSBQbGF5ZXJTdGF0cy5leHBGb3JMZXZlbFt0aGlzLmNoYXJhY3RlckxldmVsXTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0c1tTdGF0VHlwZS5MZXZlbEV4cF0gPSB0aGlzLnN0YXRzW1N0YXRUeXBlLlRvdGFsRXhwXSAtIFBsYXllclN0YXRzLmV4cEZvckxldmVsW3RoaXMuY2hhcmFjdGVyTGV2ZWxdO1xyXG4gICAgICAgICAgICB0aGlzLmV4cEZvck5leHRMZXZlbCA9IFBsYXllclN0YXRzLmV4cEZvckxldmVsW3RoaXMuY2hhcmFjdGVyTGV2ZWwgKyAxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVFdmVudCh0eXBlLCB2YWx1ZSk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoU1RBVENIQU5HRV9UT1BJQywgdGhpcy5zY2V2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3RhdCh0eXBlOiBTdGF0VHlwZSk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHNbdHlwZV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluY3JlYXNlU3RhdCh0eXBlOiBTdGF0VHlwZSwgdmFsdWU6IG51bWJlciwgbWF4VmFsdWU/OiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gdGhpcy5zdGF0c1t0eXBlXSArIHZhbHVlO1xyXG4gICAgICAgIGlmIChtYXhWYWx1ZSAmJiBuZXdWYWx1ZSA+IG1heFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gbWF4VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZXdWYWx1ZSA8IDApIHtcclxuICAgICAgICAgICAgbmV3VmFsdWUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVFdmVudCh0eXBlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0c1t0eXBlXSA9IG5ld1ZhbHVlO1xyXG5cclxuICAgICAgICAvLyAgc3BlY2lhbCBsb2dpYyBmb3IgZXhwZXJpZW5jZVxyXG4gICAgICAgIGlmICh0eXBlID09PSBTdGF0VHlwZS5Ub3RhbEV4cCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRzW1N0YXRUeXBlLkxldmVsRXhwXSA9IG5ld1ZhbHVlIC0gUGxheWVyU3RhdHMuZXhwRm9yTGV2ZWxbdGhpcy5jaGFyYWN0ZXJMZXZlbF07XHJcblxyXG4gICAgICAgICAgICAvLyAgbGV2ZWwgdXAgY2hlY2tcclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID49IHRoaXMuZXhwRm9yTmV4dExldmVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlckxldmVsID0gUGxheWVyU3RhdHMuZmluZEV4cExldmVsKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwRm9yTmV4dExldmVsID0gUGxheWVyU3RhdHMuZXhwRm9yTGV2ZWxbdGhpcy5jaGFyYWN0ZXJMZXZlbCArIDFdO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHNbU3RhdFR5cGUuTGV2ZWxNYXhFeHBdID0gdGhpcy5leHBGb3JOZXh0TGV2ZWwgLSBQbGF5ZXJTdGF0cy5leHBGb3JMZXZlbFt0aGlzLmNoYXJhY3RlckxldmVsXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHNbU3RhdFR5cGUuTGV2ZWxFeHBdID0gbmV3VmFsdWUgLSBQbGF5ZXJTdGF0cy5leHBGb3JMZXZlbFt0aGlzLmNoYXJhY3RlckxldmVsXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgbHZsIHVwIGV2ZW50XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZXZlbnQuVHlwZSA9IFN0YXRUeXBlLkNoYXJhY3RlckxldmVsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2V2ZW50Lk9sZFZhbHVlID0gdGhpcy5jaGFyYWN0ZXJMZXZlbCAtIDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZXZlbnQuTmV3VmFsdWUgPSB0aGlzLmNoYXJhY3RlckxldmVsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2V2ZW50LlN0YXRzID0gdGhpcy5zdGF0cztcclxuICAgICAgICAgICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KFNUQVRDSEFOR0VfVE9QSUMsIHRoaXMuc2NldmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gIGF0dHIgY2hhbmdlIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMuc3RhdHNbU3RhdFR5cGUuQXR0cmlidXRlUG9pbnRzXSArIDU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZXZlbnQuVHlwZSA9IFN0YXRUeXBlLkF0dHJpYnV0ZVBvaW50cztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NldmVudC5PbGRWYWx1ZSA9IHRoaXMuZ2V0U3RhdChTdGF0VHlwZS5BdHRyaWJ1dGVQb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2V2ZW50Lk5ld1ZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXQoU3RhdFR5cGUuQXR0cmlidXRlUG9pbnRzLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZXZlbnQuU3RhdHMgPSB0aGlzLnN0YXRzO1xyXG4gICAgICAgICAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoU1RBVENIQU5HRV9UT1BJQywgdGhpcy5zY2V2ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZWZpbGwgSFAgJiBkdXN0XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXQoU3RhdFR5cGUuRHVzdCwgdGhpcy5zdGF0c1tTdGF0VHlwZS5NYXhEdXN0XSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXQoU3RhdFR5cGUuSFAsIHRoaXMuc3RhdHNbU3RhdFR5cGUuTWF4SFBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAgcHJlcGFyZSByZWd1bGFyIHN0YXQgY2hhbmdlIGV2ZW50IChmb3IgZXhwKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2V2ZW50LlR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2V2ZW50Lk9sZFZhbHVlID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NldmVudC5OZXdWYWx1ZSA9IHRoaXMuc3RhdHNbU3RhdFR5cGUuTGV2ZWxFeHBdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2V2ZW50LlN0YXRzID0gdGhpcy5zdGF0cztcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zYXZlVXNlclN0YXRlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoU1RBVENIQU5HRV9UT1BJQywgdGhpcy5zY2V2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmRzIHRoZSBleHAgbGV2ZWwgZm9yIHRoZSBnaXZlbiB0b3RhbCBleHAgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gZXhwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZmluZEV4cExldmVsKGV4cDogbnVtYmVyKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IFBsYXllclN0YXRzLmV4cEZvckxldmVsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChleHAgPCBQbGF5ZXJTdGF0cy5leHBGb3JMZXZlbFtpXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVidWlsZFN0YXRzKCkge1xyXG4gICAgICAgIC8vICBjYWxjIG1heCAmIHJlZ2VuIHN0YXRzXHJcbiAgICAgICAgdGhpcy5iYXNlU3RhdHNbQmFzZVN0YXRUeXBlLk1heEhQXSA9IDE1MCArICh0aGlzLmNoYXJhY3RlckxldmVsICogMTApO1xyXG4gICAgICAgIHRoaXMuYmFzZVN0YXRzW0Jhc2VTdGF0VHlwZS5NYXhEdXN0XSA9IDYwMCArICh0aGlzLmNoYXJhY3RlckxldmVsICogNTApO1xyXG4gICAgICAgIHRoaXMuYmFzZVN0YXRzW0Jhc2VTdGF0VHlwZS5SZWdlbkR1c3RdID0gMiArICh0aGlzLmNoYXJhY3RlckxldmVsIC8gMik7XHJcbiAgICAgICAgdGhpcy5iYXNlU3RhdHNbQmFzZVN0YXRUeXBlLlJlZ2VuSFBdID0gMSArICh0aGlzLmNoYXJhY3RlckxldmVsIC8gMik7XHJcblxyXG4gICAgICAgIC8vICBlYWNoIG1heCBhdHRyaWJ1dGUgaW5jcmVhc2VzIGJhc2Ugc3RhdCBieSAxMCVcclxuICAgICAgICB0aGlzLnN0YXRzW1N0YXRUeXBlLk1heEhQXSA9IHRoaXMuYmFzZVN0YXRzW0Jhc2VTdGF0VHlwZS5NYXhIUF0gKiAoMSArIHRoaXMuYXR0cmlidXRlU3RhdHNbQmFzZVN0YXRUeXBlLk1heEhQXS8xMCk7XHJcbiAgICAgICAgdGhpcy5zdGF0c1tTdGF0VHlwZS5NYXhEdXN0XSA9IHRoaXMuYmFzZVN0YXRzW0Jhc2VTdGF0VHlwZS5NYXhEdXN0XSAqICgxICsgdGhpcy5hdHRyaWJ1dGVTdGF0c1tCYXNlU3RhdFR5cGUuTWF4RHVzdF0gLyAxMCk7XHJcblxyXG4gICAgICAgIC8vICBlYWNoIHJlZ2VuIGF0dHJpYnV0ZSBpbmNyZWFzZXMgYmFzZSBzdGF0IGJ5IDEwJVxyXG4gICAgICAgIHRoaXMuc3RhdHNbU3RhdFR5cGUuUmVnZW5IUF0gPSB0aGlzLmJhc2VTdGF0c1tCYXNlU3RhdFR5cGUuUmVnZW5IUF0gKiAoMSArIHRoaXMuYXR0cmlidXRlU3RhdHNbQmFzZVN0YXRUeXBlLlJlZ2VuSFBdIC8gMTApO1xyXG4gICAgICAgIHRoaXMuc3RhdHNbU3RhdFR5cGUuUmVnZW5EdXN0XSA9IHRoaXMuYmFzZVN0YXRzW0Jhc2VTdGF0VHlwZS5SZWdlbkR1c3RdICogKDEgKyB0aGlzLmF0dHJpYnV0ZVN0YXRzW0Jhc2VTdGF0VHlwZS5SZWdlbkR1c3RdIC8gMTApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2NldmVudDogSVN0YXRDaGFuZ2VFdmVudCA9IHtcclxuICAgICAgICBUeXBlOiBTdGF0VHlwZS5Db2lucyxcclxuICAgICAgICBPbGRWYWx1ZTogMCxcclxuICAgICAgICBOZXdWYWx1ZTogMCxcclxuICAgICAgICBTdGF0czogW11cclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVFdmVudCh0eXBlOiBTdGF0VHlwZSwgbmV3VmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc2NldmVudC5UeXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnNjZXZlbnQuT2xkVmFsdWUgPSB0aGlzLnN0YXRzW3R5cGVdO1xyXG4gICAgICAgIHRoaXMuc2NldmVudC5OZXdWYWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2NldmVudC5TdGF0cyA9IHRoaXMuc3RhdHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgc3RhdHMgPSBuZXcgUGxheWVyU3RhdHMoKTsiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQXNDQTtBQUFBO0FBckNBOztBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBOztBQUVBO0FBQ0E7QUF1Q0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcFNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUE0RUE7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuVUE7QUFvVUE7QUFBQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./objects/PlayerStats.ts\n");

/***/ }),

/***/ "./objects/SpriteButton.ts":
/*!*********************************!*\
  !*** ./objects/SpriteButton.ts ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\n// export enum OutlineMode {\r\n//   /**\r\n//    * The outline is backed in the buttons texture.\r\n//    * This looks excelent if the button's size matches the texture.\r\n//    */\r\n//   Texture,\r\n//   /**\r\n//    * The outline is created with the OutlineFilter.\r\n//    * Best to be used with small uniform textures (so scaling will not affect the texture).\r\n//    */\r\n//   Filter,\r\n// }\r\n/**\r\n * Basic Sprite based button. Uses different textures for pointerout, pointerover, pointerdown. Povides an `onClick` function\r\n */\r\nvar SpriteButton = /** @class */ (function (_super) {\r\n    tslib_1.__extends(SpriteButton, _super);\r\n    // private outlineModeValue: OutlineMode = OutlineMode.Filter;\r\n    // private outlineColorValue: number;\r\n    function SpriteButton(texturePath, x, y, width, height) {\r\n        if (x === void 0) { x = 0; }\r\n        if (y === void 0) { y = 0; }\r\n        if (width === void 0) { width = 128; }\r\n        if (height === void 0) { height = 32; }\r\n        var _this = _super.call(this) || this;\r\n        _this.isHighlightedValue = false;\r\n        _this.isPressedValue = false;\r\n        _this.isDisabledValue = false;\r\n        _this.isClickStartedValue = false;\r\n        _this.requestedWidth = 0;\r\n        _this.requestedHeight = 0;\r\n        _this.onButtonDown = function () {\r\n            if (_this.isDisabledValue) {\r\n                return;\r\n            }\r\n            _this.isClickStartedValue = true;\r\n            _this.texture = _this.textureDown;\r\n        };\r\n        _this.onButtonUp = function (event) {\r\n            if (_this.isDisabledValue) {\r\n                return;\r\n            }\r\n            if (_this.isClickStartedValue) {\r\n                _this.isClickStartedValue = false;\r\n                _this.onClickHandler(event);\r\n            }\r\n            _this.applyTexture();\r\n        };\r\n        _this.onButtonUpOutside = function () {\r\n            if (_this.isDisabledValue) {\r\n                return;\r\n            }\r\n            _this.applyTexture();\r\n            _this.isClickStartedValue = false;\r\n        };\r\n        _this.onButtonOver = function (event) {\r\n            if (_this.isDisabledValue) {\r\n                return;\r\n            }\r\n            _this.texture = _this.textureHighlight;\r\n            if (_this.mouseover) {\r\n                _this.mouseover(event);\r\n            }\r\n        };\r\n        _this.onButtonOut = function (event) {\r\n            if (_this.isDisabledValue) {\r\n                return;\r\n            }\r\n            _this.isClickStartedValue = false;\r\n            _this.applyTexture();\r\n            if (_this.mouseout) {\r\n                _this.mouseout(event);\r\n            }\r\n        };\r\n        _this.position.set(x || 0, y || 0);\r\n        _this.requestedHeight = height;\r\n        _this.requestedWidth = width;\r\n        //  setup button textures\r\n        _this.setTexture(texturePath);\r\n        _this.buttonMode = false;\r\n        _this.interactive = true;\r\n        _this.cursor = 'hover';\r\n        // set the mousedown and touchstart callback...\r\n        _this.on('pointerdown', _this.onButtonDown);\r\n        _this.on('pointerup', _this.onButtonUp);\r\n        _this.on('pointerupoutside', _this.onButtonUpOutside);\r\n        _this.on('pointerover', _this.onButtonOver);\r\n        _this.on('pointerout', _this.onButtonOut);\r\n        _this.isPressed = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SpriteButton.prototype, \"disabled\", {\r\n        // public get outlineMode() {\r\n        //   return this.outlineModeValue;\r\n        // }\r\n        // public set outlineMode(state: OutlineMode) {\r\n        //   this.outlineModeValue = state;\r\n        //   this.filters =\r\n        //     this.outlineModeValue === OutlineMode.Filter ? [new OutlineFilter(1, this.outlineColorValue, 0.5)] : null;\r\n        // }\r\n        // public get outlineColor() {\r\n        //   return this.outlineColorValue;\r\n        // }\r\n        // public set outlineColor(value: number) {\r\n        //   this.outlineColorValue = value;\r\n        //   this.filters =\r\n        //     this.outlineModeValue === OutlineMode.Filter ? [new OutlineFilter(1, this.outlineColorValue, 0.5)] : null;\r\n        // }\r\n        get: function () {\r\n            return this.isDisabledValue;\r\n        },\r\n        set: function (state) {\r\n            this.isDisabledValue = state;\r\n            this.cursor = state ? '' : 'hover';\r\n            this.applyTexture();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpriteButton.prototype, \"isPressed\", {\r\n        get: function () {\r\n            return this.isPressedValue;\r\n        },\r\n        set: function (state) {\r\n            this.isPressedValue = state;\r\n            this.applyTexture();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpriteButton.prototype, \"isHighlighted\", {\r\n        get: function () {\r\n            return this.isHighlightedValue;\r\n        },\r\n        set: function (state) {\r\n            this.isHighlightedValue = state;\r\n            this.applyTexture();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SpriteButton.prototype, \"text\", {\r\n        get: function () {\r\n            return this.textValue;\r\n        },\r\n        set: function (text) {\r\n            if (this.textValue) {\r\n                this.removeChild(this.textValue);\r\n            }\r\n            this.textValue = text;\r\n            if (this.textValue) {\r\n                this.textValue.anchor.set(0.5, 0.5);\r\n                var x = this.width / this.scale.x / 2;\r\n                var y = this.height / this.scale.y / 2;\r\n                this.textValue.position.set(x, y);\r\n                this.addChild(this.textValue);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SpriteButton.prototype.performClick = function (event) {\r\n        this.onClickHandler(event);\r\n    };\r\n    SpriteButton.prototype.setTexture = function (textureAtlasName) {\r\n        var spriteSheet = __1.TextureLoader.Get(textureAtlasName, true, __1.PIXI.SCALE_MODES.NEAREST);\r\n        spriteSheet.baseTexture.scaleMode = __1.PIXI.SCALE_MODES.NEAREST;\r\n        var btnHeight = spriteSheet.height / 3;\r\n        var btnWidth = spriteSheet.width;\r\n        this.textureUp = new __1.PIXI.Texture(spriteSheet.baseTexture, new __1.PIXI.Rectangle(spriteSheet.frame.x, spriteSheet.frame.y, btnWidth, btnHeight));\r\n        this.textureHighlight = new __1.PIXI.Texture(spriteSheet.baseTexture, new __1.PIXI.Rectangle(spriteSheet.frame.x, spriteSheet.frame.y + 1 * btnHeight, btnWidth, btnHeight));\r\n        this.textureDown = new __1.PIXI.Texture(spriteSheet.baseTexture, new __1.PIXI.Rectangle(spriteSheet.frame.x, spriteSheet.frame.y + 2 * btnHeight, btnWidth, btnHeight));\r\n        //  calc the scale based on desired height/width\r\n        var scaleW = (this.requestedWidth || btnWidth) / btnWidth;\r\n        var scaleH = (this.requestedHeight || btnHeight) / btnHeight;\r\n        this.scale.set(scaleW, scaleH);\r\n        this.applyTexture();\r\n    };\r\n    SpriteButton.prototype.onClickHandler = function (event) {\r\n        if (!this.onClick) {\r\n            console.warn('onClick() empty, did you forget to attach a handler?');\r\n        }\r\n        else {\r\n            this.onClick(event);\r\n        }\r\n    };\r\n    SpriteButton.prototype.applyTexture = function () {\r\n        if (this.isDisabledValue) {\r\n            this.texture = this.textureUp;\r\n            this.tint = 0x606060;\r\n        }\r\n        else if (this.isHighlightedValue) {\r\n            this.texture = this.textureHighlight;\r\n            this.tint = 0x666666;\r\n        }\r\n        else {\r\n            this.texture = this.isPressedValue ? this.textureDown : this.textureUp;\r\n            this.tint = 0xffffff;\r\n        }\r\n    };\r\n    return SpriteButton;\r\n}(__1.PIXI.Sprite));\r\nexports.SpriteButton = SpriteButton;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL1Nwcml0ZUJ1dHRvbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL29iamVjdHMvU3ByaXRlQnV0dG9uLnRzPzJhNmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUElYSSwgVGV4dHVyZUxvYWRlciB9IGZyb20gJy4uJztcclxuXHJcbi8vIGV4cG9ydCBlbnVtIE91dGxpbmVNb2RlIHtcclxuLy8gICAvKipcclxuLy8gICAgKiBUaGUgb3V0bGluZSBpcyBiYWNrZWQgaW4gdGhlIGJ1dHRvbnMgdGV4dHVyZS5cclxuLy8gICAgKiBUaGlzIGxvb2tzIGV4Y2VsZW50IGlmIHRoZSBidXR0b24ncyBzaXplIG1hdGNoZXMgdGhlIHRleHR1cmUuXHJcbi8vICAgICovXHJcbi8vICAgVGV4dHVyZSxcclxuLy8gICAvKipcclxuLy8gICAgKiBUaGUgb3V0bGluZSBpcyBjcmVhdGVkIHdpdGggdGhlIE91dGxpbmVGaWx0ZXIuXHJcbi8vICAgICogQmVzdCB0byBiZSB1c2VkIHdpdGggc21hbGwgdW5pZm9ybSB0ZXh0dXJlcyAoc28gc2NhbGluZyB3aWxsIG5vdCBhZmZlY3QgdGhlIHRleHR1cmUpLlxyXG4vLyAgICAqL1xyXG4vLyAgIEZpbHRlcixcclxuLy8gfVxyXG5cclxuLyoqXHJcbiAqIEJhc2ljIFNwcml0ZSBiYXNlZCBidXR0b24uIFVzZXMgZGlmZmVyZW50IHRleHR1cmVzIGZvciBwb2ludGVyb3V0LCBwb2ludGVyb3ZlciwgcG9pbnRlcmRvd24uIFBvdmlkZXMgYW4gYG9uQ2xpY2tgIGZ1bmN0aW9uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3ByaXRlQnV0dG9uIGV4dGVuZHMgUElYSS5TcHJpdGUge1xyXG4gICAgcHVibGljIG9uQ2xpY2s6IChldmVudDogYW55KSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG1vdXNlb3ZlcjogKGV2ZW50OiBhbnkpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgbW91c2VvdXQ6IChldmVudDogYW55KSA9PiB2b2lkO1xyXG5cclxuICAgIHByaXZhdGUgdGV4dHVyZVVwOiBQSVhJLlRleHR1cmU7XHJcbiAgICBwcml2YXRlIHRleHR1cmVIaWdobGlnaHQ6IFBJWEkuVGV4dHVyZTtcclxuICAgIHByaXZhdGUgdGV4dHVyZURvd246IFBJWEkuVGV4dHVyZTtcclxuICAgIHByaXZhdGUgaXNIaWdobGlnaHRlZFZhbHVlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzUHJlc3NlZFZhbHVlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzRGlzYWJsZWRWYWx1ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBpc0NsaWNrU3RhcnRlZFZhbHVlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHRleHRWYWx1ZTogUElYSS5UZXh0O1xyXG4gICAgcHJpdmF0ZSByZXF1ZXN0ZWRXaWR0aDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgcmVxdWVzdGVkSGVpZ2h0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8vIHByaXZhdGUgb3V0bGluZU1vZGVWYWx1ZTogT3V0bGluZU1vZGUgPSBPdXRsaW5lTW9kZS5GaWx0ZXI7XHJcbiAgICAvLyBwcml2YXRlIG91dGxpbmVDb2xvclZhbHVlOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGV4dHVyZVBhdGg6IHN0cmluZywgeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCwgd2lkdGg6IG51bWJlciA9IDEyOCwgaGVpZ2h0OiBudW1iZXIgPSAzMikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5zZXQoeCB8fCAwLCB5IHx8IDApO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkV2lkdGggPSB3aWR0aDtcclxuXHJcbiAgICAgICAgLy8gIHNldHVwIGJ1dHRvbiB0ZXh0dXJlc1xyXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZSh0ZXh0dXJlUGF0aCk7XHJcblxyXG4gICAgICAgIHRoaXMuYnV0dG9uTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW50ZXJhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY3Vyc29yID0gJ2hvdmVyJztcclxuXHJcbiAgICAgICAgLy8gc2V0IHRoZSBtb3VzZWRvd24gYW5kIHRvdWNoc3RhcnQgY2FsbGJhY2suLi5cclxuICAgICAgICB0aGlzLm9uKCdwb2ludGVyZG93bicsIHRoaXMub25CdXR0b25Eb3duKTtcclxuICAgICAgICB0aGlzLm9uKCdwb2ludGVydXAnLCB0aGlzLm9uQnV0dG9uVXApO1xyXG4gICAgICAgIHRoaXMub24oJ3BvaW50ZXJ1cG91dHNpZGUnLCB0aGlzLm9uQnV0dG9uVXBPdXRzaWRlKTtcclxuICAgICAgICB0aGlzLm9uKCdwb2ludGVyb3ZlcicsIHRoaXMub25CdXR0b25PdmVyKTtcclxuICAgICAgICB0aGlzLm9uKCdwb2ludGVyb3V0JywgdGhpcy5vbkJ1dHRvbk91dCk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNQcmVzc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHVibGljIGdldCBvdXRsaW5lTW9kZSgpIHtcclxuICAgIC8vICAgcmV0dXJuIHRoaXMub3V0bGluZU1vZGVWYWx1ZTtcclxuICAgIC8vIH1cclxuICAgIC8vIHB1YmxpYyBzZXQgb3V0bGluZU1vZGUoc3RhdGU6IE91dGxpbmVNb2RlKSB7XHJcbiAgICAvLyAgIHRoaXMub3V0bGluZU1vZGVWYWx1ZSA9IHN0YXRlO1xyXG4gICAgLy8gICB0aGlzLmZpbHRlcnMgPVxyXG4gICAgLy8gICAgIHRoaXMub3V0bGluZU1vZGVWYWx1ZSA9PT0gT3V0bGluZU1vZGUuRmlsdGVyID8gW25ldyBPdXRsaW5lRmlsdGVyKDEsIHRoaXMub3V0bGluZUNvbG9yVmFsdWUsIDAuNSldIDogbnVsbDtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgZ2V0IG91dGxpbmVDb2xvcigpIHtcclxuICAgIC8vICAgcmV0dXJuIHRoaXMub3V0bGluZUNvbG9yVmFsdWU7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBwdWJsaWMgc2V0IG91dGxpbmVDb2xvcih2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAvLyAgIHRoaXMub3V0bGluZUNvbG9yVmFsdWUgPSB2YWx1ZTtcclxuICAgIC8vICAgdGhpcy5maWx0ZXJzID1cclxuICAgIC8vICAgICB0aGlzLm91dGxpbmVNb2RlVmFsdWUgPT09IE91dGxpbmVNb2RlLkZpbHRlciA/IFtuZXcgT3V0bGluZUZpbHRlcigxLCB0aGlzLm91dGxpbmVDb2xvclZhbHVlLCAwLjUpXSA6IG51bGw7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcHVibGljIGdldCBkaXNhYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0Rpc2FibGVkVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRpc2FibGVkKHN0YXRlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5pc0Rpc2FibGVkVmFsdWUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLmN1cnNvciA9IHN0YXRlID8gJycgOiAnaG92ZXInO1xyXG4gICAgICAgIHRoaXMuYXBwbHlUZXh0dXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpc1ByZXNzZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNQcmVzc2VkVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGlzUHJlc3NlZChzdGF0ZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuaXNQcmVzc2VkVmFsdWUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLmFwcGx5VGV4dHVyZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNIaWdobGlnaHRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0hpZ2hsaWdodGVkVmFsdWU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGlzSGlnaGxpZ2h0ZWQoc3RhdGU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmlzSGlnaGxpZ2h0ZWRWYWx1ZSA9IHN0YXRlO1xyXG4gICAgICAgIHRoaXMuYXBwbHlUZXh0dXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0ZXh0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRWYWx1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgdGV4dCh0ZXh0OiBQSVhJLlRleHQpIHtcclxuICAgICAgICBpZiAodGhpcy50ZXh0VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLnRleHRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGV4dFZhbHVlID0gdGV4dDtcclxuICAgICAgICBpZiAodGhpcy50ZXh0VmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0VmFsdWUuYW5jaG9yLnNldCgwLjUsIDAuNSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLndpZHRoIC8gdGhpcy5zY2FsZS54IC8gMjtcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuaGVpZ2h0IC8gdGhpcy5zY2FsZS55IC8gMjtcclxuICAgICAgICAgICAgdGhpcy50ZXh0VmFsdWUucG9zaXRpb24uc2V0KHgsIHkpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMudGV4dFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBlcmZvcm1DbGljayhldmVudDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrSGFuZGxlcihldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFRleHR1cmUodGV4dHVyZUF0bGFzTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgc3ByaXRlU2hlZXQ6IFBJWEkuVGV4dHVyZSA9IFRleHR1cmVMb2FkZXIuR2V0KHRleHR1cmVBdGxhc05hbWUsIHRydWUsIFBJWEkuU0NBTEVfTU9ERVMuTkVBUkVTVCkhO1xyXG4gICAgICAgIHNwcml0ZVNoZWV0LmJhc2VUZXh0dXJlLnNjYWxlTW9kZSA9IFBJWEkuU0NBTEVfTU9ERVMuTkVBUkVTVDtcclxuICAgICAgICBjb25zdCBidG5IZWlnaHQgPSBzcHJpdGVTaGVldC5oZWlnaHQgLyAzO1xyXG4gICAgICAgIGNvbnN0IGJ0bldpZHRoID0gc3ByaXRlU2hlZXQud2lkdGg7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlVXAgPSBuZXcgUElYSS5UZXh0dXJlKFxyXG4gICAgICAgICAgICBzcHJpdGVTaGVldC5iYXNlVGV4dHVyZSxcclxuICAgICAgICAgICAgbmV3IFBJWEkuUmVjdGFuZ2xlKHNwcml0ZVNoZWV0LmZyYW1lLngsIHNwcml0ZVNoZWV0LmZyYW1lLnksIGJ0bldpZHRoLCBidG5IZWlnaHQpLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlSGlnaGxpZ2h0ID0gbmV3IFBJWEkuVGV4dHVyZShcclxuICAgICAgICAgICAgc3ByaXRlU2hlZXQuYmFzZVRleHR1cmUsXHJcbiAgICAgICAgICAgIG5ldyBQSVhJLlJlY3RhbmdsZShzcHJpdGVTaGVldC5mcmFtZS54LCBzcHJpdGVTaGVldC5mcmFtZS55ICsgMSAqIGJ0bkhlaWdodCwgYnRuV2lkdGgsIGJ0bkhlaWdodCksXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnRleHR1cmVEb3duID0gbmV3IFBJWEkuVGV4dHVyZShcclxuICAgICAgICAgICAgc3ByaXRlU2hlZXQuYmFzZVRleHR1cmUsXHJcbiAgICAgICAgICAgIG5ldyBQSVhJLlJlY3RhbmdsZShzcHJpdGVTaGVldC5mcmFtZS54LCBzcHJpdGVTaGVldC5mcmFtZS55ICsgMiAqIGJ0bkhlaWdodCwgYnRuV2lkdGgsIGJ0bkhlaWdodCksXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gIGNhbGMgdGhlIHNjYWxlIGJhc2VkIG9uIGRlc2lyZWQgaGVpZ2h0L3dpZHRoXHJcbiAgICAgICAgY29uc3Qgc2NhbGVXID0gKHRoaXMucmVxdWVzdGVkV2lkdGggfHwgYnRuV2lkdGgpIC8gYnRuV2lkdGg7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVIID0gKHRoaXMucmVxdWVzdGVkSGVpZ2h0IHx8IGJ0bkhlaWdodCkgLyBidG5IZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zY2FsZS5zZXQoc2NhbGVXLCBzY2FsZUgpO1xyXG5cclxuICAgICAgICB0aGlzLmFwcGx5VGV4dHVyZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25DbGlja0hhbmRsZXIoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIGlmICghdGhpcy5vbkNsaWNrKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybignb25DbGljaygpIGVtcHR5LCBkaWQgeW91IGZvcmdldCB0byBhdHRhY2ggYSBoYW5kbGVyPycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbGljayhldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25CdXR0b25Eb3duID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNDbGlja1N0YXJ0ZWRWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGhpcy50ZXh0dXJlRG93bjtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBvbkJ1dHRvblVwID0gKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc2FibGVkVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pc0NsaWNrU3RhcnRlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNDbGlja1N0YXJ0ZWRWYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2xpY2tIYW5kbGVyKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hcHBseVRleHR1cmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBvbkJ1dHRvblVwT3V0c2lkZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc2FibGVkVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFwcGx5VGV4dHVyZSgpO1xyXG4gICAgICAgIHRoaXMuaXNDbGlja1N0YXJ0ZWRWYWx1ZSA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIG9uQnV0dG9uT3ZlciA9IChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50ZXh0dXJlID0gdGhpcy50ZXh0dXJlSGlnaGxpZ2h0O1xyXG4gICAgICAgIGlmICh0aGlzLm1vdXNlb3Zlcikge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlb3ZlcihldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIG9uQnV0dG9uT3V0ID0gKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc2FibGVkVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzQ2xpY2tTdGFydGVkVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFwcGx5VGV4dHVyZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vdXNlb3V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VvdXQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBhcHBseVRleHR1cmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNhYmxlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZSA9IHRoaXMudGV4dHVyZVVwO1xyXG4gICAgICAgICAgICB0aGlzLnRpbnQgPSAweDYwNjA2MDtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNIaWdobGlnaHRlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZSA9IHRoaXMudGV4dHVyZUhpZ2hsaWdodDtcclxuICAgICAgICAgICAgdGhpcy50aW50ID0gMHg2NjY2NjY7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlID0gdGhpcy5pc1ByZXNzZWRWYWx1ZSA/IHRoaXMudGV4dHVyZURvd24gOiB0aGlzLnRleHR1cmVVcDtcclxuICAgICAgICAgICAgdGhpcy50aW50ID0gMHhmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQWdCQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWEE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBOEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcktBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQW9CQTtBQWxCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUxBO0FBT0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSkE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFKQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQWJBO0FBZUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFrREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF4TUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./objects/SpriteButton.ts\n");

/***/ }),

/***/ "./objects/StatsHud.ts":
/*!*****************************!*\
  !*** ./objects/StatsHud.ts ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ./PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar events_1 = __webpack_require__(/*! ../events */ \"./events.ts\");\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./constants.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\nvar StatsHud = /** @class */ (function (_super) {\r\n    tslib_1.__extends(StatsHud, _super);\r\n    function StatsHud() {\r\n        var _this = _super.call(this) || this;\r\n        _this.questMsgEndTime = 0;\r\n        _this.handleDpsChange = function (event) {\r\n            _this.addInfoMessage(__1.Global.position, event.Amount + \" HP\", constants_1.MSG_HP_STYLE, 50);\r\n        };\r\n        _this.handleStatChange = function (event) {\r\n            switch (event.Type) {\r\n                case enums_1.StatType.Coins:\r\n                    _this.txtCoins.text = event.NewValue.toString();\r\n                    break;\r\n                case enums_1.StatType.Dust:\r\n                    _this.txtDust.text = event.NewValue.toFixed(0) + \" / \" + event.Stats[enums_1.StatType.MaxDust].toFixed(0);\r\n                    break;\r\n                case enums_1.StatType.MaxDust:\r\n                    _this.txtDust.text = Math.floor(event.Stats[enums_1.StatType.Dust]) + \" / \" + event.NewValue.toFixed(0);\r\n                    break;\r\n                case enums_1.StatType.HP:\r\n                    _this.txtHP.text = Math.round(event.NewValue) + \" / \" + event.Stats[enums_1.StatType.MaxHP];\r\n                    break;\r\n                case enums_1.StatType.MaxHP:\r\n                    _this.txtHP.text = Math.round(event.Stats[enums_1.StatType.HP]) + \" / \" + event.NewValue;\r\n                    break;\r\n                case enums_1.StatType.TotalExp:\r\n                    var exp = event.NewValue - event.OldValue;\r\n                    if (exp != 0)\r\n                        _this.addInfoMessage({ x: 0, y: 90 }, \"+\" + exp + \" exp\", constants_1.MSG_EXP_STYLE, -50);\r\n                    _this.renderExp(event);\r\n                    break;\r\n                case enums_1.StatType.CharacterLevel:\r\n                    _this.handleLevelUp(event);\r\n                    break;\r\n                // case StatType.AttributePoints:\r\n                //     this.characterMngr.visible = event.NewValue > 0;\r\n                //     this.txtAtrPts.visible = event.NewValue > 0;\r\n                //     //this.txtAtrPts.text = \"points available\";\r\n                //     break;\r\n            }\r\n        };\r\n        _this.handleLevelUp = function (event) {\r\n            _this.txtExp.text = Math.round(event.Stats[enums_1.StatType.LevelExp]) + \" / \" + event.Stats[enums_1.StatType.LevelMaxExp];\r\n            _this.expFiller.width = 1;\r\n            _this.addLvlUpMessage(\"Level \" + event.NewValue);\r\n            _this.txtLevel.text = \"Level \" + PlayerStats_1.stats.characterLevel;\r\n        };\r\n        _this.setup();\r\n        return _this;\r\n    }\r\n    StatsHud.prototype.setup = function () {\r\n        //  TODO: remove or make a hud for player position\r\n        this.txtPlayerPosition = new __1.PIXI.BitmapText(\"0\", constants_1.QUEST_STYLE);\r\n        this.txtPlayerPosition.position = new __1.PIXI.Point(constants_1.SCENE_WIDTH, constants_1.SCENE_HEIGHT);\r\n        this.txtPlayerPosition.anchor.set(1, 1);\r\n        this.addChild(this.txtPlayerPosition);\r\n        //  top left stat container panel\r\n        this.statContainer = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@panel_stats.png\", true));\r\n        this.statContainer.position.set(4);\r\n        this.statContainer.name = \"TriggerMessage\";\r\n        this.statContainer.anchor.set(0);\r\n        this.addChild(this.statContainer);\r\n        this.questPanel = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@panel.png\"));\r\n        this.questPanel.anchor.set(0);\r\n        this.questPanel.position.set(4, 88);\r\n        this.addChild(this.questPanel);\r\n        this.txtQuestMessage = new __1.PIXI.BitmapText(\"\", constants_1.QUEST_STYLE);\r\n        this.txtQuestMessage.position.set(14);\r\n        this.txtQuestMessage.anchor.set(0);\r\n        this.questPanel.addChild(this.txtQuestMessage);\r\n        var txtPanelStyle = { font: { name: 'Orbitron', size: 26 }, tint: 0xfeff00 };\r\n        var y = this.statContainer.height / 2;\r\n        //  HP\r\n        {\r\n            this.txtHP = new __1.PIXI.BitmapText(\"0\", txtPanelStyle);\r\n            this.txtHP.anchor.set(0, 0.5);\r\n            this.txtHP.position = new __1.PIXI.Point(84, this.statContainer.height / 2);\r\n            this.statContainer.addChild(this.txtHP);\r\n            var spr = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@heart.png\"));\r\n            spr.anchor.set(0.5);\r\n            spr.position.set(45, this.statContainer.height / 2);\r\n            this.statContainer.addChild(spr);\r\n        }\r\n        //  pixi dust\r\n        {\r\n            this.txtDust = new __1.PIXI.BitmapText(\"0\", txtPanelStyle);\r\n            this.txtDust.anchor.set(0, 0.5);\r\n            this.txtDust.position = new __1.PIXI.Point(334, this.statContainer.height / 2);\r\n            this.statContainer.addChild(this.txtDust);\r\n            this.emitter = __1.createParticleEmitter(this.statContainer, [__1.TextureLoader.Get(\"assets/objects-atlas.json@star.png\")]);\r\n            this.emitter.updateOwnerPos(292, 64);\r\n            this.emitter.maxLifetime = 0.6;\r\n            this.emitter.maxParticles = 50;\r\n            this.emitter.emit = true;\r\n        }\r\n        //  coins\r\n        {\r\n            this.txtCoins = new __1.PIXI.BitmapText(\"0\", txtPanelStyle);\r\n            this.txtCoins.anchor.set(0, 0.5);\r\n            this.txtCoins.position = new __1.PIXI.Point(586, this.statContainer.height / 2);\r\n            this.statContainer.addChild(this.txtCoins);\r\n            var spr = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@coin.png\"));\r\n            spr.anchor.set(0.5);\r\n            spr.position.set(544, this.statContainer.height / 2);\r\n            this.statContainer.addChild(spr);\r\n        }\r\n        //  Exp\r\n        {\r\n            var pnl = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@exp_panel.png\"));\r\n            pnl.position.set(0, constants_1.SCENE_HEIGHT - pnl.height);\r\n            this.addChild(pnl);\r\n            //  pre filler rect\r\n            this.expPreFiller = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@exp_prefill.png\"));\r\n            this.expPreFiller.position.set(3, 3);\r\n            pnl.addChild(this.expPreFiller);\r\n            //  filler rect\r\n            this.expFiller = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@exp_fill.png\"));\r\n            this.expFiller.position.set(3, 3);\r\n            pnl.addChild(this.expFiller);\r\n            this.fillLen = pnl.width - 6; // 3 pixels for left/right border;\r\n            var txtExpStyle = { font: { name: 'Bauhaus', size: 18 } };\r\n            this.txtExp = new __1.PIXI.BitmapText(\"0 / 1000\", txtExpStyle);\r\n            this.txtExp.pivot.set(0.5);\r\n            this.txtExp.anchor.set(0.5);\r\n            this.txtExp.position = new __1.PIXI.Point(pnl.width / 2, pnl.height / 2);\r\n            this.txtExp.tint = 0xfeff44;\r\n            pnl.addChild(this.txtExp);\r\n            //  character level\r\n            this.txtLevel = new __1.PIXI.BitmapText(\"Level \" + PlayerStats_1.stats.characterLevel, txtExpStyle);\r\n            this.txtLevel.position.set(pnl.x + pnl.width + 4, pnl.y);\r\n            this.txtLevel.tint = 0xfeff44;\r\n            this.addChild(this.txtLevel);\r\n        }\r\n        events_1.eventEmitter.on(events_1.STATCHANGE_TOPIC, this.handleStatChange);\r\n        events_1.eventEmitter.on(events_1.DAMAGE_TOPIC, this.handleDpsChange);\r\n    };\r\n    StatsHud.prototype.onUpdate = function (dt) {\r\n        this.emitter.update(dt * 0.001);\r\n        // if (this.txtQuestMessage.visible && this.questMsgEndTime < performance.now()) {\r\n        //     this.txtQuestMessage.visible = false;\r\n        //     if (this.onCompleteCB) {\r\n        //         this.onCompleteCB();\r\n        //     }\r\n        // }\r\n        if (this.questPanel.visible && this.questMsgEndTime < performance.now()) {\r\n            this.questPanel.visible = false;\r\n            if (this.onCompleteCB) {\r\n                this.onCompleteCB();\r\n            }\r\n        }\r\n        this.txtPlayerPosition.text = __1.Global.position.x.toFixed(0) + \", \" + __1.Global.position.y.toFixed(0);\r\n    };\r\n    /**\r\n     * Starts an animation tween with informational text moving upwards from the given position.\r\n     * @param position the start position of the message\r\n     * @param message the message to be added\r\n     * @param style optional PIXI.ITextStyle\r\n     */\r\n    StatsHud.prototype.addInfoMessage = function (position, message, style, offsetX) {\r\n        var _this = this;\r\n        var stl = tslib_1.__assign({ font: 'Orbitron', size: 24, tint: 0xffffff }, style);\r\n        var txtInfo = new __1.PIXI.BitmapText(message, stl);\r\n        offsetX = offsetX || 0;\r\n        txtInfo.position.set(constants_1.SCENE_HALF_WIDTH + offsetX, constants_1.SCENE_HEIGHT - position.y - 70);\r\n        txtInfo.scale.set(1, 1);\r\n        this.addChild(txtInfo);\r\n        var dy = (position.y > constants_1.SCENE_HALF_HEIGHT) ? 250 : -250;\r\n        var upY = constants_1.SCENE_HEIGHT - position.y + dy;\r\n        var moveUp = new __1.TWEEN.Tween(txtInfo.position)\r\n            .to({ y: upY }, 2000);\r\n        moveUp.start();\r\n        var scale = new __1.TWEEN.Tween(txtInfo.scale)\r\n            .to({ x: 1.6, y: 1.6 }, 2200)\r\n            .easing(__1.TWEEN.Easing.Linear.None);\r\n        var fade = new __1.TWEEN.Tween(txtInfo)\r\n            .to({ alpha: 0 }, 3000)\r\n            .onComplete(function () { return _this.removeChild(txtInfo); });\r\n        scale.chain(fade).start();\r\n    };\r\n    /**\r\n     * Adds text message about acquired quest items.\r\n     * @param message the message to be added\r\n     * @param style optional PIXI.ITextStyle\r\n     */\r\n    StatsHud.prototype.addQuestItemMessage = function (message) {\r\n        var _this = this;\r\n        var txtInfo = new __1.PIXI.BitmapText(message, constants_1.QUEST_ITEM_STYLE);\r\n        txtInfo.anchor.set(0.5);\r\n        txtInfo.position.set(constants_1.SCENE_HALF_WIDTH, 150);\r\n        this.addChild(txtInfo);\r\n        var scale = new __1.TWEEN.Tween(txtInfo.scale)\r\n            .to({ x: 1.8, y: 1.8 }, 2200)\r\n            .easing(__1.TWEEN.Easing.Linear.None);\r\n        var fade = new __1.TWEEN.Tween(txtInfo)\r\n            .to({ alpha: 0 }, 3000)\r\n            .onComplete(function () { return _this.removeChild(txtInfo); });\r\n        scale.chain(fade).start();\r\n    };\r\n    /**\r\n     * Displays the quest message in the quest rectangle.\r\n     * @param msg\r\n     * @param ttlMilis\r\n     */\r\n    StatsHud.prototype.setQuestMessage = function (msg, ttlMilis, onCompleteCB) {\r\n        if (ttlMilis === void 0) { ttlMilis = 8000; }\r\n        if (onCompleteCB === void 0) { onCompleteCB = null; }\r\n        this.txtQuestMessage.text = msg;\r\n        this.questPanel.visible = true;\r\n        //this.txtQuestMessage.visible = true;\r\n        this.questMsgEndTime = performance.now() + ttlMilis;\r\n        this.onCompleteCB = onCompleteCB;\r\n    };\r\n    /**\r\n     * Starts an animation tween with level up message.\r\n     * @param message the message to be added\r\n     */\r\n    StatsHud.prototype.addLvlUpMessage = function (message) {\r\n        var _this = this;\r\n        var stl = {\r\n            align: \"center\",\r\n            padding: 0,\r\n            fontSize: \"64px\",\r\n            fontFamily: constants_1.GUI_FONT,\r\n            fill: 0x335533,\r\n            strokeThickness: 6,\r\n            stroke: 0xccccff\r\n        };\r\n        var txtInfo = new __1.PIXI.Text(message, stl);\r\n        txtInfo.scale.set(1);\r\n        txtInfo.anchor.set(0.5);\r\n        txtInfo.position.set(constants_1.SCENE_HALF_WIDTH, constants_1.SCENE_HEIGHT - __1.Global.position.y - 70);\r\n        this.addChild(txtInfo);\r\n        var dy = (__1.Global.position.y > constants_1.SCENE_HALF_HEIGHT) ? 450 : -450;\r\n        var upY = constants_1.SCENE_HEIGHT - __1.Global.position.y + dy;\r\n        var moveUp = new __1.TWEEN.Tween(txtInfo.position)\r\n            .to({ y: upY }, 2000);\r\n        moveUp.start();\r\n        var scale = new __1.TWEEN.Tween(txtInfo.scale)\r\n            .to({ x: 1.6, y: 1.6 }, 1500)\r\n            .easing(__1.TWEEN.Easing.Linear.None);\r\n        var fade = new __1.TWEEN.Tween(txtInfo)\r\n            .to({ alpha: 0.4 }, 6000)\r\n            .onComplete(function () { return _this.removeChild(txtInfo); });\r\n        scale.chain(fade).start();\r\n    };\r\n    StatsHud.prototype.renderExp = function (event) {\r\n        this.txtExp.text = Math.round(event.Stats[enums_1.StatType.LevelExp]) + \" / \" + event.Stats[enums_1.StatType.LevelMaxExp];\r\n        this.txtLevel.text = \"Level \" + PlayerStats_1.stats.characterLevel;\r\n        var pct = Math.min(event.Stats[enums_1.StatType.LevelExp] / event.Stats[enums_1.StatType.LevelMaxExp], 1.0);\r\n        //  special case during level up\r\n        if (pct === 0) {\r\n            this.expFiller.width = 1;\r\n            this.expPreFiller.position.x = 1 + this.expFiller.x;\r\n            return;\r\n        }\r\n        this.expPreFiller.position.x = this.expFiller.width + this.expFiller.x;\r\n        var targetWidth = (this.fillLen * pct) | 0;\r\n        var diff = targetWidth - this.expFiller.width;\r\n        //  tween pre-fill width\r\n        this.expPreFiller.width = 1;\r\n        var preFillTween = new __1.TWEEN.Tween(this.expPreFiller)\r\n            .to({ width: diff }, 1500)\r\n            .easing(__1.TWEEN.Easing.Linear.None);\r\n        var fillTween = new __1.TWEEN.Tween(this.expFiller)\r\n            .to({ width: targetWidth }, 2000)\r\n            .easing(__1.TWEEN.Easing.Bounce.Out);\r\n        preFillTween.chain(fillTween).start();\r\n    };\r\n    return StatsHud;\r\n}(__1.PIXI.Container));\r\nexports.StatsHud = StatsHud;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9vYmplY3RzL1N0YXRzSHVkLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vb2JqZWN0cy9TdGF0c0h1ZC50cz82MTM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBhcnRpY2xlcyBmcm9tIFwicGl4aS1wYXJ0aWNsZXNcIjtcclxuaW1wb3J0IHsgUElYSSwgVFdFRU4sIEdsb2JhbCwgVGV4dHVyZUxvYWRlciwgY3JlYXRlUGFydGljbGVFbWl0dGVyIH0gZnJvbSAnLi4nO1xyXG5pbXBvcnQgeyBzdGF0cyB9IGZyb20gJy4vUGxheWVyU3RhdHMnO1xyXG5pbXBvcnQgeyBldmVudEVtaXR0ZXIsIFNUQVRDSEFOR0VfVE9QSUMsIERBTUFHRV9UT1BJQywgSVN0YXRDaGFuZ2VFdmVudCwgSURwc0NoYW5nZUV2ZW50IH0gZnJvbSAnLi4vZXZlbnRzJztcclxuaW1wb3J0IHsgU0NFTkVfSEFMRl9XSURUSCwgU0NFTkVfSEVJR0hULCBTQ0VORV9IQUxGX0hFSUdIVCwgTVNHX0hQX1NUWUxFLCBRVUVTVF9JVEVNX1NUWUxFLCBTQ0VORV9XSURUSCwgUVVFU1RfU1RZTEUsIEdVSV9GT05ULCBNU0dfRVhQX1NUWUxFIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgU3RhdFR5cGUgfSBmcm9tICcuLi9lbnVtcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhdHNIdWQgZXh0ZW5kcyBQSVhJLkNvbnRhaW5lciB7XHJcbiAgICBwcml2YXRlIHR4dEhQOiBQSVhJLkJpdG1hcFRleHQ7XHJcbiAgICBwcml2YXRlIHR4dER1c3Q6IFBJWEkuQml0bWFwVGV4dDtcclxuICAgIHByaXZhdGUgdHh0Q29pbnM6IFBJWEkuQml0bWFwVGV4dDtcclxuICAgIHByaXZhdGUgdHh0RXhwOiBQSVhJLkJpdG1hcFRleHQ7XHJcbiAgICBwcml2YXRlIHR4dExldmVsOiBQSVhJLkJpdG1hcFRleHQ7XHJcbiAgICBwcml2YXRlIGV4cFByZUZpbGxlcjogUElYSS5TcHJpdGU7XHJcbiAgICBwcml2YXRlIGV4cEZpbGxlcjogUElYSS5TcHJpdGU7XHJcbiAgICBwcml2YXRlIGZpbGxMZW46IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIGVtaXR0ZXI6IHBhcnRpY2xlcy5FbWl0dGVyO1xyXG5cclxuICAgIHByaXZhdGUgc3RhdENvbnRhaW5lcjogUElYSS5TcHJpdGU7XHJcbiAgICBcclxuICAgIHByaXZhdGUgcXVlc3RQYW5lbDogUElYSS5TcHJpdGU7XHJcbiAgICBwcml2YXRlIHR4dFF1ZXN0TWVzc2FnZTogUElYSS5CaXRtYXBUZXh0O1xyXG5cclxuICAgIHByaXZhdGUgcXVlc3RNc2dFbmRUaW1lID0gMDtcclxuICAgIHByaXZhdGUgb25Db21wbGV0ZUNCPzogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBwcml2YXRlIHR4dFBsYXllclBvc2l0aW9uOiBQSVhJLkJpdG1hcFRleHQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnNldHVwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cCgpIHtcclxuICAgICAgICAvLyAgVE9ETzogcmVtb3ZlIG9yIG1ha2UgYSBodWQgZm9yIHBsYXllciBwb3NpdGlvblxyXG4gICAgICAgIHRoaXMudHh0UGxheWVyUG9zaXRpb24gPSBuZXcgUElYSS5CaXRtYXBUZXh0KFwiMFwiLCBRVUVTVF9TVFlMRSk7XHJcbiAgICAgICAgdGhpcy50eHRQbGF5ZXJQb3NpdGlvbi5wb3NpdGlvbiA9IG5ldyBQSVhJLlBvaW50KFNDRU5FX1dJRFRILCBTQ0VORV9IRUlHSFQpO1xyXG4gICAgICAgICh0aGlzLnR4dFBsYXllclBvc2l0aW9uLmFuY2hvciBhcyBhbnkpLnNldCgxLCAxKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMudHh0UGxheWVyUG9zaXRpb24pO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICAvLyAgdG9wIGxlZnQgc3RhdCBjb250YWluZXIgcGFuZWxcclxuICAgICAgICB0aGlzLnN0YXRDb250YWluZXIgPSBuZXcgUElYSS5TcHJpdGUoVGV4dHVyZUxvYWRlci5HZXQoXCJhc3NldHMvZ3VpLWF0bGFzLmpzb25AcGFuZWxfc3RhdHMucG5nXCIsIHRydWUpKTtcclxuICAgICAgICB0aGlzLnN0YXRDb250YWluZXIucG9zaXRpb24uc2V0KDQpO1xyXG4gICAgICAgIHRoaXMuc3RhdENvbnRhaW5lci5uYW1lID0gXCJUcmlnZ2VyTWVzc2FnZVwiO1xyXG4gICAgICAgIHRoaXMuc3RhdENvbnRhaW5lci5hbmNob3Iuc2V0KDApO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5zdGF0Q29udGFpbmVyKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnF1ZXN0UGFuZWwgPSBuZXcgUElYSS5TcHJpdGUoVGV4dHVyZUxvYWRlci5HZXQoXCJhc3NldHMvZ3VpLWF0bGFzLmpzb25AcGFuZWwucG5nXCIpKTtcclxuICAgICAgICB0aGlzLnF1ZXN0UGFuZWwuYW5jaG9yLnNldCgwKTtcclxuICAgICAgICB0aGlzLnF1ZXN0UGFuZWwucG9zaXRpb24uc2V0KDQsIDg4KTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMucXVlc3RQYW5lbCk7XHJcblxyXG4gICAgICAgIHRoaXMudHh0UXVlc3RNZXNzYWdlID0gbmV3IFBJWEkuQml0bWFwVGV4dChcIlwiLCBRVUVTVF9TVFlMRSk7XHJcbiAgICAgICAgdGhpcy50eHRRdWVzdE1lc3NhZ2UucG9zaXRpb24uc2V0KDE0KTtcclxuICAgICAgICAodGhpcy50eHRRdWVzdE1lc3NhZ2UuYW5jaG9yIGFzIGFueSkuc2V0KDApO1xyXG4gICAgICAgIHRoaXMucXVlc3RQYW5lbC5hZGRDaGlsZCh0aGlzLnR4dFF1ZXN0TWVzc2FnZSk7XHJcblxyXG4gICAgICAgIGxldCB0eHRQYW5lbFN0eWxlOiBQSVhJLklCaXRtYXBUZXh0U3R5bGUgPSB7Zm9udDp7bmFtZTogJ09yYml0cm9uJywgc2l6ZTogMjZ9LCB0aW50OiAweGZlZmYwMH07XHJcbiAgICAgICAgbGV0IHk6IG51bWJlciA9IHRoaXMuc3RhdENvbnRhaW5lci5oZWlnaHQvMjtcclxuICAgICAgICAvLyAgSFBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudHh0SFAgPSBuZXcgUElYSS5CaXRtYXBUZXh0KFwiMFwiLCB0eHRQYW5lbFN0eWxlKTtcclxuICAgICAgICAgICAgKHRoaXMudHh0SFAuYW5jaG9yIGFzIGFueSkuc2V0KDAsIDAuNSk7XHJcbiAgICAgICAgICAgIHRoaXMudHh0SFAucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCg4NCwgdGhpcy5zdGF0Q29udGFpbmVyLmhlaWdodC8yKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0Q29udGFpbmVyLmFkZENoaWxkKHRoaXMudHh0SFApO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNwciA9IG5ldyBQSVhJLlNwcml0ZShUZXh0dXJlTG9hZGVyLkdldChcImFzc2V0cy9ndWktYXRsYXMuanNvbkBoZWFydC5wbmdcIikpO1xyXG4gICAgICAgICAgICBzcHIuYW5jaG9yLnNldCgwLjUpO1xyXG4gICAgICAgICAgICBzcHIucG9zaXRpb24uc2V0KDQ1LCB0aGlzLnN0YXRDb250YWluZXIuaGVpZ2h0LzIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRDb250YWluZXIuYWRkQ2hpbGQoc3ByKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICBwaXhpIGR1c3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudHh0RHVzdCA9IG5ldyBQSVhJLkJpdG1hcFRleHQoXCIwXCIsIHR4dFBhbmVsU3R5bGUpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAodGhpcy50eHREdXN0LmFuY2hvciBhcyBhbnkpLnNldCgwLCAwLjUpO1xyXG4gICAgICAgICAgICB0aGlzLnR4dER1c3QucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCgzMzQsIHRoaXMuc3RhdENvbnRhaW5lci5oZWlnaHQvMik7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdENvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnR4dER1c3QpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbWl0dGVyID0gY3JlYXRlUGFydGljbGVFbWl0dGVyKHRoaXMuc3RhdENvbnRhaW5lciwgW1RleHR1cmVMb2FkZXIuR2V0KFwiYXNzZXRzL29iamVjdHMtYXRsYXMuanNvbkBzdGFyLnBuZ1wiKV0pO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIudXBkYXRlT3duZXJQb3MoMjkyLCA2NCk7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdHRlci5tYXhMaWZldGltZSA9IDAuNjtcclxuICAgICAgICAgICAgdGhpcy5lbWl0dGVyLm1heFBhcnRpY2xlcyA9IDUwO1xyXG4gICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgY29pbnNcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudHh0Q29pbnMgPSBuZXcgUElYSS5CaXRtYXBUZXh0KFwiMFwiLCB0eHRQYW5lbFN0eWxlKTtcclxuICAgICAgICAgICAgKHRoaXMudHh0Q29pbnMuYW5jaG9yIGFzIGFueSkuc2V0KDAsIDAuNSk7XHJcbiAgICAgICAgICAgIHRoaXMudHh0Q29pbnMucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCg1ODYsIHRoaXMuc3RhdENvbnRhaW5lci5oZWlnaHQvMik7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdENvbnRhaW5lci5hZGRDaGlsZCh0aGlzLnR4dENvaW5zKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzcHIgPSBuZXcgUElYSS5TcHJpdGUoVGV4dHVyZUxvYWRlci5HZXQoXCJhc3NldHMvZ3VpLWF0bGFzLmpzb25AY29pbi5wbmdcIikpO1xyXG4gICAgICAgICAgICBzcHIuYW5jaG9yLnNldCgwLjUpO1xyXG4gICAgICAgICAgICBzcHIucG9zaXRpb24uc2V0KDU0NCwgdGhpcy5zdGF0Q29udGFpbmVyLmhlaWdodC8yKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0Q29udGFpbmVyLmFkZENoaWxkKHNwcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgRXhwXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcG5sID0gbmV3IFBJWEkuU3ByaXRlKFRleHR1cmVMb2FkZXIuR2V0KFwiYXNzZXRzL2d1aS1hdGxhcy5qc29uQGV4cF9wYW5lbC5wbmdcIikpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcG5sLnBvc2l0aW9uLnNldCgwLCBTQ0VORV9IRUlHSFQgLSBwbmwuaGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChwbmwpO1xyXG5cclxuICAgICAgICAgICAgLy8gIHByZSBmaWxsZXIgcmVjdFxyXG4gICAgICAgICAgICB0aGlzLmV4cFByZUZpbGxlciA9IG5ldyBQSVhJLlNwcml0ZShUZXh0dXJlTG9hZGVyLkdldChcImFzc2V0cy9ndWktYXRsYXMuanNvbkBleHBfcHJlZmlsbC5wbmdcIikpO1xyXG4gICAgICAgICAgICB0aGlzLmV4cFByZUZpbGxlci5wb3NpdGlvbi5zZXQoMywgMyk7XHJcbiAgICAgICAgICAgIHBubC5hZGRDaGlsZCh0aGlzLmV4cFByZUZpbGxlcik7XHJcblxyXG4gICAgICAgICAgICAvLyAgZmlsbGVyIHJlY3RcclxuICAgICAgICAgICAgdGhpcy5leHBGaWxsZXIgPSBuZXcgUElYSS5TcHJpdGUoVGV4dHVyZUxvYWRlci5HZXQoXCJhc3NldHMvZ3VpLWF0bGFzLmpzb25AZXhwX2ZpbGwucG5nXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5leHBGaWxsZXIucG9zaXRpb24uc2V0KDMsIDMpO1xyXG4gICAgICAgICAgICBwbmwuYWRkQ2hpbGQodGhpcy5leHBGaWxsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGxMZW4gPSBwbmwud2lkdGggLSA2OyAvLyAzIHBpeGVscyBmb3IgbGVmdC9yaWdodCBib3JkZXI7XHJcblxyXG4gICAgICAgICAgICBsZXQgdHh0RXhwU3R5bGUgPSB7Zm9udDp7bmFtZTogJ0JhdWhhdXMnLCBzaXplOiAxOH19XHJcbiAgICAgICAgICAgIHRoaXMudHh0RXhwID0gbmV3IFBJWEkuQml0bWFwVGV4dChcIjAgLyAxMDAwXCIsIHR4dEV4cFN0eWxlKTtcclxuICAgICAgICAgICAgdGhpcy50eHRFeHAucGl2b3Quc2V0KDAuNSk7XHJcbiAgICAgICAgICAgICh0aGlzLnR4dEV4cC5hbmNob3IgYXMgYW55KS5zZXQoMC41KTtcclxuICAgICAgICAgICAgdGhpcy50eHRFeHAucG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludChwbmwud2lkdGggLyAyLCBwbmwuaGVpZ2h0IC8gMik7XHJcbiAgICAgICAgICAgIHRoaXMudHh0RXhwLnRpbnQgPSAweGZlZmY0NDtcclxuICAgICAgICAgICAgcG5sLmFkZENoaWxkKHRoaXMudHh0RXhwKTtcclxuXHJcbiAgICAgICAgICAgIC8vICBjaGFyYWN0ZXIgbGV2ZWxcclxuICAgICAgICAgICAgdGhpcy50eHRMZXZlbCA9IG5ldyBQSVhJLkJpdG1hcFRleHQoYExldmVsICR7c3RhdHMuY2hhcmFjdGVyTGV2ZWx9YCwgdHh0RXhwU3R5bGUpO1xyXG4gICAgICAgICAgICB0aGlzLnR4dExldmVsLnBvc2l0aW9uLnNldChwbmwueCArIHBubC53aWR0aCArIDQsIHBubC55KTtcclxuICAgICAgICAgICAgdGhpcy50eHRMZXZlbC50aW50ID0gMHhmZWZmNDQ7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy50eHRMZXZlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBldmVudEVtaXR0ZXIub24oU1RBVENIQU5HRV9UT1BJQywgdGhpcy5oYW5kbGVTdGF0Q2hhbmdlKTtcclxuICAgICAgICBldmVudEVtaXR0ZXIub24oREFNQUdFX1RPUElDLCB0aGlzLmhhbmRsZURwc0NoYW5nZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uVXBkYXRlKGR0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmVtaXR0ZXIudXBkYXRlKGR0ICogMC4wMDEpO1xyXG5cclxuICAgICAgICAvLyBpZiAodGhpcy50eHRRdWVzdE1lc3NhZ2UudmlzaWJsZSAmJiB0aGlzLnF1ZXN0TXNnRW5kVGltZSA8IHBlcmZvcm1hbmNlLm5vdygpKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMudHh0UXVlc3RNZXNzYWdlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMub25Db21wbGV0ZUNCKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm9uQ29tcGxldGVDQigpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5xdWVzdFBhbmVsLnZpc2libGUgJiYgdGhpcy5xdWVzdE1zZ0VuZFRpbWUgPCBwZXJmb3JtYW5jZS5ub3coKSkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXN0UGFuZWwudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vbkNvbXBsZXRlQ0IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUNCKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudHh0UGxheWVyUG9zaXRpb24udGV4dCA9IGAke0dsb2JhbC5wb3NpdGlvbi54LnRvRml4ZWQoMCl9LCAke0dsb2JhbC5wb3NpdGlvbi55LnRvRml4ZWQoMCl9YDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBhbiBhbmltYXRpb24gdHdlZW4gd2l0aCBpbmZvcm1hdGlvbmFsIHRleHQgbW92aW5nIHVwd2FyZHMgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gdGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSB0aGUgbWVzc2FnZSB0byBiZSBhZGRlZFxyXG4gICAgICogQHBhcmFtIHN0eWxlIG9wdGlvbmFsIFBJWEkuSVRleHRTdHlsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkSW5mb01lc3NhZ2UocG9zaXRpb246IFBJWEkuUG9pbnQgfCB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0sIG1lc3NhZ2U6IHN0cmluZywgc3R5bGU/OiBQSVhJLklCaXRtYXBUZXh0U3R5bGUsIG9mZnNldFg/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB2YXIgc3RsID0gey4uLntmb250OidPcmJpdHJvbicsIHNpemU6IDI0LCB0aW50OiAweGZmZmZmZn0sIC4uLnN0eWxlfTtcclxuICAgICAgICB2YXIgdHh0SW5mbyA9IG5ldyBQSVhJLkJpdG1hcFRleHQobWVzc2FnZSwgc3RsKTtcclxuICAgICAgICBvZmZzZXRYID0gb2Zmc2V0WCB8fCAwO1xyXG4gICAgICAgIHR4dEluZm8ucG9zaXRpb24uc2V0KFNDRU5FX0hBTEZfV0lEVEggKyBvZmZzZXRYLCBTQ0VORV9IRUlHSFQgLSBwb3NpdGlvbi55IC0gNzApO1xyXG4gICAgICAgIHR4dEluZm8uc2NhbGUuc2V0KDEsIDEpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodHh0SW5mbyk7XHJcblxyXG4gICAgICAgIHZhciBkeSA9IChwb3NpdGlvbi55ID4gU0NFTkVfSEFMRl9IRUlHSFQpID8gMjUwIDogLTI1MDtcclxuICAgICAgICB2YXIgdXBZID0gU0NFTkVfSEVJR0hUIC0gcG9zaXRpb24ueSArIGR5O1xyXG4gICAgICAgIHZhciBtb3ZlVXAgPSBuZXcgVFdFRU4uVHdlZW4odHh0SW5mby5wb3NpdGlvbilcclxuICAgICAgICAgICAgLnRvKHsgeTogdXBZIH0sIDIwMDApO1xyXG4gICAgICAgIG1vdmVVcC5zdGFydCgpO1xyXG5cclxuICAgICAgICB2YXIgc2NhbGUgPSBuZXcgVFdFRU4uVHdlZW4odHh0SW5mby5zY2FsZSlcclxuICAgICAgICAgICAgLnRvKHsgeDogMS42LCB5OiAxLjYgfSwgMjIwMClcclxuICAgICAgICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuTGluZWFyLk5vbmUpO1xyXG5cclxuICAgICAgICB2YXIgZmFkZSA9IG5ldyBUV0VFTi5Ud2Vlbih0eHRJbmZvKVxyXG4gICAgICAgICAgICAudG8oeyBhbHBoYTogMCB9LCAzMDAwKVxyXG4gICAgICAgICAgICAub25Db21wbGV0ZSgoKSA9PiB0aGlzLnJlbW92ZUNoaWxkKHR4dEluZm8pKTtcclxuICAgICAgICBzY2FsZS5jaGFpbihmYWRlKS5zdGFydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0ZXh0IG1lc3NhZ2UgYWJvdXQgYWNxdWlyZWQgcXVlc3QgaXRlbXMuXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSB0aGUgbWVzc2FnZSB0byBiZSBhZGRlZFxyXG4gICAgICogQHBhcmFtIHN0eWxlIG9wdGlvbmFsIFBJWEkuSVRleHRTdHlsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkUXVlc3RJdGVtTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB2YXIgdHh0SW5mbyA9IG5ldyBQSVhJLkJpdG1hcFRleHQobWVzc2FnZSwgUVVFU1RfSVRFTV9TVFlMRSk7XHJcbiAgICAgICAgKHR4dEluZm8uYW5jaG9yIGFzIGFueSkuc2V0KDAuNSk7XHJcbiAgICAgICAgdHh0SW5mby5wb3NpdGlvbi5zZXQoU0NFTkVfSEFMRl9XSURUSCwgMTUwKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHR4dEluZm8pO1xyXG4gICAgICAgIHZhciBzY2FsZSA9IG5ldyBUV0VFTi5Ud2Vlbih0eHRJbmZvLnNjYWxlKVxyXG4gICAgICAgICAgICAudG8oeyB4OiAxLjgsIHk6IDEuOCB9LCAyMjAwKVxyXG4gICAgICAgICAgICAuZWFzaW5nKFRXRUVOLkVhc2luZy5MaW5lYXIuTm9uZSk7XHJcblxyXG4gICAgICAgIHZhciBmYWRlID0gbmV3IFRXRUVOLlR3ZWVuKHR4dEluZm8pXHJcbiAgICAgICAgICAgIC50byh7IGFscGhhOiAwIH0sIDMwMDApXHJcbiAgICAgICAgICAgIC5vbkNvbXBsZXRlKCgpID0+IHRoaXMucmVtb3ZlQ2hpbGQodHh0SW5mbykpO1xyXG4gICAgICAgIHNjYWxlLmNoYWluKGZhZGUpLnN0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyB0aGUgcXVlc3QgbWVzc2FnZSBpbiB0aGUgcXVlc3QgcmVjdGFuZ2xlLlxyXG4gICAgICogQHBhcmFtIG1zZ1xyXG4gICAgICogQHBhcmFtIHR0bE1pbGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRRdWVzdE1lc3NhZ2UobXNnOiBzdHJpbmcsIHR0bE1pbGlzOiBudW1iZXIgPSA4MDAwLCBvbkNvbXBsZXRlQ0I6ICgpID0+IHZvaWQgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy50eHRRdWVzdE1lc3NhZ2UudGV4dCA9IG1zZztcclxuICAgICAgICB0aGlzLnF1ZXN0UGFuZWwudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy90aGlzLnR4dFF1ZXN0TWVzc2FnZS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXN0TXNnRW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpICsgdHRsTWlsaXM7XHJcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlQ0IgPSBvbkNvbXBsZXRlQ0I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgYW4gYW5pbWF0aW9uIHR3ZWVuIHdpdGggbGV2ZWwgdXAgbWVzc2FnZS5cclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIHRoZSBtZXNzYWdlIHRvIGJlIGFkZGVkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWRkTHZsVXBNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHZhciBzdGw6IFBJWEkuSVRleHRTdHlsZSA9IHtcclxuICAgICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgIGZvbnRTaXplOiBcIjY0cHhcIixcclxuICAgICAgICAgICAgZm9udEZhbWlseTogR1VJX0ZPTlQsXHJcbiAgICAgICAgICAgIGZpbGw6IDB4MzM1NTMzLFxyXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDYsXHJcbiAgICAgICAgICAgIHN0cm9rZTogMHhjY2NjZmZcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdHh0SW5mbyA9IG5ldyBQSVhJLlRleHQobWVzc2FnZSwgc3RsKTtcclxuICAgICAgICB0eHRJbmZvLnNjYWxlLnNldCgxKTtcclxuICAgICAgICB0eHRJbmZvLmFuY2hvci5zZXQoMC41KTtcclxuICAgICAgICB0eHRJbmZvLnBvc2l0aW9uLnNldChTQ0VORV9IQUxGX1dJRFRILCBTQ0VORV9IRUlHSFQgLSBHbG9iYWwucG9zaXRpb24ueSAtIDcwKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHR4dEluZm8pO1xyXG5cclxuICAgICAgICB2YXIgZHkgPSAoR2xvYmFsLnBvc2l0aW9uLnkgPiBTQ0VORV9IQUxGX0hFSUdIVCkgPyA0NTAgOiAtNDUwO1xyXG4gICAgICAgIHZhciB1cFkgPSBTQ0VORV9IRUlHSFQgLSBHbG9iYWwucG9zaXRpb24ueSArIGR5O1xyXG4gICAgICAgIHZhciBtb3ZlVXAgPSBuZXcgVFdFRU4uVHdlZW4odHh0SW5mby5wb3NpdGlvbilcclxuICAgICAgICAgICAgLnRvKHsgeTogdXBZIH0sIDIwMDApO1xyXG4gICAgICAgIG1vdmVVcC5zdGFydCgpO1xyXG5cclxuICAgICAgICB2YXIgc2NhbGUgPSBuZXcgVFdFRU4uVHdlZW4odHh0SW5mby5zY2FsZSlcclxuICAgICAgICAgICAgLnRvKHsgeDogMS42LCB5OiAxLjYgfSwgMTUwMClcclxuICAgICAgICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuTGluZWFyLk5vbmUpO1xyXG5cclxuICAgICAgICB2YXIgZmFkZSA9IG5ldyBUV0VFTi5Ud2Vlbih0eHRJbmZvKVxyXG4gICAgICAgICAgICAudG8oeyBhbHBoYTogMC40IH0sIDYwMDApXHJcbiAgICAgICAgICAgIC5vbkNvbXBsZXRlKCgpID0+IHRoaXMucmVtb3ZlQ2hpbGQodHh0SW5mbykpO1xyXG4gICAgICAgIHNjYWxlLmNoYWluKGZhZGUpLnN0YXJ0KCk7XHJcbiAgICB9ICAgIFxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlRHBzQ2hhbmdlID0gKGV2ZW50OiBJRHBzQ2hhbmdlRXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLmFkZEluZm9NZXNzYWdlKEdsb2JhbC5wb3NpdGlvbiwgYCR7ZXZlbnQuQW1vdW50fSBIUGAsIE1TR19IUF9TVFlMRSwgNTApO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVN0YXRDaGFuZ2UgPSAoZXZlbnQ6IElTdGF0Q2hhbmdlRXZlbnQpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LlR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBTdGF0VHlwZS5Db2luczpcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0Q29pbnMudGV4dCA9IGV2ZW50Lk5ld1ZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0VHlwZS5EdXN0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy50eHREdXN0LnRleHQgPSBgJHtldmVudC5OZXdWYWx1ZS50b0ZpeGVkKDApfSAvICR7ZXZlbnQuU3RhdHNbU3RhdFR5cGUuTWF4RHVzdF0udG9GaXhlZCgwKX1gO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU3RhdFR5cGUuTWF4RHVzdDpcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0RHVzdC50ZXh0ID0gYCR7TWF0aC5mbG9vcihldmVudC5TdGF0c1tTdGF0VHlwZS5EdXN0XSl9IC8gJHtldmVudC5OZXdWYWx1ZS50b0ZpeGVkKDApfWA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0VHlwZS5IUDpcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0SFAudGV4dCA9IGAke01hdGgucm91bmQoZXZlbnQuTmV3VmFsdWUpfSAvICR7ZXZlbnQuU3RhdHNbU3RhdFR5cGUuTWF4SFBdfWA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0VHlwZS5NYXhIUDpcclxuICAgICAgICAgICAgICAgIHRoaXMudHh0SFAudGV4dCA9IGAke01hdGgucm91bmQoZXZlbnQuU3RhdHNbU3RhdFR5cGUuSFBdKX0gLyAke2V2ZW50Lk5ld1ZhbHVlfWA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0VHlwZS5Ub3RhbEV4cDpcclxuICAgICAgICAgICAgICAgIGxldCBleHAgPSBldmVudC5OZXdWYWx1ZSAtIGV2ZW50Lk9sZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cCAhPSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkSW5mb01lc3NhZ2UoeyB4OiAwLCB5OiA5MCB9LCBgKyR7ZXhwfSBleHBgLCBNU0dfRVhQX1NUWUxFLCAtNTApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFeHAoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU3RhdFR5cGUuQ2hhcmFjdGVyTGV2ZWw6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUxldmVsVXAoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLyBjYXNlIFN0YXRUeXBlLkF0dHJpYnV0ZVBvaW50czpcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuY2hhcmFjdGVyTW5nci52aXNpYmxlID0gZXZlbnQuTmV3VmFsdWUgPiAwO1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy50eHRBdHJQdHMudmlzaWJsZSA9IGV2ZW50Lk5ld1ZhbHVlID4gMDtcclxuICAgICAgICAgICAgLy8gICAgIC8vdGhpcy50eHRBdHJQdHMudGV4dCA9IFwicG9pbnRzIGF2YWlsYWJsZVwiO1xyXG4gICAgICAgICAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlTGV2ZWxVcCA9IChldmVudDogSVN0YXRDaGFuZ2VFdmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMudHh0RXhwLnRleHQgPSBgJHtNYXRoLnJvdW5kKGV2ZW50LlN0YXRzW1N0YXRUeXBlLkxldmVsRXhwXSl9IC8gJHtldmVudC5TdGF0c1tTdGF0VHlwZS5MZXZlbE1heEV4cF19YDtcclxuICAgICAgICB0aGlzLmV4cEZpbGxlci53aWR0aCA9IDE7XHJcbiAgICAgICAgdGhpcy5hZGRMdmxVcE1lc3NhZ2UoXCJMZXZlbCBcIiArIGV2ZW50Lk5ld1ZhbHVlKTtcclxuICAgICAgICB0aGlzLnR4dExldmVsLnRleHQgPSBgTGV2ZWwgJHtzdGF0cy5jaGFyYWN0ZXJMZXZlbH1gO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckV4cChldmVudDogSVN0YXRDaGFuZ2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMudHh0RXhwLnRleHQgPSBgJHtNYXRoLnJvdW5kKGV2ZW50LlN0YXRzW1N0YXRUeXBlLkxldmVsRXhwXSl9IC8gJHtldmVudC5TdGF0c1tTdGF0VHlwZS5MZXZlbE1heEV4cF19YDtcclxuICAgICAgICB0aGlzLnR4dExldmVsLnRleHQgPSBgTGV2ZWwgJHtzdGF0cy5jaGFyYWN0ZXJMZXZlbH1gO1xyXG5cclxuICAgICAgICB2YXIgcGN0ID0gTWF0aC5taW4oZXZlbnQuU3RhdHNbU3RhdFR5cGUuTGV2ZWxFeHBdIC8gZXZlbnQuU3RhdHNbU3RhdFR5cGUuTGV2ZWxNYXhFeHBdLCAxLjApO1xyXG5cclxuICAgICAgICAvLyAgc3BlY2lhbCBjYXNlIGR1cmluZyBsZXZlbCB1cFxyXG4gICAgICAgIGlmIChwY3QgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5leHBGaWxsZXIud2lkdGggPSAxO1xyXG4gICAgICAgICAgICB0aGlzLmV4cFByZUZpbGxlci5wb3NpdGlvbi54ID0gMSArIHRoaXMuZXhwRmlsbGVyLng7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZXhwUHJlRmlsbGVyLnBvc2l0aW9uLnggPSB0aGlzLmV4cEZpbGxlci53aWR0aCArIHRoaXMuZXhwRmlsbGVyLng7XHJcbiAgICAgICAgdmFyIHRhcmdldFdpZHRoID0gKHRoaXMuZmlsbExlbiAqIHBjdCkgfCAwO1xyXG5cclxuICAgICAgICB2YXIgZGlmZiA9IHRhcmdldFdpZHRoIC0gdGhpcy5leHBGaWxsZXIud2lkdGg7XHJcblxyXG4gICAgICAgIC8vICB0d2VlbiBwcmUtZmlsbCB3aWR0aFxyXG4gICAgICAgIHRoaXMuZXhwUHJlRmlsbGVyLndpZHRoID0gMTtcclxuICAgICAgICB2YXIgcHJlRmlsbFR3ZWVuID0gbmV3IFRXRUVOLlR3ZWVuKHRoaXMuZXhwUHJlRmlsbGVyKVxyXG4gICAgICAgICAgICAudG8oeyB3aWR0aDogZGlmZiB9LCAxNTAwKVxyXG4gICAgICAgICAgICAuZWFzaW5nKFRXRUVOLkVhc2luZy5MaW5lYXIuTm9uZSk7XHJcblxyXG4gICAgICAgIHZhciBmaWxsVHdlZW4gPSBuZXcgVFdFRU4uVHdlZW4odGhpcy5leHBGaWxsZXIpXHJcbiAgICAgICAgICAgIC50byh7IHdpZHRoOiB0YXJnZXRXaWR0aCB9LCAyMDAwKVxyXG4gICAgICAgICAgICAuZWFzaW5nKFRXRUVOLkVhc2luZy5Cb3VuY2UuT3V0KTtcclxuICAgICAgICBwcmVGaWxsVHdlZW4uY2hhaW4oZmlsbFR3ZWVuKS5zdGFydCgpO1xyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQXNCQTtBQUFBO0FBTEE7QUEwT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL1FBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZ0RBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBdFVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./objects/StatsHud.ts\n");

/***/ }),

/***/ "./questSystem/QuestManager.ts":
/*!*************************************!*\
  !*** ./questSystem/QuestManager.ts ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Global = __webpack_require__(/*! ../global */ \"./global.ts\");\r\nvar QuestState_1 = __webpack_require__(/*! ./QuestState */ \"./questSystem/QuestState.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ../objects/PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar WorldP2_1 = __webpack_require__(/*! ../world/WorldP2 */ \"./world/WorldP2.ts\");\r\nvar SoundMan_1 = __webpack_require__(/*! ../world/SoundMan */ \"./world/SoundMan.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\n/**\r\n * Contains quest related logic, checks and helpers.\r\n */\r\nvar QuestManager = /** @class */ (function () {\r\n    function QuestManager(gameScene) {\r\n        this.gameScene = gameScene;\r\n        this.questState = [];\r\n        this.hud = this.gameScene.HudOverlay;\r\n    }\r\n    /**\r\n     * Resets state of all quests.\r\n     */\r\n    QuestManager.prototype.reset = function () {\r\n        var _this = this;\r\n        this.questState.forEach(function (qs, index) {\r\n            if (qs != QuestState_1.QuestState.None) {\r\n                var quest = _this.findQuest(index);\r\n                quest.itemsCollected = 0;\r\n            }\r\n        });\r\n        this.questState = [];\r\n    };\r\n    /**\r\n     *\r\n     * @param itemId\r\n     */\r\n    QuestManager.prototype.acquireItem = function (itemId) {\r\n        //  find if there is an unfinished quest depending on that item\r\n        var quest = this.findQuestWithItem(itemId);\r\n        if (quest) {\r\n            quest.itemsCollected++;\r\n            this.hud.addQuestItemMessage(\"collected \" + quest.itemsCollected + \" / \" + quest.itemsNeeded);\r\n            if (quest.itemsCollected >= quest.itemsNeeded) {\r\n                this.setQuestState(quest.id, QuestState_1.QuestState.Completed);\r\n                if (quest.completedMsg) {\r\n                    this.hud.setQuestMessage(quest.completedMsg);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Checks if a trigger can be activated.\r\n     * @param trigger\r\n     */\r\n    QuestManager.prototype.canActivateTrigger = function (trigger) {\r\n        if (!trigger || !trigger.questId) {\r\n            return false;\r\n        }\r\n        //  check if trigger depends on quest \r\n        if (Array.isArray(trigger.dependsOn)) {\r\n            for (var i = 0; i < trigger.dependsOn.length; i++) {\r\n                var dependency = trigger.dependsOn[i];\r\n                var state = this.questState[dependency];\r\n                if (!state || state != QuestState_1.QuestState.Rewarded)\r\n                    return false;\r\n            }\r\n        }\r\n        var TEN_SECONDS = 10000;\r\n        var nextAllowedTime = (trigger.lastActive || -TEN_SECONDS) + TEN_SECONDS;\r\n        return nextAllowedTime < performance.now();\r\n    };\r\n    /**\r\n     * Handles level events triggers.\r\n     * @param body\r\n     */\r\n    QuestManager.prototype.handleTriggerEvent = function (body) {\r\n        var _this = this;\r\n        var scm = Global.getScm();\r\n        var trigger = body.Trigger;\r\n        //  note: trigger can have a predefined state (so we skip previous states)\r\n        var state = Math.max(this.getQuestState(trigger.questId), trigger.state || 0);\r\n        // react only if trigger has quest id and last active is older than 10 seconds \r\n        if (this.canActivateTrigger(trigger)) {\r\n            trigger.lastActive = performance.now();\r\n            var quest_1 = this.findQuest(trigger.questId);\r\n            switch (trigger.questId) {\r\n                case 1: //   intro\r\n                    if (state === QuestState_1.QuestState.None) {\r\n                        this.setQuestState(trigger.questId, QuestState_1.QuestState.Completed);\r\n                        this.gameScene.IsHeroInteractive = false;\r\n                        this.hud.setQuestMessage(quest_1.welcomeMsg, 2000, function () {\r\n                            _this.hud.setQuestMessage(quest_1.completedMsg, 2000, function () {\r\n                                _this.gameScene.IsHeroInteractive = true;\r\n                                _this.setQuestState(trigger.questId, QuestState_1.QuestState.Finished);\r\n                                _this.giveRewards(quest_1);\r\n                                _this.setQuestState(trigger.questId + 1, QuestState_1.QuestState.InProgress);\r\n                                quest_1 = _this.findQuest(trigger.questId + 1);\r\n                                _this.hud.setQuestMessage(quest_1.welcomeMsg, 4000);\r\n                            });\r\n                        });\r\n                    }\r\n                    break;\r\n                case 2: //  intro - jump on box task\r\n                    if (this.getQuestState(1) > QuestState_1.QuestState.Finished) {\r\n                        if (state === QuestState_1.QuestState.InProgress) {\r\n                            this.setQuestState(trigger.questId, QuestState_1.QuestState.Completed);\r\n                            //this.gameScene.IsHeroInteractive = false;\r\n                            this.hud.setQuestMessage(quest_1.completedMsg, 4000, function () {\r\n                                _this.gameScene.IsHeroInteractive = true;\r\n                                _this.setQuestState(trigger.questId, QuestState_1.QuestState.Finished);\r\n                                _this.giveRewards(quest_1);\r\n                                //  start quest 3\r\n                                quest_1 = _this.findQuest(trigger.questId + 1);\r\n                                _this.setQuestState(trigger.questId + 1, QuestState_1.QuestState.InProgress);\r\n                                _this.hud.setQuestMessage(quest_1.welcomeMsg);\r\n                            });\r\n                        }\r\n                        else if (state >= QuestState_1.QuestState.Finished) {\r\n                            quest_1 = this.findQuest(trigger.questId + 1);\r\n                            this.hud.setQuestMessage(quest_1.welcomeMsg, 4000);\r\n                        }\r\n                    }\r\n                    break;\r\n                case 3: //  intro - exit sign                                           \r\n                    if (state === QuestState_1.QuestState.InProgress) {\r\n                        this.setQuestState(trigger.questId, QuestState_1.QuestState.Finished);\r\n                        this.giveRewards(quest_1);\r\n                        this.gameScene.IsHeroInteractive = false;\r\n                        this.hud.setQuestMessage(quest_1.completedMsg, 4000, function () {\r\n                            Global.getScm().ActivateScene(\"Loader\");\r\n                        });\r\n                        PlayerStats_1.stats.saveUserState(true);\r\n                        SoundMan_1.snd.win();\r\n                    }\r\n                    break;\r\n                case 201: //  Kendo knowledge\r\n                    this.genericQuestHandler(quest_1, state, body, [\r\n                        function () {\r\n                            var item = Global.worldContainer.getChildByName(\"quest_item_201\");\r\n                            item.visible = true;\r\n                            var lock = _this.findBodyByName(\"lock\");\r\n                            _this.gameScene.removeEntity(lock, true);\r\n                        },\r\n                        function () { },\r\n                        function () {\r\n                            _this.setQuestState(trigger.questId, QuestState_1.QuestState.Finished);\r\n                            _this.giveRewards(quest_1);\r\n                            _this.gameScene.IsHeroInteractive = false;\r\n                            PlayerStats_1.stats.saveUserState(true);\r\n                            SoundMan_1.snd.win();\r\n                            _this.hud.visible = false;\r\n                            var cs = scm.GetScene(\"CutScene\");\r\n                            cs.SetText(quest_1.finishedMsg);\r\n                            var rt = scm.CaptureScene();\r\n                            cs.SetBackGround(rt, _this.gameScene.scale);\r\n                            scm.ActivateScene(cs);\r\n                        }\r\n                    ]);\r\n                    break;\r\n                case 203: //  hanshi Kendo master dojo: collect 10 ki\r\n                    this.genericQuestHandler(quest_1, state, body, [\r\n                        function () { PlayerStats_1.stats.HasJumpAtack = true; },\r\n                        function () { },\r\n                        function () { },\r\n                        function () { }\r\n                    ]);\r\n                    break;\r\n                default:\r\n                    this.genericQuestHandler(quest_1, state, body);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param quest\r\n     * @param state\r\n     * @param body the physics sensor or trigger that causes this quest\r\n     * @param actions array of actions (one optional action for each state)\r\n     */\r\n    QuestManager.prototype.genericQuestHandler = function (quest, state, body, actions) {\r\n        var trigger = body.Trigger;\r\n        switch (state) {\r\n            case QuestState_1.QuestState.None:\r\n                this.setQuestState(quest.id, QuestState_1.QuestState.InProgress);\r\n                this.hud.setQuestMessage(quest.welcomeMsg);\r\n                break;\r\n            case QuestState_1.QuestState.InProgress:\r\n                this.hud.setQuestMessage(quest.objectiveMsg);\r\n                break;\r\n            case QuestState_1.QuestState.Completed:\r\n                if (quest.itemId && quest.itemsCollected >= quest.itemsNeeded) { //  if the acquireItem has set quest to completed move to next stated\r\n                    this.setQuestState(quest.id, QuestState_1.QuestState.Finished);\r\n                    trigger.lastActive = 0;\r\n                }\r\n                else {\r\n                    this.hud.setQuestMessage(quest.completedMsg);\r\n                }\r\n                break;\r\n            case QuestState_1.QuestState.Finished:\r\n                this.hud.setQuestMessage(quest.finishedMsg);\r\n                this.giveRewards(quest);\r\n                this.gameScene.removeEntity(body, true); // remove the sensor from physics and the displayobject from scene\r\n                break;\r\n        }\r\n        if (actions && actions[state]) {\r\n            actions[state]();\r\n        }\r\n    };\r\n    QuestManager.prototype.giveRewards = function (quest) {\r\n        SoundMan_1.snd.questItem();\r\n        if (quest.rewardExp) {\r\n            PlayerStats_1.stats.increaseStat(enums_1.StatType.TotalExp, quest.rewardExp);\r\n            // let pt = new PIXI.Point(Global.position.x, Global.position.y + 50);\r\n            // this.hud.addInfoMessage(pt, `+${quest.rewardExp} exp`, MSG_EXP_STYLE);\r\n        }\r\n        if (quest.rewardCoins) {\r\n            PlayerStats_1.stats.increaseStat(enums_1.StatType.Coins, quest.rewardCoins);\r\n            // let pt = new PIXI.Point(Global.position.x + 50, Global.position.y + 100);\r\n            // this.hud.addInfoMessage(pt, `+${quest.rewardCoins} coins`);\r\n        }\r\n        this.setQuestState(quest.id, QuestState_1.QuestState.Rewarded);\r\n    };\r\n    QuestManager.prototype.findQuest = function (questId) {\r\n        var quests = Global.LevelDefinitions.quests.filter(function (q) {\r\n            return q.id === questId;\r\n        });\r\n        var quest = quests[0];\r\n        return quest;\r\n    };\r\n    QuestManager.prototype.findQuestWithItem = function (itemId) {\r\n        var _this = this;\r\n        var quests = Global.LevelDefinitions.quests.filter(function (q) {\r\n            if (q.itemId === itemId) {\r\n                var state = _this.getQuestState(q.id);\r\n                return state < QuestState_1.QuestState.Completed && state > QuestState_1.QuestState.None;\r\n            }\r\n            return false;\r\n        });\r\n        if (quests.length > 0) {\r\n            return quests[0];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n    * Sets the quest state.\r\n    */\r\n    QuestManager.prototype.setQuestState = function (questId, state) {\r\n        this.questState[questId] = state;\r\n    };\r\n    /**\r\n     * Gets the quest state.\r\n     */\r\n    QuestManager.prototype.getQuestState = function (questId) {\r\n        return this.questState[questId] || QuestState_1.QuestState.None;\r\n    };\r\n    /**\r\n     * Finds a body with the given display objects name.\r\n     * @param name\r\n     */\r\n    QuestManager.prototype.findBodyByName = function (name) {\r\n        var foundBody = undefined;\r\n        WorldP2_1.wp2.bodies.forEach(function (body) {\r\n            var dispObj = body.DisplayObject;\r\n            if (dispObj && dispObj.name === name) {\r\n                foundBody = body;\r\n            }\r\n        });\r\n        return foundBody;\r\n    };\r\n    return QuestManager;\r\n}());\r\nexports.QuestManager = QuestManager;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9xdWVzdFN5c3RlbS9RdWVzdE1hbmFnZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9xdWVzdFN5c3RlbS9RdWVzdE1hbmFnZXIudHM/NDViOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1BJWEl9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgKiBhcyBHbG9iYWwgZnJvbSBcIi4uL2dsb2JhbFwiO1xyXG5pbXBvcnQgeyBRdWVzdFN0YXRlIH0gZnJvbSBcIi4vUXVlc3RTdGF0ZVwiO1xyXG5pbXBvcnQgeyBRdWVzdCB9IGZyb20gXCIuL1F1ZXN0XCI7XHJcbmltcG9ydCB7IElUcmlnZ2VyRGVmaW5pdGlvbiB9IGZyb20gXCIuLi93b3JsZC9MZXZlbEludGVyZmFjZXNcIjtcclxuaW1wb3J0IHsgTWFpblNjZW5lIH0gZnJvbSBcIi4uL1NjZW5lcy9NYWluU2NlbmVcIjtcclxuaW1wb3J0IHsgQ3V0U2NlbmUgfSBmcm9tIFwiLi4vU2NlbmVzL0N1dFNjZW5lXCI7XHJcbmltcG9ydCB7IHN0YXRzIH0gZnJvbSBcIi4uL29iamVjdHMvUGxheWVyU3RhdHNcIjtcclxuaW1wb3J0IHsgU3RhdHNIdWQgfSBmcm9tIFwiLi4vb2JqZWN0cy9TdGF0c0h1ZFwiO1xyXG5pbXBvcnQgeyB3cDIgfSBmcm9tICcuLi93b3JsZC9Xb3JsZFAyJztcclxuaW1wb3J0IHsgc25kIH0gZnJvbSAnLi4vd29ybGQvU291bmRNYW4nO1xyXG5pbXBvcnQgeyBTdGF0VHlwZSB9IGZyb20gJy4uL2VudW1zJztcclxuXHJcbi8qKlxyXG4gKiBDb250YWlucyBxdWVzdCByZWxhdGVkIGxvZ2ljLCBjaGVja3MgYW5kIGhlbHBlcnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUXVlc3RNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgcXVlc3RTdGF0ZTogQXJyYXk8UXVlc3RTdGF0ZT4gPSBbXTtcclxuICAgIHByaXZhdGUgaHVkOiBTdGF0c0h1ZDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGdhbWVTY2VuZTogTWFpblNjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5odWQgPSB0aGlzLmdhbWVTY2VuZS5IdWRPdmVybGF5IGFzIFN0YXRzSHVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHN0YXRlIG9mIGFsbCBxdWVzdHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnF1ZXN0U3RhdGUuZm9yRWFjaCgocXMsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChxcyAhPSBRdWVzdFN0YXRlLk5vbmUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVzdCA9IHRoaXMuZmluZFF1ZXN0KGluZGV4KTtcclxuICAgICAgICAgICAgICAgIHF1ZXN0Lml0ZW1zQ29sbGVjdGVkICA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnF1ZXN0U3RhdGUgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGl0ZW1JZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWNxdWlyZUl0ZW0oaXRlbUlkOiBudW1iZXIpIHtcclxuICAgICAgICAvLyAgZmluZCBpZiB0aGVyZSBpcyBhbiB1bmZpbmlzaGVkIHF1ZXN0IGRlcGVuZGluZyBvbiB0aGF0IGl0ZW1cclxuICAgICAgICBsZXQgcXVlc3QgPSB0aGlzLmZpbmRRdWVzdFdpdGhJdGVtKGl0ZW1JZCk7XHJcbiAgICAgICAgaWYgKHF1ZXN0KSB7XHJcbiAgICAgICAgICAgIHF1ZXN0Lml0ZW1zQ29sbGVjdGVkKys7XHJcbiAgICAgICAgICAgIHRoaXMuaHVkLmFkZFF1ZXN0SXRlbU1lc3NhZ2UoYGNvbGxlY3RlZCAke3F1ZXN0Lml0ZW1zQ29sbGVjdGVkfSAvICR7cXVlc3QuaXRlbXNOZWVkZWR9YCk7XHJcbiAgICAgICAgICAgIGlmIChxdWVzdC5pdGVtc0NvbGxlY3RlZCA+PSBxdWVzdC5pdGVtc05lZWRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVzdFN0YXRlKHF1ZXN0LmlkLCBRdWVzdFN0YXRlLkNvbXBsZXRlZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocXVlc3QuY29tcGxldGVkTXNnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5odWQuc2V0UXVlc3RNZXNzYWdlKHF1ZXN0LmNvbXBsZXRlZE1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgYSB0cmlnZ2VyIGNhbiBiZSBhY3RpdmF0ZWQuIFxyXG4gICAgICogQHBhcmFtIHRyaWdnZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNhbkFjdGl2YXRlVHJpZ2dlcih0cmlnZ2VyOiBJVHJpZ2dlckRlZmluaXRpb24pOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRyaWdnZXIgfHwgIXRyaWdnZXIucXVlc3RJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgY2hlY2sgaWYgdHJpZ2dlciBkZXBlbmRzIG9uIHF1ZXN0IFxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRyaWdnZXIuZGVwZW5kc09uKSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyaWdnZXIuZGVwZW5kc09uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGVwZW5kZW5jeSA9IHRyaWdnZXIuZGVwZW5kc09uW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5xdWVzdFN0YXRlW2RlcGVuZGVuY3ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzdGF0ZSB8fCBzdGF0ZSAhPSBRdWVzdFN0YXRlLlJld2FyZGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IFRFTl9TRUNPTkRTID0gMTAwMDA7XHJcbiAgICAgICAgbGV0IG5leHRBbGxvd2VkVGltZSA9ICh0cmlnZ2VyLmxhc3RBY3RpdmUgfHwgLVRFTl9TRUNPTkRTKSArIFRFTl9TRUNPTkRTO1xyXG4gICAgICAgIHJldHVybiBuZXh0QWxsb3dlZFRpbWUgPCBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgbGV2ZWwgZXZlbnRzIHRyaWdnZXJzLlxyXG4gICAgICogQHBhcmFtIGJvZHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhbmRsZVRyaWdnZXJFdmVudChib2R5OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBsZXQgc2NtID0gR2xvYmFsLmdldFNjbSgpO1xyXG4gICAgICAgIHZhciB0cmlnZ2VyOiBJVHJpZ2dlckRlZmluaXRpb24gPSBib2R5LlRyaWdnZXI7XHJcblxyXG4gICAgICAgIC8vICBub3RlOiB0cmlnZ2VyIGNhbiBoYXZlIGEgcHJlZGVmaW5lZCBzdGF0ZSAoc28gd2Ugc2tpcCBwcmV2aW91cyBzdGF0ZXMpXHJcbiAgICAgICAgbGV0IHN0YXRlID0gTWF0aC5tYXgodGhpcy5nZXRRdWVzdFN0YXRlKHRyaWdnZXIucXVlc3RJZCksIHRyaWdnZXIuc3RhdGUgfHwgMCk7XHJcblxyXG4gICAgICAgIC8vIHJlYWN0IG9ubHkgaWYgdHJpZ2dlciBoYXMgcXVlc3QgaWQgYW5kIGxhc3QgYWN0aXZlIGlzIG9sZGVyIHRoYW4gMTAgc2Vjb25kcyBcclxuICAgICAgICBpZiAodGhpcy5jYW5BY3RpdmF0ZVRyaWdnZXIodHJpZ2dlcikpIHtcclxuICAgICAgICAgICAgdHJpZ2dlci5sYXN0QWN0aXZlID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgcXVlc3Q6IFF1ZXN0ID0gdGhpcy5maW5kUXVlc3QodHJpZ2dlci5xdWVzdElkKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodHJpZ2dlci5xdWVzdElkKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6IC8vICAgaW50cm9cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFF1ZXN0U3RhdGUuTm9uZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVzdFN0YXRlKHRyaWdnZXIucXVlc3RJZCwgUXVlc3RTdGF0ZS5Db21wbGV0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5Jc0hlcm9JbnRlcmFjdGl2ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odWQuc2V0UXVlc3RNZXNzYWdlKHF1ZXN0LndlbGNvbWVNc2csIDIwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaHVkLnNldFF1ZXN0TWVzc2FnZShxdWVzdC5jb21wbGV0ZWRNc2csIDIwMDAsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5Jc0hlcm9JbnRlcmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVzdFN0YXRlKHRyaWdnZXIucXVlc3RJZCwgUXVlc3RTdGF0ZS5GaW5pc2hlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5naXZlUmV3YXJkcyhxdWVzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UXVlc3RTdGF0ZSh0cmlnZ2VyLnF1ZXN0SWQgKyAxLCBRdWVzdFN0YXRlLkluUHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0ID0gdGhpcy5maW5kUXVlc3QodHJpZ2dlci5xdWVzdElkICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odWQuc2V0UXVlc3RNZXNzYWdlKHF1ZXN0LndlbGNvbWVNc2csIDQwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IC8vICBpbnRybyAtIGp1bXAgb24gYm94IHRhc2tcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXRRdWVzdFN0YXRlKDEpID4gUXVlc3RTdGF0ZS5GaW5pc2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFF1ZXN0U3RhdGUuSW5Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVzdFN0YXRlKHRyaWdnZXIucXVlc3RJZCwgUXVlc3RTdGF0ZS5Db21wbGV0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmdhbWVTY2VuZS5Jc0hlcm9JbnRlcmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odWQuc2V0UXVlc3RNZXNzYWdlKHF1ZXN0LmNvbXBsZXRlZE1zZywgNDAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLklzSGVyb0ludGVyYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFF1ZXN0U3RhdGUodHJpZ2dlci5xdWVzdElkLCBRdWVzdFN0YXRlLkZpbmlzaGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdpdmVSZXdhcmRzKHF1ZXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHN0YXJ0IHF1ZXN0IDNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdCA9IHRoaXMuZmluZFF1ZXN0KHRyaWdnZXIucXVlc3RJZCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UXVlc3RTdGF0ZSh0cmlnZ2VyLnF1ZXN0SWQgKyAxLCBRdWVzdFN0YXRlLkluUHJvZ3Jlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaHVkLnNldFF1ZXN0TWVzc2FnZShxdWVzdC53ZWxjb21lTXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID49IFF1ZXN0U3RhdGUuRmluaXNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0ID0gdGhpcy5maW5kUXVlc3QodHJpZ2dlci5xdWVzdElkICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmh1ZC5zZXRRdWVzdE1lc3NhZ2UocXVlc3Qud2VsY29tZU1zZywgNDAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiAvLyAgaW50cm8gLSBleGl0IHNpZ24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBRdWVzdFN0YXRlLkluUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVzdFN0YXRlKHRyaWdnZXIucXVlc3RJZCwgUXVlc3RTdGF0ZS5GaW5pc2hlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2l2ZVJld2FyZHMocXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5Jc0hlcm9JbnRlcmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmh1ZC5zZXRRdWVzdE1lc3NhZ2UocXVlc3QuY29tcGxldGVkTXNnLCA0MDAwLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHbG9iYWwuZ2V0U2NtKCkuQWN0aXZhdGVTY2VuZShcIkxvYWRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzLnNhdmVVc2VyU3RhdGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNuZC53aW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMDE6ICAgLy8gIEtlbmRvIGtub3dsZWRnZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJpY1F1ZXN0SGFuZGxlcihxdWVzdCwgc3RhdGUsIGJvZHksIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBHbG9iYWwud29ybGRDb250YWluZXIuZ2V0Q2hpbGRCeU5hbWUoXCJxdWVzdF9pdGVtXzIwMVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jazogYW55ID0gdGhpcy5maW5kQm9keUJ5TmFtZShcImxvY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWVTY2VuZS5yZW1vdmVFbnRpdHkobG9jaywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHsgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRRdWVzdFN0YXRlKHRyaWdnZXIucXVlc3RJZCwgUXVlc3RTdGF0ZS5GaW5pc2hlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdpdmVSZXdhcmRzKHF1ZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVNjZW5lLklzSGVyb0ludGVyYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMuc2F2ZVVzZXJTdGF0ZSh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbmQud2luKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmh1ZC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3MgPSBzY20uR2V0U2NlbmUoXCJDdXRTY2VuZVwiKSBhcyBDdXRTY2VuZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzLlNldFRleHQocXVlc3QuZmluaXNoZWRNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ0ID0gc2NtLkNhcHR1cmVTY2VuZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3MuU2V0QmFja0dyb3VuZChydCwgdGhpcy5nYW1lU2NlbmUuc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NtLkFjdGl2YXRlU2NlbmUoY3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSAyMDM6ICAgLy8gIGhhbnNoaSBLZW5kbyBtYXN0ZXIgZG9qbzogY29sbGVjdCAxMCBraVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJpY1F1ZXN0SGFuZGxlcihxdWVzdCwgc3RhdGUsIGJvZHksIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4geyBzdGF0cy5IYXNKdW1wQXRhY2sgPSB0cnVlOyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKSA9PiB7IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHsgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4geyB9XHJcbiAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlbmVyaWNRdWVzdEhhbmRsZXIocXVlc3QsIHN0YXRlLCBib2R5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHF1ZXN0IFxyXG4gICAgICogQHBhcmFtIHN0YXRlIFxyXG4gICAgICogQHBhcmFtIGJvZHkgdGhlIHBoeXNpY3Mgc2Vuc29yIG9yIHRyaWdnZXIgdGhhdCBjYXVzZXMgdGhpcyBxdWVzdFxyXG4gICAgICogQHBhcmFtIGFjdGlvbnMgYXJyYXkgb2YgYWN0aW9ucyAob25lIG9wdGlvbmFsIGFjdGlvbiBmb3IgZWFjaCBzdGF0ZSlcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmljUXVlc3RIYW5kbGVyKHF1ZXN0OiBRdWVzdCwgc3RhdGU6IFF1ZXN0U3RhdGUsIGJvZHksIGFjdGlvbnM/OiBBcnJheTwoKSA9PiB2b2lkPikge1xyXG4gICAgICAgIGxldCB0cmlnZ2VyOiBJVHJpZ2dlckRlZmluaXRpb24gPSBib2R5LlRyaWdnZXI7XHJcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFF1ZXN0U3RhdGUuTm9uZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UXVlc3RTdGF0ZShxdWVzdC5pZCwgUXVlc3RTdGF0ZS5JblByb2dyZXNzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHVkLnNldFF1ZXN0TWVzc2FnZShxdWVzdC53ZWxjb21lTXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFF1ZXN0U3RhdGUuSW5Qcm9ncmVzczpcclxuICAgICAgICAgICAgICAgIHRoaXMuaHVkLnNldFF1ZXN0TWVzc2FnZShxdWVzdC5vYmplY3RpdmVNc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUXVlc3RTdGF0ZS5Db21wbGV0ZWQ6XHJcbiAgICAgICAgICAgICAgICBpZiAocXVlc3QuaXRlbUlkICYmIHF1ZXN0Lml0ZW1zQ29sbGVjdGVkID49IHF1ZXN0Lml0ZW1zTmVlZGVkKSB7IC8vICBpZiB0aGUgYWNxdWlyZUl0ZW0gaGFzIHNldCBxdWVzdCB0byBjb21wbGV0ZWQgbW92ZSB0byBuZXh0IHN0YXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UXVlc3RTdGF0ZShxdWVzdC5pZCwgUXVlc3RTdGF0ZS5GaW5pc2hlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlci5sYXN0QWN0aXZlID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5odWQuc2V0UXVlc3RNZXNzYWdlKHF1ZXN0LmNvbXBsZXRlZE1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBRdWVzdFN0YXRlLkZpbmlzaGVkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5odWQuc2V0UXVlc3RNZXNzYWdlKHF1ZXN0LmZpbmlzaGVkTXNnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2l2ZVJld2FyZHMocXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lU2NlbmUucmVtb3ZlRW50aXR5KGJvZHksIHRydWUpOyAvLyByZW1vdmUgdGhlIHNlbnNvciBmcm9tIHBoeXNpY3MgYW5kIHRoZSBkaXNwbGF5b2JqZWN0IGZyb20gc2NlbmVcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWN0aW9ucyAmJiBhY3Rpb25zW3N0YXRlXSkge1xyXG4gICAgICAgICAgICBhY3Rpb25zW3N0YXRlXSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdpdmVSZXdhcmRzKHF1ZXN0OiBRdWVzdCkge1xyXG4gICAgICAgIHNuZC5xdWVzdEl0ZW0oKTtcclxuICAgICAgICBpZiAocXVlc3QucmV3YXJkRXhwKSB7XHJcbiAgICAgICAgICAgIHN0YXRzLmluY3JlYXNlU3RhdChTdGF0VHlwZS5Ub3RhbEV4cCwgcXVlc3QucmV3YXJkRXhwKTtcclxuICAgICAgICAgICAgLy8gbGV0IHB0ID0gbmV3IFBJWEkuUG9pbnQoR2xvYmFsLnBvc2l0aW9uLngsIEdsb2JhbC5wb3NpdGlvbi55ICsgNTApO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmh1ZC5hZGRJbmZvTWVzc2FnZShwdCwgYCske3F1ZXN0LnJld2FyZEV4cH0gZXhwYCwgTVNHX0VYUF9TVFlMRSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChxdWVzdC5yZXdhcmRDb2lucykge1xyXG4gICAgICAgICAgICBzdGF0cy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuQ29pbnMsIHF1ZXN0LnJld2FyZENvaW5zKTtcclxuICAgICAgICAgICAgLy8gbGV0IHB0ID0gbmV3IFBJWEkuUG9pbnQoR2xvYmFsLnBvc2l0aW9uLnggKyA1MCwgR2xvYmFsLnBvc2l0aW9uLnkgKyAxMDApO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmh1ZC5hZGRJbmZvTWVzc2FnZShwdCwgYCske3F1ZXN0LnJld2FyZENvaW5zfSBjb2luc2ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFF1ZXN0U3RhdGUocXVlc3QuaWQsIFF1ZXN0U3RhdGUuUmV3YXJkZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluZFF1ZXN0KHF1ZXN0SWQ6IG51bWJlcik6IFF1ZXN0IHtcclxuICAgICAgICB2YXIgcXVlc3RzID0gR2xvYmFsLkxldmVsRGVmaW5pdGlvbnMucXVlc3RzLmZpbHRlcigocSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcS5pZCA9PT0gcXVlc3RJZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgcXVlc3Q6IFF1ZXN0ID0gcXVlc3RzWzBdO1xyXG4gICAgICAgIHJldHVybiBxdWVzdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmRRdWVzdFdpdGhJdGVtKGl0ZW1JZDogbnVtYmVyKTogUXVlc3Qge1xyXG4gICAgICAgIHZhciBxdWVzdHMgPSBHbG9iYWwuTGV2ZWxEZWZpbml0aW9ucy5xdWVzdHMuZmlsdGVyKChxOiBRdWVzdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocS5pdGVtSWQgPT09IGl0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5nZXRRdWVzdFN0YXRlKHEuaWQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlIDwgUXVlc3RTdGF0ZS5Db21wbGV0ZWQgJiYgc3RhdGUgPiBRdWVzdFN0YXRlLk5vbmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChxdWVzdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcXVlc3RzWzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogU2V0cyB0aGUgcXVlc3Qgc3RhdGUuXHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRRdWVzdFN0YXRlKHF1ZXN0SWQ6IG51bWJlciwgc3RhdGU6IFF1ZXN0U3RhdGUpIHtcclxuICAgICAgICB0aGlzLnF1ZXN0U3RhdGVbcXVlc3RJZF0gPSBzdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIHF1ZXN0IHN0YXRlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFF1ZXN0U3RhdGUocXVlc3RJZDogbnVtYmVyKTogUXVlc3RTdGF0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlc3RTdGF0ZVtxdWVzdElkXSB8fCBRdWVzdFN0YXRlLk5vbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyBhIGJvZHkgd2l0aCB0aGUgZ2l2ZW4gZGlzcGxheSBvYmplY3RzIG5hbWUuXHJcbiAgICAgKiBAcGFyYW0gbmFtZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZpbmRCb2R5QnlOYW1lKG5hbWU6IHN0cmluZyk6IHAyLkJvZHkge1xyXG4gICAgICAgIHZhciBmb3VuZEJvZHkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgd3AyLmJvZGllcy5mb3JFYWNoKChib2R5OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdmFyIGRpc3BPYmogPSBib2R5LkRpc3BsYXlPYmplY3QgYXMgUElYSS5EaXNwbGF5T2JqZWN0O1xyXG4gICAgICAgICAgICBpZiAoZGlzcE9iaiAmJiBkaXNwT2JqLm5hbWUgPT09IG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kQm9keSA9IGJvZHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZm91bmRCb2R5O1xyXG4gICAgfVxyXG59XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7O0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUlBO0FBQUE7QUFIQTtBQUlBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTFSQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./questSystem/QuestManager.ts\n");

/***/ }),

/***/ "./questSystem/QuestState.ts":
/*!***********************************!*\
  !*** ./questSystem/QuestState.ts ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar QuestState;\r\n(function (QuestState) {\r\n    QuestState[QuestState[\"None\"] = 0] = \"None\";\r\n    /**\r\n     *  Quest has been started.\r\n     */\r\n    QuestState[QuestState[\"InProgress\"] = 1] = \"InProgress\";\r\n    /**\r\n     *  Quest items/conditions have been completed.\r\n     */\r\n    QuestState[QuestState[\"Completed\"] = 2] = \"Completed\";\r\n    /**\r\n     *  Quest has been finished.\r\n     */\r\n    QuestState[QuestState[\"Finished\"] = 3] = \"Finished\";\r\n    /**\r\n     *  Quest has been finished and reward awarded.\r\n     */\r\n    QuestState[QuestState[\"Rewarded\"] = 4] = \"Rewarded\";\r\n})(QuestState = exports.QuestState || (exports.QuestState = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9xdWVzdFN5c3RlbS9RdWVzdFN0YXRlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vcXVlc3RTeXN0ZW0vUXVlc3RTdGF0ZS50cz83NGU4Il0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5leHBvcnQgZW51bSBRdWVzdFN0YXRlIHtcclxuICAgIE5vbmUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAgUXVlc3QgaGFzIGJlZW4gc3RhcnRlZC5cclxuICAgICAqL1xyXG4gICAgSW5Qcm9ncmVzcyxcclxuXHJcbiAgICAvKipcclxuICAgICAqICBRdWVzdCBpdGVtcy9jb25kaXRpb25zIGhhdmUgYmVlbiBjb21wbGV0ZWQuXHJcbiAgICAgKi9cclxuICAgIENvbXBsZXRlZCxcclxuXHJcbiAgICAvKipcclxuICAgICAqICBRdWVzdCBoYXMgYmVlbiBmaW5pc2hlZC5cclxuICAgICAqL1xyXG4gICAgRmluaXNoZWQsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAgUXVlc3QgaGFzIGJlZW4gZmluaXNoZWQgYW5kIHJld2FyZCBhd2FyZGVkLlxyXG4gICAgICovXHJcbiAgICBSZXdhcmRlZCxcclxufSJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./questSystem/QuestState.ts\n");

/***/ }),

/***/ "./scenes/BootScene.ts":
/*!*****************************!*\
  !*** ./scenes/BootScene.ts ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar LoaderScene_1 = __webpack_require__(/*! ./LoaderScene */ \"./scenes/LoaderScene.ts\");\r\nvar PRELOAD_BOOT_ASSETS = [\r\n    //  cursors\r\n    'assets/cur_default.png',\r\n    'assets/cur_hover.png',\r\n    'assets/cur_target.png',\r\n    'assets/levels.json',\r\n    'assets/quests.json'\r\n];\r\n/**\r\n * Preloads common assets, after preloading parses user state and starts preloading level assets.\r\n */\r\nvar BootScene = /** @class */ (function (_super) {\r\n    tslib_1.__extends(BootScene, _super);\r\n    function BootScene(sceneManager) {\r\n        var _this = _super.call(this, \"Boot\") || this;\r\n        _this.sceneManager = sceneManager;\r\n        _this.onUpdate = function (dt) {\r\n            if (_this.spinner) {\r\n                _this.spinner.rotation += 0.05;\r\n            }\r\n        };\r\n        _this.onActivate = function () {\r\n            _this.loadingMessage = new __1.PIXI.Text(\"booting ...\", {\r\n                fontSize: \"36px\",\r\n                fontFamily: \"Permanent Marker\",\r\n                fill: 0x0ff00,\r\n                dropShadow: true,\r\n                stroke: 0x44ff44,\r\n                strokeThickness: 1\r\n            });\r\n            _this.loadingMessage.anchor.set(0.5, 0.5);\r\n            _this.loadingMessage.position.set(__1.SCENE_HALF_WIDTH, __1.SCENE_HALF_HEIGHT - 80);\r\n            _this.addChild(_this.loadingMessage);\r\n            //------------------------------------------------------\r\n            //  get loading image and define callback on image load\r\n            //------------------------------------------------------\r\n            __1.PIXI.Loader.shared.reset()\r\n                .add(\"assets/loading.png\")\r\n                .load(_this.startPreloading);\r\n        };\r\n        /**\r\n         *  Downloads common assets, JSON files etc.\r\n         */\r\n        _this.startPreloading = function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            var loadingTexture;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                loadingTexture = __1.PIXI.Texture.from(\"assets/loading.png\");\r\n                this.spinner = new __1.PIXI.Sprite(loadingTexture);\r\n                this.spinner.position.set(__1.SCENE_HALF_WIDTH, __1.SCENE_HALF_HEIGHT);\r\n                this.spinner.anchor.set(0.5, 0.5);\r\n                this.spinner.scale.set(0.5);\r\n                this.addChild(this.spinner);\r\n                console.log('initializing common assets preloading ...', PRELOAD_BOOT_ASSETS);\r\n                __1.PIXI.Loader.shared\r\n                    .add(PRELOAD_BOOT_ASSETS)\r\n                    .load(this.onPreloadFinished);\r\n                return [2 /*return*/];\r\n            });\r\n        }); };\r\n        _this.onPreloadFinished = function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            var defaultIcon, hoverIcon, targetIcon, questsObj, ls;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                defaultIcon = \"url('assets/cur_default.png'),auto\";\r\n                hoverIcon = \"url('assets/cur_hover.png'),auto\";\r\n                targetIcon = \"url('assets/cur_target.png') 24 24, auto\";\r\n                this.sceneManager.Renderer.plugins.interaction.cursorStyles.default = defaultIcon;\r\n                this.sceneManager.Renderer.plugins.interaction.cursorStyles.hover = hoverIcon;\r\n                this.sceneManager.Renderer.plugins.interaction.cursorStyles.target = targetIcon;\r\n                document.body.style.cursor = defaultIcon;\r\n                // save levels and quests\r\n                __1.Global.LevelDefinitions = __1.PIXI.Loader.shared.resources[\"assets/levels.json\"].data;\r\n                questsObj = __1.PIXI.Loader.shared.resources[\"assets/quests.json\"].data;\r\n                __1.Global.LevelDefinitions.quests = questsObj.quests;\r\n                __1.Global.LevelDefinitions.quests.forEach(function (q) {\r\n                    q.itemId = q.itemId || 0;\r\n                    q.itemsNeeded = q.itemsNeeded || 0;\r\n                    q.itemsCollected = 0;\r\n                    q.rewardCoins = q.rewardCoins || 0;\r\n                    q.rewardExp = q.rewardExp || 0;\r\n                });\r\n                ls = new LoaderScene_1.LoaderScene(this.sceneManager);\r\n                this.sceneManager.AddScene(ls);\r\n                this.sceneManager.ActivateScene(ls);\r\n                return [2 /*return*/];\r\n            });\r\n        }); };\r\n        _this.BackGroundColor = 0;\r\n        return _this;\r\n    }\r\n    return BootScene;\r\n}(__1.Scene));\r\nexports.BootScene = BootScene;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY2VuZXMvQm9vdFNjZW5lLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2NlbmVzL0Jvb3RTY2VuZS50cz8xMzhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBJWEksIFNjZW5lTWFuYWdlciwgU2NlbmUsIEdsb2JhbCwgU0NFTkVfSEFMRl9XSURUSCwgU0NFTkVfSEFMRl9IRUlHSFR9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBMb2FkZXJTY2VuZSB9IGZyb20gXCIuL0xvYWRlclNjZW5lXCI7XHJcbmltcG9ydCB7IFF1ZXN0IH0gZnJvbSAnLi4vUXVlc3RTeXN0ZW0vUXVlc3QnO1xyXG5cclxuY29uc3QgUFJFTE9BRF9CT09UX0FTU0VUUyA9IFtcclxuICAgIC8vICBjdXJzb3JzXHJcbiAgICAnYXNzZXRzL2N1cl9kZWZhdWx0LnBuZycsXHJcbiAgICAnYXNzZXRzL2N1cl9ob3Zlci5wbmcnLFxyXG4gICAgJ2Fzc2V0cy9jdXJfdGFyZ2V0LnBuZycsXHJcbiAgICAnYXNzZXRzL2xldmVscy5qc29uJyxcclxuICAgICdhc3NldHMvcXVlc3RzLmpzb24nXHJcbl07XHJcblxyXG4vKipcclxuICogUHJlbG9hZHMgY29tbW9uIGFzc2V0cywgYWZ0ZXIgcHJlbG9hZGluZyBwYXJzZXMgdXNlciBzdGF0ZSBhbmQgc3RhcnRzIHByZWxvYWRpbmcgbGV2ZWwgYXNzZXRzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJvb3RTY2VuZSBleHRlbmRzIFNjZW5lIHtcclxuICAgIHByaXZhdGUgbG9hZGluZ01lc3NhZ2UhOiBQSVhJLlRleHQ7XHJcbiAgICBwcml2YXRlIHNwaW5uZXIhOiBQSVhJLlNwcml0ZTsgICAgXHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NlbmVNYW5hZ2VyOlNjZW5lTWFuYWdlcikge1xyXG4gICAgICAgIHN1cGVyKFwiQm9vdFwiKTtcclxuICAgICAgICB0aGlzLkJhY2tHcm91bmRDb2xvciA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uVXBkYXRlID0gKGR0OiBudW1iZXIpPT57XHJcbiAgICAgICAgaWYgKHRoaXMuc3Bpbm5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnNwaW5uZXIucm90YXRpb24gKz0gMC4wNTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQWN0aXZhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nTWVzc2FnZSA9IG5ldyBQSVhJLlRleHQoXCJib290aW5nIC4uLlwiLCB7XHJcbiAgICAgICAgICAgICBmb250U2l6ZTogXCIzNnB4XCIsIFxyXG4gICAgICAgICAgICAgZm9udEZhbWlseTogXCJQZXJtYW5lbnQgTWFya2VyXCIsIFxyXG4gICAgICAgICAgICAgZmlsbDogMHgwZmYwMCwgXHJcbiAgICAgICAgICAgICBkcm9wU2hhZG93OiB0cnVlLCBcclxuICAgICAgICAgICAgIHN0cm9rZTogMHg0NGZmNDQsIFxyXG4gICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAxIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ01lc3NhZ2UuYW5jaG9yLnNldCgwLjUsIDAuNSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nTWVzc2FnZS5wb3NpdGlvbi5zZXQoU0NFTkVfSEFMRl9XSURUSCwgU0NFTkVfSEFMRl9IRUlHSFQgLSA4MCk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLmxvYWRpbmdNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgZ2V0IGxvYWRpbmcgaW1hZ2UgYW5kIGRlZmluZSBjYWxsYmFjayBvbiBpbWFnZSBsb2FkXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBQSVhJLkxvYWRlci5zaGFyZWQucmVzZXQoKVxyXG4gICAgICAgIC5hZGQoXCJhc3NldHMvbG9hZGluZy5wbmdcIilcclxuICAgICAgICAubG9hZCh0aGlzLnN0YXJ0UHJlbG9hZGluZyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqICBEb3dubG9hZHMgY29tbW9uIGFzc2V0cywgSlNPTiBmaWxlcyBldGMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhcnRQcmVsb2FkaW5nID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vICAgZmlyc3QgYWRkIGEgbG9hZGluZyBzcGlubmVyXHJcbiAgICAgICAgdmFyIGxvYWRpbmdUZXh0dXJlID0gUElYSS5UZXh0dXJlLmZyb20oXCJhc3NldHMvbG9hZGluZy5wbmdcIik7XHJcbiAgICAgICAgdGhpcy5zcGlubmVyID0gbmV3IFBJWEkuU3ByaXRlKGxvYWRpbmdUZXh0dXJlKTtcclxuICAgICAgICB0aGlzLnNwaW5uZXIucG9zaXRpb24uc2V0KFNDRU5FX0hBTEZfV0lEVEgsIFNDRU5FX0hBTEZfSEVJR0hUKTtcclxuICAgICAgICB0aGlzLnNwaW5uZXIuYW5jaG9yLnNldCgwLjUsIDAuNSk7XHJcbiAgICAgICAgdGhpcy5zcGlubmVyLnNjYWxlLnNldCgwLjUpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5zcGlubmVyKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnaW5pdGlhbGl6aW5nIGNvbW1vbiBhc3NldHMgcHJlbG9hZGluZyAuLi4nLCBQUkVMT0FEX0JPT1RfQVNTRVRTKTtcclxuICAgICAgICBQSVhJLkxvYWRlci5zaGFyZWRcclxuICAgICAgICAgICAgLmFkZChQUkVMT0FEX0JPT1RfQVNTRVRTKVxyXG4gICAgICAgICAgICAubG9hZCh0aGlzLm9uUHJlbG9hZEZpbmlzaGVkKTsgXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblByZWxvYWRGaW5pc2hlZCA9IGFzeW5jICgpPT57XHJcbiAgICAgICAgLy8gIHByZWxvYWQgb2YgY29tbW9uIGNvbnRlbnQgaXMgZmluaXNoZWRcclxuICAgICAgICBcclxuICAgICAgICAvLyAgc2V0dXAgY3VzdG9tIGN1cnNvcnNcclxuICAgICAgICB2YXIgZGVmYXVsdEljb24gPSBcInVybCgnYXNzZXRzL2N1cl9kZWZhdWx0LnBuZycpLGF1dG9cIjtcclxuICAgICAgICB2YXIgaG92ZXJJY29uID0gXCJ1cmwoJ2Fzc2V0cy9jdXJfaG92ZXIucG5nJyksYXV0b1wiO1xyXG4gICAgICAgIHZhciB0YXJnZXRJY29uID0gXCJ1cmwoJ2Fzc2V0cy9jdXJfdGFyZ2V0LnBuZycpIDI0IDI0LCBhdXRvXCI7XHJcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuUmVuZGVyZXIucGx1Z2lucy5pbnRlcmFjdGlvbi5jdXJzb3JTdHlsZXMuZGVmYXVsdCA9IGRlZmF1bHRJY29uO1xyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLlJlbmRlcmVyLnBsdWdpbnMuaW50ZXJhY3Rpb24uY3Vyc29yU3R5bGVzLmhvdmVyID0gaG92ZXJJY29uO1xyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLlJlbmRlcmVyLnBsdWdpbnMuaW50ZXJhY3Rpb24uY3Vyc29yU3R5bGVzLnRhcmdldCA9IHRhcmdldEljb247XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBkZWZhdWx0SWNvbjtcclxuXHJcbiAgICAgICAgLy8gc2F2ZSBsZXZlbHMgYW5kIHF1ZXN0c1xyXG4gICAgICAgIEdsb2JhbC5MZXZlbERlZmluaXRpb25zID0gUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1tcImFzc2V0cy9sZXZlbHMuanNvblwiXS5kYXRhO1xyXG4gICAgICAgIHZhciBxdWVzdHNPYmogPSBQSVhJLkxvYWRlci5zaGFyZWQucmVzb3VyY2VzW1wiYXNzZXRzL3F1ZXN0cy5qc29uXCJdLmRhdGE7XHJcbiAgICAgICAgR2xvYmFsLkxldmVsRGVmaW5pdGlvbnMucXVlc3RzID0gcXVlc3RzT2JqLnF1ZXN0cyBhcyBBcnJheTxRdWVzdD47XHJcbiAgICAgICAgR2xvYmFsLkxldmVsRGVmaW5pdGlvbnMucXVlc3RzLmZvckVhY2goKHE6IFF1ZXN0KSA9PiB7XHJcbiAgICAgICAgICAgIHEuaXRlbUlkID0gcS5pdGVtSWQgfHwgMDtcclxuICAgICAgICAgICAgcS5pdGVtc05lZWRlZCA9IHEuaXRlbXNOZWVkZWQgfHwgMDtcclxuICAgICAgICAgICAgcS5pdGVtc0NvbGxlY3RlZCA9IDA7XHJcbiAgICAgICAgICAgIHEucmV3YXJkQ29pbnMgPSBxLnJld2FyZENvaW5zIHx8IDA7XHJcbiAgICAgICAgICAgIHEucmV3YXJkRXhwID0gcS5yZXdhcmRFeHAgfHwgMDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbHMgPSBuZXcgTG9hZGVyU2NlbmUodGhpcy5zY2VuZU1hbmFnZXIpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkFkZFNjZW5lKGxzKTtcclxuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5BY3RpdmF0ZVNjZW5lKGxzKTsgXHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBRUE7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUE1RUE7O0FBQ0E7QUE0RUE7QUFBQTtBQW5GQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scenes/BootScene.ts\n");

/***/ }),

/***/ "./scenes/CutScene.ts":
/*!****************************!*\
  !*** ./scenes/CutScene.ts ***!
  \****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar SoundMan_1 = __webpack_require__(/*! ../world/SoundMan */ \"./world/SoundMan.ts\");\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./constants.ts\");\r\nvar CutScene = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CutScene, _super);\r\n    function CutScene(sceneManager) {\r\n        var _this = _super.call(this, \"CutScene\") || this;\r\n        _this.sceneManager = sceneManager;\r\n        _this.deathScene = false;\r\n        _this.onActivate = function () {\r\n            _this.btnContinue.visible = !_this.deathScene;\r\n            _this.callout.visible = !_this.deathScene;\r\n            _this.corpse.visible = _this.deathScene;\r\n            _this.corpse.scale.set(0.1);\r\n            _this.btnContinue.text.text = _this.deathScene ? \"Retry\" : \"Continue\";\r\n            if (_this.deathScene) {\r\n                var deathTrackId = SoundMan_1.snd.getTrack(\"Carrousel\");\r\n                SoundMan_1.snd.playTrack(deathTrackId);\r\n            }\r\n        };\r\n        _this.deathMessages = [\r\n            \"Life sucks and you just died!\",\r\n            \"You decided to check the afterlife.\\nGuess what? You are dead!\",\r\n            \"Owned!\\nMore luck next time.\",\r\n            \"You have died!\\nRest in peace.\",\r\n            \"Your quest has failed.\\nMay you find more peace in\\nthat world than you found in this one.\",\r\n            \"Here's a picture of your corpse.\\nNot pretty!\",\r\n            \"Yep, you're dead.\\nMaybe you should consider\\nplaying a Barbie game!\",\r\n            \"Died...\"\r\n        ];\r\n        _this.BackGroundColor = 0x1099bb;\r\n        _this.corpse = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/objects-atlas.json@hero-dead.png\"));\r\n        _this.corpse.anchor.set(0.5);\r\n        _this.corpse.pivot.set(0.5);\r\n        _this.corpse.position.set(__1.SCENE_HALF_WIDTH, __1.SCENE_HALF_HEIGHT);\r\n        _this.addChild(_this.corpse);\r\n        _this.corpseBlurFilter = new __1.PIXI.filters.BlurFilter();\r\n        _this.corpse.filters = [_this.corpseBlurFilter];\r\n        _this.callout = new __1.PIXI.Sprite(__1.TextureLoader.Get(\"assets/gui-atlas.json@rect.png\"));\r\n        _this.callout.anchor.set(0.5);\r\n        _this.callout.position.set(__1.SCENE_HALF_WIDTH, __1.SCENE_HEIGHT / 5);\r\n        _this.addChild(_this.callout);\r\n        _this.textMessage = new __1.PIXI.BitmapText(\"\", constants_1.QUEST_STYLE);\r\n        _this.textMessage.anchor.set(0.5);\r\n        _this.textMessage.position.set(0, 0);\r\n        _this.callout.addChild(_this.textMessage);\r\n        //--------------------------------\r\n        //  btn for next level\r\n        //--------------------------------\r\n        _this.btnContinue = new __1.SpriteButton(\"assets/gui-atlas.json@gui_button1.png\", (__1.SCENE_WIDTH - __1.BTN_WIDTH) / 2, _this.callout.height + __1.BTN_HEIGHT, __1.BTN_WIDTH, __1.BTN_HEIGHT);\r\n        _this.btnContinue.text = new __1.PIXI.Text(\"Continue\", __1.BTN_STYLE);\r\n        _this.btnContinue.onClick = function () {\r\n            _this.sceneManager.ActivateScene(\"Loader\");\r\n        };\r\n        _this.addChild(_this.btnContinue);\r\n        return _this;\r\n    }\r\n    CutScene.prototype.onUpdate = function (dt) {\r\n        if (this.deathScene) {\r\n            if (this.corpse.scale.x < 2.5) {\r\n                this.corpse.rotation += 0.03;\r\n                var scale = this.corpse.scale.x + 0.01;\r\n                this.corpse.scale.set(scale);\r\n            }\r\n            else {\r\n                //  death msg & retry btn\r\n                this.deathScene = false;\r\n                this.textMessage.text = this.deathMessages[0 | (Math.random() * this.deathMessages.length)];\r\n                this.callout.visible = true;\r\n                this.btnContinue.visible = true;\r\n            }\r\n        }\r\n        else {\r\n            this.corpse.rotation += 0.005;\r\n        }\r\n        var blr = Math.max(5, this.corpseBlurFilter.blur + 0.00004);\r\n        this.corpseBlurFilter.blur = blr;\r\n    };\r\n    Object.defineProperty(CutScene.prototype, \"DeathScene\", {\r\n        /**\r\n         * If true the player death scene is played.\r\n         */\r\n        get: function () {\r\n            return this.deathScene;\r\n        },\r\n        set: function (value) {\r\n            this.deathScene = value;\r\n            if (this.deathScene) {\r\n                this.corpseBlurFilter.blur = 0;\r\n                var clm = new __1.PIXI.filters.ColorMatrixFilter();\r\n                clm.sepia(false);\r\n                this.backSprite.filters = [clm];\r\n            }\r\n            else {\r\n                this.backSprite.filters = null;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CutScene.prototype.SetBackGround = function (texture, scale) {\r\n        if (!this.backSprite) {\r\n            this.backSprite = new __1.PIXI.Sprite(texture);\r\n            this.addChildAt(this.backSprite, 0);\r\n        }\r\n        else {\r\n            this.backSprite.texture = texture;\r\n        }\r\n        this.backSprite.scale.set(1 / scale.x, 1 / scale.y); //  rescale to fit full scene\r\n    };\r\n    CutScene.prototype.SetText = function (text) {\r\n        this.textMessage.text = text;\r\n    };\r\n    return CutScene;\r\n}(__1.Scene));\r\nexports.CutScene = CutScene;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY2VuZXMvQ3V0U2NlbmUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY2VuZXMvQ3V0U2NlbmUudHM/YTdmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQSVhJLCBTY2VuZSwgU3ByaXRlQnV0dG9uLCBTY2VuZU1hbmFnZXIsIFNDRU5FX0hBTEZfV0lEVEgsIFNDRU5FX0hBTEZfSEVJR0hULCBTQ0VORV9IRUlHSFQsIEJUTl9XSURUSCwgU0NFTkVfV0lEVEgsIEJUTl9IRUlHSFQsIEJUTl9TVFlMRSwgVGV4dHVyZUxvYWRlciB9IGZyb20gJy4uJztcclxuaW1wb3J0IHsgc25kIH0gZnJvbSBcIi4uL3dvcmxkL1NvdW5kTWFuXCI7XHJcbmltcG9ydCB7IFFVRVNUX1NUWUxFIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDdXRTY2VuZSBleHRlbmRzIFNjZW5lIHtcclxuICAgIHByaXZhdGUgY2FsbG91dDogUElYSS5TcHJpdGU7XHJcbiAgICBwcml2YXRlIHRleHRNZXNzYWdlOiBQSVhJLkJpdG1hcFRleHQ7XHJcbiAgICBwcml2YXRlIGJhY2tTcHJpdGU6IFBJWEkuU3ByaXRlO1xyXG4gICAgcHJpdmF0ZSBkZWF0aFNjZW5lOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNvcnBzZTogUElYSS5TcHJpdGU7XHJcbiAgICBwcml2YXRlIGJ0bkNvbnRpbnVlOiBTcHJpdGVCdXR0b247XHJcblxyXG4gICAgcHJpdmF0ZSBjb3Jwc2VCbHVyRmlsdGVyOiBQSVhJLmZpbHRlcnMuQmx1ckZpbHRlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjZW5lTWFuYWdlcjogU2NlbmVNYW5hZ2VyKSB7XHJcbiAgICAgICAgc3VwZXIoXCJDdXRTY2VuZVwiKTtcclxuICAgICAgICB0aGlzLkJhY2tHcm91bmRDb2xvciA9IDB4MTA5OWJiO1xyXG5cclxuICAgICAgICB0aGlzLmNvcnBzZSA9IG5ldyBQSVhJLlNwcml0ZShUZXh0dXJlTG9hZGVyLkdldChcImFzc2V0cy9vYmplY3RzLWF0bGFzLmpzb25AaGVyby1kZWFkLnBuZ1wiKSk7XHJcbiAgICAgICAgdGhpcy5jb3Jwc2UuYW5jaG9yLnNldCgwLjUpO1xyXG4gICAgICAgIHRoaXMuY29ycHNlLnBpdm90LnNldCgwLjUpO1xyXG4gICAgICAgIHRoaXMuY29ycHNlLnBvc2l0aW9uLnNldChTQ0VORV9IQUxGX1dJRFRILCBTQ0VORV9IQUxGX0hFSUdIVCk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLmNvcnBzZSk7XHJcblxyXG4gICAgICAgIHRoaXMuY29ycHNlQmx1ckZpbHRlciA9IG5ldyBQSVhJLmZpbHRlcnMuQmx1ckZpbHRlcigpO1xyXG4gICAgICAgIHRoaXMuY29ycHNlLmZpbHRlcnMgPSBbdGhpcy5jb3Jwc2VCbHVyRmlsdGVyXTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuY2FsbG91dCA9IG5ldyBQSVhJLlNwcml0ZShUZXh0dXJlTG9hZGVyLkdldChcImFzc2V0cy9ndWktYXRsYXMuanNvbkByZWN0LnBuZ1wiKSk7XHJcbiAgICAgICAgdGhpcy5jYWxsb3V0LmFuY2hvci5zZXQoMC41KTtcclxuICAgICAgICB0aGlzLmNhbGxvdXQucG9zaXRpb24uc2V0KFNDRU5FX0hBTEZfV0lEVEgsIFNDRU5FX0hFSUdIVCAvIDUpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5jYWxsb3V0KTtcclxuXHJcbiAgICAgICAgdGhpcy50ZXh0TWVzc2FnZSA9IG5ldyBQSVhJLkJpdG1hcFRleHQoXCJcIiwgUVVFU1RfU1RZTEUpO1xyXG4gICAgICAgICh0aGlzLnRleHRNZXNzYWdlLmFuY2hvciBhcyBhbnkpLnNldCgwLjUpO1xyXG4gICAgICAgIHRoaXMudGV4dE1lc3NhZ2UucG9zaXRpb24uc2V0KDAsIDApO1xyXG4gICAgICAgIHRoaXMuY2FsbG91dC5hZGRDaGlsZCh0aGlzLnRleHRNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICBidG4gZm9yIG5leHQgbGV2ZWxcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgdGhpcy5idG5Db250aW51ZSA9IG5ldyBTcHJpdGVCdXR0b24oICBcImFzc2V0cy9ndWktYXRsYXMuanNvbkBndWlfYnV0dG9uMS5wbmdcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTQ0VORV9XSURUSCAtIEJUTl9XSURUSCkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsb3V0LmhlaWdodCArIEJUTl9IRUlHSFQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVE5fV0lEVEgsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQlROX0hFSUdIVCk7XHJcbiAgICAgICAgdGhpcy5idG5Db250aW51ZS50ZXh0ID0gbmV3IFBJWEkuVGV4dChcIkNvbnRpbnVlXCIsIEJUTl9TVFlMRSk7XHJcbiAgICAgICAgdGhpcy5idG5Db250aW51ZS5vbkNsaWNrID0gKCkgPT4geyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5BY3RpdmF0ZVNjZW5lKFwiTG9hZGVyXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLmJ0bkNvbnRpbnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BY3RpdmF0ZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmJ0bkNvbnRpbnVlLnZpc2libGUgPSAhdGhpcy5kZWF0aFNjZW5lO1xyXG4gICAgICAgIHRoaXMuY2FsbG91dC52aXNpYmxlID0gIXRoaXMuZGVhdGhTY2VuZTtcclxuICAgICAgICB0aGlzLmNvcnBzZS52aXNpYmxlID0gdGhpcy5kZWF0aFNjZW5lO1xyXG4gICAgICAgIHRoaXMuY29ycHNlLnNjYWxlLnNldCgwLjEpO1xyXG4gICAgICAgIHRoaXMuYnRuQ29udGludWUudGV4dC50ZXh0ID0gdGhpcy5kZWF0aFNjZW5lID8gXCJSZXRyeVwiIDogXCJDb250aW51ZVwiO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kZWF0aFNjZW5lKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWF0aFRyYWNrSWQgPSBzbmQuZ2V0VHJhY2soXCJDYXJyb3VzZWxcIik7XHJcbiAgICAgICAgICAgIHNuZC5wbGF5VHJhY2soZGVhdGhUcmFja0lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uVXBkYXRlKGR0OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWF0aFNjZW5lKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvcnBzZS5zY2FsZS54IDwgMi41KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnBzZS5yb3RhdGlvbiArPSAwLjAzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5jb3Jwc2Uuc2NhbGUueCArIDAuMDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvcnBzZS5zY2FsZS5zZXQoc2NhbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gIGRlYXRoIG1zZyAmIHJldHJ5IGJ0blxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWF0aFNjZW5lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRNZXNzYWdlLnRleHQgPSB0aGlzLmRlYXRoTWVzc2FnZXNbMCB8IChNYXRoLnJhbmRvbSgpICogdGhpcy5kZWF0aE1lc3NhZ2VzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsb3V0LnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5Db250aW51ZS52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ycHNlLnJvdGF0aW9uICs9IDAuMDA1OyAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYmxyID0gTWF0aC5tYXgoNSwgdGhpcy5jb3Jwc2VCbHVyRmlsdGVyLmJsdXIgKyAwLjAwMDA0KTtcclxuICAgICAgICB0aGlzLmNvcnBzZUJsdXJGaWx0ZXIuYmx1ciA9IGJscjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHRydWUgdGhlIHBsYXllciBkZWF0aCBzY2VuZSBpcyBwbGF5ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgRGVhdGhTY2VuZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWF0aFNjZW5lO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBEZWF0aFNjZW5lKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5kZWF0aFNjZW5lID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVhdGhTY2VuZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvcnBzZUJsdXJGaWx0ZXIuYmx1ciA9IDA7XHJcbiAgICAgICAgICAgIHZhciBjbG0gPSBuZXcgUElYSS5maWx0ZXJzLkNvbG9yTWF0cml4RmlsdGVyKCk7XHJcbiAgICAgICAgICAgIGNsbS5zZXBpYShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja1Nwcml0ZS5maWx0ZXJzID0gW2NsbV07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrU3ByaXRlLmZpbHRlcnMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIFNldEJhY2tHcm91bmQodGV4dHVyZTogUElYSS5SZW5kZXJUZXh0dXJlLCBzY2FsZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5iYWNrU3ByaXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja1Nwcml0ZSA9IG5ldyBQSVhJLlNwcml0ZSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZEF0KHRoaXMuYmFja1Nwcml0ZSwgMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrU3ByaXRlLnRleHR1cmUgPSB0ZXh0dXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJhY2tTcHJpdGUuc2NhbGUuc2V0KDEgLyBzY2FsZS54LCAxIC8gc2NhbGUueSk7ICAvLyAgcmVzY2FsZSB0byBmaXQgZnVsbCBzY2VuZVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBTZXRUZXh0KHRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMudGV4dE1lc3NhZ2UudGV4dCA9IHRleHQ7ICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVhdGhNZXNzYWdlczogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgXCJMaWZlIHN1Y2tzIGFuZCB5b3UganVzdCBkaWVkIVwiLFxyXG4gICAgICAgIFwiWW91IGRlY2lkZWQgdG8gY2hlY2sgdGhlIGFmdGVybGlmZS5cXG5HdWVzcyB3aGF0PyBZb3UgYXJlIGRlYWQhXCIsXHJcbiAgICAgICAgXCJPd25lZCFcXG5Nb3JlIGx1Y2sgbmV4dCB0aW1lLlwiLFxyXG4gICAgICAgIFwiWW91IGhhdmUgZGllZCFcXG5SZXN0IGluIHBlYWNlLlwiLFxyXG4gICAgICAgIFwiWW91ciBxdWVzdCBoYXMgZmFpbGVkLlxcbk1heSB5b3UgZmluZCBtb3JlIHBlYWNlIGluXFxudGhhdCB3b3JsZCB0aGFuIHlvdSBmb3VuZCBpbiB0aGlzIG9uZS5cIixcclxuICAgICAgICBcIkhlcmUncyBhIHBpY3R1cmUgb2YgeW91ciBjb3Jwc2UuXFxuTm90IHByZXR0eSFcIixcclxuICAgICAgICBcIlllcCwgeW91J3JlIGRlYWQuXFxuTWF5YmUgeW91IHNob3VsZCBjb25zaWRlclxcbnBsYXlpbmcgYSBCYXJiaWUgZ2FtZSFcIixcclxuICAgICAgICBcIkRpZWQuLi5cIlxyXG4gICAgXTtcclxufSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQVVBO0FBQUE7QUFBQTtBQU5BO0FBNkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqSEE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBWUE7QUFBQTtBQTlIQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scenes/CutScene.ts\n");

/***/ }),

/***/ "./scenes/LoaderScene.ts":
/*!*******************************!*\
  !*** ./scenes/LoaderScene.ts ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar LevelHelper_1 = __webpack_require__(/*! ../world/LevelHelper */ \"./world/LevelHelper.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ../objects/PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./constants.ts\");\r\nvar MasterHud_1 = __webpack_require__(/*! ../objects/MasterHud */ \"./objects/MasterHud.ts\");\r\nvar MainScene_1 = __webpack_require__(/*! ./MainScene */ \"./scenes/MainScene.ts\");\r\nvar OptionsScene_1 = __webpack_require__(/*! ./OptionsScene */ \"./scenes/OptionsScene.ts\");\r\nvar CutScene_1 = __webpack_require__(/*! ./CutScene */ \"./scenes/CutScene.ts\");\r\nvar LoaderScene = /** @class */ (function (_super) {\r\n    tslib_1.__extends(LoaderScene, _super);\r\n    function LoaderScene(sceneManager) {\r\n        var _this = _super.call(this, \"Loader\") || this;\r\n        _this.sceneManager = sceneManager;\r\n        _this.preloadAssets = [\r\n            'assets/gui-atlas.json',\r\n            'assets/objects-atlas.json',\r\n            'assets/entities-atlas.json',\r\n            'assets/background-atlas.json',\r\n        ];\r\n        _this.onUpdate = function (dt) {\r\n            if (_this.spinner) {\r\n                _this.spinner.rotation += 0.05;\r\n            }\r\n        };\r\n        _this.onActivate = function () {\r\n            console.log(\"downloading level \" + PlayerStats_1.stats.currentGameLevel + \"...\");\r\n            var assets = LevelHelper_1.GetLevelAssets(__1.Global.LevelDefinitions, PlayerStats_1.stats.currentGameLevel);\r\n            assets = assets.concat(_this.preloadAssets, 'assets/font/orbitron.fnt', 'assets/font/orbitron_outline.fnt', 'assets/font/bauhaus.fnt');\r\n            assets = LevelHelper_1.getUniqueItems(assets);\r\n            __1.PIXI.Loader.shared\r\n                .reset()\r\n                .add(assets)\r\n                .load(_this.handleLevelLoading)\r\n                .on(\"progress\", _this.onProgress);\r\n        };\r\n        _this.handleLevelLoading = function () {\r\n            if (!_this.sceneManager.HasScene(\"Main\")) {\r\n                console.log('adding scenes...');\r\n                _this.sceneManager.AddScene(new MainScene_1.MainScene(_this.sceneManager));\r\n                _this.sceneManager.AddScene(new OptionsScene_1.OptionsScene(_this.sceneManager));\r\n                _this.sceneManager.AddScene(new CutScene_1.CutScene(_this.sceneManager));\r\n                _this.sceneManager.MasterHudOverlay = new MasterHud_1.MasterHud(_this.sceneManager);\r\n                ;\r\n            }\r\n            try {\r\n                var mainScene_1 = _this.sceneManager.GetScene(\"Main\");\r\n                setTimeout(function () {\r\n                    mainScene_1.startLevel();\r\n                }, 200);\r\n            }\r\n            catch (e) {\r\n                console.log(\"exception: \", e);\r\n            }\r\n        };\r\n        _this.onProgress = function (loader, resource) {\r\n            var progress = loader.progress;\r\n            console.log(\"progress: \" + progress.toFixed(0) + \"%, asset: \" + resource.name);\r\n            _this.loadingMessage.text = \"Loading \" + progress.toFixed(0) + \" %\";\r\n        };\r\n        _this.BackGroundColor = 0;\r\n        _this.loadingMessage = new __1.PIXI.Text(\"loading ...\", {\r\n            fontSize: 36,\r\n            fontFamily: \"Permanent Marker\",\r\n            fill: 0x0ff00,\r\n            dropShadow: true,\r\n            align: \"center\",\r\n            stroke: 0x44ff44,\r\n            strokeThickness: 1\r\n        });\r\n        _this.loadingMessage.anchor.set(0.5, 0.5);\r\n        _this.loadingMessage.position.set(constants_1.SCENE_HALF_WIDTH, constants_1.SCENE_HALF_HEIGHT - 80);\r\n        _this.addChild(_this.loadingMessage);\r\n        var loadingTexture = __1.PIXI.Texture.from(\"assets/loading.png\");\r\n        _this.spinner = new __1.PIXI.Sprite(loadingTexture);\r\n        _this.spinner.position.set(constants_1.SCENE_HALF_WIDTH, constants_1.SCENE_HALF_HEIGHT);\r\n        _this.spinner.anchor.set(0.5, 0.5);\r\n        _this.spinner.scale.set(0.5);\r\n        _this.addChild(_this.spinner);\r\n        return _this;\r\n    }\r\n    return LoaderScene;\r\n}(__1.Scene));\r\nexports.LoaderScene = LoaderScene;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY2VuZXMvTG9hZGVyU2NlbmUudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY2VuZXMvTG9hZGVyU2NlbmUudHM/MDYxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHbG9iYWwsIFBJWEksIFNjZW5lLCBTY2VuZU1hbmFnZXIgfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgR2V0TGV2ZWxBc3NldHMsIGdldFVuaXF1ZUl0ZW1zIH0gZnJvbSAnLi4vd29ybGQvTGV2ZWxIZWxwZXInO1xyXG5pbXBvcnQgeyBzdGF0cyB9IGZyb20gJy4uL29iamVjdHMvUGxheWVyU3RhdHMnO1xyXG5pbXBvcnQgeyBTQ0VORV9IQUxGX1dJRFRILCBTQ0VORV9IQUxGX0hFSUdIVCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IE1hc3Rlckh1ZCB9IGZyb20gJy4uL29iamVjdHMvTWFzdGVySHVkJztcclxuaW1wb3J0IHsgTWFpblNjZW5lIH0gZnJvbSAnLi9NYWluU2NlbmUnO1xyXG5pbXBvcnQgeyBPcHRpb25zU2NlbmUgfSBmcm9tICcuL09wdGlvbnNTY2VuZSc7XHJcbmltcG9ydCB7IEN1dFNjZW5lIH0gZnJvbSAnLi9DdXRTY2VuZSc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIExvYWRlclNjZW5lIGV4dGVuZHMgU2NlbmUge1xyXG4gICAgcHJpdmF0ZSBsb2FkaW5nTWVzc2FnZTogUElYSS5UZXh0O1xyXG4gICAgcHJpdmF0ZSBzcGlubmVyOiBQSVhJLlNwcml0ZTtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHByZWxvYWRBc3NldHMgOiBzdHJpbmdbXSA9IFsgIFxyXG4gICAgICAgICdhc3NldHMvZ3VpLWF0bGFzLmpzb24nLCBcclxuICAgICAgICAnYXNzZXRzL29iamVjdHMtYXRsYXMuanNvbicsXHJcbiAgICAgICAgJ2Fzc2V0cy9lbnRpdGllcy1hdGxhcy5qc29uJyxcclxuICAgICAgICAnYXNzZXRzL2JhY2tncm91bmQtYXRsYXMuanNvbicsICAgICBcclxuICAgIF07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY2VuZU1hbmFnZXI6U2NlbmVNYW5hZ2VyKSB7XHJcbiAgICAgICAgc3VwZXIoXCJMb2FkZXJcIik7XHJcbiAgICAgICAgdGhpcy5CYWNrR3JvdW5kQ29sb3IgPSAwO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ01lc3NhZ2UgPSBuZXcgUElYSS5UZXh0KFwibG9hZGluZyAuLi5cIiwgeyBcclxuICAgICAgICAgICAgZm9udFNpemU6IDM2LCBcclxuICAgICAgICAgICAgZm9udEZhbWlseTogXCJQZXJtYW5lbnQgTWFya2VyXCIsIFxyXG4gICAgICAgICAgICBmaWxsOiAweDBmZjAwLCBcclxuICAgICAgICAgICAgZHJvcFNoYWRvdzogdHJ1ZSwgXHJcbiAgICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICBzdHJva2U6IDB4NDRmZjQ0LCBcclxuICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nTWVzc2FnZS5hbmNob3Iuc2V0KDAuNSwgMC41KTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdNZXNzYWdlLnBvc2l0aW9uLnNldChTQ0VORV9IQUxGX1dJRFRILCBTQ0VORV9IQUxGX0hFSUdIVCAtIDgwKTtcclxuICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMubG9hZGluZ01lc3NhZ2UpO1xyXG5cclxuICAgICAgICB2YXIgbG9hZGluZ1RleHR1cmUgPSBQSVhJLlRleHR1cmUuZnJvbShcImFzc2V0cy9sb2FkaW5nLnBuZ1wiKTtcclxuICAgICAgICB0aGlzLnNwaW5uZXIgPSBuZXcgUElYSS5TcHJpdGUobG9hZGluZ1RleHR1cmUpO1xyXG4gICAgICAgIHRoaXMuc3Bpbm5lci5wb3NpdGlvbi5zZXQoU0NFTkVfSEFMRl9XSURUSCwgU0NFTkVfSEFMRl9IRUlHSFQpO1xyXG4gICAgICAgIHRoaXMuc3Bpbm5lci5hbmNob3Iuc2V0KDAuNSwgMC41KTtcclxuICAgICAgICB0aGlzLnNwaW5uZXIuc2NhbGUuc2V0KDAuNSk7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnNwaW5uZXIpOyBcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25VcGRhdGUgPSAoZHQ6IG51bWJlcik9PntcclxuICAgICAgICBpZiAodGhpcy5zcGlubmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3Bpbm5lci5yb3RhdGlvbiArPSAwLjA1O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BY3RpdmF0ZSA9ICgpID0+IHsgICBcclxuICAgICAgICBjb25zb2xlLmxvZyhgZG93bmxvYWRpbmcgbGV2ZWwgJHtzdGF0cy5jdXJyZW50R2FtZUxldmVsfS4uLmApO1xyXG4gICAgICAgIGxldCBhc3NldHM6IHN0cmluZ1tdID0gR2V0TGV2ZWxBc3NldHMoR2xvYmFsLkxldmVsRGVmaW5pdGlvbnMsIHN0YXRzLmN1cnJlbnRHYW1lTGV2ZWwpO1xyXG4gICAgICAgIGFzc2V0cyA9IGFzc2V0cy5jb25jYXQodGhpcy5wcmVsb2FkQXNzZXRzLCAnYXNzZXRzL2ZvbnQvb3JiaXRyb24uZm50JywgJ2Fzc2V0cy9mb250L29yYml0cm9uX291dGxpbmUuZm50JywnYXNzZXRzL2ZvbnQvYmF1aGF1cy5mbnQnKTtcclxuICAgICAgICBhc3NldHMgPSBnZXRVbmlxdWVJdGVtcyhhc3NldHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFBJWEkuTG9hZGVyLnNoYXJlZFxyXG4gICAgICAgICAgICAucmVzZXQoKVxyXG4gICAgICAgICAgICAuYWRkKGFzc2V0cylcclxuICAgICAgICAgICAgLmxvYWQodGhpcy5oYW5kbGVMZXZlbExvYWRpbmcpXHJcbiAgICAgICAgICAgIC5vbihcInByb2dyZXNzXCIsIHRoaXMub25Qcm9ncmVzcyk7XHJcbiAgICB9O1xyXG4gICBcclxuICAgIHByaXZhdGUgaGFuZGxlTGV2ZWxMb2FkaW5nID0gKCk9PiB7ICAgICAgICBcclxuICAgICAgICBpZighdGhpcy5zY2VuZU1hbmFnZXIuSGFzU2NlbmUoXCJNYWluXCIpKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZGluZyBzY2VuZXMuLi4nKTsgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkFkZFNjZW5lKG5ldyBNYWluU2NlbmUodGhpcy5zY2VuZU1hbmFnZXIpKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuQWRkU2NlbmUobmV3IE9wdGlvbnNTY2VuZSh0aGlzLnNjZW5lTWFuYWdlcikpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5BZGRTY2VuZShuZXcgQ3V0U2NlbmUodGhpcy5zY2VuZU1hbmFnZXIpKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuTWFzdGVySHVkT3ZlcmxheSA9IG5ldyBNYXN0ZXJIdWQodGhpcy5zY2VuZU1hbmFnZXIpOztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBtYWluU2NlbmUgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRTY2VuZShcIk1haW5cIikgYXMgTWFpblNjZW5lO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIG1haW5TY2VuZS5zdGFydExldmVsKCk7XHJcbiAgICAgICAgICAgIH0sIDIwMCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImV4Y2VwdGlvbjogXCIsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHByaXZhdGUgb25Qcm9ncmVzcyA9IChsb2FkZXI6IFBJWEkuTG9hZGVyLCByZXNvdXJjZTogUElYSS5Mb2FkZXJSZXNvdXJjZSkgPT4ge1xyXG4gICAgICAgIHZhciBwcm9ncmVzcyA9IGxvYWRlci5wcm9ncmVzcztcclxuICAgICAgICBjb25zb2xlLmxvZyhcInByb2dyZXNzOiBcIiArIHByb2dyZXNzLnRvRml4ZWQoMCkgKyBcIiUsIGFzc2V0OiBcIiArIHJlc291cmNlLm5hbWUpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ01lc3NhZ2UudGV4dCA9IFwiTG9hZGluZyBcIiArIHByb2dyZXNzLnRvRml4ZWQoMCkgKyBcIiAlXCI7XHJcbiAgICB9O1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQVdBO0FBQUE7QUFBQTtBQVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQThDQTtBQUFBO0FBL0VBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scenes/LoaderScene.ts\n");

/***/ }),

/***/ "./scenes/MainScene.ts":
/*!*****************************!*\
  !*** ./scenes/MainScene.ts ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar p2 = __webpack_require__(/*! p2 */ \"./node_modules/p2/src/p2.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar WorldP2_1 = __webpack_require__(/*! ../world/WorldP2 */ \"./world/WorldP2.ts\");\r\nvar HeroCharacter_1 = __webpack_require__(/*! ../objects/HeroCharacter */ \"./objects/HeroCharacter.ts\");\r\nvar StatsHud_1 = __webpack_require__(/*! ../objects/StatsHud */ \"./objects/StatsHud.ts\");\r\nvar PlayerStats_1 = __webpack_require__(/*! ../objects/PlayerStats */ \"./objects/PlayerStats.ts\");\r\nvar Bullet_1 = __webpack_require__(/*! ../objects/Bullet */ \"./objects/Bullet.ts\");\r\nvar events_1 = __webpack_require__(/*! ../events */ \"./events.ts\");\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./constants.ts\");\r\nvar Lava_1 = __webpack_require__(/*! ../objects/Lava */ \"./objects/Lava.ts\");\r\nvar LevelLoader_1 = __webpack_require__(/*! ../world/LevelLoader */ \"./world/LevelLoader.ts\");\r\nvar Platform_1 = __webpack_require__(/*! ../objects/Platform */ \"./objects/Platform.ts\");\r\nvar Bumper_1 = __webpack_require__(/*! ../objects/Bumper */ \"./objects/Bumper.ts\");\r\nvar SoundMan_1 = __webpack_require__(/*! ../world/SoundMan */ \"./world/SoundMan.ts\");\r\nvar QuestManager_1 = __webpack_require__(/*! ../questSystem/QuestManager */ \"./questSystem/QuestManager.ts\");\r\nvar enums_1 = __webpack_require__(/*! ../enums */ \"./enums.ts\");\r\nvar MainScene = /** @class */ (function (_super) {\r\n    tslib_1.__extends(MainScene, _super);\r\n    function MainScene(sceneManager) {\r\n        var _this = _super.call(this, \"Main\") || this;\r\n        _this.sceneManager = sceneManager;\r\n        _this.shakeDuration = 0;\r\n        _this.shakeEnd = 0;\r\n        _this.nextShake = 0;\r\n        _this.magnitude = 0;\r\n        _this.SHAKE_COUNT = 15;\r\n        _this.startGroundShake = function (event) {\r\n            _this.shakeEnd = performance.now() + event.milliSeconds;\r\n            _this.magnitude = event.magnitudeInPixels;\r\n            _this.shakeDuration = event.milliSeconds / _this.SHAKE_COUNT;\r\n        };\r\n        _this.BackGroundColor = constants_1.SCENE_BACKCOLOR;\r\n        _this.setup();\r\n        return _this;\r\n    }\r\n    MainScene.prototype.onUpdate = function (dt, timestamp) {\r\n        //-------------------------------------------\r\n        //  update world & world container position\r\n        //-------------------------------------------        \r\n        WorldP2_1.wp2.update(dt);\r\n        this.worldContainer.x = (constants_1.SCENE_HALF_WIDTH - this.hero.x);\r\n        this.worldContainer.y = (constants_1.SCENE_HEIGHT - 70);\r\n        __1.TWEEN.update();\r\n        //-------------------------------------------\r\n        //  update parallax\r\n        //-------------------------------------------\r\n        PlayerStats_1.stats.currentLevel.parallax.forEach(function (p) {\r\n            p.SetViewPortX(__1.Global.position.x);\r\n            p.position.x = __1.Global.position.x - constants_1.SCENE_HALF_WIDTH;\r\n        });\r\n        //-------------------------------------------\r\n        //  update entities position\r\n        //-------------------------------------------\r\n        var bodies = WorldP2_1.wp2.bodies;\r\n        for (var i = 0, len = bodies.length; i < len; i++) {\r\n            var body = bodies[i];\r\n            var displayObject = body.DisplayObject;\r\n            if (displayObject && displayObject.visible && body.type !== p2.Body.STATIC) {\r\n                displayObject.position.set(Math.floor(body.interpolatedPosition[0]), Math.floor(body.interpolatedPosition[1]));\r\n                displayObject.rotation = body.interpolatedAngle;\r\n            }\r\n            if (body.Trigger && body.Trigger.type === \"distance\") {\r\n                if (this.questMngr.canActivateTrigger(body.Trigger)) {\r\n                    var x = this.hero.position.x - body.position[0];\r\n                    var y = this.hero.position.y - body.position[1];\r\n                    var distance = Math.sqrt(x * x + y * y);\r\n                    if (body.Trigger.distance >= distance) {\r\n                        this.questMngr.handleTriggerEvent(body);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //-------------------------------------------\r\n        //  collisions with collectible items\r\n        //-------------------------------------------\r\n        for (var i = 0, len = WorldP2_1.wp2.playerContacts.length; i < len; i++) {\r\n            var body = WorldP2_1.wp2.playerContacts[i];\r\n            if (body.DisplayObject && body.DisplayObject.interactionType) {\r\n                this.handleInteractiveCollision(body);\r\n            }\r\n            if (body.Trigger && body.Trigger.type === \"collision\") {\r\n                this.questMngr.handleTriggerEvent(body);\r\n            }\r\n        }\r\n        //-------------------------------------------\r\n        //  invoke update on each updateable\r\n        //-------------------------------------------\r\n        for (var i = 0, len = this.worldContainer.children.length; i < len; i++) {\r\n            var child = this.worldContainer.children[i];\r\n            if (child && child.onUpdate) {\r\n                child.onUpdate(dt);\r\n            }\r\n        }\r\n        ;\r\n        //-------------------------------------------\r\n        //  Spawn points\r\n        //-------------------------------------------\r\n        for (var i = 0, len = PlayerStats_1.stats.currentLevel.spawnPoints.length; i < len; i++) {\r\n            PlayerStats_1.stats.currentLevel.spawnPoints[i].onUpdate(dt);\r\n        }\r\n        this.hud.onUpdate(dt);\r\n        PlayerStats_1.stats.onUpdate(dt);\r\n        var now = performance.now();\r\n        //-------------------------------------------\r\n        //  check if player is dead\r\n        //-------------------------------------------\r\n        if (PlayerStats_1.stats.getStat(enums_1.StatType.HP) <= 0) {\r\n            this.IsHeroInteractive = false;\r\n            this.hero.visible = false;\r\n            var cutScene = this.sceneManager.GetScene(\"CutScene\");\r\n            var backGroundTexture = this.sceneManager.CaptureScene();\r\n            cutScene.SetBackGround(backGroundTexture, this.scale);\r\n            cutScene.DeathScene = true;\r\n            this.sceneManager.ActivateScene(cutScene);\r\n        }\r\n        else if (this.shakeEnd >= now) {\r\n            if (this.nextShake <= now) {\r\n                //  original start position\r\n                var x = (constants_1.SCENE_HALF_WIDTH - this.hero.x);\r\n                var y = (constants_1.SCENE_HEIGHT - 70);\r\n                this.shakeX = x + this.randomRange(-this.magnitude / 2, this.magnitude / 2);\r\n                this.shakeY = y + this.randomRange(-this.magnitude, this.magnitude);\r\n                //console.log(\"shake: \" + this.shakeX + \", \" + this.shakeY, this.magnitude, this.shakeEnd);\r\n                //  reduce for next shake\r\n                this.magnitude -= this.magnitude / this.SHAKE_COUNT;\r\n                this.nextShake = now + this.shakeDuration;\r\n            }\r\n            this.worldContainer.x = this.shakeX;\r\n            this.worldContainer.y = this.shakeY;\r\n        }\r\n    };\r\n    MainScene.prototype.setup = function () {\r\n        this.worldContainer = new __1.PIXI.Container();\r\n        this.worldContainer.scale.y = -1;\r\n        this.addChild(this.worldContainer);\r\n        __1.Global.worldContainer = this.worldContainer;\r\n        //-----------------------------\r\n        //  setup hero \r\n        //-----------------------------     \r\n        this.hero = new HeroCharacter_1.HeroCharacter(this.worldContainer);\r\n        this.hero.name = \"hero\";\r\n        this.hero.x = constants_1.SCENE_HALF_WIDTH;\r\n        this.worldContainer.addChild(this.hero);\r\n        this.hero.play(\"idle\", constants_1.ANIMATION_FPS_SLOW);\r\n        //--------------------------------------\r\n        //  setup hud's\r\n        //--------------------------------------\r\n        this.hud = new StatsHud_1.StatsHud();\r\n        this.HudOverlay = this.hud;\r\n        //--------------------------------------\r\n        //  register custom entity factories\r\n        //--------------------------------------\r\n        LevelLoader_1.LevelLoader.registerFactory(\"Lava\", function (def) { return new Lava_1.Lava(def.texture); });\r\n        LevelLoader_1.LevelLoader.registerFactory(\"Platform\", function (def) {\r\n            if (typeof def.texture === \"string\") {\r\n                return new Platform_1.Platform(def.tilesX || 1, 1, [def.texture]);\r\n            }\r\n            else {\r\n                return new Platform_1.Platform(def.tilesX || 1, def.tilesY || 1, def.texture);\r\n            }\r\n        });\r\n        LevelLoader_1.LevelLoader.registerFactory(\"Bumper\", function (def) { return new Bumper_1.Bumper(); });\r\n        this.questMngr = new QuestManager_1.QuestManager(this);\r\n        events_1.eventEmitter.on(events_1.BURN_TOPIC, function (event) { return event.isBurning ? SoundMan_1.snd.burn() : SoundMan_1.snd.burnStop(); });\r\n        events_1.eventEmitter.on(events_1.GROUND_SHAKE, this.startGroundShake);\r\n    };\r\n    MainScene.prototype.startLevel = function () {\r\n        var _this = this;\r\n        this.clearLevel();\r\n        //--------------------------------------\r\n        //  test level loading\r\n        //  TODO: this should be via user save file\r\n        //--------------------------------------\r\n        PlayerStats_1.stats.loadLevel();\r\n        SoundMan_1.snd.playTrack(PlayerStats_1.stats.currentLevel.audioTrack || 0);\r\n        PlayerStats_1.stats.currentLevel.parallax.forEach(function (plx, idx) {\r\n            _this.worldContainer.addChildAt(plx, idx);\r\n            plx.SetViewPortX(PlayerStats_1.stats.currentLevel.start[0]);\r\n        });\r\n        //--------------------------------------\r\n        //  add all objects from level to scene\r\n        //--------------------------------------\r\n        PlayerStats_1.stats.currentLevel.entities.forEach(function (body) {\r\n            _this.worldContainer.addChild(body.DisplayObject);\r\n            //  if entity is a simple sprite it has a \"fake\" body  \r\n            //  without any shapes, so no need to add it to world\r\n            if (body.shapes && body.shapes.length > 0) {\r\n                WorldP2_1.wp2.addBody(body);\r\n            }\r\n        });\r\n        //  set start for player\r\n        WorldP2_1.wp2.playerBody.position[0] = PlayerStats_1.stats.currentLevel.start[0];\r\n        WorldP2_1.wp2.playerBody.position[1] = PlayerStats_1.stats.currentLevel.start[1];\r\n        this.questMngr.reset();\r\n        this.hero.visible = true;\r\n        this.IsHeroInteractive = true;\r\n        this.hud.visible = true;\r\n        this.sceneManager.ActivateScene(this);\r\n    };\r\n    Object.defineProperty(MainScene.prototype, \"IsHeroInteractive\", {\r\n        /**\r\n         * Sets player interactivity.\r\n         */\r\n        set: function (value) {\r\n            if (this.hero.IsInteractive !== value) {\r\n                this.hero.IsInteractive = value;\r\n                if (!this.hero.IsInteractive) {\r\n                    this.hero.play(\"idle\", constants_1.ANIMATION_FPS_SLOW);\r\n                    SoundMan_1.snd.idle();\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Starts an animation tween and removes the display object & body from scene.\r\n     * @param dispObj\r\n     */\r\n    MainScene.prototype.collectObject = function (body) {\r\n        var _this = this;\r\n        var dispObj = body.DisplayObject;\r\n        var orgScaleX = dispObj.scale.x;\r\n        var upX = dispObj.position.x + 45;\r\n        var upY = dispObj.position.y + 160;\r\n        var endX = dispObj.position.x - constants_1.SCENE_HALF_WIDTH;\r\n        var endY = constants_1.SCENE_HEIGHT;\r\n        var moveUp = new __1.TWEEN.Tween(dispObj.position)\r\n            .to({ x: upX, y: upY }, 150);\r\n        var scale = new __1.TWEEN.Tween(dispObj.scale)\r\n            .to({ x: orgScaleX + 0.5, y: orgScaleX + 0.5 }, 500)\r\n            .easing(__1.TWEEN.Easing.Linear.None);\r\n        var moveAway = new __1.TWEEN.Tween(dispObj.position)\r\n            .to({ x: endX, y: endY }, 2000)\r\n            .easing(__1.TWEEN.Easing.Back.In)\r\n            .onComplete(function () { return _this.worldContainer.removeChild(dispObj); });\r\n        moveUp.chain(scale, moveAway).start();\r\n        this.removeEntity(body);\r\n    };\r\n    /**\r\n     * Handles player collision with interactive objects.\r\n     * @param body\r\n     */\r\n    MainScene.prototype.handleInteractiveCollision = function (body) {\r\n        var dispObj = body.DisplayObject;\r\n        var interactionType = body.DisplayObject.interactionType;\r\n        switch (interactionType) {\r\n            case 1: //  small coin\r\n                PlayerStats_1.stats.increaseStat(enums_1.StatType.Coins, 1);\r\n                this.collectObject(body);\r\n                this.hud.addInfoMessage(dispObj.position, \"+1 coin\", constants_1.MSG_COIN_STYLE, -100);\r\n                SoundMan_1.snd.coin();\r\n                break;\r\n            case 2: //  coin\r\n                PlayerStats_1.stats.increaseStat(enums_1.StatType.Coins, 10);\r\n                this.collectObject(body);\r\n                this.hud.addInfoMessage(dispObj.position, \"+10 coins\", constants_1.MSG_COIN_STYLE, -100);\r\n                SoundMan_1.snd.coin();\r\n                break;\r\n            case 3: //  blue gem\r\n                PlayerStats_1.stats.increaseStat(enums_1.StatType.Coins, 100);\r\n                this.collectObject(body);\r\n                this.hud.addInfoMessage(dispObj.position, \"+100 coins\", constants_1.MSG_COIN_STYLE, -100);\r\n                SoundMan_1.snd.gem();\r\n                break;\r\n            //------------------------------------\r\n            //  QUEST ITEMS 200-999\r\n            //------------------------------------\r\n            case 201: //  kendo knowledge\r\n                this.hud.addInfoMessage(dispObj.position, \"Kendo knowledge acquired!\", constants_1.MSG_COIN_STYLE);\r\n                this.collectObject(body);\r\n                SoundMan_1.snd.questItem();\r\n                this.questMngr.acquireItem(201);\r\n                break;\r\n            case 202: //  KI\r\n                this.hud.addInfoMessage(dispObj.position, \"1 Ki acquired!\", constants_1.MSG_COIN_STYLE);\r\n                this.collectObject(body);\r\n                SoundMan_1.snd.questItem();\r\n                this.questMngr.acquireItem(202);\r\n                //  TODO: quest manager\r\n                break;\r\n            //------------------------------------\r\n            //  OBJECTS DOING DAMAGE 1000-1999\r\n            //------------------------------------\r\n            case enums_1.DamageType.LavaBorder: //  border lava   \r\n                {\r\n                    var now = performance.now() / 1000;\r\n                    if (!PlayerStats_1.stats.buffs[enums_1.DamageType.LavaBorder] || PlayerStats_1.stats.buffs[enums_1.DamageType.LavaBorder] < now) {\r\n                        this.hud.addInfoMessage(dispObj.position, \"Burning\", constants_1.MSG_WARN_STYLE, 100);\r\n                    }\r\n                    PlayerStats_1.stats.buffs[enums_1.DamageType.LavaBorder] = this.secondsFromNow(1);\r\n                }\r\n                break;\r\n            case enums_1.DamageType.Lava: //  lava\r\n                {\r\n                    var now = performance.now() / 1000;\r\n                    if (!PlayerStats_1.stats.buffs[enums_1.DamageType.Lava] || PlayerStats_1.stats.buffs[enums_1.DamageType.Lava] < now) {\r\n                        this.hud.addInfoMessage(dispObj.position, \"Burning\", constants_1.MSG_WARN_STYLE, 100);\r\n                    }\r\n                    PlayerStats_1.stats.buffs[enums_1.DamageType.Lava] = this.secondsFromNow(4);\r\n                }\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Helper that returns time tick value with the given seconds added.\r\n     * @param seconds\r\n     */\r\n    MainScene.prototype.secondsFromNow = function (seconds) {\r\n        var now = performance.now() / 1000;\r\n        now += seconds;\r\n        return now;\r\n    };\r\n    /**\r\n     * Removes an entity from the p2 world and sets its DisplayObject to null.\r\n     * If the removeDisplayObject is true the display object will be also removed from the worldContainer.\r\n     *\r\n     * @param body\r\n     * @param removeDisplayObject\r\n     */\r\n    MainScene.prototype.removeEntity = function (body, removeDisplayObject) {\r\n        if (removeDisplayObject === void 0) { removeDisplayObject = false; }\r\n        WorldP2_1.wp2.removeBody(body);\r\n        if (removeDisplayObject) {\r\n            this.worldContainer.removeChild(body.DisplayObject);\r\n        }\r\n        body.DisplayObject = null;\r\n    };\r\n    MainScene.prototype.clearLevel = function () {\r\n        var _this = this;\r\n        if (PlayerStats_1.stats.currentLevel) {\r\n            PlayerStats_1.stats.currentLevel.parallax.forEach(function (plx, idx) {\r\n                _this.worldContainer.removeChild(plx);\r\n            });\r\n            PlayerStats_1.stats.currentLevel.entities.forEach(function (body) {\r\n                if (body !== WorldP2_1.wp2.playerBody) {\r\n                    _this.worldContainer.removeChild(body.DisplayObject);\r\n                    WorldP2_1.wp2.removeBody(body);\r\n                    body.DisplayObject = null;\r\n                }\r\n            });\r\n            //  now remove all other display objects except hero\r\n            var all = this.worldContainer.children.filter(function (c) { return c.name !== \"hero\"; });\r\n            all.forEach(function (child) {\r\n                _this.worldContainer.removeChild(child);\r\n            });\r\n            WorldP2_1.wp2.clearLevel();\r\n            Bullet_1.Bullet.reset();\r\n        }\r\n    };\r\n    MainScene.prototype.randomRange = function (min, max) {\r\n        return min + (Math.random() * (max - min));\r\n    };\r\n    return MainScene;\r\n}(__1.Scene));\r\nexports.MainScene = MainScene;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY2VuZXMvTWFpblNjZW5lLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2NlbmVzL01haW5TY2VuZS50cz80OTMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHAyIGZyb20gJ3AyJztcclxuaW1wb3J0IHsgUElYSSwgVFdFRU4sIFNjZW5lTWFuYWdlciwgU2NlbmUsIFBhcmFsbGF4LCBHbG9iYWwgfSBmcm9tIFwiLi5cIjtcclxuaW1wb3J0IHsgd3AyIH0gZnJvbSAnLi4vd29ybGQvV29ybGRQMic7XHJcbmltcG9ydCB7IEhlcm9DaGFyYWN0ZXIgfSBmcm9tICcuLi9vYmplY3RzL0hlcm9DaGFyYWN0ZXInO1xyXG5pbXBvcnQgeyBTdGF0c0h1ZCB9IGZyb20gJy4uL29iamVjdHMvU3RhdHNIdWQnO1xyXG5pbXBvcnQgeyBzdGF0cyB9IGZyb20gJy4uL29iamVjdHMvUGxheWVyU3RhdHMnO1xyXG5pbXBvcnQgeyBCdWxsZXQgfSBmcm9tICcuLi9vYmplY3RzL0J1bGxldCc7XHJcbmltcG9ydCB7IEJVUk5fVE9QSUMsIElCdXJuQ2hhbmdlRXZlbnQsIEdST1VORF9TSEFLRSwgZXZlbnRFbWl0dGVyIH0gZnJvbSAnLi4vZXZlbnRzJztcclxuaW1wb3J0IHsgU0NFTkVfSEVJR0hULCBTQ0VORV9IQUxGX1dJRFRILCBTQ0VORV9CQUNLQ09MT1IsIE1TR19DT0lOX1NUWUxFLCBNU0dfV0FSTl9TVFlMRSwgQU5JTUFUSU9OX0ZQU19TTE9XIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcclxuaW1wb3J0IHsgTGF2YSB9IGZyb20gJy4uL29iamVjdHMvTGF2YSc7XHJcbmltcG9ydCB7IExldmVsTG9hZGVyIH0gZnJvbSAnLi4vd29ybGQvTGV2ZWxMb2FkZXInO1xyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJy4uL29iamVjdHMvUGxhdGZvcm0nO1xyXG5pbXBvcnQgeyBCdW1wZXIgfSBmcm9tICcuLi9vYmplY3RzL0J1bXBlcic7XHJcbmltcG9ydCB7IHNuZCB9IGZyb20gJy4uL3dvcmxkL1NvdW5kTWFuJztcclxuaW1wb3J0IHsgQ3V0U2NlbmUgfSBmcm9tICcuL0N1dFNjZW5lJztcclxuaW1wb3J0IHsgUXVlc3RNYW5hZ2VyIH0gZnJvbSAnLi4vcXVlc3RTeXN0ZW0vUXVlc3RNYW5hZ2VyJztcclxuaW1wb3J0IHsgU3RhdFR5cGUsIERhbWFnZVR5cGUgfSBmcm9tICcuLi9lbnVtcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpblNjZW5lIGV4dGVuZHMgU2NlbmUge1xyXG4gICAgcHJpdmF0ZSB3b3JsZENvbnRhaW5lcjogUElYSS5Db250YWluZXI7XHJcbiAgICBwcml2YXRlIGhlcm86IEhlcm9DaGFyYWN0ZXI7XHJcbiAgICBwcml2YXRlIHF1ZXN0TW5nciA6IFF1ZXN0TWFuYWdlcjtcclxuICAgIHByaXZhdGUgaHVkIDogU3RhdHNIdWQ7XHJcblxyXG5cclxuICAgIHByaXZhdGUgc2hha2VEdXJhdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc2hha2VFbmQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIG5leHRTaGFrZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbWFnbml0dWRlOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzaGFrZVg6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc2hha2VZOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IFNIQUtFX0NPVU5UID0gMTU7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY2VuZU1hbmFnZXI6IFNjZW5lTWFuYWdlcikge1xyXG4gICAgICAgIHN1cGVyKFwiTWFpblwiKTtcclxuICAgICAgICB0aGlzLkJhY2tHcm91bmRDb2xvciA9IFNDRU5FX0JBQ0tDT0xPUjtcclxuICAgICAgICB0aGlzLnNldHVwKCk7ICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvblVwZGF0ZShkdDogbnVtYmVyLCB0aW1lc3RhbXA6IG51bWJlcikge1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICB1cGRhdGUgd29ybGQgJiB3b3JsZCBjb250YWluZXIgcG9zaXRpb25cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gICAgICAgIFxyXG4gICAgICAgIHdwMi51cGRhdGUoZHQpO1xyXG4gICAgICAgIHRoaXMud29ybGRDb250YWluZXIueCA9IChTQ0VORV9IQUxGX1dJRFRIIC0gdGhpcy5oZXJvLngpO1xyXG4gICAgICAgIHRoaXMud29ybGRDb250YWluZXIueSA9IChTQ0VORV9IRUlHSFQgLSA3MCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgVFdFRU4udXBkYXRlKCk7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICB1cGRhdGUgcGFyYWxsYXhcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBzdGF0cy5jdXJyZW50TGV2ZWwucGFyYWxsYXguZm9yRWFjaChwID0+IHtcclxuICAgICAgICAgICAgcC5TZXRWaWV3UG9ydFgoR2xvYmFsLnBvc2l0aW9uLngpO1xyXG4gICAgICAgICAgICBwLnBvc2l0aW9uLnggPSBHbG9iYWwucG9zaXRpb24ueCAtIFNDRU5FX0hBTEZfV0lEVEg7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICB1cGRhdGUgZW50aXRpZXMgcG9zaXRpb25cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICB2YXIgYm9kaWVzID0gd3AyLmJvZGllcztcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYm9kaWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBib2R5ID0gYm9kaWVzW2ldIGFzIGFueTtcclxuICAgICAgICAgICAgbGV0IGRpc3BsYXlPYmplY3Q6IFBJWEkuRGlzcGxheU9iamVjdCA9IChib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCBhcyBQSVhJLkRpc3BsYXlPYmplY3Q7XHJcbiAgICAgICAgICAgIGlmIChkaXNwbGF5T2JqZWN0ICYmIGRpc3BsYXlPYmplY3QudmlzaWJsZSAmJiBib2R5LnR5cGUgIT09IHAyLkJvZHkuU1RBVElDKSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5T2JqZWN0LnBvc2l0aW9uLnNldChNYXRoLmZsb29yKGJvZHkuaW50ZXJwb2xhdGVkUG9zaXRpb25bMF0pLCBNYXRoLmZsb29yKGJvZHkuaW50ZXJwb2xhdGVkUG9zaXRpb25bMV0pKTtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlPYmplY3Qucm90YXRpb24gPSBib2R5LmludGVycG9sYXRlZEFuZ2xlO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoYm9keS5UcmlnZ2VyICYmIGJvZHkuVHJpZ2dlci50eXBlID09PSBcImRpc3RhbmNlXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXN0TW5nci5jYW5BY3RpdmF0ZVRyaWdnZXIoYm9keS5UcmlnZ2VyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5oZXJvLnBvc2l0aW9uLnggLSBib2R5LnBvc2l0aW9uWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB5ID0gdGhpcy5oZXJvLnBvc2l0aW9uLnkgLSBib2R5LnBvc2l0aW9uWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9keS5UcmlnZ2VyLmRpc3RhbmNlID49IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3RNbmdyLmhhbmRsZVRyaWdnZXJFdmVudChib2R5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICBjb2xsaXNpb25zIHdpdGggY29sbGVjdGlibGUgaXRlbXNcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gd3AyLnBsYXllckNvbnRhY3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBib2R5OiBhbnkgPSB3cDIucGxheWVyQ29udGFjdHNbaV07XHJcbiAgICAgICAgICAgIGlmIChib2R5LkRpc3BsYXlPYmplY3QgJiYgYm9keS5EaXNwbGF5T2JqZWN0LmludGVyYWN0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnRlcmFjdGl2ZUNvbGxpc2lvbihib2R5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGJvZHkuVHJpZ2dlciAmJiBib2R5LlRyaWdnZXIudHlwZSA9PT0gXCJjb2xsaXNpb25cIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdE1uZ3IuaGFuZGxlVHJpZ2dlckV2ZW50KGJvZHkpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgaW52b2tlIHVwZGF0ZSBvbiBlYWNoIHVwZGF0ZWFibGVcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy53b3JsZENvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQ6IGFueSA9IHRoaXMud29ybGRDb250YWluZXIuY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZC5vblVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQub25VcGRhdGUoZHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIFNwYXduIHBvaW50c1xyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdGF0cy5jdXJyZW50TGV2ZWwuc3Bhd25Qb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgc3RhdHMuY3VycmVudExldmVsLnNwYXduUG9pbnRzW2ldLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaHVkLm9uVXBkYXRlKGR0KTtcclxuICAgICAgICBzdGF0cy5vblVwZGF0ZShkdCk7XHJcblxyXG4gICAgICAgIHZhciBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIGNoZWNrIGlmIHBsYXllciBpcyBkZWFkXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgaWYgKHN0YXRzLmdldFN0YXQoU3RhdFR5cGUuSFApIDw9IDApIHtcclxuICAgICAgICAgICAgdGhpcy5Jc0hlcm9JbnRlcmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmhlcm8udmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgY3V0U2NlbmUgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRTY2VuZShcIkN1dFNjZW5lXCIpIGFzIEN1dFNjZW5lO1xyXG4gICAgICAgICAgICB2YXIgYmFja0dyb3VuZFRleHR1cmUgPSB0aGlzLnNjZW5lTWFuYWdlci5DYXB0dXJlU2NlbmUoKTtcclxuICAgICAgICAgICAgY3V0U2NlbmUuU2V0QmFja0dyb3VuZChiYWNrR3JvdW5kVGV4dHVyZSwgdGhpcy5zY2FsZSk7XHJcbiAgICAgICAgICAgIGN1dFNjZW5lLkRlYXRoU2NlbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5BY3RpdmF0ZVNjZW5lKGN1dFNjZW5lKTtcclxuICAgICAgICB9ICBlbHNlIGlmICh0aGlzLnNoYWtlRW5kID49IG5vdykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0U2hha2UgPD0gbm93KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgb3JpZ2luYWwgc3RhcnQgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgIGxldCB4ID0gKFNDRU5FX0hBTEZfV0lEVEggLSB0aGlzLmhlcm8ueCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgeSA9IChTQ0VORV9IRUlHSFQgLSA3MCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFrZVggPSB4ICsgdGhpcy5yYW5kb21SYW5nZSgtdGhpcy5tYWduaXR1ZGUgLyAyLCB0aGlzLm1hZ25pdHVkZSAvIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFrZVkgPSB5ICsgdGhpcy5yYW5kb21SYW5nZSgtdGhpcy5tYWduaXR1ZGUsIHRoaXMubWFnbml0dWRlKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJzaGFrZTogXCIgKyB0aGlzLnNoYWtlWCArIFwiLCBcIiArIHRoaXMuc2hha2VZLCB0aGlzLm1hZ25pdHVkZSwgdGhpcy5zaGFrZUVuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gIHJlZHVjZSBmb3IgbmV4dCBzaGFrZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGUgLT0gdGhpcy5tYWduaXR1ZGUgLyB0aGlzLlNIQUtFX0NPVU5UO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U2hha2UgPSBub3cgKyB0aGlzLnNoYWtlRHVyYXRpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMud29ybGRDb250YWluZXIueCA9IHRoaXMuc2hha2VYO1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkQ29udGFpbmVyLnkgPSB0aGlzLnNoYWtlWTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR1cCgpIHtcclxuICAgICAgICB0aGlzLndvcmxkQ29udGFpbmVyID0gbmV3IFBJWEkuQ29udGFpbmVyKCk7XHJcbiAgICAgICAgdGhpcy53b3JsZENvbnRhaW5lci5zY2FsZS55ID0gLTE7XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLndvcmxkQ29udGFpbmVyKTtcclxuICAgICAgICBHbG9iYWwud29ybGRDb250YWluZXIgPSB0aGlzLndvcmxkQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIHNldHVwIGhlcm8gXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICAgXHJcbiAgICAgICAgdGhpcy5oZXJvID0gbmV3IEhlcm9DaGFyYWN0ZXIodGhpcy53b3JsZENvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5oZXJvLm5hbWUgPSBcImhlcm9cIjtcclxuICAgICAgICB0aGlzLmhlcm8ueCA9IFNDRU5FX0hBTEZfV0lEVEg7XHJcbiAgICAgICAgdGhpcy53b3JsZENvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmhlcm8pO1xyXG4gICAgICAgIHRoaXMuaGVyby5wbGF5KFwiaWRsZVwiLCBBTklNQVRJT05fRlBTX1NMT1cpO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIHNldHVwIGh1ZCdzXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHRoaXMuaHVkID0gbmV3IFN0YXRzSHVkKCk7XHJcbiAgICAgICAgdGhpcy5IdWRPdmVybGF5ID0gdGhpcy5odWQ7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgcmVnaXN0ZXIgY3VzdG9tIGVudGl0eSBmYWN0b3JpZXNcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgTGV2ZWxMb2FkZXIucmVnaXN0ZXJGYWN0b3J5KFwiTGF2YVwiLCAoZGVmKT0+IG5ldyBMYXZhKGRlZi50ZXh0dXJlIGFzIHN0cmluZykpO1xyXG4gICAgICAgIExldmVsTG9hZGVyLnJlZ2lzdGVyRmFjdG9yeShcIlBsYXRmb3JtXCIsIChkZWYpPT4geyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlZi50ZXh0dXJlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBsYXRmb3JtKGRlZi50aWxlc1ggfHwgMSwgMSwgW2RlZi50ZXh0dXJlXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBsYXRmb3JtKGRlZi50aWxlc1ggfHwgMSwgZGVmLnRpbGVzWSB8fCAxLCBkZWYudGV4dHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBMZXZlbExvYWRlci5yZWdpc3RlckZhY3RvcnkoXCJCdW1wZXJcIiwgKGRlZik9PiBuZXcgQnVtcGVyKCkpO1xyXG5cclxuICAgICAgICB0aGlzLnF1ZXN0TW5nciA9IG5ldyBRdWVzdE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLm9uKEJVUk5fVE9QSUMsIChldmVudDogSUJ1cm5DaGFuZ2VFdmVudCkgPT4gZXZlbnQuaXNCdXJuaW5nID8gc25kLmJ1cm4oKTpzbmQuYnVyblN0b3AoKSApOyAgXHJcbiAgICAgICAgZXZlbnRFbWl0dGVyLm9uKEdST1VORF9TSEFLRSwgdGhpcy5zdGFydEdyb3VuZFNoYWtlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRMZXZlbCgpe1xyXG4gICAgICAgIHRoaXMuY2xlYXJMZXZlbCgpO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIHRlc3QgbGV2ZWwgbG9hZGluZ1xyXG4gICAgICAgIC8vICBUT0RPOiB0aGlzIHNob3VsZCBiZSB2aWEgdXNlciBzYXZlIGZpbGVcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgc3RhdHMubG9hZExldmVsKCk7XHJcbiAgICAgICAgc25kLnBsYXlUcmFjayhzdGF0cy5jdXJyZW50TGV2ZWwuYXVkaW9UcmFjayB8fCAwKTtcclxuICAgICAgICBzdGF0cy5jdXJyZW50TGV2ZWwucGFyYWxsYXguZm9yRWFjaCgocGx4LCBpZHgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy53b3JsZENvbnRhaW5lci5hZGRDaGlsZEF0KHBseCwgaWR4KTtcclxuICAgICAgICAgICAgcGx4LlNldFZpZXdQb3J0WChzdGF0cy5jdXJyZW50TGV2ZWwuc3RhcnRbMF0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIGFkZCBhbGwgb2JqZWN0cyBmcm9tIGxldmVsIHRvIHNjZW5lXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHN0YXRzLmN1cnJlbnRMZXZlbC5lbnRpdGllcy5mb3JFYWNoKChib2R5OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy53b3JsZENvbnRhaW5lci5hZGRDaGlsZChib2R5LkRpc3BsYXlPYmplY3QpO1xyXG5cclxuICAgICAgICAgICAgLy8gIGlmIGVudGl0eSBpcyBhIHNpbXBsZSBzcHJpdGUgaXQgaGFzIGEgXCJmYWtlXCIgYm9keSAgXHJcbiAgICAgICAgICAgIC8vICB3aXRob3V0IGFueSBzaGFwZXMsIHNvIG5vIG5lZWQgdG8gYWRkIGl0IHRvIHdvcmxkXHJcbiAgICAgICAgICAgIGlmIChib2R5LnNoYXBlcyAmJiBib2R5LnNoYXBlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB3cDIuYWRkQm9keShib2R5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAgc2V0IHN0YXJ0IGZvciBwbGF5ZXJcclxuICAgICAgICB3cDIucGxheWVyQm9keS5wb3NpdGlvblswXSA9IHN0YXRzLmN1cnJlbnRMZXZlbC5zdGFydFswXTtcclxuICAgICAgICB3cDIucGxheWVyQm9keS5wb3NpdGlvblsxXSA9IHN0YXRzLmN1cnJlbnRMZXZlbC5zdGFydFsxXTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnF1ZXN0TW5nci5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuaGVyby52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLklzSGVyb0ludGVyYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmh1ZC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5BY3RpdmF0ZVNjZW5lKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBwbGF5ZXIgaW50ZXJhY3Rpdml0eS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBJc0hlcm9JbnRlcmFjdGl2ZSh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICh0aGlzLmhlcm8uSXNJbnRlcmFjdGl2ZSAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5oZXJvLklzSW50ZXJhY3RpdmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmhlcm8uSXNJbnRlcmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oZXJvLnBsYXkoXCJpZGxlXCIsIEFOSU1BVElPTl9GUFNfU0xPVyk7XHJcbiAgICAgICAgICAgICAgICBzbmQuaWRsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIGFuIGFuaW1hdGlvbiB0d2VlbiBhbmQgcmVtb3ZlcyB0aGUgZGlzcGxheSBvYmplY3QgJiBib2R5IGZyb20gc2NlbmUuXHJcbiAgICAgKiBAcGFyYW0gZGlzcE9ialxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbGxlY3RPYmplY3QoYm9keSk6IHZvaWQge1xyXG4gICAgICAgIHZhciBkaXNwT2JqOiBQSVhJLkRpc3BsYXlPYmplY3QgPSBib2R5LkRpc3BsYXlPYmplY3QgYXMgUElYSS5EaXNwbGF5T2JqZWN0O1xyXG5cclxuICAgICAgICB2YXIgb3JnU2NhbGVYID0gZGlzcE9iai5zY2FsZS54O1xyXG4gICAgICAgIHZhciB1cFggPSBkaXNwT2JqLnBvc2l0aW9uLnggKyA0NTtcclxuICAgICAgICB2YXIgdXBZID0gZGlzcE9iai5wb3NpdGlvbi55ICsgMTYwO1xyXG5cclxuICAgICAgICB2YXIgZW5kWCA9IGRpc3BPYmoucG9zaXRpb24ueCAtIFNDRU5FX0hBTEZfV0lEVEg7XHJcbiAgICAgICAgdmFyIGVuZFkgPSBTQ0VORV9IRUlHSFQ7XHJcblxyXG4gICAgICAgIHZhciBtb3ZlVXAgPSBuZXcgVFdFRU4uVHdlZW4oZGlzcE9iai5wb3NpdGlvbilcclxuICAgICAgICAgICAgLnRvKHsgeDogdXBYLCB5OiB1cFkgfSwgMTUwKTtcclxuXHJcbiAgICAgICAgdmFyIHNjYWxlID0gbmV3IFRXRUVOLlR3ZWVuKGRpc3BPYmouc2NhbGUpXHJcbiAgICAgICAgICAgIC50byh7IHg6IG9yZ1NjYWxlWCArIDAuNSwgeTogb3JnU2NhbGVYICsgMC41IH0sIDUwMClcclxuICAgICAgICAgICAgLmVhc2luZyhUV0VFTi5FYXNpbmcuTGluZWFyLk5vbmUpO1xyXG5cclxuICAgICAgICB2YXIgbW92ZUF3YXkgPSBuZXcgVFdFRU4uVHdlZW4oZGlzcE9iai5wb3NpdGlvbilcclxuICAgICAgICAgICAgLnRvKHsgeDogZW5kWCwgeTogZW5kWSB9LCAyMDAwKVxyXG4gICAgICAgICAgICAuZWFzaW5nKFRXRUVOLkVhc2luZy5CYWNrLkluKVxyXG4gICAgICAgICAgICAub25Db21wbGV0ZSgoKSA9PiB0aGlzLndvcmxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKGRpc3BPYmopKTtcclxuXHJcbiAgICAgICAgbW92ZVVwLmNoYWluKHNjYWxlLCBtb3ZlQXdheSkuc3RhcnQoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUVudGl0eShib2R5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgcGxheWVyIGNvbGxpc2lvbiB3aXRoIGludGVyYWN0aXZlIG9iamVjdHMuXHJcbiAgICAgKiBAcGFyYW0gYm9keVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZUludGVyYWN0aXZlQ29sbGlzaW9uKGJvZHk6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHZhciBkaXNwT2JqOiBQSVhJLkRpc3BsYXlPYmplY3QgPSBib2R5LkRpc3BsYXlPYmplY3QgYXMgUElYSS5EaXNwbGF5T2JqZWN0O1xyXG4gICAgICAgIGxldCBpbnRlcmFjdGlvblR5cGU6IG51bWJlciA9IGJvZHkuRGlzcGxheU9iamVjdC5pbnRlcmFjdGlvblR5cGU7XHJcbiAgICAgICAgc3dpdGNoIChpbnRlcmFjdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiAvLyAgc21hbGwgY29pblxyXG4gICAgICAgICAgICAgICAgc3RhdHMuaW5jcmVhc2VTdGF0KFN0YXRUeXBlLkNvaW5zLCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdE9iamVjdChib2R5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHVkLmFkZEluZm9NZXNzYWdlKGRpc3BPYmoucG9zaXRpb24sIFwiKzEgY29pblwiLCBNU0dfQ09JTl9TVFlMRSwgLTEwMCk7XHJcbiAgICAgICAgICAgICAgICBzbmQuY29pbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDI6IC8vICBjb2luXHJcbiAgICAgICAgICAgICAgICBzdGF0cy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuQ29pbnMsIDEwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdE9iamVjdChib2R5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHVkLmFkZEluZm9NZXNzYWdlKGRpc3BPYmoucG9zaXRpb24sIFwiKzEwIGNvaW5zXCIsIE1TR19DT0lOX1NUWUxFLCAtMTAwKTtcclxuICAgICAgICAgICAgICAgIHNuZC5jb2luKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgMzogLy8gIGJsdWUgZ2VtXHJcbiAgICAgICAgICAgICAgICBzdGF0cy5pbmNyZWFzZVN0YXQoU3RhdFR5cGUuQ29pbnMsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxlY3RPYmplY3QoYm9keSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmh1ZC5hZGRJbmZvTWVzc2FnZShkaXNwT2JqLnBvc2l0aW9uLCBcIisxMDAgY29pbnNcIiwgTVNHX0NPSU5fU1RZTEUsIC0xMDApO1xyXG4gICAgICAgICAgICAgICAgc25kLmdlbSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgICAgICAvLyAgUVVFU1QgSVRFTVMgMjAwLTk5OVxyXG4gICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgICAgICAgICAgY2FzZSAyMDE6ICAvLyAga2VuZG8ga25vd2xlZGdlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmh1ZC5hZGRJbmZvTWVzc2FnZShkaXNwT2JqLnBvc2l0aW9uLCBcIktlbmRvIGtub3dsZWRnZSBhY3F1aXJlZCFcIiwgTVNHX0NPSU5fU1RZTEUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0T2JqZWN0KGJvZHkpO1xyXG4gICAgICAgICAgICAgICAgc25kLnF1ZXN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdE1uZ3IuYWNxdWlyZUl0ZW0oMjAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAyMDI6ICAvLyAgS0lcclxuICAgICAgICAgICAgICAgIHRoaXMuaHVkLmFkZEluZm9NZXNzYWdlKGRpc3BPYmoucG9zaXRpb24sIFwiMSBLaSBhY3F1aXJlZCFcIiwgTVNHX0NPSU5fU1RZTEUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0T2JqZWN0KGJvZHkpO1xyXG4gICAgICAgICAgICAgICAgc25kLnF1ZXN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdE1uZ3IuYWNxdWlyZUl0ZW0oMjAyKTtcclxuICAgICAgICAgICAgICAgIC8vICBUT0RPOiBxdWVzdCBtYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgICAgIC8vICBPQkpFQ1RTIERPSU5HIERBTUFHRSAxMDAwLTE5OTlcclxuICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAgICAgY2FzZSBEYW1hZ2VUeXBlLkxhdmFCb3JkZXI6ICAvLyAgYm9yZGVyIGxhdmEgICBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhdHMuYnVmZnNbRGFtYWdlVHlwZS5MYXZhQm9yZGVyXSB8fCBzdGF0cy5idWZmc1tEYW1hZ2VUeXBlLkxhdmFCb3JkZXJdIDwgbm93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaHVkLmFkZEluZm9NZXNzYWdlKGRpc3BPYmoucG9zaXRpb24sIFwiQnVybmluZ1wiLCBNU0dfV0FSTl9TVFlMRSwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMuYnVmZnNbRGFtYWdlVHlwZS5MYXZhQm9yZGVyXSA9IHRoaXMuc2Vjb25kc0Zyb21Ob3coMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEYW1hZ2VUeXBlLkxhdmE6ICAvLyAgbGF2YVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0cy5idWZmc1tEYW1hZ2VUeXBlLkxhdmFdIHx8IHN0YXRzLmJ1ZmZzW0RhbWFnZVR5cGUuTGF2YV0gPCBub3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odWQuYWRkSW5mb01lc3NhZ2UoZGlzcE9iai5wb3NpdGlvbiwgXCJCdXJuaW5nXCIsIE1TR19XQVJOX1NUWUxFLCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdGF0cy5idWZmc1tEYW1hZ2VUeXBlLkxhdmFdID0gdGhpcy5zZWNvbmRzRnJvbU5vdyg0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciB0aGF0IHJldHVybnMgdGltZSB0aWNrIHZhbHVlIHdpdGggdGhlIGdpdmVuIHNlY29uZHMgYWRkZWQuXHJcbiAgICAgKiBAcGFyYW0gc2Vjb25kc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNlY29uZHNGcm9tTm93KHNlY29uZHM6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgdmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDtcclxuICAgICAgICBub3cgKz0gc2Vjb25kcztcclxuICAgICAgICByZXR1cm4gbm93O1xyXG4gICAgfSAgICBcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYW4gZW50aXR5IGZyb20gdGhlIHAyIHdvcmxkIGFuZCBzZXRzIGl0cyBEaXNwbGF5T2JqZWN0IHRvIG51bGwuXHJcbiAgICAgKiBJZiB0aGUgcmVtb3ZlRGlzcGxheU9iamVjdCBpcyB0cnVlIHRoZSBkaXNwbGF5IG9iamVjdCB3aWxsIGJlIGFsc28gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZENvbnRhaW5lci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYm9keVxyXG4gICAgICogQHBhcmFtIHJlbW92ZURpc3BsYXlPYmplY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZUVudGl0eShib2R5OiBwMi5Cb2R5LCByZW1vdmVEaXNwbGF5T2JqZWN0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICB3cDIucmVtb3ZlQm9keShib2R5KTtcclxuICAgICAgICBpZiAocmVtb3ZlRGlzcGxheU9iamVjdCkge1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKChib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIChib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGVhckxldmVsKCkge1xyXG4gICAgICAgIGlmIChzdGF0cy5jdXJyZW50TGV2ZWwpIHtcclxuICAgICAgICAgICAgc3RhdHMuY3VycmVudExldmVsLnBhcmFsbGF4LmZvckVhY2goKHBseDogUGFyYWxsYXgsIGlkeDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKHBseCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzdGF0cy5jdXJyZW50TGV2ZWwuZW50aXRpZXMuZm9yRWFjaCgoYm9keTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keSAhPT0gd3AyLnBsYXllckJvZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKGJvZHkuRGlzcGxheU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd3AyLnJlbW92ZUJvZHkoYm9keSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keS5EaXNwbGF5T2JqZWN0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyAgbm93IHJlbW92ZSBhbGwgb3RoZXIgZGlzcGxheSBvYmplY3RzIGV4Y2VwdCBoZXJvXHJcbiAgICAgICAgICAgIHZhciBhbGwgPSB0aGlzLndvcmxkQ29udGFpbmVyLmNoaWxkcmVuLmZpbHRlcigoYzogUElYSS5EaXNwbGF5T2JqZWN0KSA9PiBjLm5hbWUgIT09IFwiaGVyb1wiKTtcclxuICAgICAgICAgICAgYWxsLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGRDb250YWluZXIucmVtb3ZlQ2hpbGQoY2hpbGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd3AyLmNsZWFyTGV2ZWwoKTtcclxuICAgICAgICAgICAgQnVsbGV0LnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmFuZG9tUmFuZ2UobWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG1pbiArIChNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhcnRHcm91bmRTaGFrZSA9IChldmVudDoge21pbGxpU2Vjb25kczogbnVtYmVyLCBtYWduaXR1ZGVJblBpeGVsczogbnVtYmVyfSk9PiB7XHJcbiAgICAgICAgdGhpcy5zaGFrZUVuZCA9IHBlcmZvcm1hbmNlLm5vdygpICsgZXZlbnQubWlsbGlTZWNvbmRzO1xyXG4gICAgICAgIHRoaXMubWFnbml0dWRlID0gZXZlbnQubWFnbml0dWRlSW5QaXhlbHM7XHJcbiAgICAgICAgdGhpcy5zaGFrZUR1cmF0aW9uID0gZXZlbnQubWlsbGlTZWNvbmRzIC8gdGhpcy5TSEFLRV9DT1VOVDtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBZUE7QUFBQTtBQUFBO0FBUkE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQXlXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeldBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBT0E7QUFBQTtBQTNYQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./scenes/MainScene.ts\n");

/***/ }),

/***/ "./scenes/OptionsScene.ts":
/*!********************************!*\
  !*** ./scenes/OptionsScene.ts ***!
  \********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./constants.ts\");\r\n/**\r\n *   Main options GUI.\r\n */\r\nvar OptionsScene = /** @class */ (function (_super) {\r\n    tslib_1.__extends(OptionsScene, _super);\r\n    /**\r\n     *   Creates a new scene instance.\r\n     */\r\n    function OptionsScene(sceneManager) {\r\n        var _this = _super.call(this, \"Options\") || this;\r\n        _this.sceneManager = sceneManager;\r\n        _this.currentMusicTrack = 0;\r\n        _this.onActivate = function () {\r\n            var btnOptions = _this.sceneManager.MasterHudOverlay.children.find(function (obj) { return obj.name == \"BTN_OPTIONS\"; });\r\n            btnOptions.visible = false;\r\n        };\r\n        _this.onDeactivate = function () {\r\n            var btnOptions = _this.sceneManager.MasterHudOverlay.children.find(function (obj) { return obj.name == \"BTN_OPTIONS\"; });\r\n            btnOptions.visible = true;\r\n        };\r\n        _this.setup = function () {\r\n            var title = new __1.PIXI.BitmapText(\"Options\", constants_1.TEXT_STYLE);\r\n            _this.addChild(title);\r\n            title.anchor.set(0.5);\r\n            title.x = constants_1.SCENE_HALF_WIDTH;\r\n            title.y = 20;\r\n            var OFFSET = constants_1.BTN_WIDTH / 3;\r\n            var y = constants_1.SCENE_HEIGHT - constants_1.BTN_HEIGHT - OFFSET;\r\n            //--------------------\r\n            //  back to game\r\n            //--------------------\r\n            var btnBack = new __1.SpriteButton(\"assets/gui-atlas.json@gui_button1.png\", OFFSET, y, constants_1.BTN_WIDTH, constants_1.BTN_HEIGHT);\r\n            btnBack.text = new __1.PIXI.Text(\"Back to game\", constants_1.BTN_STYLE);\r\n            btnBack.onClick = function () {\r\n                //this.resetSounds();\r\n                _this.sceneManager.ActivatePreviousScene();\r\n            };\r\n            _this.addChild(btnBack);\r\n        };\r\n        _this.BackGroundColor = constants_1.SCENE_BACKCOLOR;\r\n        _this.setup();\r\n        return _this;\r\n    }\r\n    return OptionsScene;\r\n}(__1.Scene));\r\nexports.OptionsScene = OptionsScene;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY2VuZXMvT3B0aW9uc1NjZW5lLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc2NlbmVzL09wdGlvbnNTY2VuZS50cz9hMjA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBJWEksIFNjZW5lLCBTcHJpdGVCdXR0b24sIFNjZW5lTWFuYWdlciB9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBTQ0VORV9IQUxGX1dJRFRILCBURVhUX1NUWUxFLCBTQ0VORV9CQUNLQ09MT1IsIEJUTl9XSURUSCwgU0NFTkVfSEVJR0hULCBCVE5fSEVJR0hULCBCVE5fU1RZTEUgfSBmcm9tICcuLi9jb25zdGFudHMnO1xyXG5cclxuLyoqXHJcbiAqICAgTWFpbiBvcHRpb25zIEdVSS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPcHRpb25zU2NlbmUgZXh0ZW5kcyBTY2VuZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJyZW50TXVzaWNUcmFjazogbnVtYmVyID0gMDsgXHJcbiAgICBcclxuXHJcbiAgICAvKipcclxuICAgICAqICAgQ3JlYXRlcyBhIG5ldyBzY2VuZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY2VuZU1hbmFnZXI6U2NlbmVNYW5hZ2VyKSB7XHJcbiAgICAgICAgc3VwZXIoXCJPcHRpb25zXCIpO1xyXG4gICAgICAgIHRoaXMuQmFja0dyb3VuZENvbG9yID0gU0NFTkVfQkFDS0NPTE9SO1xyXG4gICAgICAgIHRoaXMuc2V0dXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BY3RpdmF0ZSA9KCk9PntcclxuICAgICAgICB2YXIgYnRuT3B0aW9ucyA9IHRoaXMuc2NlbmVNYW5hZ2VyLk1hc3Rlckh1ZE92ZXJsYXkuY2hpbGRyZW4uZmluZCgob2JqKT0+IG9iai5uYW1lID09IFwiQlROX09QVElPTlNcIik7XHJcbiAgICAgICAgYnRuT3B0aW9ucyEudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uRGVhY3RpdmF0ZSA9KCk9PntcclxuICAgICAgICB2YXIgYnRuT3B0aW9ucyA9IHRoaXMuc2NlbmVNYW5hZ2VyLk1hc3Rlckh1ZE92ZXJsYXkuY2hpbGRyZW4uZmluZCgob2JqKT0+IG9iai5uYW1lID09IFwiQlROX09QVElPTlNcIik7XHJcbiAgICAgICAgYnRuT3B0aW9ucyEudmlzaWJsZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldHVwID0gKCkgPT4ge1xyXG4gICAgICAgIHZhciB0aXRsZSA9IG5ldyBQSVhJLkJpdG1hcFRleHQoXCJPcHRpb25zXCIsIFRFWFRfU1RZTEUpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodGl0bGUpO1xyXG4gICAgICAgICh0aXRsZS5hbmNob3IgYXMgYW55KS5zZXQoMC41KTtcclxuICAgICAgICB0aXRsZS54ID0gU0NFTkVfSEFMRl9XSURUSDtcclxuICAgICAgICB0aXRsZS55ID0gMjA7XHJcblxyXG4gICAgICAgIGxldCBPRkZTRVQgPSBCVE5fV0lEVEggLyAzO1xyXG4gICAgICAgIGxldCB5ID0gU0NFTkVfSEVJR0hUIC0gQlROX0hFSUdIVCAtIE9GRlNFVDtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vICBiYWNrIHRvIGdhbWVcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgdmFyIGJ0bkJhY2sgPSBuZXcgU3ByaXRlQnV0dG9uKFwiYXNzZXRzL2d1aS1hdGxhcy5qc29uQGd1aV9idXR0b24xLnBuZ1wiLCBPRkZTRVQsIHksIEJUTl9XSURUSCwgQlROX0hFSUdIVCk7XHJcbiAgICAgICAgYnRuQmFjay50ZXh0ID0gbmV3IFBJWEkuVGV4dChcIkJhY2sgdG8gZ2FtZVwiLCBCVE5fU1RZTEUpO1xyXG4gICAgICAgIGJ0bkJhY2sub25DbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy90aGlzLnJlc2V0U291bmRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkFjdGl2YXRlUHJldmlvdXNTY2VuZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hZGRDaGlsZChidG5CYWNrKTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUtBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBTkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQ0E7QUFDQTs7QUFDQTtBQStCQTtBQUFBO0FBM0NBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./scenes/OptionsScene.ts\n");

/***/ }),

/***/ "./utility/Dictionary.ts":
/*!*******************************!*\
  !*** ./utility/Dictionary.ts ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Dictionary = /** @class */ (function () {\r\n    function Dictionary() {\r\n        this.dictValues = {};\r\n        this.dictKeys = [];\r\n    }\r\n    Dictionary.prototype.get = function (key) {\r\n        return this.dictValues[key];\r\n    };\r\n    Dictionary.prototype.contains = function (key) {\r\n        return key in this.dictValues;\r\n    };\r\n    Dictionary.prototype.remove = function (key) {\r\n        var index = this.dictKeys.indexOf(key, 0);\r\n        this.dictKeys.splice(index, 1);\r\n        delete this.dictValues[key];\r\n    };\r\n    Dictionary.prototype.set = function (key, value) {\r\n        if (!(key in this.dictValues)) {\r\n            this.dictKeys.push(key);\r\n        }\r\n        this.dictValues[key] = value;\r\n    };\r\n    Object.defineProperty(Dictionary.prototype, \"keys\", {\r\n        get: function () {\r\n            return this.dictKeys;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Dictionary.prototype.getAll = function () {\r\n        return this.dictValues;\r\n    };\r\n    Dictionary.prototype.getSet = function (key, valueOrvalueGetter) {\r\n        if (!this.contains(key)) {\r\n            this.set(key, typeof valueOrvalueGetter === 'function' ? valueOrvalueGetter() : valueOrvalueGetter);\r\n        }\r\n        return this.get(key);\r\n    };\r\n    Dictionary.prototype.clear = function () {\r\n        this.dictKeys = [];\r\n        this.dictValues = {};\r\n    };\r\n    return Dictionary;\r\n}());\r\nexports.Dictionary = Dictionary;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlsaXR5L0RpY3Rpb25hcnkudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi91dGlsaXR5L0RpY3Rpb25hcnkudHM/MzgyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSB2YWx1ZUdldHRlcjxUPiA9ICgpID0+IFQ7XHJcblxyXG5leHBvcnQgY2xhc3MgRGljdGlvbmFyeTxUPiB7XHJcbiAgICBwcml2YXRlIGRpY3RWYWx1ZXM6IHsgW2tleTogc3RyaW5nXTogVCB9ID0ge307XHJcbiAgICBwcml2YXRlIGRpY3RLZXlzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBnZXQoa2V5OiBzdHJpbmcpOiBUIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaWN0VmFsdWVzW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbnRhaW5zKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLmRpY3RWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZShrZXk6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5kaWN0S2V5cy5pbmRleE9mKGtleSwgMCk7XHJcbiAgICAgICAgdGhpcy5kaWN0S2V5cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmRpY3RWYWx1ZXNba2V5XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogVCkge1xyXG4gICAgICAgIGlmICghKGtleSBpbiB0aGlzLmRpY3RWYWx1ZXMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGljdEtleXMucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpY3RWYWx1ZXNba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQga2V5cygpOiBzdHJpbmdbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGljdEtleXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFsbCgpOiB7IFtrZXk6IHN0cmluZ106IFQgfSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGljdFZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2V0KGtleTogc3RyaW5nLCB2YWx1ZU9ydmFsdWVHZXR0ZXI6IFQgfCB2YWx1ZUdldHRlcjxUPik6IFQge1xyXG4gICAgICAgIGlmICghdGhpcy5jb250YWlucyhrZXkpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgdHlwZW9mIHZhbHVlT3J2YWx1ZUdldHRlciA9PT0gJ2Z1bmN0aW9uJyA/ICh2YWx1ZU9ydmFsdWVHZXR0ZXIgYXMgYW55KSgpIDogdmFsdWVPcnZhbHVlR2V0dGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuZGljdEtleXMgPSBbXTtcclxuICAgICAgICB0aGlzLmRpY3RWYWx1ZXMgPSB7fTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQTBDQTtBQXhDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBNUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utility/Dictionary.ts\n");

/***/ }),

/***/ "./utility/KeyboardMapper.ts":
/*!***********************************!*\
  !*** ./utility/KeyboardMapper.ts ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n *   Simple keyboard mapper.\r\n */\r\nvar KeyboardMapper = /** @class */ (function () {\r\n    /**\r\n     *   Creates a new KeyboardMapper instance.\r\n     */\r\n    function KeyboardMapper() {\r\n        var _this = this;\r\n        this.ALT_KEY = 18;\r\n        this.SHIFT_KEY = 16;\r\n        this.CTRL_KEY = 17;\r\n        /**\r\n         * Adds an action handler scoped to the given state.\r\n         * @remarks The handler is invoked only if the `state` is active (current)\r\n         */\r\n        this.addKeyboardActionHandler = function (action, state) {\r\n            if (!_this.stateActions[state]) {\r\n                _this.stateActions[state] = [];\r\n            }\r\n            _this.stateActions[state].push(action);\r\n        };\r\n        this.stateActions = {};\r\n        this.keyboard = [];\r\n        for (var i = 0; i < 256; i++) {\r\n            this.keyboard[i] = false;\r\n        }\r\n        document.addEventListener('keydown', this.keydown.bind(this), false);\r\n        document.addEventListener('keyup', this.keyup.bind(this), false);\r\n    }\r\n    /**\r\n     * Invokes needed action handlers based on the pressed keys.\r\n     * @remarks Only handlers assigned to the given state are processed\r\n     * @param currentState - the state for which hanlders are processed\r\n     */\r\n    KeyboardMapper.prototype.update = function (currentState) {\r\n        //  state specific handler\r\n        var actions = this.stateActions[currentState];\r\n        this.findHandlerAndInvoke(actions);\r\n        //  global handlers\r\n        actions = this.stateActions[State.GLOBAL];\r\n        this.findHandlerAndInvoke(actions);\r\n    };\r\n    /** Checks if a key is pressed */\r\n    KeyboardMapper.prototype.isKeyDown = function (keyCode) {\r\n        return this.keyboard[keyCode];\r\n    };\r\n    /**\r\n     *   Searches for all keyboard handlers with matching current pressed key combinations and invokes them.\r\n     */\r\n    KeyboardMapper.prototype.findHandlerAndInvoke = function (actions) {\r\n        if (actions) {\r\n            var len = actions.length;\r\n            for (var i = 0; i < len; i++) {\r\n                var ka = actions[i];\r\n                if (ka &&\r\n                    ka.isAssigned() &&\r\n                    ka.handler &&\r\n                    this.keyboard[ka.key] &&\r\n                    this.keyboard[this.ALT_KEY] === ka.altKey &&\r\n                    this.keyboard[this.SHIFT_KEY] === ka.shiftKey &&\r\n                    this.keyboard[this.CTRL_KEY] === ka.ctrlKey) {\r\n                    ka.handler();\r\n                    if (ka.releaseKeyAfterInvoke) {\r\n                        this.keyboard[ka.key] = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    KeyboardMapper.prototype.keydown = function (e) {\r\n        this.keyboard[e.which] = true;\r\n    };\r\n    KeyboardMapper.prototype.keyup = function (e) {\r\n        this.keyboard[e.which] = false;\r\n    };\r\n    return KeyboardMapper;\r\n}());\r\nexports.KeyboardMapper = KeyboardMapper;\r\nvar State;\r\n(function (State) {\r\n    State[State[\"GLOBAL\"] = 0] = \"GLOBAL\";\r\n    State[State[\"MENU\"] = 1] = \"MENU\";\r\n    State[State[\"IN_GAME\"] = 2] = \"IN_GAME\";\r\n    State[State[\"CUSTOM1\"] = 3] = \"CUSTOM1\";\r\n    State[State[\"CUSTOM2\"] = 4] = \"CUSTOM2\";\r\n    State[State[\"CUSTOM3\"] = 5] = \"CUSTOM3\";\r\n    State[State[\"CUSTOM4\"] = 6] = \"CUSTOM4\";\r\n    State[State[\"CUSTOM5\"] = 7] = \"CUSTOM5\";\r\n})(State = exports.State || (exports.State = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlsaXR5L0tleWJvYXJkTWFwcGVyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vdXRpbGl0eS9LZXlib2FyZE1hcHBlci50cz8wMDRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleWJvYXJkQWN0aW9uIH0gZnJvbSAnLi9LZXlib2FyZEFjdGlvbic7XHJcblxyXG4vKipcclxuICogICBTaW1wbGUga2V5Ym9hcmQgbWFwcGVyLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEtleWJvYXJkTWFwcGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogICBTdG9yZXMga2V5Ym9hcmQgcHJlc3NlZCBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBrZXlib2FyZDogYm9vbGVhbltdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogICBTdG9yZXMgYW4gYXJyYXkgb2YgS2V5Ym9hcmRBY3Rpb24gaW5zdGFuY2VzIHBlciBHbG9iYWwuU3RhdGUuIFRoZSAnc3RhdGUnIGluZGV4ZXIgaXMgYSBudW1lcmljIHZhbHVlIGZyb20gdGhlIEdsb2JhbC5TdGF0ZSBlbnVtLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRlQWN0aW9uczogeyBbc3RhdGU6IG51bWJlcl06IEtleWJvYXJkQWN0aW9uW10gfTtcclxuXHJcbiAgICBwcml2YXRlIEFMVF9LRVk6IG51bWJlciA9IDE4O1xyXG4gICAgcHJpdmF0ZSBTSElGVF9LRVk6IG51bWJlciA9IDE2O1xyXG4gICAgcHJpdmF0ZSBDVFJMX0tFWTogbnVtYmVyID0gMTc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAgIENyZWF0ZXMgYSBuZXcgS2V5Ym9hcmRNYXBwZXIgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGVBY3Rpb25zID0ge307XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCAyNTY7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmtleWJvYXJkW2ldID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlkb3duLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5dXAuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlcyBuZWVkZWQgYWN0aW9uIGhhbmRsZXJzIGJhc2VkIG9uIHRoZSBwcmVzc2VkIGtleXMuXHJcbiAgICAgKiBAcmVtYXJrcyBPbmx5IGhhbmRsZXJzIGFzc2lnbmVkIHRvIHRoZSBnaXZlbiBzdGF0ZSBhcmUgcHJvY2Vzc2VkXHJcbiAgICAgKiBAcGFyYW0gY3VycmVudFN0YXRlIC0gdGhlIHN0YXRlIGZvciB3aGljaCBoYW5sZGVycyBhcmUgcHJvY2Vzc2VkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUoY3VycmVudFN0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIC8vICBzdGF0ZSBzcGVjaWZpYyBoYW5kbGVyXHJcbiAgICAgICAgbGV0IGFjdGlvbnM6IEtleWJvYXJkQWN0aW9uW10gPSB0aGlzLnN0YXRlQWN0aW9uc1tjdXJyZW50U3RhdGVdO1xyXG4gICAgICAgIHRoaXMuZmluZEhhbmRsZXJBbmRJbnZva2UoYWN0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vICBnbG9iYWwgaGFuZGxlcnNcclxuICAgICAgICBhY3Rpb25zID0gdGhpcy5zdGF0ZUFjdGlvbnNbU3RhdGUuR0xPQkFMXTtcclxuICAgICAgICB0aGlzLmZpbmRIYW5kbGVyQW5kSW52b2tlKGFjdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBhY3Rpb24gaGFuZGxlciBzY29wZWQgdG8gdGhlIGdpdmVuIHN0YXRlLlxyXG4gICAgICogQHJlbWFya3MgVGhlIGhhbmRsZXIgaXMgaW52b2tlZCBvbmx5IGlmIHRoZSBgc3RhdGVgIGlzIGFjdGl2ZSAoY3VycmVudClcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEtleWJvYXJkQWN0aW9uSGFuZGxlciA9IChhY3Rpb246IEtleWJvYXJkQWN0aW9uLCBzdGF0ZTogU3RhdGUpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGVBY3Rpb25zW3N0YXRlXSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlQWN0aW9uc1tzdGF0ZV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGF0ZUFjdGlvbnNbc3RhdGVdLnB1c2goYWN0aW9uKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIENoZWNrcyBpZiBhIGtleSBpcyBwcmVzc2VkICovXHJcbiAgICBwdWJsaWMgaXNLZXlEb3duKGtleUNvZGU6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmtleWJvYXJkW2tleUNvZGVdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogICBTZWFyY2hlcyBmb3IgYWxsIGtleWJvYXJkIGhhbmRsZXJzIHdpdGggbWF0Y2hpbmcgY3VycmVudCBwcmVzc2VkIGtleSBjb21iaW5hdGlvbnMgYW5kIGludm9rZXMgdGhlbS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmaW5kSGFuZGxlckFuZEludm9rZShhY3Rpb25zOiBLZXlib2FyZEFjdGlvbltdKSB7XHJcbiAgICAgICAgaWYgKGFjdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgbGVuID0gYWN0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2EgPSBhY3Rpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGthICYmXHJcbiAgICAgICAgICAgICAgICAgICAga2EuaXNBc3NpZ25lZCgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAga2EuaGFuZGxlciAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRba2Eua2V5XSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMua2V5Ym9hcmRbdGhpcy5BTFRfS0VZXSA9PT0ga2EuYWx0S2V5ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZFt0aGlzLlNISUZUX0tFWV0gPT09IGthLnNoaWZ0S2V5ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZFt0aGlzLkNUUkxfS0VZXSA9PT0ga2EuY3RybEtleVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2EuaGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrYS5yZWxlYXNlS2V5QWZ0ZXJJbnZva2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlib2FyZFtrYS5rZXldID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUga2V5ZG93bihlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZFtlLndoaWNoXSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBrZXl1cChlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5rZXlib2FyZFtlLndoaWNoXSA9IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBTdGF0ZSB7XHJcbiAgICBHTE9CQUwsXHJcbiAgICBNRU5VLFxyXG4gICAgSU5fR0FNRSxcclxuICAgIENVU1RPTTEsXHJcbiAgICBDVVNUT00yLFxyXG4gICAgQ1VTVE9NMyxcclxuICAgIENVU1RPTTQsXHJcbiAgICBDVVNUT001LFxyXG59Il0sIm1hcHBpbmdzIjoiOztBQUVBOztBQUVBO0FBQ0E7QUFlQTs7QUFFQTtBQUNBO0FBQUE7QUFQQTtBQUNBO0FBQ0E7QUErQkE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQTdGQTtBQStGQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utility/KeyboardMapper.ts\n");

/***/ }),

/***/ "./utility/TextureLoader.ts":
/*!**********************************!*\
  !*** ./utility/TextureLoader.ts ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\n/**\r\n * Utility for loading single textures or atlas textures from PIXI.loader.resources.\r\n */\r\nvar TextureLoader = /** @class */ (function () {\r\n    function TextureLoader() {\r\n    }\r\n    TextureLoader.IsAtlas = function (texture) {\r\n        return texture.frame.width !== texture.baseTexture.width || texture.frame.height !== texture.baseTexture.height;\r\n    };\r\n    TextureLoader.Get = function (fullName, mipmap, scaleMode) {\r\n        if (mipmap === void 0) { mipmap = false; }\r\n        if (scaleMode === void 0) { scaleMode = __1.PIXI.SCALE_MODES.LINEAR; }\r\n        var idx = fullName.indexOf('.json@');\r\n        var textureName = idx > 0 ? fullName.substr(idx + 6) : fullName;\r\n        var resourceName = idx > 0 ? fullName.substr(0, idx + 5) : fullName;\r\n        var res = TextureLoader.resourceCache[resourceName];\r\n        if (!res) {\r\n            //  try to get resource from loader\r\n            TextureLoader.resourceCache[resourceName] = __1.PIXI.Loader.shared.resources[resourceName];\r\n            res = TextureLoader.resourceCache[resourceName];\r\n            //  get base texture & set params\r\n            var baseTexture = res.loadType === 1 ? res.spritesheet.baseTexture : res.texture.baseTexture;\r\n            baseTexture.mipmap = mipmap;\r\n            baseTexture.scaleMode = scaleMode;\r\n        }\r\n        if (!res) {\r\n            console.error(\"Resource:'\" + fullName + \"' not found!\");\r\n            return undefined;\r\n        }\r\n        switch (res.loadType) {\r\n            case 1: //  atlas\r\n                return res.textures[textureName];\r\n            case 2: //  single texture\r\n                return res.texture;\r\n        }\r\n        console.error(\"Resource:'\" + fullName + \"' unknown load type!\", res);\r\n        return undefined;\r\n    };\r\n    /**\r\n     * simple cache used to apply mipmap and scaleMode only the first time an atlas is loaded.\r\n     */\r\n    TextureLoader.resourceCache = {};\r\n    return TextureLoader;\r\n}());\r\nexports.TextureLoader = TextureLoader;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlsaXR5L1RleHR1cmVMb2FkZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi91dGlsaXR5L1RleHR1cmVMb2FkZXIudHM/NTMwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1BJWEl9IGZyb20gJy4uJztcclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IGZvciBsb2FkaW5nIHNpbmdsZSB0ZXh0dXJlcyBvciBhdGxhcyB0ZXh0dXJlcyBmcm9tIFBJWEkubG9hZGVyLnJlc291cmNlcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZXh0dXJlTG9hZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgSXNBdGxhcyh0ZXh0dXJlOiBQSVhJLlRleHR1cmUpIHtcclxuICAgICAgICByZXR1cm4gdGV4dHVyZS5mcmFtZS53aWR0aCAhPT0gdGV4dHVyZS5iYXNlVGV4dHVyZS53aWR0aCB8fCB0ZXh0dXJlLmZyYW1lLmhlaWdodCAhPT0gdGV4dHVyZS5iYXNlVGV4dHVyZS5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBHZXQgPSAoZnVsbE5hbWU6IHN0cmluZywgbWlwbWFwOiBib29sZWFuID0gZmFsc2UsIHNjYWxlTW9kZTogbnVtYmVyID0gUElYSS5TQ0FMRV9NT0RFUy5MSU5FQVIpOiBQSVhJLlRleHR1cmUgfCB1bmRlZmluZWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IGZ1bGxOYW1lLmluZGV4T2YoJy5qc29uQCcpO1xyXG4gICAgICAgIGNvbnN0IHRleHR1cmVOYW1lID0gaWR4ID4gMCA/IGZ1bGxOYW1lLnN1YnN0cihpZHggKyA2KSA6IGZ1bGxOYW1lO1xyXG4gICAgICAgIGNvbnN0IHJlc291cmNlTmFtZSA9IGlkeCA+IDAgPyBmdWxsTmFtZS5zdWJzdHIoMCwgaWR4ICsgNSkgOiBmdWxsTmFtZTtcclxuICAgICAgICBsZXQgcmVzID0gVGV4dHVyZUxvYWRlci5yZXNvdXJjZUNhY2hlW3Jlc291cmNlTmFtZV07XHJcblxyXG4gICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgIC8vICB0cnkgdG8gZ2V0IHJlc291cmNlIGZyb20gbG9hZGVyXHJcbiAgICAgICAgICAgIFRleHR1cmVMb2FkZXIucmVzb3VyY2VDYWNoZVtyZXNvdXJjZU5hbWVdID0gUElYSS5Mb2FkZXIuc2hhcmVkLnJlc291cmNlc1tyZXNvdXJjZU5hbWVdO1xyXG4gICAgICAgICAgICByZXMgPSBUZXh0dXJlTG9hZGVyLnJlc291cmNlQ2FjaGVbcmVzb3VyY2VOYW1lXTtcclxuXHJcbiAgICAgICAgICAgIC8vICBnZXQgYmFzZSB0ZXh0dXJlICYgc2V0IHBhcmFtc1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlVGV4dHVyZSA9IHJlcy5sb2FkVHlwZSA9PT0gMSA/IHJlcy5zcHJpdGVzaGVldC5iYXNlVGV4dHVyZSA6IHJlcy50ZXh0dXJlLmJhc2VUZXh0dXJlO1xyXG4gICAgICAgICAgICBiYXNlVGV4dHVyZS5taXBtYXAgPSBtaXBtYXA7XHJcbiAgICAgICAgICAgIGJhc2VUZXh0dXJlLnNjYWxlTW9kZSA9IHNjYWxlTW9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghcmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFJlc291cmNlOicke2Z1bGxOYW1lfScgbm90IGZvdW5kIWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoIChyZXMubG9hZFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiAvLyAgYXRsYXNcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMudGV4dHVyZXNbdGV4dHVyZU5hbWVdO1xyXG4gICAgICAgICAgICBjYXNlIDI6IC8vICBzaW5nbGUgdGV4dHVyZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy50ZXh0dXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmVycm9yKGBSZXNvdXJjZTonJHtmdWxsTmFtZX0nIHVua25vd24gbG9hZCB0eXBlIWAsIHJlcyk7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzaW1wbGUgY2FjaGUgdXNlZCB0byBhcHBseSBtaXBtYXAgYW5kIHNjYWxlTW9kZSBvbmx5IHRoZSBmaXJzdCB0aW1lIGFuIGF0bGFzIGlzIGxvYWRlZC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVzb3VyY2VDYWNoZTogYW55ID0ge307XHJcbn0iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUF5Q0E7QUF4Q0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBekNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utility/TextureLoader.ts\n");

/***/ }),

/***/ "./world/CollisionGroups.ts":
/*!**********************************!*\
  !*** ./world/CollisionGroups.ts ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.COL_GRP_PLAYER = 1;\r\nexports.COL_GRP_NPC = 2;\r\nexports.COL_GRP_SCENE = 4;\r\nexports.COL_GRP_BULLET = 8;\r\nexports.COL_GRP_GROUND = 16;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93b3JsZC9Db2xsaXNpb25Hcm91cHMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93b3JsZC9Db2xsaXNpb25Hcm91cHMudHM/MzZmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQ09MX0dSUF9QTEFZRVIgPSAxO1xyXG5leHBvcnQgY29uc3QgQ09MX0dSUF9OUEMgPSAyO1xyXG5leHBvcnQgY29uc3QgQ09MX0dSUF9TQ0VORSA9IDQ7XHJcbmV4cG9ydCBjb25zdCBDT0xfR1JQX0JVTExFVCA9IDg7XHJcbmV4cG9ydCBjb25zdCBDT0xfR1JQX0dST1VORCA9IDE2OyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./world/CollisionGroups.ts\n");

/***/ }),

/***/ "./world/LevelHelper.ts":
/*!******************************!*\
  !*** ./world/LevelHelper.ts ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\n/**\r\n* Returns all assets referenced in the level.\r\n* @param root\r\n* @param levelId\r\n*/\r\nfunction GetLevelAssets(root, levelId) {\r\n    var assets = [];\r\n    var level = undefined;\r\n    for (var i = 0; i < root.levels.length; i++) {\r\n        if (root.levels[i].id === levelId) {\r\n            level = root.levels[i];\r\n            break;\r\n        }\r\n    }\r\n    if (level) {\r\n        level.parallax.forEach(function (iplx) {\r\n            assets = assets.concat(iplx.textures);\r\n        });\r\n        if (level.assets && level.assets.length > 0) {\r\n            assets = assets.concat(level.assets);\r\n        }\r\n        //  merge global templates with level templates\r\n        var templates = root.templates.concat(level.map.templates);\r\n        // add all textures from templates (we don't need to have entities referencing the template if they are in a spawn)\r\n        level.map.templates.forEach(function (tos) {\r\n            if (!tos.type || tos.type !== \"spawn_point\") {\r\n                var templ = tos;\r\n                var dispObj = templ.displayObject;\r\n                if (dispObj.texture) {\r\n                    if (typeof dispObj.texture === \"string\") {\r\n                        assets.push(dispObj.texture);\r\n                    }\r\n                    else {\r\n                        assets = assets.concat(dispObj.texture);\r\n                    }\r\n                }\r\n                if (dispObj.sequences) {\r\n                    dispObj.sequences.forEach(function (item) {\r\n                        assets.push(item.texture);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        level.map.entities.forEach(function (entity) {\r\n            var defs = getEntityDefinition(templates, entity);\r\n            if (defs.doDef.texture) {\r\n                if (typeof defs.doDef.texture === \"string\") {\r\n                    assets.push(defs.doDef.texture);\r\n                }\r\n                else {\r\n                    assets = assets.concat(defs.doDef.texture);\r\n                }\r\n            }\r\n            if (defs.doDef.sequences) {\r\n                defs.doDef.sequences.forEach(function (item) {\r\n                    assets.push(item.texture);\r\n                });\r\n            }\r\n        });\r\n        level.map.NPC = level.map.NPC || [];\r\n        level.map.NPC.forEach(function (tos) {\r\n            //  check if its a template or spawn_point\r\n            if (tos.type && tos.type === \"spawn_point\") {\r\n            }\r\n            else {\r\n                //  this is an entity definition\r\n                var entity_1 = tos;\r\n                //  concat attack (string | string[])\r\n                if (entity_1.attack) {\r\n                    assets = assets.concat(entity_1.attack);\r\n                }\r\n                var entityTemplate = templates.filter(function (item) { return item.name === entity_1.template; });\r\n                if (entityTemplate && entityTemplate.length > 0) {\r\n                    var template = entityTemplate[0];\r\n                    // var temp = $.extend(true, {}, template.displayObject);\r\n                    // var displayObjectDefinition = $.extend(temp, entity);\r\n                    var displayObjectDefinition = tslib_1.__assign(tslib_1.__assign({}, template.displayObject), entity_1);\r\n                    if (displayObjectDefinition.texture) {\r\n                        if (typeof displayObjectDefinition.texture === \"string\") {\r\n                            assets.push(displayObjectDefinition.texture);\r\n                        }\r\n                        else {\r\n                            assets = assets.concat(displayObjectDefinition.texture);\r\n                        }\r\n                    }\r\n                    if (displayObjectDefinition.attack) {\r\n                        assets = assets.concat(displayObjectDefinition.attack);\r\n                    }\r\n                    if (displayObjectDefinition.sequences) {\r\n                        displayObjectDefinition.sequences.forEach(function (item) {\r\n                            //  add only if texture exists\r\n                            if (item.texture) {\r\n                                assets.push(item.texture);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    //  convert json atlas prefixed texture names to only json file names\r\n    assets = assets.map(function (name) {\r\n        var idx = name.indexOf('.json@');\r\n        return idx > 0 ? name.substr(0, idx + 5) : name;\r\n    });\r\n    assets = getUniqueItems(assets);\r\n    return assets;\r\n}\r\nexports.GetLevelAssets = GetLevelAssets;\r\n/**\r\n* Returns an object containing extracted display object and body definitions.\r\n* @param templates\r\n* @param entity\r\n*/\r\nfunction getEntityDefinition(templates, entity) {\r\n    var displayObjectDefinition = null;\r\n    var bodyDefinition = null;\r\n    var template = {\r\n        name: null,\r\n        displayObject: { typeName: \"Sprite\" },\r\n        body: null,\r\n        trigger: null,\r\n        drop: null\r\n    };\r\n    var entityTemplate = templates.filter(function (item) { return item.name === entity.template; });\r\n    if (entityTemplate && entityTemplate.length > 0) {\r\n        template = entityTemplate[0];\r\n    }\r\n    displayObjectDefinition = tslib_1.__assign(tslib_1.__assign({}, template.displayObject), entity);\r\n    if (template.drop) {\r\n        displayObjectDefinition = tslib_1.__assign(tslib_1.__assign({}, displayObjectDefinition), { drop: template.drop });\r\n    }\r\n    if (template.body) {\r\n        bodyDefinition = template.body;\r\n    }\r\n    var triggerTemplate = undefined;\r\n    if (template.trigger || displayObjectDefinition.trigger) {\r\n        triggerTemplate = tslib_1.__assign(tslib_1.__assign({}, template.trigger), displayObjectDefinition.trigger);\r\n    }\r\n    return {\r\n        templateName: template.name,\r\n        doDef: displayObjectDefinition,\r\n        bdDef: bodyDefinition,\r\n        trigger: triggerTemplate\r\n    };\r\n}\r\nexports.getEntityDefinition = getEntityDefinition;\r\n/**\r\n * Returns a filtered array with unique only items from the input array\r\n * @param arr\r\n */\r\nfunction getUniqueItems(arr) {\r\n    var n = {}, r = [];\r\n    for (var i = 0; i < arr.length; i++) {\r\n        if (!n[arr[i]]) {\r\n            n[arr[i]] = true;\r\n            r.push(arr[i]);\r\n        }\r\n    }\r\n    return r;\r\n}\r\nexports.getUniqueItems = getUniqueItems;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93b3JsZC9MZXZlbEhlbHBlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3dvcmxkL0xldmVsSGVscGVyLnRzPzU0OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVJvb3RPYmplY3QsIElMZXZlbERlZmluaXRpb24sIElUZW1wbGF0ZSwgSU1hcEVudGl0eSwgSU1vYkVudGl0eSB9IGZyb20gJy4vTGV2ZWxJbnRlcmZhY2VzJztcclxuXHJcbi8qKlxyXG4qIFJldHVybnMgYWxsIGFzc2V0cyByZWZlcmVuY2VkIGluIHRoZSBsZXZlbC5cclxuKiBAcGFyYW0gcm9vdFxyXG4qIEBwYXJhbSBsZXZlbElkXHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRMZXZlbEFzc2V0cyhyb290OiBJUm9vdE9iamVjdCwgbGV2ZWxJZDogbnVtYmVyKTogc3RyaW5nW10ge1xyXG4gICAgdmFyIGFzc2V0czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICB2YXIgbGV2ZWw6IElMZXZlbERlZmluaXRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvb3QubGV2ZWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHJvb3QubGV2ZWxzW2ldLmlkID09PSBsZXZlbElkKSB7XHJcbiAgICAgICAgICAgIGxldmVsID0gcm9vdC5sZXZlbHNbaV07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAobGV2ZWwpIHtcclxuICAgICAgICBsZXZlbC5wYXJhbGxheC5mb3JFYWNoKChpcGx4KSA9PiB7XHJcbiAgICAgICAgICAgIGFzc2V0cyA9IGFzc2V0cy5jb25jYXQoaXBseC50ZXh0dXJlcyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChsZXZlbC5hc3NldHMgJiYgbGV2ZWwuYXNzZXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmNvbmNhdChsZXZlbC5hc3NldHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gIG1lcmdlIGdsb2JhbCB0ZW1wbGF0ZXMgd2l0aCBsZXZlbCB0ZW1wbGF0ZXNcclxuICAgICAgICB2YXIgdGVtcGxhdGVzID0gcm9vdC50ZW1wbGF0ZXMuY29uY2F0KGxldmVsLm1hcC50ZW1wbGF0ZXMpO1xyXG5cclxuICAgICAgICAvLyBhZGQgYWxsIHRleHR1cmVzIGZyb20gdGVtcGxhdGVzICh3ZSBkb24ndCBuZWVkIHRvIGhhdmUgZW50aXRpZXMgcmVmZXJlbmNpbmcgdGhlIHRlbXBsYXRlIGlmIHRoZXkgYXJlIGluIGEgc3Bhd24pXHJcbiAgICAgICAgbGV2ZWwubWFwLnRlbXBsYXRlcy5mb3JFYWNoKCh0b3MpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0b3MudHlwZSB8fCB0b3MudHlwZSAhPT0gXCJzcGF3bl9wb2ludFwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcGwgPSB0b3MgYXMgSVRlbXBsYXRlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpc3BPYmogPSB0ZW1wbC5kaXNwbGF5T2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3BPYmoudGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGlzcE9iai50ZXh0dXJlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cy5wdXNoKGRpc3BPYmoudGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmNvbmNhdChkaXNwT2JqLnRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkaXNwT2JqLnNlcXVlbmNlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BPYmouc2VxdWVuY2VzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzLnB1c2goaXRlbS50ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXZlbC5tYXAuZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5OiBJTWFwRW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBkZWZzID0gZ2V0RW50aXR5RGVmaW5pdGlvbih0ZW1wbGF0ZXMsIGVudGl0eSk7XHJcbiAgICAgICAgICAgIGlmIChkZWZzLmRvRGVmLnRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVmcy5kb0RlZi50ZXh0dXJlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLnB1c2goZGVmcy5kb0RlZi50ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmNvbmNhdChkZWZzLmRvRGVmLnRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkZWZzLmRvRGVmLnNlcXVlbmNlcykge1xyXG4gICAgICAgICAgICAgICAgZGVmcy5kb0RlZi5zZXF1ZW5jZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0cy5wdXNoKGl0ZW0udGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXZlbC5tYXAuTlBDID0gbGV2ZWwubWFwLk5QQyB8fCBbXTtcclxuICAgICAgICBsZXZlbC5tYXAuTlBDLmZvckVhY2goKHRvczogSU1vYkVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgY2hlY2sgaWYgaXRzIGEgdGVtcGxhdGUgb3Igc3Bhd25fcG9pbnRcclxuICAgICAgICAgICAgaWYgKHRvcy50eXBlICYmIHRvcy50eXBlID09PSBcInNwYXduX3BvaW50XCIpIHtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgdGhpcyBpcyBhbiBlbnRpdHkgZGVmaW5pdGlvblxyXG4gICAgICAgICAgICAgICAgbGV0IGVudGl0eTogSU1vYkVudGl0eSA9IHRvcyBhcyBJTW9iRW50aXR5O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vICBjb25jYXQgYXR0YWNrIChzdHJpbmcgfCBzdHJpbmdbXSlcclxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHkuYXR0YWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmNvbmNhdChlbnRpdHkuYXR0YWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZW50aXR5VGVtcGxhdGUgPSB0ZW1wbGF0ZXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLm5hbWUgPT09IGVudGl0eS50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5VGVtcGxhdGUgJiYgZW50aXR5VGVtcGxhdGUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IGVudGl0eVRlbXBsYXRlWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciB0ZW1wID0gJC5leHRlbmQodHJ1ZSwge30sIHRlbXBsYXRlLmRpc3BsYXlPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBkaXNwbGF5T2JqZWN0RGVmaW5pdGlvbiA9ICQuZXh0ZW5kKHRlbXAsIGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3BsYXlPYmplY3REZWZpbml0aW9uID0geyAuLi50ZW1wbGF0ZS5kaXNwbGF5T2JqZWN0LCAuLi5lbnRpdHkgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheU9iamVjdERlZmluaXRpb24udGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRpc3BsYXlPYmplY3REZWZpbml0aW9uLnRleHR1cmUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0cy5wdXNoKGRpc3BsYXlPYmplY3REZWZpbml0aW9uLnRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzID0gYXNzZXRzLmNvbmNhdChkaXNwbGF5T2JqZWN0RGVmaW5pdGlvbi50ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3BsYXlPYmplY3REZWZpbml0aW9uLmF0dGFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldHMgPSBhc3NldHMuY29uY2F0KGRpc3BsYXlPYmplY3REZWZpbml0aW9uLmF0dGFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheU9iamVjdERlZmluaXRpb24uc2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlPYmplY3REZWZpbml0aW9uLnNlcXVlbmNlcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgYWRkIG9ubHkgaWYgdGV4dHVyZSBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHMucHVzaChpdGVtLnRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAgY29udmVydCBqc29uIGF0bGFzIHByZWZpeGVkIHRleHR1cmUgbmFtZXMgdG8gb25seSBqc29uIGZpbGUgbmFtZXNcclxuICAgIGFzc2V0cyA9IGFzc2V0cy5tYXAoKG5hbWUpPT4ge1xyXG4gICAgICAgIGxldCBpZHggPSBuYW1lLmluZGV4T2YoJy5qc29uQCcpOyAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGlkeCA+IDAgPyBuYW1lLnN1YnN0cigwLCBpZHggKyA1KSA6IG5hbWU7XHJcbiAgICB9KTtcclxuICAgIGFzc2V0cyA9IGdldFVuaXF1ZUl0ZW1zKGFzc2V0cyk7XHJcbiAgICByZXR1cm4gYXNzZXRzO1xyXG59XHJcblxyXG4vKipcclxuKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIGV4dHJhY3RlZCBkaXNwbGF5IG9iamVjdCBhbmQgYm9keSBkZWZpbml0aW9ucy5cclxuKiBAcGFyYW0gdGVtcGxhdGVzXHJcbiogQHBhcmFtIGVudGl0eVxyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW50aXR5RGVmaW5pdGlvbih0ZW1wbGF0ZXM6IEFycmF5PGFueT4sIGVudGl0eTogSU1hcEVudGl0eSB8IElNb2JFbnRpdHkpIHtcclxuICAgIGxldCBkaXNwbGF5T2JqZWN0RGVmaW5pdGlvbiA9IG51bGw7XHJcbiAgICBsZXQgYm9keURlZmluaXRpb24gPSBudWxsO1xyXG4gICAgbGV0IHRlbXBsYXRlID0ge1xyXG4gICAgICAgIG5hbWU6IG51bGwsXHJcbiAgICAgICAgZGlzcGxheU9iamVjdDogeyB0eXBlTmFtZTogXCJTcHJpdGVcIiB9LCAvLyAgICBzcHJpdGUgaXMgdGhlIGRlZmF1bHQgaWYgbm8gdGVtcGxhdGUgZXhpc3RzXHJcbiAgICAgICAgYm9keTogbnVsbCxcclxuICAgICAgICB0cmlnZ2VyOiBudWxsLFxyXG4gICAgICAgIGRyb3A6IG51bGxcclxuICAgIH07XHJcbiAgICB2YXIgZW50aXR5VGVtcGxhdGUgPSB0ZW1wbGF0ZXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLm5hbWUgPT09IGVudGl0eS50ZW1wbGF0ZSk7XHJcbiAgICBpZiAoZW50aXR5VGVtcGxhdGUgJiYgZW50aXR5VGVtcGxhdGUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRlbXBsYXRlID0gZW50aXR5VGVtcGxhdGVbMF07XHJcbiAgICB9XHJcbiAgICBkaXNwbGF5T2JqZWN0RGVmaW5pdGlvbiA9IHsgLi4udGVtcGxhdGUuZGlzcGxheU9iamVjdCwgLi4uZW50aXR5IH07XHJcblxyXG4gICAgaWYgKHRlbXBsYXRlLmRyb3ApIHtcclxuICAgICAgICBkaXNwbGF5T2JqZWN0RGVmaW5pdGlvbiA9IHsgLi4uZGlzcGxheU9iamVjdERlZmluaXRpb24sIGRyb3A6IHRlbXBsYXRlLmRyb3AgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRlbXBsYXRlLmJvZHkpIHtcclxuICAgICAgICBib2R5RGVmaW5pdGlvbiA9IHRlbXBsYXRlLmJvZHk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRyaWdnZXJUZW1wbGF0ZSA9IHVuZGVmaW5lZDtcclxuICAgIGlmICh0ZW1wbGF0ZS50cmlnZ2VyIHx8IGRpc3BsYXlPYmplY3REZWZpbml0aW9uLnRyaWdnZXIpIHtcclxuICAgICAgICB0cmlnZ2VyVGVtcGxhdGUgPSB7IC4uLnRlbXBsYXRlLnRyaWdnZXIsIC4uLmRpc3BsYXlPYmplY3REZWZpbml0aW9uLnRyaWdnZXIgfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdGVtcGxhdGVOYW1lOiB0ZW1wbGF0ZS5uYW1lLFxyXG4gICAgICAgIGRvRGVmOiBkaXNwbGF5T2JqZWN0RGVmaW5pdGlvbixcclxuICAgICAgICBiZERlZjogYm9keURlZmluaXRpb24sXHJcbiAgICAgICAgdHJpZ2dlcjogdHJpZ2dlclRlbXBsYXRlXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZmlsdGVyZWQgYXJyYXkgd2l0aCB1bmlxdWUgb25seSBpdGVtcyBmcm9tIHRoZSBpbnB1dCBhcnJheVxyXG4gKiBAcGFyYW0gYXJyIFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXF1ZUl0ZW1zKGFycikge1xyXG4gICAgdmFyIG4gPSB7fSwgciA9IFtdO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoIW5bYXJyW2ldXSkge1xyXG4gICAgICAgICAgICBuW2FycltpXV0gPSB0cnVlO1xyXG4gICAgICAgICAgICByLnB1c2goYXJyW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvR0E7QUFpSEE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQ0E7QUFrQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./world/LevelHelper.ts\n");

/***/ }),

/***/ "./world/LevelLoader.ts":
/*!******************************!*\
  !*** ./world/LevelLoader.ts ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\r\nvar Global = __webpack_require__(/*! ../global */ \"./global.ts\");\r\nvar p2 = __webpack_require__(/*! p2 */ \"./node_modules/p2/src/p2.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar CollisionGroups_1 = __webpack_require__(/*! ./CollisionGroups */ \"./world/CollisionGroups.ts\");\r\nvar SpawnPoint_1 = __webpack_require__(/*! ../mobs/SpawnPoint */ \"./mobs/SpawnPoint.ts\");\r\nvar Mob_1 = __webpack_require__(/*! ../mobs/Mob */ \"./mobs/Mob.ts\");\r\nvar LevelHelper_1 = __webpack_require__(/*! ./LevelHelper */ \"./world/LevelHelper.ts\");\r\nvar constants_1 = __webpack_require__(/*! ../constants */ \"./constants.ts\");\r\nvar LevelLoader = /** @class */ (function () {\r\n    function LevelLoader(gameLevels) {\r\n        this.gameLevels = gameLevels;\r\n    }\r\n    /**\r\n     * Registers custom factory function for creating display objects.\r\n     * @param name the entity name used in level definition\r\n     * @param factory factory function returning a display object based on the given definition\r\n     */\r\n    LevelLoader.registerFactory = function (name, factory) {\r\n        this.factoryList.set(name, factory);\r\n    };\r\n    /**\r\n     * Builds the level.\r\n     * @param id\r\n     */\r\n    LevelLoader.prototype.buildLevel = function (id) {\r\n        //  find the level by its id\r\n        var levelDefinition = undefined;\r\n        for (var i = 0; i < this.gameLevels.levels.length; i++) {\r\n            if (this.gameLevels.levels[i].id === id) {\r\n                levelDefinition = this.gameLevels.levels[i];\r\n                break;\r\n            }\r\n        }\r\n        //  create level objects\r\n        var result;\r\n        if (levelDefinition) {\r\n            result = this.createLevel(levelDefinition);\r\n        }\r\n        return result;\r\n    };\r\n    LevelLoader.prototype.createLevel = function (level) {\r\n        var result = {\r\n            parallax: [],\r\n            entities: [],\r\n            start: [],\r\n            audioTrack: level.audioTrack,\r\n            templates: [],\r\n            spawnPoints: []\r\n        };\r\n        //--------------------------------------\r\n        //  create parallax objects\r\n        //--------------------------------------            \r\n        var vps = new __1.PIXI.Point(constants_1.SCENE_WIDTH, constants_1.SCENE_HEIGHT);\r\n        level.parallax.forEach(function (iplx) {\r\n            var parallax = new __1.Parallax(vps, iplx.parallaxFactor, iplx.textures, iplx.scale);\r\n            parallax.y = iplx.y;\r\n            result.parallax.push(parallax);\r\n        });\r\n        //--------------------------------------\r\n        //  merge global with level templates\r\n        //--------------------------------------\r\n        var templates = Global.LevelDefinitions.templates.concat(level.map.templates);\r\n        result.templates = templates;\r\n        //--------------------------------------\r\n        //  create display/physics object pairs\r\n        //--------------------------------------\r\n        level.map.entities.forEach(function (entity, idx, arr) {\r\n            var p2body = LevelLoader.createEntity(templates, entity);\r\n            result.entities.push(p2body);\r\n        });\r\n        //--------------------------------------\r\n        //  create NPC's\r\n        //--------------------------------------\r\n        level.map.NPC = level.map.NPC || [];\r\n        level.map.NPC.forEach(function (npc, idx, arr) {\r\n            if (npc.type && npc.type === \"spawn_point\") {\r\n                var sp = npc;\r\n                var entity = sp.entity;\r\n                result.spawnPoints.push(new SpawnPoint_1.SpawnPoint(sp.name, sp.xy[0], sp.xy[1], sp.area, sp.maxMobCount, sp.respawnSeconds, entity));\r\n            }\r\n            else {\r\n                var p2body = LevelLoader.createMob(templates, npc);\r\n                result.entities.push(p2body);\r\n            }\r\n        });\r\n        result.start = level.map.start;\r\n        return result;\r\n    };\r\n    LevelLoader.createEntity = function (templates, entity) {\r\n        var defs = LevelHelper_1.getEntityDefinition(templates, entity);\r\n        //  display object\r\n        var dispObj = LevelLoader.buildDisplayObject(defs.doDef);\r\n        dispObj.name = entity.name || entity.template;\r\n        dispObj.templateName = defs.templateName;\r\n        //  body\r\n        var p2body;\r\n        if (defs.bdDef) {\r\n            p2body = LevelLoader.buildPhysicsObject(defs.bdDef, dispObj);\r\n            p2body.shapes.every(function (s) {\r\n                if (defs.bdDef.collisionType === \"ground\") {\r\n                    s.collisionGroup = CollisionGroups_1.COL_GRP_GROUND;\r\n                    s.collisionMask = CollisionGroups_1.COL_GRP_PLAYER | CollisionGroups_1.COL_GRP_NPC | CollisionGroups_1.COL_GRP_SCENE | CollisionGroups_1.COL_GRP_BULLET;\r\n                }\r\n                else {\r\n                    s.collisionGroup = CollisionGroups_1.COL_GRP_SCENE;\r\n                    s.collisionMask = CollisionGroups_1.COL_GRP_PLAYER | CollisionGroups_1.COL_GRP_NPC | CollisionGroups_1.COL_GRP_SCENE | CollisionGroups_1.COL_GRP_GROUND;\r\n                }\r\n                return true;\r\n            });\r\n            p2body.DisplayObject = dispObj;\r\n            //  trigger\r\n            if (defs.trigger) {\r\n                p2body.Trigger = defs.trigger;\r\n            }\r\n        }\r\n        else {\r\n            p2body = new p2.Body();\r\n            p2body.DisplayObject = dispObj;\r\n        }\r\n        return p2body;\r\n    };\r\n    LevelLoader.createMob = function (templates, entity) {\r\n        var defs = LevelHelper_1.getEntityDefinition(templates, entity);\r\n        //  display object\r\n        var mobDispObj = LevelLoader.buildDisplayObject(defs.doDef);\r\n        mobDispObj.name = entity.name || entity.template;\r\n        mobDispObj.templateName = defs.templateName;\r\n        // attributes and AI\r\n        mobDispObj.attributes = entity.attributes || defs.doDef.attributes || [];\r\n        mobDispObj.createAI(entity.ai || \"basic_static\");\r\n        mobDispObj.atkTexture = entity.attack || defs.doDef.attack;\r\n        //  body        \r\n        defs.bdDef.material = defs.bdDef.material || \"mob_default\";\r\n        var p2body = LevelLoader.buildPhysicsObject(defs.bdDef, mobDispObj);\r\n        p2body.shapes.every(function (s) {\r\n            s.collisionGroup = CollisionGroups_1.COL_GRP_NPC;\r\n            s.collisionMask = CollisionGroups_1.COL_GRP_PLAYER | CollisionGroups_1.COL_GRP_GROUND | CollisionGroups_1.COL_GRP_SCENE;\r\n            return true;\r\n        });\r\n        p2body.DisplayObject = mobDispObj;\r\n        //  trigger\r\n        if (defs.trigger) {\r\n            p2body.Trigger = defs.trigger;\r\n        }\r\n        return p2body;\r\n    };\r\n    /**\r\n     * Creates a display object from the definition.\r\n     * @param definition\r\n     */\r\n    LevelLoader.buildDisplayObject = function (definition) {\r\n        var dispObj;\r\n        definition = tslib_1.__assign({ anchor: 0.5, pivot: 0.5, scale: [1, 1] }, definition);\r\n        switch (definition.typeName) {\r\n            case \"Mob\":\r\n                var mob_1 = new Mob_1.Mob(definition.texture);\r\n                //  if animations are defined in the json replace the built-in mob animations\r\n                if (definition.sequences) {\r\n                    mob_1.clearAnimations();\r\n                    definition.sequences.forEach(function (seq) {\r\n                        var textureName = seq.texture || definition.texture;\r\n                        var aseq = new __1.AnimationSequence(seq.name, textureName, seq.frames, seq.framesize[0], seq.framesize[1]);\r\n                        mob_1.addAnimations(aseq);\r\n                    });\r\n                    mob_1.play(definition.sequences[0].name);\r\n                }\r\n                if (definition.fps) {\r\n                    mob_1.fps = definition.fps;\r\n                }\r\n                mob_1.typeName = \"Mob\";\r\n                dispObj = mob_1;\r\n                break;\r\n            case \"Sensor\":\r\n                dispObj = new __1.PIXI.DisplayObject();\r\n                dispObj.typeName = \"Sensor\";\r\n                break;\r\n            case \"AnimatedSprite\":\r\n                var aspr = new __1.AnimatedSprite();\r\n                definition.sequences.forEach(function (seq, idx, arr) {\r\n                    var aseq = new __1.AnimationSequence(seq.name, seq.texture, seq.frames, seq.framesize[0], seq.framesize[1]);\r\n                    aspr.addAnimations(aseq);\r\n                });\r\n                aspr.play(definition.sequences[0].name, definition.fps);\r\n                aspr.typeName = \"AnimatedSprite\";\r\n                dispObj = aspr;\r\n                break;\r\n            case \"Sprite\":\r\n                var sprTexture = __1.TextureLoader.Get(definition.texture);\r\n                var spr = new __1.PIXI.Sprite(sprTexture);\r\n                spr.typeName = \"Sprite\";\r\n                dispObj = spr;\r\n                break;\r\n            default:\r\n                var factory = this.factoryList.get(definition.typeName);\r\n                if (factory)\r\n                    dispObj = factory(definition);\r\n                else\r\n                    throw \"Factory not found for typeName: \" + definition.typeName;\r\n                break;\r\n        }\r\n        (dispObj).scale.set(definition.scale[0], definition.scale[1] * -1); //  the worldContainer has -y scale so we must flip it up again \r\n        if (dispObj.anchor)\r\n            dispObj.anchor.set(definition.anchor);\r\n        dispObj.pivot.set(definition.pivot);\r\n        if (definition.visible !== undefined) {\r\n            dispObj.visible = definition.visible;\r\n        }\r\n        dispObj.rotation = definition.rotation || 0;\r\n        if (definition.xy) {\r\n            dispObj.position.set(definition.xy[0], definition.xy[1]);\r\n        }\r\n        if (definition.interactionType) {\r\n            dispObj.interactionType = definition.interactionType;\r\n        }\r\n        if (definition.drop) {\r\n            dispObj.drop = definition.drop;\r\n        }\r\n        if (definition.tint) {\r\n            dispObj.tint = parseInt(definition.tint, 16);\r\n        }\r\n        return dispObj;\r\n    };\r\n    /**\r\n     * Creates a physics body and shape from the definition.\r\n     * @param definition\r\n     * @param dispObj the display object to retrieve the defaults from.\r\n     * @param preventSensor if true a non sensor body will be created (this is to support mobs\r\n     *                      that must have normal bodies but also an interactionType.\r\n     */\r\n    LevelLoader.buildPhysicsObject = function (definition, dispObj, preventSensor) {\r\n        if (preventSensor === void 0) { preventSensor = false; }\r\n        var body;\r\n        var w = 0, h = 0;\r\n        if (definition) {\r\n            var options = {\r\n                mass: definition.mass,\r\n                position: definition.xy ? definition.xy : [dispObj.x, dispObj.y],\r\n                angle: definition.angle || dispObj.rotation,\r\n                fixedRotation: definition.fixedRotation || false,\r\n                angularDamping: definition.angularDamping || 0.1,\r\n                damping: definition.damping || 0.1,\r\n            };\r\n            body = new p2.Body(options);\r\n            body.type = definition.type || p2.Body.KINEMATIC; /* DYNAMIC = 1, DYNAMIC = 1, STATIC = 2 */\r\n            var dispObjAsAny = dispObj;\r\n            var shape;\r\n            switch (definition.shape) {\r\n                case \"Circle\":\r\n                    var radius = 32;\r\n                    if (definition.size) {\r\n                        if (definition.size.constructor === Array) {\r\n                            radius = definition.size[0];\r\n                        }\r\n                        else {\r\n                            radius = definition.size;\r\n                        }\r\n                    }\r\n                    else {\r\n                        radius = dispObjAsAny.width;\r\n                    }\r\n                    shape = new p2.Circle({ radius: radius });\r\n                    break;\r\n                case \"Platform\":\r\n                    if (definition.size) {\r\n                        w = definition.size[0];\r\n                        h = definition.size[1];\r\n                    }\r\n                    else {\r\n                        w = Math.abs(dispObjAsAny.width);\r\n                        h = Math.abs(dispObjAsAny.height);\r\n                    }\r\n                    shape = new p2.Box({\r\n                        width: w,\r\n                        height: h,\r\n                    });\r\n                    //  the position is centered but we need it to be left top aligned\r\n                    body.position[0] = body.position[0] + w / 2;\r\n                    body.position[1] = body.position[1] - h / 2;\r\n                    break;\r\n                case \"Box\":\r\n                    //  get the size\r\n                    if (definition.size) {\r\n                        w = definition.size[0];\r\n                        h = definition.size[1];\r\n                    }\r\n                    else {\r\n                        if (dispObjAsAny.width) {\r\n                            w = Math.abs(dispObjAsAny.width);\r\n                            h = Math.abs(dispObjAsAny.height);\r\n                        }\r\n                        else {\r\n                            //  TODO: check this - seems not to get correct bounds\r\n                            w = dispObj.scale.x * dispObj.getLocalBounds().width;\r\n                            h = dispObj.scale.y * dispObj.getLocalBounds().height;\r\n                        }\r\n                    }\r\n                    shape = new p2.Box({\r\n                        width: w,\r\n                        height: h,\r\n                    });\r\n                    break;\r\n                //  TODO: implement other shapes if needed\r\n            }\r\n            if (definition.material) {\r\n                shape.materialName = definition.material;\r\n            }\r\n            if (!preventSensor && !!dispObj.interactionType) {\r\n                shape.sensor = true;\r\n                body.type = p2.Body.STATIC;\r\n                body.collisionResponse = false;\r\n                body.setDensity(0.0); //   this is to prevent body impacts on player collide (makes no sense as it is a sensor, bug maybe?)\r\n                console.log(\"created collectible sensor\", shape);\r\n            }\r\n            else if (dispObj.typeName === \"Sensor\") {\r\n                shape.sensor = true;\r\n                body.type = p2.Body.STATIC;\r\n                body.collisionResponse = false;\r\n                body.setDensity(0.0);\r\n            }\r\n            body.addShape(shape);\r\n        }\r\n        return body;\r\n    };\r\n    LevelLoader.factoryList = new __1.Dictionary();\r\n    return LevelLoader;\r\n}());\r\nexports.LevelLoader = LevelLoader;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93b3JsZC9MZXZlbExvYWRlci50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3dvcmxkL0xldmVsTG9hZGVyLnRzP2Q0NDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgR2xvYmFsIGZyb20gXCIuLi9nbG9iYWxcIjtcclxuaW1wb3J0ICogYXMgcDIgZnJvbSBcInAyXCI7XHJcbmltcG9ydCB7IFBJWEksIFBhcmFsbGF4LCBEaWN0aW9uYXJ5LCBBbmltYXRlZFNwcml0ZSwgQW5pbWF0aW9uU2VxdWVuY2UsIFRleHR1cmVMb2FkZXJ9IGZyb20gXCIuLlwiO1xyXG5pbXBvcnQgeyBDT0xfR1JQX1BMQVlFUiwgQ09MX0dSUF9HUk9VTkQsIENPTF9HUlBfTlBDLCBDT0xfR1JQX1NDRU5FLCBDT0xfR1JQX0JVTExFVCB9IGZyb20gXCIuL0NvbGxpc2lvbkdyb3Vwc1wiO1xyXG5pbXBvcnQgeyBTcGF3blBvaW50IH0gZnJvbSAnLi4vbW9icy9TcGF3blBvaW50JztcclxuaW1wb3J0IHsgTW9iIH0gZnJvbSAnLi4vbW9icy9Nb2InO1xyXG5pbXBvcnQgeyBJUm9vdE9iamVjdCwgSUxldmVsLCBJTGV2ZWxEZWZpbml0aW9uLCBJTWFwRW50aXR5LCBJTW9iRW50aXR5LCBJU3Bhd25Qb2ludCwgSURpc3BsYXlPYmplY3REZWZpbml0aW9uLCBJSW50ZXJhY3Rpb25UeXBlLCBJQm9keURlZmluaXRpb24gfSBmcm9tICcuL0xldmVsSW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IGdldEVudGl0eURlZmluaXRpb24gfSBmcm9tICcuL0xldmVsSGVscGVyJztcclxuaW1wb3J0IHsgU0NFTkVfSEVJR0hULCBTQ0VORV9XSURUSCB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcblxyXG5kZWNsYXJlIHR5cGUgRm4gPSAoZGVmaW5pdGlvbjogSURpc3BsYXlPYmplY3REZWZpbml0aW9uKSA9PiBQSVhJLkRpc3BsYXlPYmplY3Q7XHJcblxyXG5leHBvcnQgY2xhc3MgTGV2ZWxMb2FkZXIge1xyXG4gICAgXHJcbiAgICBwcml2YXRlIGdhbWVMZXZlbHM6IElSb290T2JqZWN0O1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmFjdG9yeUxpc3QgPSBuZXcgRGljdGlvbmFyeTxGbj4oKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihnYW1lTGV2ZWxzOiBJUm9vdE9iamVjdCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZUxldmVscyA9IGdhbWVMZXZlbHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgY3VzdG9tIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGRpc3BsYXkgb2JqZWN0cy5cclxuICAgICAqIEBwYXJhbSBuYW1lIHRoZSBlbnRpdHkgbmFtZSB1c2VkIGluIGxldmVsIGRlZmluaXRpb25cclxuICAgICAqIEBwYXJhbSBmYWN0b3J5IGZhY3RvcnkgZnVuY3Rpb24gcmV0dXJuaW5nIGEgZGlzcGxheSBvYmplY3QgYmFzZWQgb24gdGhlIGdpdmVuIGRlZmluaXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWdpc3RlckZhY3RvcnkobmFtZTpzdHJpbmcsIGZhY3Rvcnk6Rm4pe1xyXG4gICAgICAgIHRoaXMuZmFjdG9yeUxpc3Quc2V0KG5hbWUsIGZhY3RvcnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHRoZSBsZXZlbC5cclxuICAgICAqIEBwYXJhbSBpZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYnVpbGRMZXZlbChpZDogbnVtYmVyKTogSUxldmVsIHtcclxuXHJcbiAgICAgICAgLy8gIGZpbmQgdGhlIGxldmVsIGJ5IGl0cyBpZFxyXG4gICAgICAgIHZhciBsZXZlbERlZmluaXRpb246IElMZXZlbERlZmluaXRpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmdhbWVMZXZlbHMubGV2ZWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWVMZXZlbHMubGV2ZWxzW2ldLmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgbGV2ZWxEZWZpbml0aW9uID0gdGhpcy5nYW1lTGV2ZWxzLmxldmVsc1tpXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgY3JlYXRlIGxldmVsIG9iamVjdHNcclxuICAgICAgICB2YXIgcmVzdWx0OiBJTGV2ZWw7XHJcbiAgICAgICAgaWYgKGxldmVsRGVmaW5pdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmNyZWF0ZUxldmVsKGxldmVsRGVmaW5pdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVMZXZlbChsZXZlbDogSUxldmVsRGVmaW5pdGlvbik6IElMZXZlbCB7XHJcbiAgICAgICAgdmFyIHJlc3VsdDogSUxldmVsID0ge1xyXG4gICAgICAgICAgICBwYXJhbGxheDogW10sXHJcbiAgICAgICAgICAgIGVudGl0aWVzOiBbXSxcclxuICAgICAgICAgICAgc3RhcnQ6IFtdLFxyXG4gICAgICAgICAgICBhdWRpb1RyYWNrOiBsZXZlbC5hdWRpb1RyYWNrLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZXM6IFtdLFxyXG4gICAgICAgICAgICBzcGF3blBvaW50czogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgLy8gIGNyZWF0ZSBwYXJhbGxheCBvYmplY3RzXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgICAgICAgICAgIFxyXG4gICAgICAgIHZhciB2cHMgPSBuZXcgUElYSS5Qb2ludChTQ0VORV9XSURUSCwgU0NFTkVfSEVJR0hUKTtcclxuICAgICAgICBsZXZlbC5wYXJhbGxheC5mb3JFYWNoKChpcGx4KSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbGxheCA9IG5ldyBQYXJhbGxheCh2cHMsIGlwbHgucGFyYWxsYXhGYWN0b3IsIGlwbHgudGV4dHVyZXMsIGlwbHguc2NhbGUpO1xyXG4gICAgICAgICAgICBwYXJhbGxheC55ID0gaXBseC55O1xyXG4gICAgICAgICAgICByZXN1bHQucGFyYWxsYXgucHVzaChwYXJhbGxheCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgbWVyZ2UgZ2xvYmFsIHdpdGggbGV2ZWwgdGVtcGxhdGVzXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHZhciB0ZW1wbGF0ZXMgPSBHbG9iYWwuTGV2ZWxEZWZpbml0aW9ucy50ZW1wbGF0ZXMuY29uY2F0KGxldmVsLm1hcC50ZW1wbGF0ZXMpO1xyXG4gICAgICAgIHJlc3VsdC50ZW1wbGF0ZXMgPSB0ZW1wbGF0ZXM7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgY3JlYXRlIGRpc3BsYXkvcGh5c2ljcyBvYmplY3QgcGFpcnNcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgbGV2ZWwubWFwLmVudGl0aWVzLmZvckVhY2goKGVudGl0eTogSU1hcEVudGl0eSwgaWR4LCBhcnIpID0+IHtcclxuICAgICAgICAgICAgbGV0IHAyYm9keSA9IExldmVsTG9hZGVyLmNyZWF0ZUVudGl0eSh0ZW1wbGF0ZXMsIGVudGl0eSk7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJlc3VsdC5lbnRpdGllcy5wdXNoKHAyYm9keSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgY3JlYXRlIE5QQydzXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGxldmVsLm1hcC5OUEMgPSBsZXZlbC5tYXAuTlBDIHx8IFtdO1xyXG4gICAgICAgIGxldmVsLm1hcC5OUEMuZm9yRWFjaCgobnBjOiBJTW9iRW50aXR5LCBpZHgsIGFycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAobnBjLnR5cGUgJiYgbnBjLnR5cGUgPT09IFwic3Bhd25fcG9pbnRcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNwID0gPGFueT5ucGMgYXMgSVNwYXduUG9pbnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW50aXR5ID0gc3AuZW50aXR5O1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnNwYXduUG9pbnRzLnB1c2gobmV3IFNwYXduUG9pbnQoc3AubmFtZSwgc3AueHlbMF0sIHNwLnh5WzFdLCBzcC5hcmVhLCBzcC5tYXhNb2JDb3VudCwgc3AucmVzcGF3blNlY29uZHMsIGVudGl0eSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IHAyYm9keSA9IExldmVsTG9hZGVyLmNyZWF0ZU1vYih0ZW1wbGF0ZXMsIG5wYyk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmVudGl0aWVzLnB1c2gocDJib2R5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlc3VsdC5zdGFydCA9IGxldmVsLm1hcC5zdGFydDtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRW50aXR5KHRlbXBsYXRlczogQXJyYXk8YW55PiwgZW50aXR5OiBJTWFwRW50aXR5KTogcDIuQm9keSB7XHJcbiAgICAgICAgbGV0IGRlZnMgPSBnZXRFbnRpdHlEZWZpbml0aW9uKHRlbXBsYXRlcywgZW50aXR5KTtcclxuXHJcbiAgICAgICAgLy8gIGRpc3BsYXkgb2JqZWN0XHJcbiAgICAgICAgbGV0IGRpc3BPYmo6IFBJWEkuRGlzcGxheU9iamVjdCA9IExldmVsTG9hZGVyLmJ1aWxkRGlzcGxheU9iamVjdChkZWZzLmRvRGVmKTtcclxuICAgICAgICBkaXNwT2JqLm5hbWUgPSBlbnRpdHkubmFtZSB8fCBlbnRpdHkudGVtcGxhdGU7XHJcbiAgICAgICAgKGRpc3BPYmogYXMgYW55KS50ZW1wbGF0ZU5hbWUgPSBkZWZzLnRlbXBsYXRlTmFtZTtcclxuXHJcbiAgICAgICAgLy8gIGJvZHlcclxuICAgICAgICB2YXIgcDJib2R5OiBwMi5Cb2R5O1xyXG4gICAgICAgIGlmIChkZWZzLmJkRGVmKSB7XHJcbiAgICAgICAgICAgIHAyYm9keSA9IExldmVsTG9hZGVyLmJ1aWxkUGh5c2ljc09iamVjdChkZWZzLmJkRGVmLCBkaXNwT2JqKTtcclxuICAgICAgICAgICAgcDJib2R5LnNoYXBlcy5ldmVyeSgoczogcDIuU2hhcGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZzLmJkRGVmLmNvbGxpc2lvblR5cGUgPT09IFwiZ3JvdW5kXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzLmNvbGxpc2lvbkdyb3VwID0gQ09MX0dSUF9HUk9VTkQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5jb2xsaXNpb25NYXNrID0gQ09MX0dSUF9QTEFZRVIgfCBDT0xfR1JQX05QQyB8IENPTF9HUlBfU0NFTkUgfCBDT0xfR1JQX0JVTExFVDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5jb2xsaXNpb25Hcm91cCA9IENPTF9HUlBfU0NFTkU7XHJcbiAgICAgICAgICAgICAgICAgICAgcy5jb2xsaXNpb25NYXNrID0gQ09MX0dSUF9QTEFZRVIgfCBDT0xfR1JQX05QQyB8IENPTF9HUlBfU0NFTkUgfCBDT0xfR1JQX0dST1VORDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgKHAyYm9keSBhcyBhbnkpLkRpc3BsYXlPYmplY3QgPSBkaXNwT2JqO1xyXG5cclxuICAgICAgICAgICAgLy8gIHRyaWdnZXJcclxuICAgICAgICAgICAgaWYgKGRlZnMudHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgKHAyYm9keSBhcyBhbnkpLlRyaWdnZXIgPSBkZWZzLnRyaWdnZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwMmJvZHkgPSBuZXcgcDIuQm9keSgpO1xyXG4gICAgICAgICAgICAocDJib2R5IGFzIGFueSkuRGlzcGxheU9iamVjdCA9IGRpc3BPYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwMmJvZHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVNb2IodGVtcGxhdGVzOiBBcnJheTxhbnk+LCBlbnRpdHk6IElNb2JFbnRpdHkpOiBwMi5Cb2R5IHtcclxuICAgICAgICBsZXQgZGVmcyA9IGdldEVudGl0eURlZmluaXRpb24odGVtcGxhdGVzLCBlbnRpdHkpO1xyXG5cclxuICAgICAgICAvLyAgZGlzcGxheSBvYmplY3RcclxuICAgICAgICBsZXQgbW9iRGlzcE9iajogTW9iID0gTGV2ZWxMb2FkZXIuYnVpbGREaXNwbGF5T2JqZWN0KGRlZnMuZG9EZWYpIGFzIE1vYjtcclxuICAgICAgICBtb2JEaXNwT2JqLm5hbWUgPSBlbnRpdHkubmFtZSB8fCBlbnRpdHkudGVtcGxhdGU7XHJcbiAgICAgICAgKG1vYkRpc3BPYmogYXMgYW55KS50ZW1wbGF0ZU5hbWUgPSBkZWZzLnRlbXBsYXRlTmFtZTtcclxuXHJcbiAgICAgICAgLy8gYXR0cmlidXRlcyBhbmQgQUlcclxuICAgICAgICBtb2JEaXNwT2JqLmF0dHJpYnV0ZXMgPSBlbnRpdHkuYXR0cmlidXRlcyB8fCBkZWZzLmRvRGVmLmF0dHJpYnV0ZXMgfHwgW107XHJcbiAgICAgICAgbW9iRGlzcE9iai5jcmVhdGVBSShlbnRpdHkuYWkgfHwgXCJiYXNpY19zdGF0aWNcIik7XHJcbiAgICAgICAgbW9iRGlzcE9iai5hdGtUZXh0dXJlID0gZW50aXR5LmF0dGFjayB8fCBkZWZzLmRvRGVmLmF0dGFjaztcclxuXHJcbiAgICAgICAgLy8gIGJvZHkgICAgICAgIFxyXG4gICAgICAgIGRlZnMuYmREZWYubWF0ZXJpYWwgPSBkZWZzLmJkRGVmLm1hdGVyaWFsIHx8IFwibW9iX2RlZmF1bHRcIjtcclxuICAgICAgICB2YXIgcDJib2R5OiBwMi5Cb2R5ID0gTGV2ZWxMb2FkZXIuYnVpbGRQaHlzaWNzT2JqZWN0KGRlZnMuYmREZWYsIG1vYkRpc3BPYmopO1xyXG4gICAgICAgIHAyYm9keS5zaGFwZXMuZXZlcnkoKHM6IHAyLlNoYXBlKSA9PiB7XHJcbiAgICAgICAgICAgIHMuY29sbGlzaW9uR3JvdXAgPSBDT0xfR1JQX05QQztcclxuICAgICAgICAgICAgcy5jb2xsaXNpb25NYXNrID0gQ09MX0dSUF9QTEFZRVIgfCBDT0xfR1JQX0dST1VORCB8IENPTF9HUlBfU0NFTkU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIChwMmJvZHkgYXMgYW55KS5EaXNwbGF5T2JqZWN0ID0gbW9iRGlzcE9iajtcclxuXHJcbiAgICAgICAgLy8gIHRyaWdnZXJcclxuICAgICAgICBpZiAoZGVmcy50cmlnZ2VyKSB7XHJcbiAgICAgICAgICAgIChwMmJvZHkgYXMgYW55KS5UcmlnZ2VyID0gZGVmcy50cmlnZ2VyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHAyYm9keTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBkaXNwbGF5IG9iamVjdCBmcm9tIHRoZSBkZWZpbml0aW9uLlxyXG4gICAgICogQHBhcmFtIGRlZmluaXRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYnVpbGREaXNwbGF5T2JqZWN0KGRlZmluaXRpb246IElEaXNwbGF5T2JqZWN0RGVmaW5pdGlvbik6IFBJWEkuRGlzcGxheU9iamVjdCB7XHJcbiAgICAgICAgdmFyIGRpc3BPYmo6IFBJWEkuRGlzcGxheU9iamVjdDtcclxuICAgICAgICBkZWZpbml0aW9uID0gey4uLnthbmNob3I6IDAuNSwgcGl2b3Q6IDAuNSwgc2NhbGU6WzEsMV19LCAuLi5kZWZpbml0aW9ufTtcclxuICAgICAgICBzd2l0Y2ggKGRlZmluaXRpb24udHlwZU5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIk1vYlwiOlxyXG4gICAgICAgICAgICAgICAgbGV0IG1vYiA9IG5ldyBNb2IoZGVmaW5pdGlvbi50ZXh0dXJlIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAvLyAgaWYgYW5pbWF0aW9ucyBhcmUgZGVmaW5lZCBpbiB0aGUganNvbiByZXBsYWNlIHRoZSBidWlsdC1pbiBtb2IgYW5pbWF0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uc2VxdWVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9iLmNsZWFyQW5pbWF0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb24uc2VxdWVuY2VzLmZvckVhY2goKHNlcSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZU5hbWUgPSBzZXEudGV4dHVyZSB8fCBkZWZpbml0aW9uLnRleHR1cmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhc2VxID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKHNlcS5uYW1lLCB0ZXh0dXJlTmFtZSBhcyBzdHJpbmcsIHNlcS5mcmFtZXMsIHNlcS5mcmFtZXNpemVbMF0sIHNlcS5mcmFtZXNpemVbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2IuYWRkQW5pbWF0aW9ucyhhc2VxKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBtb2IucGxheShkZWZpbml0aW9uLnNlcXVlbmNlc1swXS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkZWZpbml0aW9uLmZwcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vYi5mcHMgPSBkZWZpbml0aW9uLmZwcztcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAobW9iIGFzIGFueSkudHlwZU5hbWUgPSBcIk1vYlwiO1xyXG4gICAgICAgICAgICAgICAgZGlzcE9iaiA9IG1vYjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcIlNlbnNvclwiOlxyXG4gICAgICAgICAgICAgICAgZGlzcE9iaiA9IG5ldyBQSVhJLkRpc3BsYXlPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgIChkaXNwT2JqIGFzIGFueSkudHlwZU5hbWUgPSBcIlNlbnNvclwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwiQW5pbWF0ZWRTcHJpdGVcIjpcclxuICAgICAgICAgICAgICAgIHZhciBhc3ByID0gbmV3IEFuaW1hdGVkU3ByaXRlKCk7XHJcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLnNlcXVlbmNlcy5mb3JFYWNoKChzZXEsIGlkeCwgYXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzZXEgPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2Uoc2VxLm5hbWUsIHNlcS50ZXh0dXJlLCBzZXEuZnJhbWVzLCBzZXEuZnJhbWVzaXplWzBdLCBzZXEuZnJhbWVzaXplWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICBhc3ByLmFkZEFuaW1hdGlvbnMoYXNlcSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFzcHIucGxheShkZWZpbml0aW9uLnNlcXVlbmNlc1swXS5uYW1lLCBkZWZpbml0aW9uLmZwcyk7XHJcbiAgICAgICAgICAgICAgICAoYXNwciBhcyBhbnkpLnR5cGVOYW1lID0gXCJBbmltYXRlZFNwcml0ZVwiO1xyXG4gICAgICAgICAgICAgICAgZGlzcE9iaiA9IGFzcHI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJTcHJpdGVcIjpcclxuICAgICAgICAgICAgICAgIHZhciBzcHJUZXh0dXJlID0gVGV4dHVyZUxvYWRlci5HZXQoZGVmaW5pdGlvbi50ZXh0dXJlIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3ByID0gbmV3IFBJWEkuU3ByaXRlKHNwclRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgKHNwciBhcyBhbnkpLnR5cGVOYW1lID0gXCJTcHJpdGVcIjtcclxuICAgICAgICAgICAgICAgIGRpc3BPYmogPSBzcHI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuZmFjdG9yeUxpc3QuZ2V0KGRlZmluaXRpb24udHlwZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYoZmFjdG9yeSlcclxuICAgICAgICAgICAgICAgICAgICBkaXNwT2JqID0gZmFjdG9yeShkZWZpbml0aW9uKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIkZhY3Rvcnkgbm90IGZvdW5kIGZvciB0eXBlTmFtZTogXCIgKyBkZWZpbml0aW9uLnR5cGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIChkaXNwT2JqKS5zY2FsZS5zZXQoZGVmaW5pdGlvbi5zY2FsZVswXSwgZGVmaW5pdGlvbi5zY2FsZVsxXSAqIC0xKTsgLy8gIHRoZSB3b3JsZENvbnRhaW5lciBoYXMgLXkgc2NhbGUgc28gd2UgbXVzdCBmbGlwIGl0IHVwIGFnYWluIFxyXG4gICAgICAgIGlmKChkaXNwT2JqIGFzIGFueSkuYW5jaG9yKShkaXNwT2JqIGFzIGFueSkuYW5jaG9yLnNldChkZWZpbml0aW9uLmFuY2hvcik7XHJcbiAgICAgICAgZGlzcE9iai5waXZvdC5zZXQoZGVmaW5pdGlvbi5waXZvdCk7XHJcblxyXG4gICAgICAgIGlmIChkZWZpbml0aW9uLnZpc2libGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkaXNwT2JqLnZpc2libGUgPSBkZWZpbml0aW9uLnZpc2libGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc3BPYmoucm90YXRpb24gPSBkZWZpbml0aW9uLnJvdGF0aW9uIHx8IDA7XHJcbiAgICAgICAgaWYgKGRlZmluaXRpb24ueHkpIHtcclxuICAgICAgICAgICAgZGlzcE9iai5wb3NpdGlvbi5zZXQoZGVmaW5pdGlvbi54eVswXSwgZGVmaW5pdGlvbi54eVsxXSk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgaWYgKGRlZmluaXRpb24uaW50ZXJhY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgICAgIChkaXNwT2JqIGFzIElJbnRlcmFjdGlvblR5cGUpLmludGVyYWN0aW9uVHlwZSA9IGRlZmluaXRpb24uaW50ZXJhY3Rpb25UeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVmaW5pdGlvbi5kcm9wKSB7XHJcbiAgICAgICAgICAgIChkaXNwT2JqIGFzIElJbnRlcmFjdGlvblR5cGUpLmRyb3AgPSBkZWZpbml0aW9uLmRyb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZWZpbml0aW9uLnRpbnQpIHtcclxuICAgICAgICAgICAgKGRpc3BPYmogYXMgYW55KS50aW50ID0gcGFyc2VJbnQoZGVmaW5pdGlvbi50aW50LCAxNik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaXNwT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBoeXNpY3MgYm9keSBhbmQgc2hhcGUgZnJvbSB0aGUgZGVmaW5pdGlvbi5cclxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uXHJcbiAgICAgKiBAcGFyYW0gZGlzcE9iaiB0aGUgZGlzcGxheSBvYmplY3QgdG8gcmV0cmlldmUgdGhlIGRlZmF1bHRzIGZyb20uXHJcbiAgICAgKiBAcGFyYW0gcHJldmVudFNlbnNvciBpZiB0cnVlIGEgbm9uIHNlbnNvciBib2R5IHdpbGwgYmUgY3JlYXRlZCAodGhpcyBpcyB0byBzdXBwb3J0IG1vYnNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHRoYXQgbXVzdCBoYXZlIG5vcm1hbCBib2RpZXMgYnV0IGFsc28gYW4gaW50ZXJhY3Rpb25UeXBlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBidWlsZFBoeXNpY3NPYmplY3QoZGVmaW5pdGlvbjogSUJvZHlEZWZpbml0aW9uLCBkaXNwT2JqOiBQSVhJLkRpc3BsYXlPYmplY3QsIHByZXZlbnRTZW5zb3I6IGJvb2xlYW4gPSBmYWxzZSk6IHAyLkJvZHkge1xyXG4gICAgICAgIHZhciBib2R5OiBwMi5Cb2R5O1xyXG4gICAgICAgIGxldCB3ID0gMCwgaCA9IDA7XHJcbiAgICAgICAgaWYgKGRlZmluaXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnM6IHAyLkJvZHlPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbWFzczogZGVmaW5pdGlvbi5tYXNzLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGRlZmluaXRpb24ueHkgPyBkZWZpbml0aW9uLnh5IDogW2Rpc3BPYmoueCwgZGlzcE9iai55XSxcclxuICAgICAgICAgICAgICAgIGFuZ2xlOiBkZWZpbml0aW9uLmFuZ2xlIHx8IGRpc3BPYmoucm90YXRpb24sXHJcbiAgICAgICAgICAgICAgICBmaXhlZFJvdGF0aW9uOiBkZWZpbml0aW9uLmZpeGVkUm90YXRpb24gfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyRGFtcGluZzogZGVmaW5pdGlvbi5hbmd1bGFyRGFtcGluZyB8fCAwLjEsXHJcbiAgICAgICAgICAgICAgICBkYW1waW5nOiBkZWZpbml0aW9uLmRhbXBpbmcgfHwgMC4xLFxyXG4gICAgICAgICAgICB9IGFzIHAyLkJvZHlPcHRpb25zO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYm9keSA9IG5ldyBwMi5Cb2R5KG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBib2R5LnR5cGUgPSBkZWZpbml0aW9uLnR5cGUgfHwgcDIuQm9keS5LSU5FTUFUSUM7IC8qIERZTkFNSUMgPSAxLCBEWU5BTUlDID0gMSwgU1RBVElDID0gMiAqL1xyXG4gICAgICAgICAgICB2YXIgZGlzcE9iakFzQW55OiBhbnkgPSBkaXNwT2JqIGFzIGFueTtcclxuICAgICAgICAgICAgdmFyIHNoYXBlOiBwMi5TaGFwZTtcclxuICAgICAgICAgICAgc3dpdGNoIChkZWZpbml0aW9uLnNoYXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ2lyY2xlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhZGl1cyA9IDMyO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZpbml0aW9uLnNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uc2l6ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cyA9IGRlZmluaXRpb24uc2l6ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cyA9IGRlZmluaXRpb24uc2l6ZSBhcyBudW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBkaXNwT2JqQXNBbnkud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlID0gbmV3IHAyLkNpcmNsZSh7IHJhZGl1czogcmFkaXVzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgXCJQbGF0Zm9ybVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZpbml0aW9uLnNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdyA9IGRlZmluaXRpb24uc2l6ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGRlZmluaXRpb24uc2l6ZVsxXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ID0gTWF0aC5hYnMoZGlzcE9iakFzQW55LndpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IE1hdGguYWJzKGRpc3BPYmpBc0FueS5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzaGFwZSA9IG5ldyBwMi5Cb3goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgdGhlIHBvc2l0aW9uIGlzIGNlbnRlcmVkIGJ1dCB3ZSBuZWVkIGl0IHRvIGJlIGxlZnQgdG9wIGFsaWduZWRcclxuICAgICAgICAgICAgICAgICAgICBib2R5LnBvc2l0aW9uWzBdID0gYm9keS5wb3NpdGlvblswXSArIHcgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkucG9zaXRpb25bMV0gPSBib2R5LnBvc2l0aW9uWzFdIC0gaCAvIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkJveFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICBnZXQgdGhlIHNpemVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBkZWZpbml0aW9uLnNpemVbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBkZWZpbml0aW9uLnNpemVbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3BPYmpBc0FueS53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdyA9IE1hdGguYWJzKGRpc3BPYmpBc0FueS53aWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTWF0aC5hYnMoZGlzcE9iakFzQW55LmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgVE9ETzogY2hlY2sgdGhpcyAtIHNlZW1zIG5vdCB0byBnZXQgY29ycmVjdCBib3VuZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBkaXNwT2JqLnNjYWxlLnggKiBkaXNwT2JqLmdldExvY2FsQm91bmRzKCkud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZGlzcE9iai5zY2FsZS55ICogZGlzcE9iai5nZXRMb2NhbEJvdW5kcygpLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzaGFwZSA9IG5ldyBwMi5Cb3goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBoLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gIFRPRE86IGltcGxlbWVudCBvdGhlciBzaGFwZXMgaWYgbmVlZGVkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkZWZpbml0aW9uLm1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICAoc2hhcGUgYXMgYW55KS5tYXRlcmlhbE5hbWUgPSBkZWZpbml0aW9uLm1hdGVyaWFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByZXZlbnRTZW5zb3IgJiYgISEoZGlzcE9iaiBhcyBJSW50ZXJhY3Rpb25UeXBlKS5pbnRlcmFjdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHNoYXBlLnNlbnNvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBib2R5LnR5cGUgPSBwMi5Cb2R5LlNUQVRJQztcclxuICAgICAgICAgICAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJvZHkuc2V0RGVuc2l0eSgwLjApOyAvLyAgIHRoaXMgaXMgdG8gcHJldmVudCBib2R5IGltcGFjdHMgb24gcGxheWVyIGNvbGxpZGUgKG1ha2VzIG5vIHNlbnNlIGFzIGl0IGlzIGEgc2Vuc29yLCBidWcgbWF5YmU/KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjcmVhdGVkIGNvbGxlY3RpYmxlIHNlbnNvclwiLCBzaGFwZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGRpc3BPYmogYXMgYW55KS50eXBlTmFtZSA9PT0gXCJTZW5zb3JcIikge1xyXG4gICAgICAgICAgICAgICAgc2hhcGUuc2Vuc29yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJvZHkudHlwZSA9IHAyLkJvZHkuU1RBVElDO1xyXG4gICAgICAgICAgICAgICAgYm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYm9keS5zZXREZW5zaXR5KDAuMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJvZHkuYWRkU2hhcGUoc2hhcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYm9keTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBalZBO0FBa1ZBO0FBQUE7QUFyVkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./world/LevelLoader.ts\n");

/***/ }),

/***/ "./world/SoundMan.ts":
/*!***************************!*\
  !*** ./world/SoundMan.ts ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar howler_1 = __webpack_require__(/*! howler */ \"./node_modules/howler/dist/howler.js\");\r\nvar SoundMan = /** @class */ (function () {\r\n    function SoundMan() {\r\n        this.musicTrackNames = [\r\n            'assets/audio/Two-Finger-Johnny.mp3',\r\n            'assets/audio/Bumbling-Burglars_Looping.mp3',\r\n            'assets/audio/Bama-Country.mp3',\r\n            'assets/audio/Beachfront-Celebration.mp3',\r\n            'assets/audio/Easy-Jam.mp3',\r\n            'assets/audio/Whiskey-on-the-Mississippi.mp3',\r\n            'assets/audio/ZigZag.mp3',\r\n            'assets/audio/Carrousel.mp3',\r\n            'assets/audio/Disco-Break.mp3'\r\n        ];\r\n        this.musicTracks = [];\r\n        this.currentTrack = 0;\r\n        this.previousMusicVolume = 0.6;\r\n        this.previousFxVolume = 1;\r\n        this.musicVolume = 0.6;\r\n        this.fxVolume = 1;\r\n        for (var i = 0, len = this.musicTrackNames.length; i < len; i++) {\r\n            var trackName = this.musicTrackNames[i];\r\n            this.musicTracks.push(new howler_1.Howl({\r\n                preload: false,\r\n                src: [trackName],\r\n                autoplay: false,\r\n                loop: true,\r\n                volume: 0.6\r\n            }));\r\n        }\r\n        this.walkSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/step.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: true,\r\n            volume: 1,\r\n        });\r\n        this.jumpSnd1 = new howler_1.Howl({\r\n            src: ['assets/audio/effects/jump1.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.jumpSnd2 = new howler_1.Howl({\r\n            src: ['assets/audio/effects/jump2.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.burnSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/burn.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: true,\r\n            volume: 1\r\n        });\r\n        this.hurtSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/hurt.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.coinSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/coin.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.gemSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/gem.mp3'],\r\n            preload: true,\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.questItemSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/quest-item.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.winSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/win.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.atkMag1 = new howler_1.Howl({\r\n            src: ['assets/audio/effects/atk-mag01.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1,\r\n        });\r\n        this.hitMag1 = new howler_1.Howl({\r\n            src: ['assets/audio/effects/hit-mag01.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.jumpAtk = new howler_1.Howl({\r\n            src: ['assets/audio/effects/jump-atk01.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.pain = new howler_1.Howl({\r\n            src: ['assets/audio/effects/pain01.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.jmpContact = new howler_1.Howl({\r\n            src: ['assets/audio/effects/jmp-contact.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.woosh = new howler_1.Howl({\r\n            src: ['assets/audio/effects/woosh.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.squish = new howler_1.Howl({\r\n            src: ['assets/audio/effects/mob-squish.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n        this.fxDemoSnd = new howler_1.Howl({\r\n            src: ['assets/audio/effects/fx-demo.mp3'],\r\n            autoplay: false,\r\n            loop: false,\r\n            volume: 1\r\n        });\r\n    }\r\n    Object.defineProperty(SoundMan.prototype, \"MusicVolume\", {\r\n        get: function () { return this.musicVolume; },\r\n        set: function (value) {\r\n            this.musicVolume = value;\r\n            if (this.backgroundSnd && this.backgroundSnd.playing()) {\r\n                this.backgroundSnd.volume(this.musicVolume);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SoundMan.prototype, \"FxVolume\", {\r\n        get: function () { return this.fxVolume; },\r\n        set: function (value) {\r\n            this.fxVolume = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SoundMan.prototype, \"IsFxOn\", {\r\n        get: function () { return this.fxVolume > 0.0; },\r\n        set: function (value) {\r\n            if (!value) {\r\n                this.previousFxVolume = this.fxVolume;\r\n                this.FxVolume = 0;\r\n            }\r\n            else {\r\n                this.FxVolume = this.previousFxVolume;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SoundMan.prototype, \"IsMusicOn\", {\r\n        get: function () { return this.musicVolume > 0.0; },\r\n        set: function (value) {\r\n            if (!value) {\r\n                this.previousMusicVolume = this.musicVolume;\r\n                this.MusicVolume = 0;\r\n            }\r\n            else {\r\n                this.MusicVolume = this.previousMusicVolume;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SoundMan.prototype, \"CurrentTrackId\", {\r\n        get: function () {\r\n            return this.currentTrack;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SoundMan.prototype, \"fxDemo\", {\r\n        get: function () {\r\n            return this.fxDemoSnd;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SoundMan.prototype.jumpAttack = function () {\r\n        this.walkSnd.pause();\r\n        this.jumpAtk.loop(false);\r\n        this.jumpAtk.play();\r\n        this.jumpAtk.volume(this.fxVolume);\r\n    };\r\n    SoundMan.prototype.jump = function () {\r\n        this.walkSnd.pause();\r\n        this.jumpSnd1.play();\r\n        this.jumpSnd1.volume(this.fxVolume);\r\n    };\r\n    SoundMan.prototype.idle = function () {\r\n        this.walkSnd.pause();\r\n    };\r\n    SoundMan.prototype.walk = function (isRunning) {\r\n        this.walkSnd.rate(isRunning ? 2.0 : 1.2);\r\n        if (!this.walkSnd.playing()) {\r\n            this.walkSnd.volume(this.fxVolume);\r\n            this.walkSnd.play();\r\n        }\r\n    };\r\n    SoundMan.prototype.atkMagic1 = function () {\r\n        this.atkMag1.volume(this.fxVolume);\r\n        this.atkMag1.play();\r\n    };\r\n    SoundMan.prototype.hitMagic1 = function () {\r\n        this.hitMag1.volume(this.fxVolume);\r\n        this.hitMag1.play();\r\n    };\r\n    SoundMan.prototype.hitPain = function () {\r\n        this.pain.volume(this.fxVolume);\r\n        this.pain.play();\r\n    };\r\n    SoundMan.prototype.mobSquish = function () {\r\n        this.squish.volume(this.fxVolume);\r\n        this.squish.play();\r\n    };\r\n    SoundMan.prototype.bulletHitWall = function () {\r\n        this.woosh.volume(this.fxVolume);\r\n        this.woosh.play();\r\n    };\r\n    SoundMan.prototype.coin = function () {\r\n        this.coinSnd.volume(this.fxVolume);\r\n        this.coinSnd.play();\r\n    };\r\n    SoundMan.prototype.gem = function () {\r\n        this.gemSnd.volume(this.fxVolume);\r\n        this.gemSnd.play();\r\n    };\r\n    SoundMan.prototype.hurt = function () {\r\n        this.hurtSnd.volume(this.fxVolume);\r\n        this.hurtSnd.play();\r\n    };\r\n    SoundMan.prototype.jumpContact = function () {\r\n        this.jmpContact.volume(this.fxVolume);\r\n        this.jmpContact.play();\r\n    };\r\n    SoundMan.prototype.questItem = function () {\r\n        this.questItemSnd.volume(this.fxVolume);\r\n        this.questItemSnd.play();\r\n    };\r\n    SoundMan.prototype.win = function () {\r\n        if (this.backgroundSnd && this.backgroundSnd.playing()) {\r\n            this.backgroundSnd.fade(1, 0, 500);\r\n        }\r\n        this.hurtSnd.stop();\r\n        this.walkSnd.stop();\r\n        this.jumpSnd1.stop();\r\n        this.jumpSnd2.stop();\r\n        this.burnSnd.stop();\r\n        this.winSnd.volume(this.fxVolume);\r\n        this.winSnd.play();\r\n    };\r\n    SoundMan.prototype.burn = function () {\r\n        if (!this.burnSnd.playing()) {\r\n            this.burnSnd.volume(this.fxVolume);\r\n            this.burnSnd.play();\r\n        }\r\n        this.hurt();\r\n    };\r\n    SoundMan.prototype.burnStop = function () {\r\n        var _this = this;\r\n        //this.burnSnd.stop();\r\n        this.burnSnd.fade(1, 0, 200);\r\n        setTimeout(function () { return _this.burnSnd.stop(); }, 200);\r\n    };\r\n    SoundMan.prototype.getTrack = function (name) {\r\n        for (var i = 0, len = this.musicTrackNames.length; i < len; i++) {\r\n            if (this.musicTrackNames[i].indexOf(name) >= 0) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    SoundMan.prototype.stopTrack = function () {\r\n        if (this.backgroundSnd !== undefined) {\r\n            this.backgroundSnd.stop();\r\n        }\r\n    };\r\n    SoundMan.prototype.playTrack = function (trackId) {\r\n        var _this = this;\r\n        if (this.backgroundSnd === undefined) {\r\n            this.backgroundSnd = this.musicTracks[trackId];\r\n            console.log(\"playTrack \" + trackId, this.backgroundSnd);\r\n        }\r\n        if (this.backgroundSnd !== this.musicTracks[trackId] || !this.backgroundSnd.playing()) {\r\n            this.backgroundSnd.stop();\r\n            this.backgroundSnd = this.musicTracks[trackId];\r\n            this.backgroundSnd.volume(this.musicVolume);\r\n            this.backgroundSnd.play();\r\n            if (this.backgroundSnd.state() === 'unloaded') {\r\n                this.backgroundSnd.load();\r\n                this.backgroundSnd.once('load', function () {\r\n                    _this.backgroundSnd.play();\r\n                });\r\n            }\r\n        }\r\n        this.currentTrack = trackId;\r\n    };\r\n    return SoundMan;\r\n}());\r\nexports.SoundMan = SoundMan;\r\nexports.snd = new SoundMan();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93b3JsZC9Tb3VuZE1hbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3dvcmxkL1NvdW5kTWFuLnRzPzQ2MDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSG93bCB9IGZyb20gXCJob3dsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTb3VuZE1hbiB7XHJcbiAgICBwcml2YXRlIGJhY2tncm91bmRTbmQ6IEhvd2w7XHJcbiAgICBwcml2YXRlIHdhbGtTbmQ6IEhvd2w7XHJcbiAgICBwcml2YXRlIGp1bXBTbmQxOiBIb3dsO1xyXG4gICAgcHJpdmF0ZSBqdW1wU25kMjogSG93bDtcclxuICAgIHByaXZhdGUgYnVyblNuZDogSG93bDtcclxuICAgIHByaXZhdGUgY29pblNuZDogSG93bDtcclxuICAgIHByaXZhdGUgZ2VtU25kOiBIb3dsO1xyXG4gICAgcHJpdmF0ZSBodXJ0U25kOiBIb3dsO1xyXG4gICAgcHJpdmF0ZSB3aW5TbmQ6IEhvd2w7XHJcbiAgICBwcml2YXRlIGF0a01hZzE6IEhvd2w7XHJcbiAgICBwcml2YXRlIGhpdE1hZzE6IEhvd2w7XHJcbiAgICBwcml2YXRlIGp1bXBBdGs6IEhvd2w7XHJcbiAgICBwcml2YXRlIHdvb3NoOiBIb3dsO1xyXG4gICAgcHJpdmF0ZSBzcXVpc2g6IEhvd2w7XHJcbiAgICBwcml2YXRlIHBhaW46IEhvd2w7XHJcbiAgICBwcml2YXRlIGptcENvbnRhY3Q6IEhvd2w7XHJcblxyXG4gICAgcHJpdmF0ZSBmeERlbW9TbmQ6IEhvd2w7XHJcblxyXG4gICAgcHJpdmF0ZSBxdWVzdEl0ZW1TbmQ6IEhvd2w7XHJcblxyXG4gICAgcHJpdmF0ZSBtdXNpY1RyYWNrTmFtZXM6IEFycmF5PHN0cmluZz4gPSBbXHJcbiAgICAgICAgJ2Fzc2V0cy9hdWRpby9Ud28tRmluZ2VyLUpvaG5ueS5tcDMnLFxyXG4gICAgICAgICdhc3NldHMvYXVkaW8vQnVtYmxpbmctQnVyZ2xhcnNfTG9vcGluZy5tcDMnLFxyXG4gICAgICAgICdhc3NldHMvYXVkaW8vQmFtYS1Db3VudHJ5Lm1wMycsXHJcbiAgICAgICAgJ2Fzc2V0cy9hdWRpby9CZWFjaGZyb250LUNlbGVicmF0aW9uLm1wMycsXHJcbiAgICAgICAgJ2Fzc2V0cy9hdWRpby9FYXN5LUphbS5tcDMnLFxyXG4gICAgICAgICdhc3NldHMvYXVkaW8vV2hpc2tleS1vbi10aGUtTWlzc2lzc2lwcGkubXAzJyxcclxuICAgICAgICAnYXNzZXRzL2F1ZGlvL1ppZ1phZy5tcDMnLFxyXG4gICAgICAgICdhc3NldHMvYXVkaW8vQ2Fycm91c2VsLm1wMycsXHJcbiAgICAgICAgJ2Fzc2V0cy9hdWRpby9EaXNjby1CcmVhay5tcDMnXHJcbiAgICBdO1xyXG4gICAgcHJpdmF0ZSBtdXNpY1RyYWNrczogQXJyYXk8SG93bD4gPSBbXTtcclxuICAgIHByaXZhdGUgY3VycmVudFRyYWNrOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm11c2ljVHJhY2tOYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdHJhY2tOYW1lID0gdGhpcy5tdXNpY1RyYWNrTmFtZXNbaV07XHJcbiAgICAgICAgICAgIHRoaXMubXVzaWNUcmFja3MucHVzaChuZXcgSG93bCh7XHJcbiAgICAgICAgICAgICAgICBwcmVsb2FkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNyYzogW3RyYWNrTmFtZV0sXHJcbiAgICAgICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdm9sdW1lOiAwLjZcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy53YWxrU25kID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvc3RlcC5tcDMnXSxcclxuICAgICAgICAgICAgcHJlbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgICAgICB2b2x1bWU6IDEsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5qdW1wU25kMSA9IG5ldyBIb3dsKHtcclxuICAgICAgICAgICAgc3JjOiBbJ2Fzc2V0cy9hdWRpby9lZmZlY3RzL2p1bXAxLm1wMyddLFxyXG4gICAgICAgICAgICBwcmVsb2FkOiB0cnVlLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICB2b2x1bWU6IDFcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmp1bXBTbmQyID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvanVtcDIubXAzJ10sXHJcbiAgICAgICAgICAgIHByZWxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHZvbHVtZTogMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYnVyblNuZCA9IG5ldyBIb3dsKHtcclxuICAgICAgICAgICAgc3JjOiBbJ2Fzc2V0cy9hdWRpby9lZmZlY3RzL2J1cm4ubXAzJ10sXHJcbiAgICAgICAgICAgIHByZWxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5odXJ0U25kID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvaHVydC5tcDMnXSxcclxuICAgICAgICAgICAgcHJlbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb2luU25kID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvY29pbi5tcDMnXSxcclxuICAgICAgICAgICAgcHJlbG9hZDogdHJ1ZSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nZW1TbmQgPSBuZXcgSG93bCh7XHJcbiAgICAgICAgICAgIHNyYzogWydhc3NldHMvYXVkaW8vZWZmZWN0cy9nZW0ubXAzJ10sXHJcbiAgICAgICAgICAgIHByZWxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHZvbHVtZTogMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucXVlc3RJdGVtU25kID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvcXVlc3QtaXRlbS5tcDMnXSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy53aW5TbmQgPSBuZXcgSG93bCh7XHJcbiAgICAgICAgICAgIHNyYzogWydhc3NldHMvYXVkaW8vZWZmZWN0cy93aW4ubXAzJ10sXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHZvbHVtZTogMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYXRrTWFnMSA9IG5ldyBIb3dsKHtcclxuICAgICAgICAgICAgc3JjOiBbJ2Fzc2V0cy9hdWRpby9lZmZlY3RzL2F0ay1tYWcwMS5tcDMnXSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGl0TWFnMSA9IG5ldyBIb3dsKHtcclxuICAgICAgICAgICAgc3JjOiBbJ2Fzc2V0cy9hdWRpby9lZmZlY3RzL2hpdC1tYWcwMS5tcDMnXSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5qdW1wQXRrID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvanVtcC1hdGswMS5tcDMnXSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYWluID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvcGFpbjAxLm1wMyddLFxyXG4gICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICB2b2x1bWU6IDFcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5qbXBDb250YWN0ID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvam1wLWNvbnRhY3QubXAzJ10sXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHZvbHVtZTogMVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLndvb3NoID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvd29vc2gubXAzJ10sXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgbG9vcDogZmFsc2UsXHJcbiAgICAgICAgICAgIHZvbHVtZTogMVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc3F1aXNoID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvbW9iLXNxdWlzaC5tcDMnXSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZnhEZW1vU25kID0gbmV3IEhvd2woe1xyXG4gICAgICAgICAgICBzcmM6IFsnYXNzZXRzL2F1ZGlvL2VmZmVjdHMvZngtZGVtby5tcDMnXSxcclxuICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gICAgICAgICAgICBsb29wOiBmYWxzZSxcclxuICAgICAgICAgICAgdm9sdW1lOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmV2aW91c011c2ljVm9sdW1lID0gMC42O1xyXG4gICAgcHJpdmF0ZSBwcmV2aW91c0Z4Vm9sdW1lID0gMTtcclxuXHJcbiAgICBwcml2YXRlIG11c2ljVm9sdW1lID0gMC42O1xyXG4gICAgcHJpdmF0ZSBmeFZvbHVtZSA9IDE7XHJcblxyXG4gICAgcHVibGljIGdldCBNdXNpY1ZvbHVtZSgpIHsgcmV0dXJuIHRoaXMubXVzaWNWb2x1bWU7IH1cclxuICAgIHB1YmxpYyBzZXQgTXVzaWNWb2x1bWUodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubXVzaWNWb2x1bWUgPSB2YWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kU25kICYmIHRoaXMuYmFja2dyb3VuZFNuZC5wbGF5aW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU25kLnZvbHVtZSh0aGlzLm11c2ljVm9sdW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBGeFZvbHVtZSgpIHsgcmV0dXJuIHRoaXMuZnhWb2x1bWU7IH1cclxuICAgIHB1YmxpYyBzZXQgRnhWb2x1bWUodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZnhWb2x1bWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGdldCBJc0Z4T24oKSB7IHJldHVybiB0aGlzLmZ4Vm9sdW1lID4gMC4wOyB9XHJcbiAgICBwdWJsaWMgc2V0IElzRnhPbih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0Z4Vm9sdW1lID0gdGhpcy5meFZvbHVtZTtcclxuICAgICAgICAgICAgdGhpcy5GeFZvbHVtZSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5GeFZvbHVtZSA9IHRoaXMucHJldmlvdXNGeFZvbHVtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBJc011c2ljT24oKSB7IHJldHVybiB0aGlzLm11c2ljVm9sdW1lID4gMC4wOyB9XHJcbiAgICBwdWJsaWMgc2V0IElzTXVzaWNPbih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c011c2ljVm9sdW1lID0gdGhpcy5tdXNpY1ZvbHVtZTtcclxuICAgICAgICAgICAgdGhpcy5NdXNpY1ZvbHVtZSA9IDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5NdXNpY1ZvbHVtZSA9IHRoaXMucHJldmlvdXNNdXNpY1ZvbHVtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBDdXJyZW50VHJhY2tJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VHJhY2s7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBnZXQgZnhEZW1vKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZ4RGVtb1NuZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMganVtcEF0dGFjaygpIHtcclxuICAgICAgICB0aGlzLndhbGtTbmQucGF1c2UoKTtcclxuICAgICAgICB0aGlzLmp1bXBBdGsubG9vcChmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5qdW1wQXRrLnBsYXkoKTtcclxuICAgICAgICB0aGlzLmp1bXBBdGsudm9sdW1lKHRoaXMuZnhWb2x1bWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBqdW1wKCkge1xyXG4gICAgICAgIHRoaXMud2Fsa1NuZC5wYXVzZSgpO1xyXG4gICAgICAgIHRoaXMuanVtcFNuZDEucGxheSgpO1xyXG4gICAgICAgIHRoaXMuanVtcFNuZDEudm9sdW1lKHRoaXMuZnhWb2x1bWUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGlkbGUoKSB7XHJcbiAgICAgICAgdGhpcy53YWxrU25kLnBhdXNlKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgd2Fsayhpc1J1bm5pbmc/OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy53YWxrU25kLnJhdGUoaXNSdW5uaW5nID8gMi4wIDogMS4yKTtcclxuICAgICAgICBpZiAoIXRoaXMud2Fsa1NuZC5wbGF5aW5nKCkpIHtcclxuICAgICAgICAgICAgdGhpcy53YWxrU25kLnZvbHVtZSh0aGlzLmZ4Vm9sdW1lKTtcclxuICAgICAgICAgICAgdGhpcy53YWxrU25kLnBsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXRrTWFnaWMxKCkge1xyXG4gICAgICAgIHRoaXMuYXRrTWFnMS52b2x1bWUodGhpcy5meFZvbHVtZSk7XHJcbiAgICAgICAgdGhpcy5hdGtNYWcxLnBsYXkoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBoaXRNYWdpYzEoKSB7XHJcbiAgICAgICAgdGhpcy5oaXRNYWcxLnZvbHVtZSh0aGlzLmZ4Vm9sdW1lKTtcclxuICAgICAgICB0aGlzLmhpdE1hZzEucGxheSgpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGhpdFBhaW4oKSB7XHJcbiAgICAgICAgdGhpcy5wYWluLnZvbHVtZSh0aGlzLmZ4Vm9sdW1lKTtcclxuICAgICAgICB0aGlzLnBhaW4ucGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb2JTcXVpc2goKSB7XHJcbiAgICAgICAgdGhpcy5zcXVpc2gudm9sdW1lKHRoaXMuZnhWb2x1bWUpO1xyXG4gICAgICAgIHRoaXMuc3F1aXNoLnBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYnVsbGV0SGl0V2FsbCgpIHtcclxuICAgICAgICB0aGlzLndvb3NoLnZvbHVtZSh0aGlzLmZ4Vm9sdW1lKTtcclxuICAgICAgICB0aGlzLndvb3NoLnBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29pbigpIHtcclxuICAgICAgICB0aGlzLmNvaW5TbmQudm9sdW1lKHRoaXMuZnhWb2x1bWUpO1xyXG4gICAgICAgIHRoaXMuY29pblNuZC5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdlbSgpIHtcclxuICAgICAgICB0aGlzLmdlbVNuZC52b2x1bWUodGhpcy5meFZvbHVtZSk7XHJcbiAgICAgICAgdGhpcy5nZW1TbmQucGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBodXJ0KCkge1xyXG4gICAgICAgIHRoaXMuaHVydFNuZC52b2x1bWUodGhpcy5meFZvbHVtZSk7XHJcbiAgICAgICAgdGhpcy5odXJ0U25kLnBsYXkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMganVtcENvbnRhY3QoKSB7XHJcbiAgICAgICAgdGhpcy5qbXBDb250YWN0LnZvbHVtZSh0aGlzLmZ4Vm9sdW1lKTtcclxuICAgICAgICB0aGlzLmptcENvbnRhY3QucGxheSgpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHF1ZXN0SXRlbSgpIHtcclxuICAgICAgICB0aGlzLnF1ZXN0SXRlbVNuZC52b2x1bWUodGhpcy5meFZvbHVtZSk7XHJcbiAgICAgICAgdGhpcy5xdWVzdEl0ZW1TbmQucGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB3aW4oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZFNuZCAmJiB0aGlzLmJhY2tncm91bmRTbmQucGxheWluZygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFNuZC5mYWRlKDEsIDAsIDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaHVydFNuZC5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy53YWxrU25kLnN0b3AoKTtcclxuICAgICAgICB0aGlzLmp1bXBTbmQxLnN0b3AoKTtcclxuICAgICAgICB0aGlzLmp1bXBTbmQyLnN0b3AoKTtcclxuICAgICAgICB0aGlzLmJ1cm5TbmQuc3RvcCgpO1xyXG5cclxuICAgICAgICB0aGlzLndpblNuZC52b2x1bWUodGhpcy5meFZvbHVtZSk7XHJcbiAgICAgICAgdGhpcy53aW5TbmQucGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBidXJuKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5idXJuU25kLnBsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1cm5TbmQudm9sdW1lKHRoaXMuZnhWb2x1bWUpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1cm5TbmQucGxheSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmh1cnQoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBidXJuU3RvcCgpIHtcclxuICAgICAgICAvL3RoaXMuYnVyblNuZC5zdG9wKCk7XHJcbiAgICAgICAgdGhpcy5idXJuU25kLmZhZGUoMSwgMCwgMjAwKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYnVyblNuZC5zdG9wKCksIDIwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRyYWNrKG5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm11c2ljVHJhY2tOYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tdXNpY1RyYWNrTmFtZXNbaV0uaW5kZXhPZihuYW1lKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0b3BUcmFjaygpIHtcclxuICAgICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kU25kICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU25kLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBsYXlUcmFjayh0cmFja0lkOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kU25kID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU25kID0gdGhpcy5tdXNpY1RyYWNrc1t0cmFja0lkXTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJwbGF5VHJhY2sgXCIgKyB0cmFja0lkLCB0aGlzLmJhY2tncm91bmRTbmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZFNuZCAhPT0gdGhpcy5tdXNpY1RyYWNrc1t0cmFja0lkXSB8fCAhdGhpcy5iYWNrZ3JvdW5kU25kLnBsYXlpbmcoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRTbmQuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRTbmQgPSB0aGlzLm11c2ljVHJhY2tzW3RyYWNrSWRdO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRTbmQudm9sdW1lKHRoaXMubXVzaWNWb2x1bWUpO1xyXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRTbmQucGxheSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kU25kLnN0YXRlKCkgPT09ICd1bmxvYWRlZCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFNuZC5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRTbmQub25jZSgnbG9hZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRTbmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IFxyXG4gICAgICAgIHRoaXMuY3VycmVudFRyYWNrID0gdHJhY2tJZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBzbmQgPSBuZXcgU291bmRNYW4oKTsiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFFQTtBQW9DQTtBQWRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZ0lBO0FBQ0E7QUFFQTtBQUNBO0FBaklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQU5BO0FBUUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSEE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFSQTtBQVVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQVJBO0FBVUE7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF0VkE7QUF3VkE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./world/SoundMan.ts\n");

/***/ }),

/***/ "./world/WorldP2.ts":
/*!**************************!*\
  !*** ./world/WorldP2.ts ***!
  \**************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar p2 = __webpack_require__(/*! p2 */ \"./node_modules/p2/src/p2.js\");\r\nvar __1 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar __2 = __webpack_require__(/*! .. */ \"./index.ts\");\r\nvar CollisionGroups_1 = __webpack_require__(/*! ./CollisionGroups */ \"./world/CollisionGroups.ts\");\r\n/**\r\n * Tuple of two physics bodies touching or penetrating each other.\r\n */\r\nvar ContactPair = /** @class */ (function () {\r\n    function ContactPair(BodyA, BodyB) {\r\n        this.BodyA = BodyA;\r\n        this.BodyB = BodyB;\r\n    }\r\n    return ContactPair;\r\n}());\r\nexports.ContactPair = ContactPair;\r\n/**\r\n * Takes care of the physics simulations.\r\n */\r\nvar WorldP2 = /** @class */ (function () {\r\n    function WorldP2() {\r\n        var _this = this;\r\n        this.contactPairs = [];\r\n        this.contactWatch = [];\r\n        /**\r\n         * We hold all player contacts separate (due to heavy usage).\r\n         */\r\n        this.playerBodyContacts = [];\r\n        this.fixedTimeStep = 1 / 60; // seconds\r\n        this.beginContact = function (evt) {\r\n            var bullet = null;\r\n            var other = null;\r\n            if (evt.bodyA.shapes[0].collisionGroup === CollisionGroups_1.COL_GRP_BULLET) {\r\n                bullet = evt.bodyA;\r\n                other = evt.bodyB;\r\n            }\r\n            else if (evt.bodyB.shapes[0].collisionGroup === CollisionGroups_1.COL_GRP_BULLET) {\r\n                bullet = evt.bodyB;\r\n                other = evt.bodyA;\r\n            }\r\n            if (bullet) {\r\n                // console.log(\"emitting bulettContact, body.id: \" + bullet.id);\r\n                _this.world.emit({ type: \"bulletContact\", playerHit: other === _this.playerBody, bulletBody: bullet, otherBody: other });\r\n                return;\r\n            }\r\n            //  check for player contacts (but only with dynamic bodies)\r\n            if (_this.playerBody === evt.bodyA) {\r\n                _this.playerBodyContacts.push(evt.bodyB);\r\n                _this.world.emit({ type: \"playerContact\", velocity: _this.playerBody.velocity, body: evt.bodyB });\r\n                return;\r\n            }\r\n            else if (_this.playerBody === evt.bodyB) {\r\n                _this.playerBodyContacts.push(evt.bodyA);\r\n                _this.world.emit({ type: \"playerContact\", velocity: _this.playerBody.velocity, body: evt.bodyA });\r\n                return;\r\n            }\r\n            //  check for watched bodies and store pairs if match\r\n            var watchedItemFound = _this.contactWatch.filter(function (bodyId) {\r\n                return (bodyId === evt.bodyA.id || bodyId === evt.bodyB.id);\r\n            });\r\n            if (watchedItemFound && watchedItemFound.length > 0) {\r\n                var cp = new ContactPair(evt.bodyA, evt.bodyB);\r\n                _this.contactPairs.push(cp);\r\n            }\r\n        };\r\n        this.endContact = function (evt) {\r\n            //  no need to update player contacts or contact pairs for bullets\r\n            var isBulletConntact = evt.bodyA.shapes[0].collisionGroup === CollisionGroups_1.COL_GRP_BULLET || evt.bodyB.shapes[0].collisionGroup === CollisionGroups_1.COL_GRP_BULLET;\r\n            if (isBulletConntact)\r\n                return;\r\n            //  if it is a player contact remove the foreign body from the playerBodyContacts list\r\n            if (_this.playerBody === evt.bodyA) {\r\n                var bodyIDX = _this.playerBodyContacts.indexOf(evt.bodyB);\r\n                _this.playerBodyContacts.splice(bodyIDX, 1);\r\n                _this.world.emit({ type: \"playerContactEnd\", velocity: _this.playerBody.velocity, body: evt.bodyB });\r\n                //console.log(\"endContact\",evt.bodyB);\r\n                return;\r\n            }\r\n            else if (_this.playerBody === evt.bodyB) {\r\n                var bodyIDX = _this.playerBodyContacts.indexOf(evt.bodyB);\r\n                _this.playerBodyContacts.splice(bodyIDX, 1);\r\n                _this.world.emit({ type: \"playerContactEnd\", velocity: _this.playerBody.velocity, body: evt.bodyA });\r\n                //console.log(\"endContact\", evt.bodyA);\r\n                return;\r\n            }\r\n            //console.log(\"endContact: \", evt);\r\n            var foundIdx = -1;\r\n            for (var i = 0; i < _this.contactPairs.length; i++) {\r\n                var cp = _this.contactPairs[i];\r\n                if ((cp.BodyA === evt.bodyA && cp.BodyB === evt.bodyB) ||\r\n                    (cp.BodyA === evt.bodyB && cp.BodyB === evt.bodyA)) {\r\n                    foundIdx = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (foundIdx >= 0) {\r\n                _this.contactPairs.splice(foundIdx, 1);\r\n            }\r\n        };\r\n        this.world = new p2.World({\r\n            gravity: [0, -1500],\r\n        });\r\n        this.setupMaterials();\r\n        //------------------------------------------\r\n        // create an infinite ground plane body\r\n        //------------------------------------------\r\n        this.ground = new p2.Body({\r\n            mass: 0,\r\n        });\r\n        var shape = new p2.Plane();\r\n        shape.material = this.materials.get(\"ground_default\");\r\n        shape.collisionGroup = CollisionGroups_1.COL_GRP_GROUND;\r\n        shape.collisionMask = CollisionGroups_1.COL_GRP_SCENE | CollisionGroups_1.COL_GRP_NPC | CollisionGroups_1.COL_GRP_PLAYER | CollisionGroups_1.COL_GRP_BULLET;\r\n        this.ground.addShape(shape);\r\n        this.world.addBody(this.ground);\r\n        //------------------------------------------\r\n        //  player body\r\n        //------------------------------------------\r\n        this.playerBody = new p2.Body({\r\n            mass: 42,\r\n            fixedRotation: true,\r\n        });\r\n        this.playerBody.damping = 0.001;\r\n        shape = new p2.Circle({\r\n            radius: 24,\r\n        });\r\n        shape.collisionGroup = CollisionGroups_1.COL_GRP_PLAYER;\r\n        shape.collisionMask = CollisionGroups_1.COL_GRP_GROUND | CollisionGroups_1.COL_GRP_SCENE | CollisionGroups_1.COL_GRP_NPC | CollisionGroups_1.COL_GRP_BULLET;\r\n        shape.material = this.materials.get(\"player\");\r\n        this.playerBody.addShape(shape);\r\n        this.world.addBody(this.playerBody);\r\n        //------------------------------------------\r\n        //  settings\r\n        //------------------------------------------\r\n        this.world.sleepMode = p2.World.BODY_SLEEPING;\r\n        this.world.on(\"beginContact\", this.beginContact, this);\r\n        this.world.on(\"endContact\", this.endContact, this);\r\n    }\r\n    /**\r\n     * Removes all bodies except the player body and ground plane.\r\n     */\r\n    WorldP2.prototype.clearLevel = function () {\r\n        var bodies = this.world.bodies;\r\n        for (var i = bodies.length - 1; i >= 0; i--) {\r\n            var b = bodies[i];\r\n            if (b !== this.playerBody && b !== this.ground) {\r\n                this.world.removeBody(b);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(WorldP2.prototype, \"bodies\", {\r\n        /**\r\n         * Returns the world bodies.\r\n         */\r\n        get: function () {\r\n            return this.world.bodies;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds an event handler to the p2 world object.\r\n     * @param eventName\r\n     * @param handler\r\n     */\r\n    WorldP2.prototype.on = function (eventName, handler, context) {\r\n        context = context || this;\r\n        this.world.on(eventName, handler, context);\r\n    };\r\n    /**\r\n     * advances the physics simulation for the given dt time\r\n     * @param dt the time in seconds since the last simulation step\r\n     */\r\n    WorldP2.prototype.update = function (dt) {\r\n        this.world.step(this.fixedTimeStep, dt / 1000);\r\n        __1.Global.position.x = this.playerBody.interpolatedPosition[0];\r\n        __1.Global.position.y = this.playerBody.interpolatedPosition[1];\r\n    };\r\n    /**\r\n     * Removes the body from world.\r\n     * @param body\r\n     */\r\n    WorldP2.prototype.removeBody = function (body) {\r\n        this.world.removeBody(body);\r\n    };\r\n    /**\r\n     * adds an object to the p2 world\r\n     * @param body\r\n     */\r\n    WorldP2.prototype.addBody = function (body) {\r\n        // HACK: loader specific implementation stores the material name in shape.materialName\r\n        if (body.shapes && body.shapes.length > 0) {\r\n            for (var i = 0, len = body.shapes.length; i < len; i++) {\r\n                var shape = body.shapes[i];\r\n                if (shape.materialName && !shape.material) {\r\n                    shape.material = this.materials.get(shape.materialName);\r\n                }\r\n            }\r\n        }\r\n        this.world.addBody(body);\r\n    };\r\n    /**\r\n     * Clears all saved contacts (from contactPairs) for the given body.\r\n     * @param body\r\n     */\r\n    WorldP2.prototype.clearContactsForBody = function (body) {\r\n        if (body === this.playerBody) {\r\n            this.playerBodyContacts = [];\r\n            return;\r\n        }\r\n        var foundIdx = 0;\r\n        while (foundIdx > -1) {\r\n            foundIdx = -1;\r\n            for (var i = 0; i < this.contactPairs.length; i++) {\r\n                var cp = this.contactPairs[i];\r\n                if (cp.BodyA === body || cp.BodyB === body) {\r\n                    foundIdx = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (foundIdx >= 0) {\r\n                this.contactPairs.splice(foundIdx, 1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * returns all contact pairs for the given body.\r\n     * Note: the body must be in the contact watch list or an empty array will be returned.\r\n     * @param body\r\n     */\r\n    WorldP2.prototype.getContactsForBody = function (body) {\r\n        var foundPairs = [];\r\n        for (var i = 0, len = this.contactPairs.length; i < len; i++) {\r\n            var cp = this.contactPairs[i];\r\n            if (cp.BodyA === body || cp.BodyB === body) {\r\n                foundPairs.push(cp);\r\n            }\r\n        }\r\n        ;\r\n        return foundPairs;\r\n    };\r\n    /**\r\n     * Adds the body to the contact watch list.\r\n     * Only bodies in this list can be retrieved via the getContactsForBody() function.\r\n     * @param body\r\n     */\r\n    WorldP2.prototype.addContactWatch = function (body) {\r\n        this.contactWatch.push(body.id);\r\n    };\r\n    Object.defineProperty(WorldP2.prototype, \"playerContacts\", {\r\n        /**\r\n         * Returns all bodies the player has contact with.\r\n         */\r\n        get: function () {\r\n            return this.playerBodyContacts;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorldP2.prototype.setupMaterials = function () {\r\n        this.materials = new __2.Dictionary();\r\n        this.materials.set(\"player\", new p2.Material(p2.Material.idCounter++));\r\n        this.materials.set(\"ground_default\", new p2.Material(p2.Material.idCounter++));\r\n        this.materials.set(\"box_default\", new p2.Material(p2.Material.idCounter++));\r\n        this.materials.set(\"box_highfriction\", new p2.Material(p2.Material.idCounter++));\r\n        this.materials.set(\"mob_default\", new p2.Material(p2.Material.idCounter++));\r\n        this.materials.set(\"bumper\", new p2.Material(p2.Material.idCounter++));\r\n        var playerGroundContactMaterial = new p2.ContactMaterial(this.materials.get(\"player\"), this.materials.get(\"ground_default\"), {\r\n            friction: 0.85,\r\n            restitution: 0.1,\r\n            stiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            relaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            frictionStiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            frictionRelaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            surfaceVelocity: 0\r\n        });\r\n        this.world.addContactMaterial(playerGroundContactMaterial);\r\n        var playerMobContactMaterial = new p2.ContactMaterial(this.materials.get(\"player\"), this.materials.get(\"mob_default\"), {\r\n            friction: 0.1,\r\n            restitution: 0.4,\r\n            stiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            relaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            frictionStiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            frictionRelaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            surfaceVelocity: 0\r\n        });\r\n        this.world.addContactMaterial(playerMobContactMaterial);\r\n        var playerBoxContactMaterial = new p2.ContactMaterial(this.materials.get(\"player\"), this.materials.get(\"box_default\"), {\r\n            friction: 0.20,\r\n            restitution: 0.25,\r\n            stiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            relaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            frictionStiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            frictionRelaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            surfaceVelocity: 0\r\n        });\r\n        this.world.addContactMaterial(playerBoxContactMaterial);\r\n        var playerBoxHighFirctContactMaterial = new p2.ContactMaterial(this.materials.get(\"player\"), this.materials.get(\"box_highfriction\"), {\r\n            friction: 0.70,\r\n            restitution: 0.20,\r\n            stiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            relaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            frictionStiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            frictionRelaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            surfaceVelocity: 0\r\n        });\r\n        this.world.addContactMaterial(playerBoxHighFirctContactMaterial);\r\n        var playerBumperContactMaterial = new p2.ContactMaterial(this.materials.get(\"player\"), this.materials.get(\"bumper\"), {\r\n            friction: 0.35,\r\n            restitution: 0.75,\r\n            stiffness: Number.MAX_VALUE,\r\n            relaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            frictionStiffness: Number.MAX_VALUE,\r\n            frictionRelaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            surfaceVelocity: 0\r\n        });\r\n        this.world.addContactMaterial(playerBumperContactMaterial);\r\n        var boxGroundContactMaterial = new p2.ContactMaterial(this.materials.get(\"box_default\"), this.materials.get(\"ground_default\"), {\r\n            friction: 0.8,\r\n            restitution: 0.3,\r\n            stiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            relaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            frictionStiffness: p2.Equation.DEFAULT_STIFFNESS,\r\n            frictionRelaxation: p2.Equation.DEFAULT_RELAXATION,\r\n            surfaceVelocity: 0\r\n        });\r\n        this.world.addContactMaterial(boxGroundContactMaterial);\r\n    };\r\n    return WorldP2;\r\n}());\r\nexports.WorldP2 = WorldP2;\r\nexports.wp2 = new WorldP2();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi93b3JsZC9Xb3JsZFAyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vd29ybGQvV29ybGRQMi50cz82OGQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHAyIGZyb20gXCJwMlwiO1xyXG5pbXBvcnQgeyBHbG9iYWwgfSBmcm9tICcuLic7XHJcbmltcG9ydCB7RGljdGlvbmFyeX0gZnJvbSAnLi4nO1xyXG5pbXBvcnQgeyBDT0xfR1JQX0dST1VORCwgQ09MX0dSUF9TQ0VORSwgQ09MX0dSUF9OUEMsIENPTF9HUlBfUExBWUVSLCBDT0xfR1JQX0JVTExFVCB9IGZyb20gJy4vQ29sbGlzaW9uR3JvdXBzJztcclxuXHJcbi8qKlxyXG4gKiBUdXBsZSBvZiB0d28gcGh5c2ljcyBib2RpZXMgdG91Y2hpbmcgb3IgcGVuZXRyYXRpbmcgZWFjaCBvdGhlci5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb250YWN0UGFpciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgQm9keUE6IHAyLkJvZHksIHB1YmxpYyBCb2R5QjogcDIuQm9keSkgeyB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGFrZXMgY2FyZSBvZiB0aGUgcGh5c2ljcyBzaW11bGF0aW9ucy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBXb3JsZFAyIHtcclxuXHJcbiAgICBwdWJsaWMgcGxheWVyQm9keTogcDIuQm9keTtcclxuICAgIHByaXZhdGUgd29ybGQ6IHAyLldvcmxkO1xyXG4gICAgcHJpdmF0ZSBncm91bmQ6IHAyLkJvZHk7XHJcbiAgICBwcml2YXRlIG1hdGVyaWFsczogRGljdGlvbmFyeTxwMi5NYXRlcmlhbD47XHJcbiAgICBwcml2YXRlIGNvbnRhY3RQYWlyczogQXJyYXk8Q29udGFjdFBhaXI+ID0gW107XHJcbiAgICBwcml2YXRlIGNvbnRhY3RXYXRjaDogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2UgaG9sZCBhbGwgcGxheWVyIGNvbnRhY3RzIHNlcGFyYXRlIChkdWUgdG8gaGVhdnkgdXNhZ2UpLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHBsYXllckJvZHlDb250YWN0czogQXJyYXk8cDIuQm9keT4gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZpeGVkVGltZVN0ZXAgPSAxIC8gNjA7IC8vIHNlY29uZHNcclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy53b3JsZCA9IG5ldyBwMi5Xb3JsZCh7XHJcbiAgICAgICAgICAgIGdyYXZpdHk6IFswLCAtMTUwMF0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dXBNYXRlcmlhbHMoKTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyBjcmVhdGUgYW4gaW5maW5pdGUgZ3JvdW5kIHBsYW5lIGJvZHlcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHRoaXMuZ3JvdW5kID0gbmV3IHAyLkJvZHkoe1xyXG4gICAgICAgICAgICBtYXNzOiAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBzaGFwZSA9IG5ldyBwMi5QbGFuZSgpO1xyXG4gICAgICAgIHNoYXBlLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHMuZ2V0KFwiZ3JvdW5kX2RlZmF1bHRcIik7XHJcbiAgICAgICAgc2hhcGUuY29sbGlzaW9uR3JvdXAgPSBDT0xfR1JQX0dST1VORDtcclxuICAgICAgICBzaGFwZS5jb2xsaXNpb25NYXNrID0gQ09MX0dSUF9TQ0VORSB8IENPTF9HUlBfTlBDIHwgQ09MX0dSUF9QTEFZRVIgfCBDT0xfR1JQX0JVTExFVDtcclxuICAgICAgICB0aGlzLmdyb3VuZC5hZGRTaGFwZShzaGFwZSk7XHJcbiAgICAgICAgdGhpcy53b3JsZC5hZGRCb2R5KHRoaXMuZ3JvdW5kKTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgcGxheWVyIGJvZHlcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHRoaXMucGxheWVyQm9keSA9IG5ldyBwMi5Cb2R5KHtcclxuICAgICAgICAgICAgbWFzczogNDIsXHJcbiAgICAgICAgICAgIGZpeGVkUm90YXRpb246IHRydWUsICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJCb2R5LmRhbXBpbmcgPSAwLjAwMTtcclxuICAgICAgICBzaGFwZSA9IG5ldyBwMi5DaXJjbGUoe1xyXG4gICAgICAgICAgICByYWRpdXM6IDI0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNoYXBlLmNvbGxpc2lvbkdyb3VwID0gQ09MX0dSUF9QTEFZRVI7XHJcbiAgICAgICAgc2hhcGUuY29sbGlzaW9uTWFzayA9IENPTF9HUlBfR1JPVU5EIHwgQ09MX0dSUF9TQ0VORSB8IENPTF9HUlBfTlBDIHwgQ09MX0dSUF9CVUxMRVQ7XHJcbiAgICAgICAgc2hhcGUubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFscy5nZXQoXCJwbGF5ZXJcIik7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJCb2R5LmFkZFNoYXBlKHNoYXBlKTtcclxuICAgICAgICB0aGlzLndvcmxkLmFkZEJvZHkodGhpcy5wbGF5ZXJCb2R5KTtcclxuXHJcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAvLyAgc2V0dGluZ3NcclxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIHRoaXMud29ybGQuc2xlZXBNb2RlID0gcDIuV29ybGQuQk9EWV9TTEVFUElORztcclxuICAgICAgICB0aGlzLndvcmxkLm9uKFwiYmVnaW5Db250YWN0XCIsIHRoaXMuYmVnaW5Db250YWN0LCB0aGlzKTtcclxuICAgICAgICB0aGlzLndvcmxkLm9uKFwiZW5kQ29udGFjdFwiLCB0aGlzLmVuZENvbnRhY3QsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbGwgYm9kaWVzIGV4Y2VwdCB0aGUgcGxheWVyIGJvZHkgYW5kIGdyb3VuZCBwbGFuZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyTGV2ZWwoKSB7XHJcbiAgICAgICAgdmFyIGJvZGllcyA9IHRoaXMud29ybGQuYm9kaWVzO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBib2RpZXMubGVuZ3RoLTE7IGkgPj0wOyBpLS0pIHtcclxuICAgICAgICAgICAgbGV0IGIgPSBib2RpZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChiICE9PSB0aGlzLnBsYXllckJvZHkgJiYgYiAhPT0gdGhpcy5ncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ybGQucmVtb3ZlQm9keShiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB3b3JsZCBib2RpZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYm9kaWVzKCk6IEFycmF5PHAyLkJvZHk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy53b3JsZC5ib2RpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGFuIGV2ZW50IGhhbmRsZXIgdG8gdGhlIHAyIHdvcmxkIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBldmVudE5hbWVcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogYW55LCBjb250ZXh0PzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgdGhpcztcclxuICAgICAgICB0aGlzLndvcmxkLm9uKGV2ZW50TmFtZSwgaGFuZGxlciwgY29udGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBhZHZhbmNlcyB0aGUgcGh5c2ljcyBzaW11bGF0aW9uIGZvciB0aGUgZ2l2ZW4gZHQgdGltZVxyXG4gICAgICogQHBhcmFtIGR0IHRoZSB0aW1lIGluIHNlY29uZHMgc2luY2UgdGhlIGxhc3Qgc2ltdWxhdGlvbiBzdGVwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUoZHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMud29ybGQuc3RlcCh0aGlzLmZpeGVkVGltZVN0ZXAsIGR0LzEwMDApO1xyXG4gICAgICAgIEdsb2JhbC5wb3NpdGlvbi54ID0gdGhpcy5wbGF5ZXJCb2R5LmludGVycG9sYXRlZFBvc2l0aW9uWzBdO1xyXG4gICAgICAgIEdsb2JhbC5wb3NpdGlvbi55ID0gdGhpcy5wbGF5ZXJCb2R5LmludGVycG9sYXRlZFBvc2l0aW9uWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgYm9keSBmcm9tIHdvcmxkLlxyXG4gICAgICogQHBhcmFtIGJvZHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZUJvZHkoYm9keTogcDIuQm9keSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMud29ybGQucmVtb3ZlQm9keShib2R5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGFkZHMgYW4gb2JqZWN0IHRvIHRoZSBwMiB3b3JsZFxyXG4gICAgICogQHBhcmFtIGJvZHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZEJvZHkoYm9keTogcDIuQm9keSk6IHZvaWQge1xyXG4gICAgICAgIC8vIEhBQ0s6IGxvYWRlciBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBzdG9yZXMgdGhlIG1hdGVyaWFsIG5hbWUgaW4gc2hhcGUubWF0ZXJpYWxOYW1lXHJcbiAgICAgICAgaWYgKGJvZHkuc2hhcGVzICYmIGJvZHkuc2hhcGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJvZHkuc2hhcGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hhcGU6IGFueSA9IGJvZHkuc2hhcGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlLm1hdGVyaWFsTmFtZSAmJiAhc2hhcGUubWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGFwZS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzLmdldChzaGFwZS5tYXRlcmlhbE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMud29ybGQuYWRkQm9keShib2R5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyBhbGwgc2F2ZWQgY29udGFjdHMgKGZyb20gY29udGFjdFBhaXJzKSBmb3IgdGhlIGdpdmVuIGJvZHkuXHJcbiAgICAgKiBAcGFyYW0gYm9keVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2xlYXJDb250YWN0c0ZvckJvZHkoYm9keTogcDIuQm9keSk6dm9pZCB7XHJcbiAgICAgICAgaWYgKGJvZHkgPT09IHRoaXMucGxheWVyQm9keSkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckJvZHlDb250YWN0cyA9IFtdO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZm91bmRJZHg6IG51bWJlciA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGZvdW5kSWR4ID4gLTEpIHtcclxuICAgICAgICAgICAgZm91bmRJZHggPSAtMTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RQYWlycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNwOkNvbnRhY3RQYWlyID0gdGhpcy5jb250YWN0UGFpcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY3AuQm9keUEgPT09IGJvZHkgfHwgY3AuQm9keUIgPT09IGJvZHkpICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRJZHggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZm91bmRJZHggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWN0UGFpcnMuc3BsaWNlKGZvdW5kSWR4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgYWxsIGNvbnRhY3QgcGFpcnMgZm9yIHRoZSBnaXZlbiBib2R5LlxyXG4gICAgICogTm90ZTogdGhlIGJvZHkgbXVzdCBiZSBpbiB0aGUgY29udGFjdCB3YXRjaCBsaXN0IG9yIGFuIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICAgKiBAcGFyYW0gYm9keVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q29udGFjdHNGb3JCb2R5KGJvZHk6IHAyLkJvZHkpOiBBcnJheTxDb250YWN0UGFpcj4ge1xyXG4gICAgICAgIHZhciBmb3VuZFBhaXJzOiBBcnJheTxDb250YWN0UGFpcj4gPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5jb250YWN0UGFpcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNwOiBDb250YWN0UGFpciA9IHRoaXMuY29udGFjdFBhaXJzW2ldOyAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjcC5Cb2R5QSA9PT0gYm9keSB8fCBjcC5Cb2R5QiA9PT0gYm9keSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRQYWlycy5wdXNoKGNwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGZvdW5kUGFpcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBib2R5IHRvIHRoZSBjb250YWN0IHdhdGNoIGxpc3QuXHJcbiAgICAgKiBPbmx5IGJvZGllcyBpbiB0aGlzIGxpc3QgY2FuIGJlIHJldHJpZXZlZCB2aWEgdGhlIGdldENvbnRhY3RzRm9yQm9keSgpIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJvZHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbnRhY3RXYXRjaChib2R5OiBwMi5Cb2R5KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jb250YWN0V2F0Y2gucHVzaChib2R5LmlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYWxsIGJvZGllcyB0aGUgcGxheWVyIGhhcyBjb250YWN0IHdpdGguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcGxheWVyQ29udGFjdHMoKTogcDIuQm9keVtde1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYXllckJvZHlDb250YWN0cztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJlZ2luQ29udGFjdCA9IChldnQ6IGFueSkgPT4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBidWxsZXQ6IHAyLkJvZHkgPSBudWxsO1xyXG4gICAgICAgIGxldCBvdGhlcjogcDIuQm9keSA9IG51bGw7XHJcbiAgICAgICAgaWYgKGV2dC5ib2R5QS5zaGFwZXNbMF0uY29sbGlzaW9uR3JvdXAgPT09IENPTF9HUlBfQlVMTEVUKSB7XHJcbiAgICAgICAgICAgIGJ1bGxldCA9IGV2dC5ib2R5QTtcclxuICAgICAgICAgICAgb3RoZXIgPSBldnQuYm9keUI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChldnQuYm9keUIuc2hhcGVzWzBdLmNvbGxpc2lvbkdyb3VwID09PSBDT0xfR1JQX0JVTExFVCl7XHJcbiAgICAgICAgICAgIGJ1bGxldCA9IGV2dC5ib2R5QjtcclxuICAgICAgICAgICAgb3RoZXIgPSBldnQuYm9keUE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChidWxsZXQpIHtcclxuICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImVtaXR0aW5nIGJ1bGV0dENvbnRhY3QsIGJvZHkuaWQ6IFwiICsgYnVsbGV0LmlkKTtcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5lbWl0KHsgdHlwZTogXCJidWxsZXRDb250YWN0XCIsIHBsYXllckhpdDogb3RoZXIgPT09IHRoaXMucGxheWVyQm9keSwgYnVsbGV0Qm9keTogYnVsbGV0LCBvdGhlckJvZHk6IG90aGVyIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAgY2hlY2sgZm9yIHBsYXllciBjb250YWN0cyAoYnV0IG9ubHkgd2l0aCBkeW5hbWljIGJvZGllcylcclxuICAgICAgICBpZiAodGhpcy5wbGF5ZXJCb2R5ID09PSBldnQuYm9keUEpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJCb2R5Q29udGFjdHMucHVzaChldnQuYm9keUIpO1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkLmVtaXQoeyB0eXBlOiBcInBsYXllckNvbnRhY3RcIiwgdmVsb2NpdHk6IHRoaXMucGxheWVyQm9keS52ZWxvY2l0eSwgYm9keTogZXZ0LmJvZHlCIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXllckJvZHkgPT09IGV2dC5ib2R5Qikge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckJvZHlDb250YWN0cy5wdXNoKGV2dC5ib2R5QSk7XHJcbiAgICAgICAgICAgIHRoaXMud29ybGQuZW1pdCh7IHR5cGU6IFwicGxheWVyQ29udGFjdFwiLCB2ZWxvY2l0eTogdGhpcy5wbGF5ZXJCb2R5LnZlbG9jaXR5LCBib2R5OiBldnQuYm9keUEgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICBjaGVjayBmb3Igd2F0Y2hlZCBib2RpZXMgYW5kIHN0b3JlIHBhaXJzIGlmIG1hdGNoXHJcbiAgICAgICAgdmFyIHdhdGNoZWRJdGVtRm91bmQgPSB0aGlzLmNvbnRhY3RXYXRjaC5maWx0ZXIoKGJvZHlJZCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKGJvZHlJZCA9PT0gZXZ0LmJvZHlBLmlkIHx8IGJvZHlJZCA9PT0gZXZ0LmJvZHlCLmlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAod2F0Y2hlZEl0ZW1Gb3VuZCAmJiB3YXRjaGVkSXRlbUZvdW5kLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbGV0IGNwOiBDb250YWN0UGFpciA9IG5ldyBDb250YWN0UGFpcihldnQuYm9keUEsIGV2dC5ib2R5Qik7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFjdFBhaXJzLnB1c2goY3ApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBlbmRDb250YWN0ID0gKGV2dDogYW55KSA9PiB7XHJcbiAgICAgICAgLy8gIG5vIG5lZWQgdG8gdXBkYXRlIHBsYXllciBjb250YWN0cyBvciBjb250YWN0IHBhaXJzIGZvciBidWxsZXRzXHJcbiAgICAgICAgbGV0IGlzQnVsbGV0Q29ubnRhY3QgPSBldnQuYm9keUEuc2hhcGVzWzBdLmNvbGxpc2lvbkdyb3VwID09PSBDT0xfR1JQX0JVTExFVCB8fCBldnQuYm9keUIuc2hhcGVzWzBdLmNvbGxpc2lvbkdyb3VwID09PSBDT0xfR1JQX0JVTExFVDtcclxuICAgICAgICBpZiAoaXNCdWxsZXRDb25udGFjdCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyAgaWYgaXQgaXMgYSBwbGF5ZXIgY29udGFjdCByZW1vdmUgdGhlIGZvcmVpZ24gYm9keSBmcm9tIHRoZSBwbGF5ZXJCb2R5Q29udGFjdHMgbGlzdFxyXG4gICAgICAgIGlmICh0aGlzLnBsYXllckJvZHkgPT09IGV2dC5ib2R5QSApIHtcclxuICAgICAgICAgICAgdmFyIGJvZHlJRFggPSB0aGlzLnBsYXllckJvZHlDb250YWN0cy5pbmRleE9mKGV2dC5ib2R5Qik7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQm9keUNvbnRhY3RzLnNwbGljZShib2R5SURYLCAxKTtcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5lbWl0KHsgdHlwZTogXCJwbGF5ZXJDb250YWN0RW5kXCIsIHZlbG9jaXR5OiB0aGlzLnBsYXllckJvZHkudmVsb2NpdHksIGJvZHk6IGV2dC5ib2R5QiB9KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImVuZENvbnRhY3RcIixldnQuYm9keUIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYXllckJvZHkgPT09IGV2dC5ib2R5Qikge1xyXG4gICAgICAgICAgICB2YXIgYm9keUlEWCA9IHRoaXMucGxheWVyQm9keUNvbnRhY3RzLmluZGV4T2YoZXZ0LmJvZHlCKTtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJCb2R5Q29udGFjdHMuc3BsaWNlKGJvZHlJRFgsIDEpO1xyXG4gICAgICAgICAgICB0aGlzLndvcmxkLmVtaXQoeyB0eXBlOiBcInBsYXllckNvbnRhY3RFbmRcIiwgdmVsb2NpdHk6IHRoaXMucGxheWVyQm9keS52ZWxvY2l0eSwgYm9keTogZXZ0LmJvZHlBIH0pO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZW5kQ29udGFjdFwiLCBldnQuYm9keUEpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImVuZENvbnRhY3Q6IFwiLCBldnQpO1xyXG4gICAgICAgIHZhciBmb3VuZElkeDogbnVtYmVyID0gLTE7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbnRhY3RQYWlycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY3A6IENvbnRhY3RQYWlyID0gdGhpcy5jb250YWN0UGFpcnNbaV07XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIChjcC5Cb2R5QSA9PT0gZXZ0LmJvZHlBICYmIGNwLkJvZHlCID09PSBldnQuYm9keUIpIHx8XHJcbiAgICAgICAgICAgICAgICAoY3AuQm9keUEgPT09IGV2dC5ib2R5QiAmJiBjcC5Cb2R5QiA9PT0gZXZ0LmJvZHlBKSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRJZHggPSBpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmb3VuZElkeCA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFjdFBhaXJzLnNwbGljZShmb3VuZElkeCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHNldHVwTWF0ZXJpYWxzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzID0gbmV3IERpY3Rpb25hcnk8cDIuTWF0ZXJpYWw+KCk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwicGxheWVyXCIsIG5ldyBwMi5NYXRlcmlhbChwMi5NYXRlcmlhbC5pZENvdW50ZXIrKykpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzLnNldChcImdyb3VuZF9kZWZhdWx0XCIsIG5ldyBwMi5NYXRlcmlhbChwMi5NYXRlcmlhbC5pZENvdW50ZXIrKykpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzLnNldChcImJveF9kZWZhdWx0XCIsIG5ldyBwMi5NYXRlcmlhbChwMi5NYXRlcmlhbC5pZENvdW50ZXIrKykpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzLnNldChcImJveF9oaWdoZnJpY3Rpb25cIiwgbmV3IHAyLk1hdGVyaWFsKHAyLk1hdGVyaWFsLmlkQ291bnRlcisrKSk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwibW9iX2RlZmF1bHRcIiwgbmV3IHAyLk1hdGVyaWFsKHAyLk1hdGVyaWFsLmlkQ291bnRlcisrKSk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwiYnVtcGVyXCIsIG5ldyBwMi5NYXRlcmlhbChwMi5NYXRlcmlhbC5pZENvdW50ZXIrKykpO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHBsYXllckdyb3VuZENvbnRhY3RNYXRlcmlhbCA9IG5ldyBwMi5Db250YWN0TWF0ZXJpYWwoXHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLmdldChcInBsYXllclwiKSxcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuZ2V0KFwiZ3JvdW5kX2RlZmF1bHRcIiksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uOiAwLjg1LFxyXG4gICAgICAgICAgICAgICAgcmVzdGl0dXRpb246IDAuMSxcclxuICAgICAgICAgICAgICAgIHN0aWZmbmVzczogcDIuRXF1YXRpb24uREVGQVVMVF9TVElGRk5FU1MsXHJcbiAgICAgICAgICAgICAgICByZWxheGF0aW9uOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1JFTEFYQVRJT04sXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblN0aWZmbmVzczogcDIuRXF1YXRpb24uREVGQVVMVF9TVElGRk5FU1MsXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblJlbGF4YXRpb246IHAyLkVxdWF0aW9uLkRFRkFVTFRfUkVMQVhBVElPTixcclxuICAgICAgICAgICAgICAgIHN1cmZhY2VWZWxvY2l0eTowXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud29ybGQuYWRkQ29udGFjdE1hdGVyaWFsKHBsYXllckdyb3VuZENvbnRhY3RNYXRlcmlhbCk7XHJcblxyXG4gICAgICAgIHZhciBwbGF5ZXJNb2JDb250YWN0TWF0ZXJpYWwgPSBuZXcgcDIuQ29udGFjdE1hdGVyaWFsKFxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFscy5nZXQoXCJwbGF5ZXJcIiksXHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLmdldChcIm1vYl9kZWZhdWx0XCIpLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmcmljdGlvbjogMC4xLFxyXG4gICAgICAgICAgICAgICAgcmVzdGl0dXRpb246IDAuNCxcclxuICAgICAgICAgICAgICAgIHN0aWZmbmVzczogcDIuRXF1YXRpb24uREVGQVVMVF9TVElGRk5FU1MsXHJcbiAgICAgICAgICAgICAgICByZWxheGF0aW9uOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1JFTEFYQVRJT04sXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblN0aWZmbmVzczogcDIuRXF1YXRpb24uREVGQVVMVF9TVElGRk5FU1MsXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblJlbGF4YXRpb246IHAyLkVxdWF0aW9uLkRFRkFVTFRfUkVMQVhBVElPTixcclxuICAgICAgICAgICAgICAgIHN1cmZhY2VWZWxvY2l0eTogMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLndvcmxkLmFkZENvbnRhY3RNYXRlcmlhbChwbGF5ZXJNb2JDb250YWN0TWF0ZXJpYWwpO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHBsYXllckJveENvbnRhY3RNYXRlcmlhbCA9IG5ldyBwMi5Db250YWN0TWF0ZXJpYWwoXHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLmdldChcInBsYXllclwiKSxcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuZ2V0KFwiYm94X2RlZmF1bHRcIiksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uOiAwLjIwLFxyXG4gICAgICAgICAgICAgICAgcmVzdGl0dXRpb246IDAuMjUsXHJcbiAgICAgICAgICAgICAgICBzdGlmZm5lc3M6IHAyLkVxdWF0aW9uLkRFRkFVTFRfU1RJRkZORVNTLFxyXG4gICAgICAgICAgICAgICAgcmVsYXhhdGlvbjogcDIuRXF1YXRpb24uREVGQVVMVF9SRUxBWEFUSU9OLFxyXG4gICAgICAgICAgICAgICAgZnJpY3Rpb25TdGlmZm5lc3M6IHAyLkVxdWF0aW9uLkRFRkFVTFRfU1RJRkZORVNTLFxyXG4gICAgICAgICAgICAgICAgZnJpY3Rpb25SZWxheGF0aW9uOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1JFTEFYQVRJT04sXHJcbiAgICAgICAgICAgICAgICBzdXJmYWNlVmVsb2NpdHk6IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy53b3JsZC5hZGRDb250YWN0TWF0ZXJpYWwocGxheWVyQm94Q29udGFjdE1hdGVyaWFsKTtcclxuXHJcbiAgICAgICAgdmFyIHBsYXllckJveEhpZ2hGaXJjdENvbnRhY3RNYXRlcmlhbCA9IG5ldyBwMi5Db250YWN0TWF0ZXJpYWwoXHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzLmdldChcInBsYXllclwiKSxcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuZ2V0KFwiYm94X2hpZ2hmcmljdGlvblwiKSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZnJpY3Rpb246IDAuNzAsXHJcbiAgICAgICAgICAgICAgICByZXN0aXR1dGlvbjogMC4yMCxcclxuICAgICAgICAgICAgICAgIHN0aWZmbmVzczogcDIuRXF1YXRpb24uREVGQVVMVF9TVElGRk5FU1MsXHJcbiAgICAgICAgICAgICAgICByZWxheGF0aW9uOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1JFTEFYQVRJT04sXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblN0aWZmbmVzczogcDIuRXF1YXRpb24uREVGQVVMVF9TVElGRk5FU1MsXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblJlbGF4YXRpb246IHAyLkVxdWF0aW9uLkRFRkFVTFRfUkVMQVhBVElPTixcclxuICAgICAgICAgICAgICAgIHN1cmZhY2VWZWxvY2l0eTogMFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLndvcmxkLmFkZENvbnRhY3RNYXRlcmlhbChwbGF5ZXJCb3hIaWdoRmlyY3RDb250YWN0TWF0ZXJpYWwpO1xyXG5cclxuICAgICAgICB2YXIgcGxheWVyQnVtcGVyQ29udGFjdE1hdGVyaWFsID0gbmV3IHAyLkNvbnRhY3RNYXRlcmlhbChcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuZ2V0KFwicGxheWVyXCIpLFxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFscy5nZXQoXCJidW1wZXJcIiksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uOiAwLjM1LFxyXG4gICAgICAgICAgICAgICAgcmVzdGl0dXRpb246IDAuNzUsXHJcbiAgICAgICAgICAgICAgICBzdGlmZm5lc3M6IE51bWJlci5NQVhfVkFMVUUsXHJcbiAgICAgICAgICAgICAgICByZWxheGF0aW9uOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1JFTEFYQVRJT04sXHJcbiAgICAgICAgICAgICAgICBmcmljdGlvblN0aWZmbmVzczogTnVtYmVyLk1BWF9WQUxVRSxcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uUmVsYXhhdGlvbjogcDIuRXF1YXRpb24uREVGQVVMVF9SRUxBWEFUSU9OLFxyXG4gICAgICAgICAgICAgICAgc3VyZmFjZVZlbG9jaXR5OiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud29ybGQuYWRkQ29udGFjdE1hdGVyaWFsKHBsYXllckJ1bXBlckNvbnRhY3RNYXRlcmlhbCk7XHJcblxyXG4gICAgICAgIHZhciBib3hHcm91bmRDb250YWN0TWF0ZXJpYWwgPSBuZXcgcDIuQ29udGFjdE1hdGVyaWFsKFxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFscy5nZXQoXCJib3hfZGVmYXVsdFwiKSxcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHMuZ2V0KFwiZ3JvdW5kX2RlZmF1bHRcIiksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uOiAwLjgsXHJcbiAgICAgICAgICAgICAgICByZXN0aXR1dGlvbjogMC4zLFxyXG4gICAgICAgICAgICAgICAgc3RpZmZuZXNzOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1NUSUZGTkVTUyxcclxuICAgICAgICAgICAgICAgIHJlbGF4YXRpb246IHAyLkVxdWF0aW9uLkRFRkFVTFRfUkVMQVhBVElPTixcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uU3RpZmZuZXNzOiBwMi5FcXVhdGlvbi5ERUZBVUxUX1NUSUZGTkVTUyxcclxuICAgICAgICAgICAgICAgIGZyaWN0aW9uUmVsYXhhdGlvbjogcDIuRXF1YXRpb24uREVGQVVMVF9SRUxBWEFUSU9OLFxyXG4gICAgICAgICAgICAgICAgc3VyZmFjZVZlbG9jaXR5OiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMud29ybGQuYWRkQ29udGFjdE1hdGVyaWFsKGJveEdyb3VuZENvbnRhY3RNYXRlcmlhbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgd3AyID0gbmV3IFdvcmxkUDIoKTsiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRkE7QUFLQTs7QUFFQTtBQUNBO0FBaUJBO0FBQUE7QUFYQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBNEtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBblBBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBK0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUF0V0E7QUF3V0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./world/WorldP2.ts\n");

/***/ })

},[["./app.ts","runtime","vendors~main~pixi","vendors~common~main","vendors~main"]]]);